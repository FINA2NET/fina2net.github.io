(function(global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(require('jquery'), require('popper.js')) :
        typeof define === 'function' && define.amd ? define(['jquery', 'popper.js'], factory) :
        (factory(global.jQuery, global.Popper));
}(this, (function($, Popper$1) {
    'use strict';

    $ = $ && $.hasOwnProperty('default') ? $['default'] : $;
    Popper$1 = Popper$1 && Popper$1.hasOwnProperty('default') ? Popper$1['default'] : Popper$1;

    function _defineProperties(target, props) {
        for (var i = 0; i < props.length; i++) {
            var descriptor = props[i];
            descriptor.enumerable = descriptor.enumerable || false;
            descriptor.configurable = true;
            if ("value" in descriptor) descriptor.writable = true;
            Object.defineProperty(target, descriptor.key, descriptor);
        }
    }

    function _createClass(Constructor, protoProps, staticProps) {
        if (protoProps) _defineProperties(Constructor.prototype, protoProps);
        if (staticProps) _defineProperties(Constructor, staticProps);
        return Constructor;
    }

    function _extends() {
        _extends = Object.assign || function(target) {
            for (var i = 1; i < arguments.length; i++) {
                var source = arguments[i];

                for (var key in source) {
                    if (Object.prototype.hasOwnProperty.call(source, key)) {
                        target[key] = source[key];
                    }
                }
            }

            return target;
        };

        return _extends.apply(this, arguments);
    }

    function _inheritsLoose(subClass, superClass) {
        subClass.prototype = Object.create(superClass.prototype);
        subClass.prototype.constructor = subClass;
        subClass.__proto__ = superClass;
    }

    /**
     * --------------------------------------------------------------------------
     * Bootstrap (v4.0.0): util.js
     * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
     * --------------------------------------------------------------------------
     */

    var Util = function($$$1) {
        /**
         * ------------------------------------------------------------------------
         * Private TransitionEnd Helpers
         * ------------------------------------------------------------------------
         */
        var transition = false;
        var MAX_UID = 1000000; // Shoutout AngusCroll (https://goo.gl/pxwQGp)

        function toType(obj) {
            return {}.toString.call(obj).match(/\s([a-z]+)/i)[1].toLowerCase();
        }

        function getSpecialTransitionEndEvent() {
            return {
                bindType: transition.end,
                delegateType: transition.end,
                handle: function handle(event) {
                    if ($$$1(event.target).is(this)) {
                        return event.handleObj.handler.apply(this, arguments); // eslint-disable-line prefer-rest-params
                    }

                    return undefined; // eslint-disable-line no-undefined
                }
            };
        }

        function transitionEndTest() {
            if (typeof window !== 'undefined' && window.QUnit) {
                return false;
            }

            return {
                end: 'transitionend'
            };
        }

        function transitionEndEmulator(duration) {
            var _this = this;

            var called = false;
            $$$1(this).one(Util.TRANSITION_END, function() {
                called = true;
            });
            setTimeout(function() {
                if (!called) {
                    Util.triggerTransitionEnd(_this);
                }
            }, duration);
            return this;
        }

        function setTransitionEndSupport() {
            transition = transitionEndTest();
            $$$1.fn.emulateTransitionEnd = transitionEndEmulator;

            if (Util.supportsTransitionEnd()) {
                $$$1.event.special[Util.TRANSITION_END] = getSpecialTransitionEndEvent();
            }
        }
        /**
         * --------------------------------------------------------------------------
         * Public Util Api
         * --------------------------------------------------------------------------
         */


        var Util = {
            TRANSITION_END: 'bsTransitionEnd',
            getUID: function getUID(prefix) {
                do {
                    // eslint-disable-next-line no-bitwise
                    prefix += ~~(Math.random() * MAX_UID); // "~~" acts like a faster Math.floor() here
                } while (document.getElementById(prefix));

                return prefix;
            },
            getSelectorFromElement: function getSelectorFromElement(element) {
                var selector = element.getAttribute('data-target');

                if (!selector || selector === '#') {
                    selector = element.getAttribute('href') || '';
                }

                try {
                    var $selector = $$$1(document).find(selector);
                    return $selector.length > 0 ? selector : null;
                } catch (err) {
                    return null;
                }
            },
            reflow: function reflow(element) {
                return element.offsetHeight;
            },
            triggerTransitionEnd: function triggerTransitionEnd(element) {
                $$$1(element).trigger(transition.end);
            },
            supportsTransitionEnd: function supportsTransitionEnd() {
                return Boolean(transition);
            },
            isElement: function isElement(obj) {
                return (obj[0] || obj).nodeType;
            },
            typeCheckConfig: function typeCheckConfig(componentName, config, configTypes) {
                for (var property in configTypes) {
                    if (Object.prototype.hasOwnProperty.call(configTypes, property)) {
                        var expectedTypes = configTypes[property];
                        var value = config[property];
                        var valueType = value && Util.isElement(value) ? 'element' : toType(value);

                        if (!new RegExp(expectedTypes).test(valueType)) {
                            throw new Error(componentName.toUpperCase() + ": " + ("Option \"" + property + "\" provided type \"" + valueType + "\" ") + ("but expected type \"" + expectedTypes + "\"."));
                        }
                    }
                }
            }
        };
        setTransitionEndSupport();
        return Util;
    }($);

    /**
     * --------------------------------------------------------------------------
     * Bootstrap (v4.0.0): alert.js
     * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
     * --------------------------------------------------------------------------
     */

    var Alert = function($$$1) {
        /**
         * ------------------------------------------------------------------------
         * Constants
         * ------------------------------------------------------------------------
         */
        var NAME = 'alert';
        var VERSION = '4.0.0';
        var DATA_KEY = 'bs.alert';
        var EVENT_KEY = "." + DATA_KEY;
        var DATA_API_KEY = '.data-api';
        var JQUERY_NO_CONFLICT = $$$1.fn[NAME];
        var TRANSITION_DURATION = 150;
        var Selector = {
            DISMISS: '[data-dismiss="alert"]'
        };
        var Event = {
            CLOSE: "close" + EVENT_KEY,
            CLOSED: "closed" + EVENT_KEY,
            CLICK_DATA_API: "click" + EVENT_KEY + DATA_API_KEY
        };
        var ClassName = {
            ALERT: 'alert',
            FADE: 'fade',
            SHOW: 'show'
            /**
             * ------------------------------------------------------------------------
             * Class Definition
             * ------------------------------------------------------------------------
             */

        };

        var Alert =
            /*#__PURE__*/
            function() {
                function Alert(element) {
                    this._element = element;
                } // Getters


                var _proto = Alert.prototype;

                // Public
                _proto.close = function close(element) {
                    element = element || this._element;

                    var rootElement = this._getRootElement(element);

                    var customEvent = this._triggerCloseEvent(rootElement);

                    if (customEvent.isDefaultPrevented()) {
                        return;
                    }

                    this._removeElement(rootElement);
                };

                _proto.dispose = function dispose() {
                    $$$1.removeData(this._element, DATA_KEY);
                    this._element = null;
                }; // Private


                _proto._getRootElement = function _getRootElement(element) {
                    var selector = Util.getSelectorFromElement(element);
                    var parent = false;

                    if (selector) {
                        parent = $$$1(selector)[0];
                    }

                    if (!parent) {
                        parent = $$$1(element).closest("." + ClassName.ALERT)[0];
                    }

                    return parent;
                };

                _proto._triggerCloseEvent = function _triggerCloseEvent(element) {
                    var closeEvent = $$$1.Event(Event.CLOSE);
                    $$$1(element).trigger(closeEvent);
                    return closeEvent;
                };

                _proto._removeElement = function _removeElement(element) {
                    var _this = this;

                    $$$1(element).removeClass(ClassName.SHOW);

                    if (!Util.supportsTransitionEnd() || !$$$1(element).hasClass(ClassName.FADE)) {
                        this._destroyElement(element);

                        return;
                    }

                    $$$1(element).one(Util.TRANSITION_END, function(event) {
                        return _this._destroyElement(element, event);
                    }).emulateTransitionEnd(TRANSITION_DURATION);
                };

                _proto._destroyElement = function _destroyElement(element) {
                    $$$1(element).detach().trigger(Event.CLOSED).remove();
                }; // Static


                Alert._jQueryInterface = function _jQueryInterface(config) {
                    return this.each(function() {
                        var $element = $$$1(this);
                        var data = $element.data(DATA_KEY);

                        if (!data) {
                            data = new Alert(this);
                            $element.data(DATA_KEY, data);
                        }

                        if (config === 'close') {
                            data[config](this);
                        }
                    });
                };

                Alert._handleDismiss = function _handleDismiss(alertInstance) {
                    return function(event) {
                        if (event) {
                            event.preventDefault();
                        }

                        alertInstance.close(this);
                    };
                };

                _createClass(Alert, null, [{
                    key: "VERSION",
                    get: function get() {
                        return VERSION;
                    }
                }]);

                return Alert;
            }();
        /**
         * ------------------------------------------------------------------------
         * Data Api implementation
         * ------------------------------------------------------------------------
         */


        $$$1(document).on(Event.CLICK_DATA_API, Selector.DISMISS, Alert._handleDismiss(new Alert()));
        /**
         * ------------------------------------------------------------------------
         * jQuery
         * ------------------------------------------------------------------------
         */

        $$$1.fn[NAME] = Alert._jQueryInterface;
        $$$1.fn[NAME].Constructor = Alert;

        $$$1.fn[NAME].noConflict = function() {
            $$$1.fn[NAME] = JQUERY_NO_CONFLICT;
            return Alert._jQueryInterface;
        };

        return Alert;
    }($);

    /**
     * --------------------------------------------------------------------------
     * Bootstrap (v4.0.0): button.js
     * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
     * --------------------------------------------------------------------------
     */

    var Button = function($$$1) {
        /**
         * ------------------------------------------------------------------------
         * Constants
         * ------------------------------------------------------------------------
         */
        var NAME = 'button';
        var VERSION = '4.0.0';
        var DATA_KEY = 'bs.button';
        var EVENT_KEY = "." + DATA_KEY;
        var DATA_API_KEY = '.data-api';
        var JQUERY_NO_CONFLICT = $$$1.fn[NAME];
        var ClassName = {
            ACTIVE: 'active',
            BUTTON: 'btn',
            FOCUS: 'focus'
        };
        var Selector = {
            DATA_TOGGLE_CARROT: '[data-toggle^="button"]',
            DATA_TOGGLE: '[data-toggle="buttons"]',
            INPUT: 'input',
            ACTIVE: '.active',
            BUTTON: '.btn'
        };
        var Event = {
            CLICK_DATA_API: "click" + EVENT_KEY + DATA_API_KEY,
            FOCUS_BLUR_DATA_API: "focus" + EVENT_KEY + DATA_API_KEY + " " + ("blur" + EVENT_KEY + DATA_API_KEY)
            /**
             * ------------------------------------------------------------------------
             * Class Definition
             * ------------------------------------------------------------------------
             */

        };

        var Button =
            /*#__PURE__*/
            function() {
                function Button(element) {
                    this._element = element;
                } // Getters


                var _proto = Button.prototype;

                // Public
                _proto.toggle = function toggle() {
                    var triggerChangeEvent = true;
                    var addAriaPressed = true;
                    var rootElement = $$$1(this._element).closest(Selector.DATA_TOGGLE)[0];

                    if (rootElement) {
                        var input = $$$1(this._element).find(Selector.INPUT)[0];

                        if (input) {
                            if (input.type === 'radio') {
                                if (input.checked && $$$1(this._element).hasClass(ClassName.ACTIVE)) {
                                    triggerChangeEvent = false;
                                } else {
                                    var activeElement = $$$1(rootElement).find(Selector.ACTIVE)[0];

                                    if (activeElement) {
                                        $$$1(activeElement).removeClass(ClassName.ACTIVE);
                                    }
                                }
                            }

                            if (triggerChangeEvent) {
                                if (input.hasAttribute('disabled') || rootElement.hasAttribute('disabled') || input.classList.contains('disabled') || rootElement.classList.contains('disabled')) {
                                    return;
                                }

                                input.checked = !$$$1(this._element).hasClass(ClassName.ACTIVE);
                                $$$1(input).trigger('change');
                            }

                            input.focus();
                            addAriaPressed = false;
                        }
                    }

                    if (addAriaPressed) {
                        this._element.setAttribute('aria-pressed', !$$$1(this._element).hasClass(ClassName.ACTIVE));
                    }

                    if (triggerChangeEvent) {
                        $$$1(this._element).toggleClass(ClassName.ACTIVE);
                    }
                };

                _proto.dispose = function dispose() {
                    $$$1.removeData(this._element, DATA_KEY);
                    this._element = null;
                }; // Static


                Button._jQueryInterface = function _jQueryInterface(config) {
                    return this.each(function() {
                        var data = $$$1(this).data(DATA_KEY);

                        if (!data) {
                            data = new Button(this);
                            $$$1(this).data(DATA_KEY, data);
                        }

                        if (config === 'toggle') {
                            data[config]();
                        }
                    });
                };

                _createClass(Button, null, [{
                    key: "VERSION",
                    get: function get() {
                        return VERSION;
                    }
                }]);

                return Button;
            }();
        /**
         * ------------------------------------------------------------------------
         * Data Api implementation
         * ------------------------------------------------------------------------
         */


        $$$1(document).on(Event.CLICK_DATA_API, Selector.DATA_TOGGLE_CARROT, function(event) {
            event.preventDefault();
            var button = event.target;

            if (!$$$1(button).hasClass(ClassName.BUTTON)) {
                button = $$$1(button).closest(Selector.BUTTON);
            }

            Button._jQueryInterface.call($$$1(button), 'toggle');
        }).on(Event.FOCUS_BLUR_DATA_API, Selector.DATA_TOGGLE_CARROT, function(event) {
            var button = $$$1(event.target).closest(Selector.BUTTON)[0];
            $$$1(button).toggleClass(ClassName.FOCUS, /^focus(in)?$/.test(event.type));
        });
        /**
         * ------------------------------------------------------------------------
         * jQuery
         * ------------------------------------------------------------------------
         */

        $$$1.fn[NAME] = Button._jQueryInterface;
        $$$1.fn[NAME].Constructor = Button;

        $$$1.fn[NAME].noConflict = function() {
            $$$1.fn[NAME] = JQUERY_NO_CONFLICT;
            return Button._jQueryInterface;
        };

        return Button;
    }($);

    /**
     * --------------------------------------------------------------------------
     * Bootstrap (v4.0.0-beta): carousel.js
     * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
     * --------------------------------------------------------------------------
     */

    var Carousel = function($$$1) {
        /**
         * ------------------------------------------------------------------------
         * Constants
         * ------------------------------------------------------------------------
         */
        var NAME = 'carousel';
        var VERSION = '4.0.0-beta';
        var DATA_KEY = 'bs.carousel';
        var EVENT_KEY = "." + DATA_KEY;
        var DATA_API_KEY = '.data-api';
        var JQUERY_NO_CONFLICT = $$$1.fn[NAME];
        var TRANSITION_DURATION = 600;
        var ARROW_LEFT_KEYCODE = 37; // KeyboardEvent.which value for left arrow key

        var ARROW_RIGHT_KEYCODE = 39; // KeyboardEvent.which value for right arrow key

        var TOUCHEVENT_COMPAT_WAIT = 500; // Time for mouse compat events to fire after touch

        var Default = {
            interval: 5000,
            keyboard: true,
            slide: false,
            pause: 'hover',
            wrap: true
        };
        var DefaultType = {
            interval: '(number|boolean)',
            keyboard: 'boolean',
            slide: '(boolean|string)',
            pause: '(string|boolean)',
            wrap: 'boolean'
        };
        var Direction = {
            NEXT: 'next',
            PREV: 'prev',
            LEFT: 'left',
            RIGHT: 'right'
        };
        var Event = {
            SLIDE: "slide" + EVENT_KEY,
            SLID: "slid" + EVENT_KEY,
            KEYDOWN: "keydown" + EVENT_KEY,
            MOUSEENTER: "mouseenter" + EVENT_KEY,
            MOUSELEAVE: "mouseleave" + EVENT_KEY,
            TOUCHEND: "touchend" + EVENT_KEY,
            LOAD_DATA_API: "load" + EVENT_KEY + DATA_API_KEY,
            CLICK_DATA_API: "click" + EVENT_KEY + DATA_API_KEY
        };
        var ClassName = {
            CAROUSEL: 'carousel',
            ACTIVE: 'active',
            SLIDE: 'slide',
            RIGHT: 'carousel-item-right',
            LEFT: 'carousel-item-left',
            NEXT: 'carousel-item-next',
            PREV: 'carousel-item-prev',
            ITEM: 'carousel-item'
        };
        var Selector = {
            ACTIVE: '.active',
            ACTIVE_ITEM: '.active.carousel-item',
            ITEM: '.carousel-item',
            NEXT_PREV: '.carousel-item-next, .carousel-item-prev',
            INDICATORS: '.carousel-indicators',
            DATA_SLIDE: '[data-slide], [data-slide-to]',
            DATA_RIDE: '[data-ride="carousel"]'
            /**
             * ------------------------------------------------------------------------
             * Class Definition
             * ------------------------------------------------------------------------
             */

        };

        var Carousel =
            /*#__PURE__*/
            function() {
                function Carousel(element, config) {
                    this._items = null;
                    this._interval = null;
                    this._activeElement = null;
                    this._isPaused = false;
                    this._isSliding = false;
                    this.touchTimeout = null;
                    this._config = this._getConfig(config);
                    this._element = $$$1(element)[0];
                    this._indicatorsElement = $$$1(this._element).find(Selector.INDICATORS)[0];

                    this._addEventListeners();
                } // getters


                var _proto = Carousel.prototype;

                // public
                _proto.next = function next() {
                    if (!this._isSliding) {
                        this._slide(Direction.NEXT);
                    }
                };

                _proto.nextWhenVisible = function nextWhenVisible() {
                    // Don't call next when the page isn't visible
                    if (!document.hidden) {
                        this.next();
                    }
                };

                _proto.prev = function prev() {
                    if (!this._isSliding) {
                        this._slide(Direction.PREV);
                    }
                };

                _proto.pause = function pause(event) {
                    if (!event) {
                        this._isPaused = true;
                    }

                    if ($$$1(this._element).find(Selector.NEXT_PREV)[0] && Util.supportsTransitionEnd()) {
                        Util.triggerTransitionEnd(this._element);
                        this.cycle(true);
                    }

                    clearInterval(this._interval);
                    this._interval = null;
                };

                _proto.cycle = function cycle(event) {
                    if (!event) {
                        this._isPaused = false;
                    }

                    if (this._interval) {
                        clearInterval(this._interval);
                        this._interval = null;
                    }

                    if (this._config.interval && !this._isPaused) {
                        this._interval = setInterval((document.visibilityState ? this.nextWhenVisible : this.next).bind(this), this._config.interval);
                    }
                };

                _proto.to = function to(index) {
                    var _this = this;

                    this._activeElement = $$$1(this._element).find(Selector.ACTIVE_ITEM)[0];

                    var activeIndex = this._getItemIndex(this._activeElement);

                    if (index > this._items.length - 1 || index < 0) {
                        return;
                    }

                    if (this._isSliding) {
                        $$$1(this._element).one(Event.SLID, function() {
                            return _this.to(index);
                        });
                        return;
                    }

                    if (activeIndex === index) {
                        this.pause();
                        this.cycle();
                        return;
                    }

                    var direction = index > activeIndex ? Direction.NEXT : Direction.PREV;

                    this._slide(direction, this._items[index]);
                };

                _proto.dispose = function dispose() {
                    $$$1(this._element).off(EVENT_KEY);
                    $$$1.removeData(this._element, DATA_KEY);
                    this._items = null;
                    this._config = null;
                    this._element = null;
                    this._interval = null;
                    this._isPaused = null;
                    this._isSliding = null;
                    this._activeElement = null;
                    this._indicatorsElement = null;
                }; // private


                _proto._getConfig = function _getConfig(config) {
                    config = $$$1.extend({}, Default, config);
                    Util.typeCheckConfig(NAME, config, DefaultType);
                    return config;
                };

                _proto._addEventListeners = function _addEventListeners() {
                    var _this2 = this;

                    if (this._config.keyboard) {
                        $$$1(this._element).on(Event.KEYDOWN, function(event) {
                            return _this2._keydown(event);
                        });
                    }

                    if (this._config.pause === 'hover') {
                        $$$1(this._element).on(Event.MOUSEENTER, function(event) {
                            return _this2.pause(event);
                        }).on(Event.MOUSELEAVE, function(event) {
                            return _this2.cycle(event);
                        });

                        if ('ontouchstart' in document.documentElement) {
                            // if it's a touch-enabled device, mouseenter/leave are fired as
                            // part of the mouse compatibility events on first tap - the carousel
                            // would stop cycling until user tapped out of it;
                            // here, we listen for touchend, explicitly pause the carousel
                            // (as if it's the second time we tap on it, mouseenter compat event
                            // is NOT fired) and after a timeout (to allow for mouse compatibility
                            // events to fire) we explicitly restart cycling
                            $$$1(this._element).on(Event.TOUCHEND, function() {
                                _this2.pause();

                                if (_this2.touchTimeout) {
                                    clearTimeout(_this2.touchTimeout);
                                }

                                _this2.touchTimeout = setTimeout(function(event) {
                                    return _this2.cycle(event);
                                }, TOUCHEVENT_COMPAT_WAIT + _this2._config.interval);
                            });
                        }
                    }
                };

                _proto._keydown = function _keydown(event) {
                    if (/input|textarea/i.test(event.target.tagName)) {
                        return;
                    }

                    switch (event.which) {
                        case ARROW_LEFT_KEYCODE:
                            event.preventDefault();
                            this.prev();
                            break;

                        case ARROW_RIGHT_KEYCODE:
                            event.preventDefault();
                            this.next();
                            break;

                        default:
                            return;
                    }
                };

                _proto._getItemIndex = function _getItemIndex(element) {
                    this._items = $$$1.makeArray($$$1(element).parent().find(Selector.ITEM));
                    return this._items.indexOf(element);
                };

                _proto._getItemByDirection = function _getItemByDirection(direction, activeElement) {
                    var isNextDirection = direction === Direction.NEXT;
                    var isPrevDirection = direction === Direction.PREV;

                    var activeIndex = this._getItemIndex(activeElement);

                    var lastItemIndex = this._items.length - 1;
                    var isGoingToWrap = isPrevDirection && activeIndex === 0 || isNextDirection && activeIndex === lastItemIndex;

                    if (isGoingToWrap && !this._config.wrap) {
                        return activeElement;
                    }

                    var delta = direction === Direction.PREV ? -1 : 1;
                    var itemIndex = (activeIndex + delta) % this._items.length;
                    return itemIndex === -1 ? this._items[this._items.length - 1] : this._items[itemIndex];
                };

                _proto._triggerSlideEvent = function _triggerSlideEvent(relatedTarget, eventDirectionName) {
                    var targetIndex = this._getItemIndex(relatedTarget);

                    var fromIndex = this._getItemIndex($$$1(this._element).find(Selector.ACTIVE_ITEM)[0]);

                    var slideEvent = $$$1.Event(Event.SLIDE, {
                        relatedTarget: relatedTarget,
                        direction: eventDirectionName,
                        from: fromIndex,
                        to: targetIndex
                    });
                    $$$1(this._element).trigger(slideEvent);
                    return slideEvent;
                };

                _proto._setActiveIndicatorElement = function _setActiveIndicatorElement(element) {
                    if (this._indicatorsElement) {
                        $$$1(this._indicatorsElement).find(Selector.ACTIVE).removeClass(ClassName.ACTIVE);

                        var nextIndicator = this._indicatorsElement.children[this._getItemIndex(element)];

                        if (nextIndicator) {
                            $$$1(nextIndicator).addClass(ClassName.ACTIVE);
                        }
                    }
                };

                _proto._slide = function _slide(direction, element) {
                    var _this3 = this;

                    var activeElement = $$$1(this._element).find(Selector.ACTIVE_ITEM)[0];

                    var activeElementIndex = this._getItemIndex(activeElement);

                    var nextElement = element || activeElement && this._getItemByDirection(direction, activeElement);

                    var nextElementIndex = this._getItemIndex(nextElement);

                    var isCycling = Boolean(this._interval);
                    var directionalClassName;
                    var orderClassName;
                    var eventDirectionName;

                    if (direction === Direction.NEXT) {
                        directionalClassName = ClassName.LEFT;
                        orderClassName = ClassName.NEXT;
                        eventDirectionName = Direction.LEFT;
                    } else {
                        directionalClassName = ClassName.RIGHT;
                        orderClassName = ClassName.PREV;
                        eventDirectionName = Direction.RIGHT;
                    }

                    if (nextElement && $$$1(nextElement).hasClass(ClassName.ACTIVE)) {
                        this._isSliding = false;
                        return;
                    }

                    var slideEvent = this._triggerSlideEvent(nextElement, eventDirectionName);

                    if (slideEvent.isDefaultPrevented()) {
                        return;
                    }

                    if (!activeElement || !nextElement) {
                        // some weirdness is happening, so we bail
                        return;
                    }

                    this._isSliding = true;

                    if (isCycling) {
                        this.pause();
                    }

                    this._setActiveIndicatorElement(nextElement);

                    var slidEvent = $$$1.Event(Event.SLID, {
                        relatedTarget: nextElement,
                        direction: eventDirectionName,
                        from: activeElementIndex,
                        to: nextElementIndex
                    });

                    if (Util.supportsTransitionEnd() && $$$1(this._element).hasClass(ClassName.SLIDE)) {
                        $$$1(nextElement).addClass(orderClassName);
                        Util.reflow(nextElement);
                        $$$1(activeElement).addClass(directionalClassName);
                        $$$1(nextElement).addClass(directionalClassName);
                        $$$1(activeElement).one(Util.TRANSITION_END, function() {
                            $$$1(nextElement).removeClass(directionalClassName + " " + orderClassName).addClass(ClassName.ACTIVE);
                            $$$1(activeElement).removeClass(ClassName.ACTIVE + " " + orderClassName + " " + directionalClassName);
                            _this3._isSliding = false;
                            setTimeout(function() {
                                return $$$1(_this3._element).trigger(slidEvent);
                            }, 0);
                        }).emulateTransitionEnd(TRANSITION_DURATION);
                    } else {
                        $$$1(activeElement).removeClass(ClassName.ACTIVE);
                        $$$1(nextElement).addClass(ClassName.ACTIVE);
                        this._isSliding = false;
                        $$$1(this._element).trigger(slidEvent);
                    }

                    if (isCycling) {
                        this.cycle();
                    }
                }; // static


                Carousel._jQueryInterface = function _jQueryInterface(config) {
                    return this.each(function() {
                        var data = $$$1(this).data(DATA_KEY);

                        var _config = $$$1.extend({}, Default, $$$1(this).data());

                        if (typeof config === 'object') {
                            $$$1.extend(_config, config);
                        }

                        var action = typeof config === 'string' ? config : _config.slide;

                        if (!data) {
                            data = new Carousel(this, _config);
                            $$$1(this).data(DATA_KEY, data);
                        }

                        if (typeof config === 'number') {
                            data.to(config);
                        } else if (typeof action === 'string') {
                            if (data[action] === undefined) {
                                throw new Error("No method named \"" + action + "\"");
                            }

                            data[action]();
                        } else if (_config.interval) {
                            data.pause();
                            data.cycle();
                        }
                    });
                };

                Carousel._dataApiClickHandler = function _dataApiClickHandler(event) {
                    var selector = Util.getSelectorFromElement(this);

                    if (!selector) {
                        return;
                    }

                    var target = $$$1(selector)[0];

                    if (!target || !$$$1(target).hasClass(ClassName.CAROUSEL)) {
                        return;
                    }

                    var config = $$$1.extend({}, $$$1(target).data(), $$$1(this).data());
                    var slideIndex = this.getAttribute('data-slide-to');

                    if (slideIndex) {
                        config.interval = false;
                    }

                    Carousel._jQueryInterface.call($$$1(target), config);

                    if (slideIndex) {
                        $$$1(target).data(DATA_KEY).to(slideIndex);
                    }

                    event.preventDefault();
                };

                _createClass(Carousel, null, [{
                    key: "VERSION",
                    get: function get() {
                        return VERSION;
                    }
                }, {
                    key: "Default",
                    get: function get() {
                        return Default;
                    }
                }]);

                return Carousel;
            }();
        /**
         * ------------------------------------------------------------------------
         * Data Api implementation
         * ------------------------------------------------------------------------
         */


        $$$1(document).on(Event.CLICK_DATA_API, Selector.DATA_SLIDE, Carousel._dataApiClickHandler);
        $$$1(window).on(Event.LOAD_DATA_API, function() {
            $$$1(Selector.DATA_RIDE).each(function() {
                var $carousel = $$$1(this);

                Carousel._jQueryInterface.call($carousel, $carousel.data());
            });
        });
        /**
         * ------------------------------------------------------------------------
         * jQuery
         * ------------------------------------------------------------------------
         */

        $$$1.fn[NAME] = Carousel._jQueryInterface;
        $$$1.fn[NAME].Constructor = Carousel;

        $$$1.fn[NAME].noConflict = function() {
            $$$1.fn[NAME] = JQUERY_NO_CONFLICT;
            return Carousel._jQueryInterface;
        };

        return Carousel;
    }(jQuery);

    /**
     * --------------------------------------------------------------------------
     * Bootstrap (v4.0.0): collapse.js
     * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
     * --------------------------------------------------------------------------
     */

    var Collapse = function($$$1) {
        /**
         * ------------------------------------------------------------------------
         * Constants
         * ------------------------------------------------------------------------
         */
        var NAME = 'collapse';
        var VERSION = '4.0.0';
        var DATA_KEY = 'bs.collapse';
        var EVENT_KEY = "." + DATA_KEY;
        var DATA_API_KEY = '.data-api';
        var JQUERY_NO_CONFLICT = $$$1.fn[NAME];
        var TRANSITION_DURATION = 600;
        var Default = {
            toggle: true,
            parent: ''
        };
        var DefaultType = {
            toggle: 'boolean',
            parent: '(string|element)'
        };
        var Event = {
            SHOW: "show" + EVENT_KEY,
            SHOWN: "shown" + EVENT_KEY,
            HIDE: "hide" + EVENT_KEY,
            HIDDEN: "hidden" + EVENT_KEY,
            CLICK_DATA_API: "click" + EVENT_KEY + DATA_API_KEY
        };
        var ClassName = {
            SHOW: 'show',
            COLLAPSE: 'collapse',
            COLLAPSING: 'collapsing',
            COLLAPSED: 'collapsed'
        };
        var Dimension = {
            WIDTH: 'width',
            HEIGHT: 'height'
        };
        var Selector = {
            ACTIVES: '.show, .collapsing',
            DATA_TOGGLE: '[data-toggle="collapse"]'
            /**
             * ------------------------------------------------------------------------
             * Class Definition
             * ------------------------------------------------------------------------
             */

        };

        var Collapse =
            /*#__PURE__*/
            function() {
                function Collapse(element, config) {
                    this._isTransitioning = false;
                    this._element = element;
                    this._config = this._getConfig(config);
                    this._triggerArray = $$$1.makeArray($$$1("[data-toggle=\"collapse\"][href=\"#" + element.id + "\"]," + ("[data-toggle=\"collapse\"][data-target=\"#" + element.id + "\"]")));
                    var tabToggles = $$$1(Selector.DATA_TOGGLE);

                    for (var i = 0; i < tabToggles.length; i++) {
                        var elem = tabToggles[i];
                        var selector = Util.getSelectorFromElement(elem);

                        if (selector !== null && $$$1(selector).filter(element).length > 0) {
                            this._selector = selector;

                            this._triggerArray.push(elem);
                        }
                    }

                    this._parent = this._config.parent ? this._getParent() : null;

                    if (!this._config.parent) {
                        this._addAriaAndCollapsedClass(this._element, this._triggerArray);
                    }

                    if (this._config.toggle) {
                        this.toggle();
                    }
                } // Getters


                var _proto = Collapse.prototype;

                // Public
                _proto.toggle = function toggle() {
                    if ($$$1(this._element).hasClass(ClassName.SHOW)) {
                        this.hide();
                    } else {
                        this.show();
                    }
                };

                _proto.show = function show() {
                    var _this = this;

                    if (this._isTransitioning || $$$1(this._element).hasClass(ClassName.SHOW)) {
                        return;
                    }

                    var actives;
                    var activesData;

                    if (this._parent) {
                        actives = $$$1.makeArray($$$1(this._parent).find(Selector.ACTIVES).filter("[data-parent=\"" + this._config.parent + "\"]"));

                        if (actives.length === 0) {
                            actives = null;
                        }
                    }

                    if (actives) {
                        activesData = $$$1(actives).not(this._selector).data(DATA_KEY);

                        if (activesData && activesData._isTransitioning) {
                            return;
                        }
                    }

                    var startEvent = $$$1.Event(Event.SHOW);
                    $$$1(this._element).trigger(startEvent);

                    if (startEvent.isDefaultPrevented()) {
                        return;
                    }

                    if (actives) {
                        Collapse._jQueryInterface.call($$$1(actives).not(this._selector), 'hide');

                        if (!activesData) {
                            $$$1(actives).data(DATA_KEY, null);
                        }
                    }

                    var dimension = this._getDimension();

                    $$$1(this._element).removeClass(ClassName.COLLAPSE).addClass(ClassName.COLLAPSING);
                    this._element.style[dimension] = 0;

                    if (this._triggerArray.length > 0) {
                        $$$1(this._triggerArray).removeClass(ClassName.COLLAPSED).attr('aria-expanded', true);
                    }

                    this.setTransitioning(true);

                    var complete = function complete() {
                        $$$1(_this._element).removeClass(ClassName.COLLAPSING).addClass(ClassName.COLLAPSE).addClass(ClassName.SHOW);
                        _this._element.style[dimension] = '';

                        _this.setTransitioning(false);

                        $$$1(_this._element).trigger(Event.SHOWN);
                    };

                    if (!Util.supportsTransitionEnd()) {
                        complete();
                        return;
                    }

                    var capitalizedDimension = dimension[0].toUpperCase() + dimension.slice(1);
                    var scrollSize = "scroll" + capitalizedDimension;
                    $$$1(this._element).one(Util.TRANSITION_END, complete).emulateTransitionEnd(TRANSITION_DURATION);
                    this._element.style[dimension] = this._element[scrollSize] + "px";
                };

                _proto.hide = function hide() {
                    var _this2 = this;

                    if (this._isTransitioning || !$$$1(this._element).hasClass(ClassName.SHOW)) {
                        return;
                    }

                    var startEvent = $$$1.Event(Event.HIDE);
                    $$$1(this._element).trigger(startEvent);

                    if (startEvent.isDefaultPrevented()) {
                        return;
                    }

                    var dimension = this._getDimension();

                    this._element.style[dimension] = this._element.getBoundingClientRect()[dimension] + "px";
                    Util.reflow(this._element);
                    $$$1(this._element).addClass(ClassName.COLLAPSING).removeClass(ClassName.COLLAPSE).removeClass(ClassName.SHOW);

                    if (this._triggerArray.length > 0) {
                        for (var i = 0; i < this._triggerArray.length; i++) {
                            var trigger = this._triggerArray[i];
                            var selector = Util.getSelectorFromElement(trigger);

                            if (selector !== null) {
                                var $elem = $$$1(selector);

                                if (!$elem.hasClass(ClassName.SHOW)) {
                                    $$$1(trigger).addClass(ClassName.COLLAPSED).attr('aria-expanded', false);
                                }
                            }
                        }
                    }

                    this.setTransitioning(true);

                    var complete = function complete() {
                        _this2.setTransitioning(false);

                        $$$1(_this2._element).removeClass(ClassName.COLLAPSING).addClass(ClassName.COLLAPSE).trigger(Event.HIDDEN);
                    };

                    this._element.style[dimension] = '';

                    if (!Util.supportsTransitionEnd()) {
                        complete();
                        return;
                    }

                    $$$1(this._element).one(Util.TRANSITION_END, complete).emulateTransitionEnd(TRANSITION_DURATION);
                };

                _proto.setTransitioning = function setTransitioning(isTransitioning) {
                    this._isTransitioning = isTransitioning;
                };

                _proto.dispose = function dispose() {
                    $$$1.removeData(this._element, DATA_KEY);
                    this._config = null;
                    this._parent = null;
                    this._element = null;
                    this._triggerArray = null;
                    this._isTransitioning = null;
                }; // Private


                _proto._getConfig = function _getConfig(config) {
                    config = _extends({}, Default, config);
                    config.toggle = Boolean(config.toggle); // Coerce string values

                    Util.typeCheckConfig(NAME, config, DefaultType);
                    return config;
                };

                _proto._getDimension = function _getDimension() {
                    var hasWidth = $$$1(this._element).hasClass(Dimension.WIDTH);
                    return hasWidth ? Dimension.WIDTH : Dimension.HEIGHT;
                };

                _proto._getParent = function _getParent() {
                    var _this3 = this;

                    var parent = null;

                    if (Util.isElement(this._config.parent)) {
                        parent = this._config.parent; // It's a jQuery object

                        if (typeof this._config.parent.jquery !== 'undefined') {
                            parent = this._config.parent[0];
                        }
                    } else {
                        parent = $$$1(this._config.parent)[0];
                    }

                    var selector = "[data-toggle=\"collapse\"][data-parent=\"" + this._config.parent + "\"]";
                    $$$1(parent).find(selector).each(function(i, element) {
                        _this3._addAriaAndCollapsedClass(Collapse._getTargetFromElement(element), [element]);
                    });
                    return parent;
                };

                _proto._addAriaAndCollapsedClass = function _addAriaAndCollapsedClass(element, triggerArray) {
                    if (element) {
                        var isOpen = $$$1(element).hasClass(ClassName.SHOW);

                        if (triggerArray.length > 0) {
                            $$$1(triggerArray).toggleClass(ClassName.COLLAPSED, !isOpen).attr('aria-expanded', isOpen);
                        }
                    }
                }; // Static


                Collapse._getTargetFromElement = function _getTargetFromElement(element) {
                    var selector = Util.getSelectorFromElement(element);
                    return selector ? $$$1(selector)[0] : null;
                };

                Collapse._jQueryInterface = function _jQueryInterface(config) {
                    return this.each(function() {
                        var $this = $$$1(this);
                        var data = $this.data(DATA_KEY);

                        var _config = _extends({}, Default, $this.data(), typeof config === 'object' && config);

                        if (!data && _config.toggle && /show|hide/.test(config)) {
                            _config.toggle = false;
                        }

                        if (!data) {
                            data = new Collapse(this, _config);
                            $this.data(DATA_KEY, data);
                        }

                        if (typeof config === 'string') {
                            if (typeof data[config] === 'undefined') {
                                throw new TypeError("No method named \"" + config + "\"");
                            }

                            data[config]();
                        }
                    });
                };

                _createClass(Collapse, null, [{
                    key: "VERSION",
                    get: function get() {
                        return VERSION;
                    }
                }, {
                    key: "Default",
                    get: function get() {
                        return Default;
                    }
                }]);

                return Collapse;
            }();
        /**
         * ------------------------------------------------------------------------
         * Data Api implementation
         * ------------------------------------------------------------------------
         */


        $$$1(document).on(Event.CLICK_DATA_API, Selector.DATA_TOGGLE, function(event) {
            // preventDefault only for <a> elements (which change the URL) not inside the collapsible element
            if (event.currentTarget.tagName === 'A') {
                event.preventDefault();
            }

            var $trigger = $$$1(this);
            var selector = Util.getSelectorFromElement(this);
            $$$1(selector).each(function() {
                var $target = $$$1(this);
                var data = $target.data(DATA_KEY);
                var config = data ? 'toggle' : $trigger.data();

                Collapse._jQueryInterface.call($target, config);
            });
        });
        /**
         * ------------------------------------------------------------------------
         * jQuery
         * ------------------------------------------------------------------------
         */

        $$$1.fn[NAME] = Collapse._jQueryInterface;
        $$$1.fn[NAME].Constructor = Collapse;

        $$$1.fn[NAME].noConflict = function() {
            $$$1.fn[NAME] = JQUERY_NO_CONFLICT;
            return Collapse._jQueryInterface;
        };

        return Collapse;
    }($);

    /**
     * --------------------------------------------------------------------------
     * Bootstrap (v4.0.0): modal.js
     * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
     * --------------------------------------------------------------------------
     */

    var Modal = function($$$1) {
        /**
         * ------------------------------------------------------------------------
         * Constants
         * ------------------------------------------------------------------------
         */
        var NAME = 'modal';
        var VERSION = '4.0.0';
        var DATA_KEY = 'bs.modal';
        var EVENT_KEY = "." + DATA_KEY;
        var DATA_API_KEY = '.data-api';
        var JQUERY_NO_CONFLICT = $$$1.fn[NAME];
        var TRANSITION_DURATION = 300;
        var BACKDROP_TRANSITION_DURATION = 150;
        var ESCAPE_KEYCODE = 27; // KeyboardEvent.which value for Escape (Esc) key

        var Default = {
            backdrop: true,
            keyboard: true,
            focus: true,
            show: true
        };
        var DefaultType = {
            backdrop: '(boolean|string)',
            keyboard: 'boolean',
            focus: 'boolean',
            show: 'boolean'
        };
        var Event = {
            HIDE: "hide" + EVENT_KEY,
            HIDDEN: "hidden" + EVENT_KEY,
            SHOW: "show" + EVENT_KEY,
            SHOWN: "shown" + EVENT_KEY,
            FOCUSIN: "focusin" + EVENT_KEY,
            RESIZE: "resize" + EVENT_KEY,
            CLICK_DISMISS: "click.dismiss" + EVENT_KEY,
            KEYDOWN_DISMISS: "keydown.dismiss" + EVENT_KEY,
            MOUSEUP_DISMISS: "mouseup.dismiss" + EVENT_KEY,
            MOUSEDOWN_DISMISS: "mousedown.dismiss" + EVENT_KEY,
            CLICK_DATA_API: "click" + EVENT_KEY + DATA_API_KEY
        };
        var ClassName = {
            SCROLLBAR_MEASURER: 'modal-scrollbar-measure',
            BACKDROP: 'modal-backdrop',
            OPEN: 'modal-open',
            FADE: 'fade',
            SHOW: 'show'
        };
        var Selector = {
            DIALOG: '.modal-dialog',
            DATA_TOGGLE: '[data-toggle="modal"]',
            DATA_DISMISS: '[data-dismiss="modal"]',
            FIXED_CONTENT: '.fixed-top, .fixed-bottom, .is-fixed, .sticky-top',
            STICKY_CONTENT: '.sticky-top',
            NAVBAR_TOGGLER: '.navbar-toggler'
            /**
             * ------------------------------------------------------------------------
             * Class Definition
             * ------------------------------------------------------------------------
             */

        };

        var Modal =
            /*#__PURE__*/
            function() {
                function Modal(element, config) {
                    this._config = this._getConfig(config);
                    this._element = element;
                    this._dialog = $$$1(element).find(Selector.DIALOG)[0];
                    this._backdrop = null;
                    this._isShown = false;
                    this._isBodyOverflowing = false;
                    this._ignoreBackdropClick = false;
                    this._originalBodyPadding = 0;
                    this._scrollbarWidth = 0;
                } // Getters


                var _proto = Modal.prototype;

                // Public
                _proto.toggle = function toggle(relatedTarget) {
                    return this._isShown ? this.hide() : this.show(relatedTarget);
                };

                _proto.show = function show(relatedTarget) {
                    var _this = this;

                    if (this._isTransitioning || this._isShown) {
                        return;
                    }

                    if (Util.supportsTransitionEnd() && $$$1(this._element).hasClass(ClassName.FADE)) {
                        this._isTransitioning = true;
                    }

                    var showEvent = $$$1.Event(Event.SHOW, {
                        relatedTarget: relatedTarget
                    });
                    $$$1(this._element).trigger(showEvent);

                    if (this._isShown || showEvent.isDefaultPrevented()) {
                        return;
                    }

                    this._isShown = true;

                    this._checkScrollbar();

                    this._setScrollbar();

                    this._adjustDialog();

                    $$$1(document.body).addClass(ClassName.OPEN);

                    this._setEscapeEvent();

                    this._setResizeEvent();

                    $$$1(this._element).on(Event.CLICK_DISMISS, Selector.DATA_DISMISS, function(event) {
                        return _this.hide(event);
                    });
                    $$$1(this._dialog).on(Event.MOUSEDOWN_DISMISS, function() {
                        $$$1(_this._element).one(Event.MOUSEUP_DISMISS, function(event) {
                            if ($$$1(event.target).is(_this._element)) {
                                _this._ignoreBackdropClick = true;
                            }
                        });
                    });

                    this._showBackdrop(function() {
                        return _this._showElement(relatedTarget);
                    });
                };

                _proto.hide = function hide(event) {
                    var _this2 = this;

                    if (event) {
                        event.preventDefault();
                    }

                    if (this._isTransitioning || !this._isShown) {
                        return;
                    }

                    var hideEvent = $$$1.Event(Event.HIDE);
                    $$$1(this._element).trigger(hideEvent);

                    if (!this._isShown || hideEvent.isDefaultPrevented()) {
                        return;
                    }

                    this._isShown = false;
                    var transition = Util.supportsTransitionEnd() && $$$1(this._element).hasClass(ClassName.FADE);

                    if (transition) {
                        this._isTransitioning = true;
                    }

                    this._setEscapeEvent();

                    this._setResizeEvent();

                    $$$1(document).off(Event.FOCUSIN);
                    $$$1(this._element).removeClass(ClassName.SHOW);
                    $$$1(this._element).off(Event.CLICK_DISMISS);
                    $$$1(this._dialog).off(Event.MOUSEDOWN_DISMISS);

                    if (transition) {
                        $$$1(this._element).one(Util.TRANSITION_END, function(event) {
                            return _this2._hideModal(event);
                        }).emulateTransitionEnd(TRANSITION_DURATION);
                    } else {
                        this._hideModal();
                    }
                };

                _proto.dispose = function dispose() {
                    $$$1.removeData(this._element, DATA_KEY);
                    $$$1(window, document, this._element, this._backdrop).off(EVENT_KEY);
                    this._config = null;
                    this._element = null;
                    this._dialog = null;
                    this._backdrop = null;
                    this._isShown = null;
                    this._isBodyOverflowing = null;
                    this._ignoreBackdropClick = null;
                    this._scrollbarWidth = null;
                };

                _proto.handleUpdate = function handleUpdate() {
                    this._adjustDialog();
                }; // Private


                _proto._getConfig = function _getConfig(config) {
                    config = _extends({}, Default, config);
                    Util.typeCheckConfig(NAME, config, DefaultType);
                    return config;
                };

                _proto._showElement = function _showElement(relatedTarget) {
                    var _this3 = this;

                    var transition = Util.supportsTransitionEnd() && $$$1(this._element).hasClass(ClassName.FADE);

                    if (!this._element.parentNode || this._element.parentNode.nodeType !== Node.ELEMENT_NODE) {
                        // Don't move modal's DOM position
                        document.body.appendChild(this._element);
                    }

                    this._element.style.display = 'block';

                    this._element.removeAttribute('aria-hidden');

                    this._element.scrollTop = 0;

                    if (transition) {
                        Util.reflow(this._element);
                    }

                    $$$1(this._element).addClass(ClassName.SHOW);

                    if (this._config.focus) {
                        this._enforceFocus();
                    }

                    var shownEvent = $$$1.Event(Event.SHOWN, {
                        relatedTarget: relatedTarget
                    });

                    var transitionComplete = function transitionComplete() {
                        if (_this3._config.focus) {
                            _this3._element.focus();
                        }

                        _this3._isTransitioning = false;
                        $$$1(_this3._element).trigger(shownEvent);
                    };

                    if (transition) {
                        $$$1(this._dialog).one(Util.TRANSITION_END, transitionComplete).emulateTransitionEnd(TRANSITION_DURATION);
                    } else {
                        transitionComplete();
                    }
                };

                _proto._enforceFocus = function _enforceFocus() {
                    var _this4 = this;

                    $$$1(document).off(Event.FOCUSIN) // Guard against infinite focus loop
                        .on(Event.FOCUSIN, function(event) {
                            if (document !== event.target && _this4._element !== event.target && $$$1(_this4._element).has(event.target).length === 0) {
                                _this4._element.focus();
                            }
                        });
                };

                _proto._setEscapeEvent = function _setEscapeEvent() {
                    var _this5 = this;

                    if (this._isShown && this._config.keyboard) {
                        $$$1(this._element).on(Event.KEYDOWN_DISMISS, function(event) {
                            if (event.which === ESCAPE_KEYCODE) {
                                event.preventDefault();

                                _this5.hide();
                            }
                        });
                    } else if (!this._isShown) {
                        $$$1(this._element).off(Event.KEYDOWN_DISMISS);
                    }
                };

                _proto._setResizeEvent = function _setResizeEvent() {
                    var _this6 = this;

                    if (this._isShown) {
                        $$$1(window).on(Event.RESIZE, function(event) {
                            return _this6.handleUpdate(event);
                        });
                    } else {
                        $$$1(window).off(Event.RESIZE);
                    }
                };

                _proto._hideModal = function _hideModal() {
                    var _this7 = this;

                    this._element.style.display = 'none';

                    this._element.setAttribute('aria-hidden', true);

                    this._isTransitioning = false;

                    this._showBackdrop(function() {
                        $$$1(document.body).removeClass(ClassName.OPEN);

                        _this7._resetAdjustments();

                        _this7._resetScrollbar();

                        $$$1(_this7._element).trigger(Event.HIDDEN);
                    });
                };

                _proto._removeBackdrop = function _removeBackdrop() {
                    if (this._backdrop) {
                        $$$1(this._backdrop).remove();
                        this._backdrop = null;
                    }
                };

                _proto._showBackdrop = function _showBackdrop(callback) {
                    var _this8 = this;

                    var animate = $$$1(this._element).hasClass(ClassName.FADE) ? ClassName.FADE : '';

                    if (this._isShown && this._config.backdrop) {
                        var doAnimate = Util.supportsTransitionEnd() && animate;
                        this._backdrop = document.createElement('div');
                        this._backdrop.className = ClassName.BACKDROP;

                        if (animate) {
                            $$$1(this._backdrop).addClass(animate);
                        }

                        $$$1(this._backdrop).appendTo(document.body);
                        $$$1(this._element).on(Event.CLICK_DISMISS, function(event) {
                            if (_this8._ignoreBackdropClick) {
                                _this8._ignoreBackdropClick = false;
                                return;
                            }

                            if (event.target !== event.currentTarget) {
                                return;
                            }

                            if (_this8._config.backdrop === 'static') {
                                _this8._element.focus();
                            } else {
                                _this8.hide();
                            }
                        });

                        if (doAnimate) {
                            Util.reflow(this._backdrop);
                        }

                        $$$1(this._backdrop).addClass(ClassName.SHOW);

                        if (!callback) {
                            return;
                        }

                        if (!doAnimate) {
                            callback();
                            return;
                        }

                        $$$1(this._backdrop).one(Util.TRANSITION_END, callback).emulateTransitionEnd(BACKDROP_TRANSITION_DURATION);
                    } else if (!this._isShown && this._backdrop) {
                        $$$1(this._backdrop).removeClass(ClassName.SHOW);

                        var callbackRemove = function callbackRemove() {
                            _this8._removeBackdrop();

                            if (callback) {
                                callback();
                            }
                        };

                        if (Util.supportsTransitionEnd() && $$$1(this._element).hasClass(ClassName.FADE)) {
                            $$$1(this._backdrop).one(Util.TRANSITION_END, callbackRemove).emulateTransitionEnd(BACKDROP_TRANSITION_DURATION);
                        } else {
                            callbackRemove();
                        }
                    } else if (callback) {
                        callback();
                    }
                }; // ----------------------------------------------------------------------
                // the following methods are used to handle overflowing modals
                // todo (fat): these should probably be refactored out of modal.js
                // ----------------------------------------------------------------------


                _proto._adjustDialog = function _adjustDialog() {
                    var isModalOverflowing = this._element.scrollHeight > document.documentElement.clientHeight;

                    if (!this._isBodyOverflowing && isModalOverflowing) {
                        this._element.style.paddingLeft = this._scrollbarWidth + "px";
                    }

                    if (this._isBodyOverflowing && !isModalOverflowing) {
                        this._element.style.paddingRight = this._scrollbarWidth + "px";
                    }
                };

                _proto._resetAdjustments = function _resetAdjustments() {
                    this._element.style.paddingLeft = '';
                    this._element.style.paddingRight = '';
                };

                _proto._checkScrollbar = function _checkScrollbar() {
                    var rect = document.body.getBoundingClientRect();
                    this._isBodyOverflowing = rect.left + rect.right < window.innerWidth;
                    this._scrollbarWidth = this._getScrollbarWidth();
                };

                _proto._setScrollbar = function _setScrollbar() {
                    var _this9 = this;

                    if (this._isBodyOverflowing) {
                        // Note: DOMNode.style.paddingRight returns the actual value or '' if not set
                        //   while $(DOMNode).css('padding-right') returns the calculated value or 0 if not set
                        // Adjust fixed content padding
                        $$$1(Selector.FIXED_CONTENT).each(function(index, element) {
                            var actualPadding = $$$1(element)[0].style.paddingRight;
                            var calculatedPadding = $$$1(element).css('padding-right');
                            $$$1(element).data('padding-right', actualPadding).css('padding-right', parseFloat(calculatedPadding) + _this9._scrollbarWidth + "px");
                        }); // Adjust sticky content margin

                        $$$1(Selector.STICKY_CONTENT).each(function(index, element) {
                            var actualMargin = $$$1(element)[0].style.marginRight;
                            var calculatedMargin = $$$1(element).css('margin-right');
                            $$$1(element).data('margin-right', actualMargin).css('margin-right', parseFloat(calculatedMargin) - _this9._scrollbarWidth + "px");
                        }); // Adjust navbar-toggler margin

                        $$$1(Selector.NAVBAR_TOGGLER).each(function(index, element) {
                            var actualMargin = $$$1(element)[0].style.marginRight;
                            var calculatedMargin = $$$1(element).css('margin-right');
                            $$$1(element).data('margin-right', actualMargin).css('margin-right', parseFloat(calculatedMargin) + _this9._scrollbarWidth + "px");
                        }); // Adjust body padding

                        var actualPadding = document.body.style.paddingRight;
                        var calculatedPadding = $$$1('body').css('padding-right');
                        $$$1('body').data('padding-right', actualPadding).css('padding-right', parseFloat(calculatedPadding) + this._scrollbarWidth + "px");
                    }
                };

                _proto._resetScrollbar = function _resetScrollbar() {
                    // Restore fixed content padding
                    $$$1(Selector.FIXED_CONTENT).each(function(index, element) {
                        var padding = $$$1(element).data('padding-right');

                        if (typeof padding !== 'undefined') {
                            $$$1(element).css('padding-right', padding).removeData('padding-right');
                        }
                    }); // Restore sticky content and navbar-toggler margin

                    $$$1(Selector.STICKY_CONTENT + ", " + Selector.NAVBAR_TOGGLER).each(function(index, element) {
                        var margin = $$$1(element).data('margin-right');

                        if (typeof margin !== 'undefined') {
                            $$$1(element).css('margin-right', margin).removeData('margin-right');
                        }
                    }); // Restore body padding

                    var padding = $$$1('body').data('padding-right');

                    if (typeof padding !== 'undefined') {
                        $$$1('body').css('padding-right', padding).removeData('padding-right');
                    }
                };

                _proto._getScrollbarWidth = function _getScrollbarWidth() {
                    // thx d.walsh
                    var scrollDiv = document.createElement('div');
                    scrollDiv.className = ClassName.SCROLLBAR_MEASURER;
                    document.body.appendChild(scrollDiv);
                    var scrollbarWidth = scrollDiv.getBoundingClientRect().width - scrollDiv.clientWidth;
                    document.body.removeChild(scrollDiv);
                    return scrollbarWidth;
                }; // Static


                Modal._jQueryInterface = function _jQueryInterface(config, relatedTarget) {
                    return this.each(function() {
                        var data = $$$1(this).data(DATA_KEY);

                        var _config = _extends({}, Modal.Default, $$$1(this).data(), typeof config === 'object' && config);

                        if (!data) {
                            data = new Modal(this, _config);
                            $$$1(this).data(DATA_KEY, data);
                        }

                        if (typeof config === 'string') {
                            if (typeof data[config] === 'undefined') {
                                throw new TypeError("No method named \"" + config + "\"");
                            }

                            data[config](relatedTarget);
                        } else if (_config.show) {
                            data.show(relatedTarget);
                        }
                    });
                };

                _createClass(Modal, null, [{
                    key: "VERSION",
                    get: function get() {
                        return VERSION;
                    }
                }, {
                    key: "Default",
                    get: function get() {
                        return Default;
                    }
                }]);

                return Modal;
            }();
        /**
         * ------------------------------------------------------------------------
         * Data Api implementation
         * ------------------------------------------------------------------------
         */


        $$$1(document).on(Event.CLICK_DATA_API, Selector.DATA_TOGGLE, function(event) {
            var _this10 = this;

            var target;
            var selector = Util.getSelectorFromElement(this);

            if (selector) {
                target = $$$1(selector)[0];
            }

            var config = $$$1(target).data(DATA_KEY) ? 'toggle' : _extends({}, $$$1(target).data(), $$$1(this).data());

            if (this.tagName === 'A' || this.tagName === 'AREA') {
                event.preventDefault();
            }

            var $target = $$$1(target).one(Event.SHOW, function(showEvent) {
                if (showEvent.isDefaultPrevented()) {
                    // Only register focus restorer if modal will actually get shown
                    return;
                }

                $target.one(Event.HIDDEN, function() {
                    if ($$$1(_this10).is(':visible')) {
                        _this10.focus();
                    }
                });
            });

            Modal._jQueryInterface.call($$$1(target), config, this);
        });
        /**
         * ------------------------------------------------------------------------
         * jQuery
         * ------------------------------------------------------------------------
         */

        $$$1.fn[NAME] = Modal._jQueryInterface;
        $$$1.fn[NAME].Constructor = Modal;

        $$$1.fn[NAME].noConflict = function() {
            $$$1.fn[NAME] = JQUERY_NO_CONFLICT;
            return Modal._jQueryInterface;
        };

        return Modal;
    }($);

    /**
     * --------------------------------------------------------------------------
     * Bootstrap (v4.0.0): tooltip.js
     * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
     * --------------------------------------------------------------------------
     */

    var Tooltip = function($$$1) {
        /**
         * ------------------------------------------------------------------------
         * Constants
         * ------------------------------------------------------------------------
         */
        var NAME = 'tooltip';
        var VERSION = '4.0.0';
        var DATA_KEY = 'bs.tooltip';
        var EVENT_KEY = "." + DATA_KEY;
        var JQUERY_NO_CONFLICT = $$$1.fn[NAME];
        var TRANSITION_DURATION = 150;
        var CLASS_PREFIX = 'bs-tooltip';
        var BSCLS_PREFIX_REGEX = new RegExp("(^|\\s)" + CLASS_PREFIX + "\\S+", 'g');
        var DefaultType = {
            animation: 'boolean',
            template: 'string',
            title: '(string|element|function)',
            trigger: 'string',
            delay: '(number|object)',
            html: 'boolean',
            selector: '(string|boolean)',
            placement: '(string|function)',
            offset: '(number|string)',
            container: '(string|element|boolean)',
            fallbackPlacement: '(string|array)',
            boundary: '(string|element)'
        };
        var AttachmentMap = {
            AUTO: 'auto',
            TOP: 'top',
            RIGHT: 'right',
            BOTTOM: 'bottom',
            LEFT: 'left'
        };
        var Default = {
            animation: true,
            template: '<div class="tooltip" role="tooltip">' + '<div class="arrow"></div>' + '<div class="tooltip-inner"></div></div>',
            trigger: 'hover focus',
            title: '',
            delay: 0,
            html: false,
            selector: false,
            placement: 'top',
            offset: 0,
            container: false,
            fallbackPlacement: 'flip',
            boundary: 'scrollParent'
        };
        var HoverState = {
            SHOW: 'show',
            OUT: 'out'
        };
        var Event = {
            HIDE: "hide" + EVENT_KEY,
            HIDDEN: "hidden" + EVENT_KEY,
            SHOW: "show" + EVENT_KEY,
            SHOWN: "shown" + EVENT_KEY,
            INSERTED: "inserted" + EVENT_KEY,
            CLICK: "click" + EVENT_KEY,
            FOCUSIN: "focusin" + EVENT_KEY,
            FOCUSOUT: "focusout" + EVENT_KEY,
            MOUSEENTER: "mouseenter" + EVENT_KEY,
            MOUSELEAVE: "mouseleave" + EVENT_KEY
        };
        var ClassName = {
            FADE: 'fade',
            SHOW: 'show'
        };
        var Selector = {
            TOOLTIP: '.tooltip',
            TOOLTIP_INNER: '.tooltip-inner',
            ARROW: '.arrow'
        };
        var Trigger = {
            HOVER: 'hover',
            FOCUS: 'focus',
            CLICK: 'click',
            MANUAL: 'manual'
            /**
             * ------------------------------------------------------------------------
             * Class Definition
             * ------------------------------------------------------------------------
             */

        };

        var Tooltip =
            /*#__PURE__*/
            function() {
                function Tooltip(element, config) {
                    /**
                     * Check for Popper dependency
                     * Popper - https://popper.js.org
                     */
                    if (typeof Popper$1 === 'undefined') {
                        throw new TypeError('Bootstrap tooltips require Popper.js (https://popper.js.org)');
                    } // private


                    this._isEnabled = true;
                    this._timeout = 0;
                    this._hoverState = '';
                    this._activeTrigger = {};
                    this._popper = null; // Protected

                    this.element = element;
                    this.config = this._getConfig(config);
                    this.tip = null;

                    this._setListeners();
                } // Getters


                var _proto = Tooltip.prototype;

                // Public
                _proto.enable = function enable() {
                    this._isEnabled = true;
                };

                _proto.disable = function disable() {
                    this._isEnabled = false;
                };

                _proto.toggleEnabled = function toggleEnabled() {
                    this._isEnabled = !this._isEnabled;
                };

                _proto.toggle = function toggle(event) {
                    if (!this._isEnabled) {
                        return;
                    }

                    if (event) {
                        var dataKey = this.constructor.DATA_KEY;
                        var context = $$$1(event.currentTarget).data(dataKey);

                        if (!context) {
                            context = new this.constructor(event.currentTarget, this._getDelegateConfig());
                            $$$1(event.currentTarget).data(dataKey, context);
                        }

                        context._activeTrigger.click = !context._activeTrigger.click;

                        if (context._isWithActiveTrigger()) {
                            context._enter(null, context);
                        } else {
                            context._leave(null, context);
                        }
                    } else {
                        if ($$$1(this.getTipElement()).hasClass(ClassName.SHOW)) {
                            this._leave(null, this);

                            return;
                        }

                        this._enter(null, this);
                    }
                };

                _proto.dispose = function dispose() {
                    clearTimeout(this._timeout);
                    $$$1.removeData(this.element, this.constructor.DATA_KEY);
                    $$$1(this.element).off(this.constructor.EVENT_KEY);
                    $$$1(this.element).closest('.modal').off('hide.bs.modal');

                    if (this.tip) {
                        $$$1(this.tip).remove();
                    }

                    this._isEnabled = null;
                    this._timeout = null;
                    this._hoverState = null;
                    this._activeTrigger = null;

                    if (this._popper !== null) {
                        this._popper.destroy();
                    }

                    this._popper = null;
                    this.element = null;
                    this.config = null;
                    this.tip = null;
                };

                _proto.show = function show() {
                    var _this = this;

                    if ($$$1(this.element).css('display') === 'none') {
                        throw new Error('Please use show on visible elements');
                    }

                    var showEvent = $$$1.Event(this.constructor.Event.SHOW);

                    if (this.isWithContent() && this._isEnabled) {
                        $$$1(this.element).trigger(showEvent);
                        var isInTheDom = $$$1.contains(this.element.ownerDocument.documentElement, this.element);

                        if (showEvent.isDefaultPrevented() || !isInTheDom) {
                            return;
                        }

                        var tip = this.getTipElement();
                        var tipId = Util.getUID(this.constructor.NAME);
                        tip.setAttribute('id', tipId);
                        this.element.setAttribute('aria-describedby', tipId);
                        this.setContent();

                        if (this.config.animation) {
                            $$$1(tip).addClass(ClassName.FADE);
                        }

                        var placement = typeof this.config.placement === 'function' ? this.config.placement.call(this, tip, this.element) : this.config.placement;

                        var attachment = this._getAttachment(placement);

                        this.addAttachmentClass(attachment);
                        var container = this.config.container === false ? document.body : $$$1(this.config.container);
                        $$$1(tip).data(this.constructor.DATA_KEY, this);

                        if (!$$$1.contains(this.element.ownerDocument.documentElement, this.tip)) {
                            $$$1(tip).appendTo(container);
                        }

                        $$$1(this.element).trigger(this.constructor.Event.INSERTED);
                        this._popper = new Popper$1(this.element, tip, {
                            placement: attachment,
                            modifiers: {
                                offset: {
                                    offset: this.config.offset
                                },
                                flip: {
                                    behavior: this.config.fallbackPlacement
                                },
                                arrow: {
                                    element: Selector.ARROW
                                },
                                preventOverflow: {
                                    boundariesElement: this.config.boundary
                                }
                            },
                            onCreate: function onCreate(data) {
                                if (data.originalPlacement !== data.placement) {
                                    _this._handlePopperPlacementChange(data);
                                }
                            },
                            onUpdate: function onUpdate(data) {
                                _this._handlePopperPlacementChange(data);
                            }
                        });
                        $$$1(tip).addClass(ClassName.SHOW); // If this is a touch-enabled device we add extra
                        // empty mouseover listeners to the body's immediate children;
                        // only needed because of broken event delegation on iOS
                        // https://www.quirksmode.org/blog/archives/2014/02/mouse_event_bub.html

                        if ('ontouchstart' in document.documentElement) {
                            $$$1('body').children().on('mouseover', null, $$$1.noop);
                        }

                        var complete = function complete() {
                            if (_this.config.animation) {
                                _this._fixTransition();
                            }

                            var prevHoverState = _this._hoverState;
                            _this._hoverState = null;
                            $$$1(_this.element).trigger(_this.constructor.Event.SHOWN);

                            if (prevHoverState === HoverState.OUT) {
                                _this._leave(null, _this);
                            }
                        };

                        if (Util.supportsTransitionEnd() && $$$1(this.tip).hasClass(ClassName.FADE)) {
                            $$$1(this.tip).one(Util.TRANSITION_END, complete).emulateTransitionEnd(Tooltip._TRANSITION_DURATION);
                        } else {
                            complete();
                        }
                    }
                };

                _proto.hide = function hide(callback) {
                    var _this2 = this;

                    var tip = this.getTipElement();
                    var hideEvent = $$$1.Event(this.constructor.Event.HIDE);

                    var complete = function complete() {
                        if (_this2._hoverState !== HoverState.SHOW && tip.parentNode) {
                            tip.parentNode.removeChild(tip);
                        }

                        _this2._cleanTipClass();

                        _this2.element.removeAttribute('aria-describedby');

                        $$$1(_this2.element).trigger(_this2.constructor.Event.HIDDEN);

                        if (_this2._popper !== null) {
                            _this2._popper.destroy();
                        }

                        if (callback) {
                            callback();
                        }
                    };

                    $$$1(this.element).trigger(hideEvent);

                    if (hideEvent.isDefaultPrevented()) {
                        return;
                    }

                    $$$1(tip).removeClass(ClassName.SHOW); // If this is a touch-enabled device we remove the extra
                    // empty mouseover listeners we added for iOS support

                    if ('ontouchstart' in document.documentElement) {
                        $$$1('body').children().off('mouseover', null, $$$1.noop);
                    }

                    this._activeTrigger[Trigger.CLICK] = false;
                    this._activeTrigger[Trigger.FOCUS] = false;
                    this._activeTrigger[Trigger.HOVER] = false;

                    if (Util.supportsTransitionEnd() && $$$1(this.tip).hasClass(ClassName.FADE)) {
                        $$$1(tip).one(Util.TRANSITION_END, complete).emulateTransitionEnd(TRANSITION_DURATION);
                    } else {
                        complete();
                    }

                    this._hoverState = '';
                };

                _proto.update = function update() {
                    if (this._popper !== null) {
                        this._popper.scheduleUpdate();
                    }
                }; // Protected


                _proto.isWithContent = function isWithContent() {
                    return Boolean(this.getTitle());
                };

                _proto.addAttachmentClass = function addAttachmentClass(attachment) {
                    $$$1(this.getTipElement()).addClass(CLASS_PREFIX + "-" + attachment);
                };

                _proto.getTipElement = function getTipElement() {
                    this.tip = this.tip || $$$1(this.config.template)[0];
                    return this.tip;
                };

                _proto.setContent = function setContent() {
                    var $tip = $$$1(this.getTipElement());
                    this.setElementContent($tip.find(Selector.TOOLTIP_INNER), this.getTitle());
                    $tip.removeClass(ClassName.FADE + " " + ClassName.SHOW);
                };

                _proto.setElementContent = function setElementContent($element, content) {
                    var html = this.config.html;

                    if (typeof content === 'object' && (content.nodeType || content.jquery)) {
                        // Content is a DOM node or a jQuery
                        if (html) {
                            if (!$$$1(content).parent().is($element)) {
                                $element.empty().append(content);
                            }
                        } else {
                            $element.text($$$1(content).text());
                        }
                    } else {
                        $element[html ? 'html' : 'text'](content);
                    }
                };

                _proto.getTitle = function getTitle() {
                    var title = this.element.getAttribute('data-original-title');

                    if (!title) {
                        title = typeof this.config.title === 'function' ? this.config.title.call(this.element) : this.config.title;
                    }

                    return title;
                }; // Private


                _proto._getAttachment = function _getAttachment(placement) {
                    return AttachmentMap[placement.toUpperCase()];
                };

                _proto._setListeners = function _setListeners() {
                    var _this3 = this;

                    var triggers = this.config.trigger.split(' ');
                    triggers.forEach(function(trigger) {
                        if (trigger === 'click') {
                            $$$1(_this3.element).on(_this3.constructor.Event.CLICK, _this3.config.selector, function(event) {
                                return _this3.toggle(event);
                            });
                        } else if (trigger !== Trigger.MANUAL) {
                            var eventIn = trigger === Trigger.HOVER ? _this3.constructor.Event.MOUSEENTER : _this3.constructor.Event.FOCUSIN;
                            var eventOut = trigger === Trigger.HOVER ? _this3.constructor.Event.MOUSELEAVE : _this3.constructor.Event.FOCUSOUT;
                            $$$1(_this3.element).on(eventIn, _this3.config.selector, function(event) {
                                return _this3._enter(event);
                            }).on(eventOut, _this3.config.selector, function(event) {
                                return _this3._leave(event);
                            });
                        }

                        $$$1(_this3.element).closest('.modal').on('hide.bs.modal', function() {
                            return _this3.hide();
                        });
                    });

                    if (this.config.selector) {
                        this.config = _extends({}, this.config, {
                            trigger: 'manual',
                            selector: ''
                        });
                    } else {
                        this._fixTitle();
                    }
                };

                _proto._fixTitle = function _fixTitle() {
                    var titleType = typeof this.element.getAttribute('data-original-title');

                    if (this.element.getAttribute('title') || titleType !== 'string') {
                        this.element.setAttribute('data-original-title', this.element.getAttribute('title') || '');
                        this.element.setAttribute('title', '');
                    }
                };

                _proto._enter = function _enter(event, context) {
                    var dataKey = this.constructor.DATA_KEY;
                    context = context || $$$1(event.currentTarget).data(dataKey);

                    if (!context) {
                        context = new this.constructor(event.currentTarget, this._getDelegateConfig());
                        $$$1(event.currentTarget).data(dataKey, context);
                    }

                    if (event) {
                        context._activeTrigger[event.type === 'focusin' ? Trigger.FOCUS : Trigger.HOVER] = true;
                    }

                    if ($$$1(context.getTipElement()).hasClass(ClassName.SHOW) || context._hoverState === HoverState.SHOW) {
                        context._hoverState = HoverState.SHOW;
                        return;
                    }

                    clearTimeout(context._timeout);
                    context._hoverState = HoverState.SHOW;

                    if (!context.config.delay || !context.config.delay.show) {
                        context.show();
                        return;
                    }

                    context._timeout = setTimeout(function() {
                        if (context._hoverState === HoverState.SHOW) {
                            context.show();
                        }
                    }, context.config.delay.show);
                };

                _proto._leave = function _leave(event, context) {
                    var dataKey = this.constructor.DATA_KEY;
                    context = context || $$$1(event.currentTarget).data(dataKey);

                    if (!context) {
                        context = new this.constructor(event.currentTarget, this._getDelegateConfig());
                        $$$1(event.currentTarget).data(dataKey, context);
                    }

                    if (event) {
                        context._activeTrigger[event.type === 'focusout' ? Trigger.FOCUS : Trigger.HOVER] = false;
                    }

                    if (context._isWithActiveTrigger()) {
                        return;
                    }

                    clearTimeout(context._timeout);
                    context._hoverState = HoverState.OUT;

                    if (!context.config.delay || !context.config.delay.hide) {
                        context.hide();
                        return;
                    }

                    context._timeout = setTimeout(function() {
                        if (context._hoverState === HoverState.OUT) {
                            context.hide();
                        }
                    }, context.config.delay.hide);
                };

                _proto._isWithActiveTrigger = function _isWithActiveTrigger() {
                    for (var trigger in this._activeTrigger) {
                        if (this._activeTrigger[trigger]) {
                            return true;
                        }
                    }

                    return false;
                };

                _proto._getConfig = function _getConfig(config) {
                    config = _extends({}, this.constructor.Default, $$$1(this.element).data(), config);

                    if (typeof config.delay === 'number') {
                        config.delay = {
                            show: config.delay,
                            hide: config.delay
                        };
                    }

                    if (typeof config.title === 'number') {
                        config.title = config.title.toString();
                    }

                    if (typeof config.content === 'number') {
                        config.content = config.content.toString();
                    }

                    Util.typeCheckConfig(NAME, config, this.constructor.DefaultType);
                    return config;
                };

                _proto._getDelegateConfig = function _getDelegateConfig() {
                    var config = {};

                    if (this.config) {
                        for (var key in this.config) {
                            if (this.constructor.Default[key] !== this.config[key]) {
                                config[key] = this.config[key];
                            }
                        }
                    }

                    return config;
                };

                _proto._cleanTipClass = function _cleanTipClass() {
                    var $tip = $$$1(this.getTipElement());
                    var tabClass = $tip.attr('class').match(BSCLS_PREFIX_REGEX);

                    if (tabClass !== null && tabClass.length > 0) {
                        $tip.removeClass(tabClass.join(''));
                    }
                };

                _proto._handlePopperPlacementChange = function _handlePopperPlacementChange(data) {
                    this._cleanTipClass();

                    this.addAttachmentClass(this._getAttachment(data.placement));
                };

                _proto._fixTransition = function _fixTransition() {
                    var tip = this.getTipElement();
                    var initConfigAnimation = this.config.animation;

                    if (tip.getAttribute('x-placement') !== null) {
                        return;
                    }

                    $$$1(tip).removeClass(ClassName.FADE);
                    this.config.animation = false;
                    this.hide();
                    this.show();
                    this.config.animation = initConfigAnimation;
                }; // Static


                Tooltip._jQueryInterface = function _jQueryInterface(config) {
                    return this.each(function() {
                        var data = $$$1(this).data(DATA_KEY);

                        var _config = typeof config === 'object' && config;

                        if (!data && /dispose|hide/.test(config)) {
                            return;
                        }

                        if (!data) {
                            data = new Tooltip(this, _config);
                            $$$1(this).data(DATA_KEY, data);
                        }

                        if (typeof config === 'string') {
                            if (typeof data[config] === 'undefined') {
                                throw new TypeError("No method named \"" + config + "\"");
                            }

                            data[config]();
                        }
                    });
                };

                _createClass(Tooltip, null, [{
                    key: "VERSION",
                    get: function get() {
                        return VERSION;
                    }
                }, {
                    key: "Default",
                    get: function get() {
                        return Default;
                    }
                }, {
                    key: "NAME",
                    get: function get() {
                        return NAME;
                    }
                }, {
                    key: "DATA_KEY",
                    get: function get() {
                        return DATA_KEY;
                    }
                }, {
                    key: "Event",
                    get: function get() {
                        return Event;
                    }
                }, {
                    key: "EVENT_KEY",
                    get: function get() {
                        return EVENT_KEY;
                    }
                }, {
                    key: "DefaultType",
                    get: function get() {
                        return DefaultType;
                    }
                }]);

                return Tooltip;
            }();
        /**
         * ------------------------------------------------------------------------
         * jQuery
         * ------------------------------------------------------------------------
         */


        $$$1.fn[NAME] = Tooltip._jQueryInterface;
        $$$1.fn[NAME].Constructor = Tooltip;

        $$$1.fn[NAME].noConflict = function() {
            $$$1.fn[NAME] = JQUERY_NO_CONFLICT;
            return Tooltip._jQueryInterface;
        };

        return Tooltip;
    }($, Popper$1);

    /**
     * --------------------------------------------------------------------------
     * Bootstrap (v4.0.0): popover.js
     * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
     * --------------------------------------------------------------------------
     */

    var Popover = function($$$1) {
        /**
         * ------------------------------------------------------------------------
         * Constants
         * ------------------------------------------------------------------------
         */
        var NAME = 'popover';
        var VERSION = '4.0.0';
        var DATA_KEY = 'bs.popover';
        var EVENT_KEY = "." + DATA_KEY;
        var JQUERY_NO_CONFLICT = $$$1.fn[NAME];
        var CLASS_PREFIX = 'bs-popover';
        var BSCLS_PREFIX_REGEX = new RegExp("(^|\\s)" + CLASS_PREFIX + "\\S+", 'g');

        var Default = _extends({}, Tooltip.Default, {
            placement: 'right',
            trigger: 'click',
            content: '',
            template: '<div class="popover" role="tooltip">' + '<div class="arrow"></div>' + '<h3 class="popover-header"></h3>' + '<div class="popover-body"></div></div>'
        });

        var DefaultType = _extends({}, Tooltip.DefaultType, {
            content: '(string|element|function)'
        });

        var ClassName = {
            FADE: 'fade',
            SHOW: 'show'
        };
        var Selector = {
            TITLE: '.popover-header',
            CONTENT: '.popover-body'
        };
        var Event = {
            HIDE: "hide" + EVENT_KEY,
            HIDDEN: "hidden" + EVENT_KEY,
            SHOW: "show" + EVENT_KEY,
            SHOWN: "shown" + EVENT_KEY,
            INSERTED: "inserted" + EVENT_KEY,
            CLICK: "click" + EVENT_KEY,
            FOCUSIN: "focusin" + EVENT_KEY,
            FOCUSOUT: "focusout" + EVENT_KEY,
            MOUSEENTER: "mouseenter" + EVENT_KEY,
            MOUSELEAVE: "mouseleave" + EVENT_KEY
            /**
             * ------------------------------------------------------------------------
             * Class Definition
             * ------------------------------------------------------------------------
             */

        };

        var Popover =
            /*#__PURE__*/
            function(_Tooltip) {
                _inheritsLoose(Popover, _Tooltip);

                function Popover() {
                    return _Tooltip.apply(this, arguments) || this;
                }

                var _proto = Popover.prototype;

                // Overrides
                _proto.isWithContent = function isWithContent() {
                    return this.getTitle() || this._getContent();
                };

                _proto.addAttachmentClass = function addAttachmentClass(attachment) {
                    $$$1(this.getTipElement()).addClass(CLASS_PREFIX + "-" + attachment);
                };

                _proto.getTipElement = function getTipElement() {
                    this.tip = this.tip || $$$1(this.config.template)[0];
                    return this.tip;
                };

                _proto.setContent = function setContent() {
                    var $tip = $$$1(this.getTipElement()); // We use append for html objects to maintain js events

                    this.setElementContent($tip.find(Selector.TITLE), this.getTitle());

                    var content = this._getContent();

                    if (typeof content === 'function') {
                        content = content.call(this.element);
                    }

                    this.setElementContent($tip.find(Selector.CONTENT), content);
                    $tip.removeClass(ClassName.FADE + " " + ClassName.SHOW);
                }; // Private


                _proto._getContent = function _getContent() {
                    return this.element.getAttribute('data-content') || this.config.content;
                };

                _proto._cleanTipClass = function _cleanTipClass() {
                    var $tip = $$$1(this.getTipElement());
                    var tabClass = $tip.attr('class').match(BSCLS_PREFIX_REGEX);

                    if (tabClass !== null && tabClass.length > 0) {
                        $tip.removeClass(tabClass.join(''));
                    }
                }; // Static


                Popover._jQueryInterface = function _jQueryInterface(config) {
                    return this.each(function() {
                        var data = $$$1(this).data(DATA_KEY);

                        var _config = typeof config === 'object' ? config : null;

                        if (!data && /destroy|hide/.test(config)) {
                            return;
                        }

                        if (!data) {
                            data = new Popover(this, _config);
                            $$$1(this).data(DATA_KEY, data);
                        }

                        if (typeof config === 'string') {
                            if (typeof data[config] === 'undefined') {
                                throw new TypeError("No method named \"" + config + "\"");
                            }

                            data[config]();
                        }
                    });
                };

                _createClass(Popover, null, [{
                    key: "VERSION",
                    // Getters
                    get: function get() {
                        return VERSION;
                    }
                }, {
                    key: "Default",
                    get: function get() {
                        return Default;
                    }
                }, {
                    key: "NAME",
                    get: function get() {
                        return NAME;
                    }
                }, {
                    key: "DATA_KEY",
                    get: function get() {
                        return DATA_KEY;
                    }
                }, {
                    key: "Event",
                    get: function get() {
                        return Event;
                    }
                }, {
                    key: "EVENT_KEY",
                    get: function get() {
                        return EVENT_KEY;
                    }
                }, {
                    key: "DefaultType",
                    get: function get() {
                        return DefaultType;
                    }
                }]);

                return Popover;
            }(Tooltip);
        /**
         * ------------------------------------------------------------------------
         * jQuery
         * ------------------------------------------------------------------------
         */


        $$$1.fn[NAME] = Popover._jQueryInterface;
        $$$1.fn[NAME].Constructor = Popover;

        $$$1.fn[NAME].noConflict = function() {
            $$$1.fn[NAME] = JQUERY_NO_CONFLICT;
            return Popover._jQueryInterface;
        };

        return Popover;
    }($);

    /**
     * --------------------------------------------------------------------------
     * Bootstrap (v4.0.0): scrollspy.js
     * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
     * --------------------------------------------------------------------------
     */

    var ScrollSpy = function($$$1) {
        /**
         * ------------------------------------------------------------------------
         * Constants
         * ------------------------------------------------------------------------
         */
        var NAME = 'scrollspy';
        var VERSION = '4.0.0';
        var DATA_KEY = 'bs.scrollspy';
        var EVENT_KEY = "." + DATA_KEY;
        var DATA_API_KEY = '.data-api';
        var JQUERY_NO_CONFLICT = $$$1.fn[NAME];
        var Default = {
            offset: 10,
            method: 'auto',
            target: ''
        };
        var DefaultType = {
            offset: 'number',
            method: 'string',
            target: '(string|element)'
        };
        var Event = {
            ACTIVATE: "activate" + EVENT_KEY,
            SCROLL: "scroll" + EVENT_KEY,
            LOAD_DATA_API: "load" + EVENT_KEY + DATA_API_KEY
        };
        var ClassName = {
            DROPDOWN_ITEM: 'dropdown-item',
            DROPDOWN_MENU: 'dropdown-menu',
            ACTIVE: 'active'
        };
        var Selector = {
            DATA_SPY: '[data-spy="scroll"]',
            ACTIVE: '.active',
            NAV_LIST_GROUP: '.nav, .list-group',
            NAV_LINKS: '.nav-link',
            NAV_ITEMS: '.nav-item',
            LIST_ITEMS: '.list-group-item',
            DROPDOWN: '.dropdown',
            DROPDOWN_ITEMS: '.dropdown-item',
            DROPDOWN_TOGGLE: '.dropdown-toggle'
        };
        var OffsetMethod = {
            OFFSET: 'offset',
            POSITION: 'position'
            /**
             * ------------------------------------------------------------------------
             * Class Definition
             * ------------------------------------------------------------------------
             */

        };

        var ScrollSpy =
            /*#__PURE__*/
            function() {
                function ScrollSpy(element, config) {
                    var _this = this;

                    this._element = element;
                    this._scrollElement = element.tagName === 'BODY' ? window : element;
                    this._config = this._getConfig(config);
                    this._selector = this._config.target + " " + Selector.NAV_LINKS + "," + (this._config.target + " " + Selector.LIST_ITEMS + ",") + (this._config.target + " " + Selector.DROPDOWN_ITEMS);
                    this._offsets = [];
                    this._targets = [];
                    this._activeTarget = null;
                    this._scrollHeight = 0;
                    $$$1(this._scrollElement).on(Event.SCROLL, function(event) {
                        return _this._process(event);
                    });
                    this.refresh();

                    this._process();
                } // Getters


                var _proto = ScrollSpy.prototype;

                // Public
                _proto.refresh = function refresh() {
                    var _this2 = this;

                    var autoMethod = this._scrollElement === this._scrollElement.window ? OffsetMethod.OFFSET : OffsetMethod.POSITION;
                    var offsetMethod = this._config.method === 'auto' ? autoMethod : this._config.method;
                    var offsetBase = offsetMethod === OffsetMethod.POSITION ? this._getScrollTop() : 0;
                    this._offsets = [];
                    this._targets = [];
                    this._scrollHeight = this._getScrollHeight();
                    var targets = $$$1.makeArray($$$1(this._selector));
                    targets.map(function(element) {
                        var target;
                        var targetSelector = Util.getSelectorFromElement(element);

                        if (targetSelector) {
                            target = $$$1(targetSelector)[0];
                        }

                        if (target) {
                            var targetBCR = target.getBoundingClientRect();

                            if (targetBCR.width || targetBCR.height) {
                                // TODO (fat): remove sketch reliance on jQuery position/offset
                                return [$$$1(target)[offsetMethod]().top + offsetBase, targetSelector];
                            }
                        }

                        return null;
                    }).filter(function(item) {
                        return item;
                    }).sort(function(a, b) {
                        return a[0] - b[0];
                    }).forEach(function(item) {
                        _this2._offsets.push(item[0]);

                        _this2._targets.push(item[1]);
                    });
                };

                _proto.dispose = function dispose() {
                    $$$1.removeData(this._element, DATA_KEY);
                    $$$1(this._scrollElement).off(EVENT_KEY);
                    this._element = null;
                    this._scrollElement = null;
                    this._config = null;
                    this._selector = null;
                    this._offsets = null;
                    this._targets = null;
                    this._activeTarget = null;
                    this._scrollHeight = null;
                }; // Private


                _proto._getConfig = function _getConfig(config) {
                    config = _extends({}, Default, config);

                    if (typeof config.target !== 'string') {
                        var id = $$$1(config.target).attr('id');

                        if (!id) {
                            id = Util.getUID(NAME);
                            $$$1(config.target).attr('id', id);
                        }

                        config.target = "#" + id;
                    }

                    Util.typeCheckConfig(NAME, config, DefaultType);
                    return config;
                };

                _proto._getScrollTop = function _getScrollTop() {
                    return this._scrollElement === window ? this._scrollElement.pageYOffset : this._scrollElement.scrollTop;
                };

                _proto._getScrollHeight = function _getScrollHeight() {
                    return this._scrollElement.scrollHeight || Math.max(document.body.scrollHeight, document.documentElement.scrollHeight);
                };

                _proto._getOffsetHeight = function _getOffsetHeight() {
                    return this._scrollElement === window ? window.innerHeight : this._scrollElement.getBoundingClientRect().height;
                };

                _proto._process = function _process() {
                    var scrollTop = this._getScrollTop() + this._config.offset;

                    var scrollHeight = this._getScrollHeight();

                    var maxScroll = this._config.offset + scrollHeight - this._getOffsetHeight();

                    if (this._scrollHeight !== scrollHeight) {
                        this.refresh();
                    }

                    if (scrollTop >= maxScroll) {
                        var target = this._targets[this._targets.length - 1];

                        if (this._activeTarget !== target) {
                            this._activate(target);
                        }

                        return;
                    }

                    if (this._activeTarget && scrollTop < this._offsets[0] && this._offsets[0] > 0) {
                        this._activeTarget = null;

                        this._clear();

                        return;
                    }

                    for (var i = this._offsets.length; i--;) {
                        var isActiveTarget = this._activeTarget !== this._targets[i] && scrollTop >= this._offsets[i] && (typeof this._offsets[i + 1] === 'undefined' || scrollTop < this._offsets[i + 1]);

                        if (isActiveTarget) {
                            this._activate(this._targets[i]);
                        }
                    }
                };

                _proto._activate = function _activate(target) {
                    this._activeTarget = target;

                    this._clear();

                    var queries = this._selector.split(','); // eslint-disable-next-line arrow-body-style


                    queries = queries.map(function(selector) {
                        return selector + "[data-target=\"" + target + "\"]," + (selector + "[href=\"" + target + "\"]");
                    });
                    var $link = $$$1(queries.join(','));

                    if ($link.hasClass(ClassName.DROPDOWN_ITEM)) {
                        $link.closest(Selector.DROPDOWN).find(Selector.DROPDOWN_TOGGLE).addClass(ClassName.ACTIVE);
                        $link.addClass(ClassName.ACTIVE);
                    } else {
                        // Set triggered link as active
                        $link.addClass(ClassName.ACTIVE); // Set triggered links parents as active
                        // With both <ul> and <nav> markup a parent is the previous sibling of any nav ancestor

                        $link.parents(Selector.NAV_LIST_GROUP).prev(Selector.NAV_LINKS + ", " + Selector.LIST_ITEMS).addClass(ClassName.ACTIVE); // Handle special case when .nav-link is inside .nav-item

                        $link.parents(Selector.NAV_LIST_GROUP).prev(Selector.NAV_ITEMS).children(Selector.NAV_LINKS).addClass(ClassName.ACTIVE);
                    }

                    $$$1(this._scrollElement).trigger(Event.ACTIVATE, {
                        relatedTarget: target
                    });
                };

                _proto._clear = function _clear() {
                    $$$1(this._selector).filter(Selector.ACTIVE).removeClass(ClassName.ACTIVE);
                }; // Static


                ScrollSpy._jQueryInterface = function _jQueryInterface(config) {
                    return this.each(function() {
                        var data = $$$1(this).data(DATA_KEY);

                        var _config = typeof config === 'object' && config;

                        if (!data) {
                            data = new ScrollSpy(this, _config);
                            $$$1(this).data(DATA_KEY, data);
                        }

                        if (typeof config === 'string') {
                            if (typeof data[config] === 'undefined') {
                                throw new TypeError("No method named \"" + config + "\"");
                            }

                            data[config]();
                        }
                    });
                };

                _createClass(ScrollSpy, null, [{
                    key: "VERSION",
                    get: function get() {
                        return VERSION;
                    }
                }, {
                    key: "Default",
                    get: function get() {
                        return Default;
                    }
                }]);

                return ScrollSpy;
            }();
        /**
         * ------------------------------------------------------------------------
         * Data Api implementation
         * ------------------------------------------------------------------------
         */


        $$$1(window).on(Event.LOAD_DATA_API, function() {
            var scrollSpys = $$$1.makeArray($$$1(Selector.DATA_SPY));

            for (var i = scrollSpys.length; i--;) {
                var $spy = $$$1(scrollSpys[i]);

                ScrollSpy._jQueryInterface.call($spy, $spy.data());
            }
        });
        /**
         * ------------------------------------------------------------------------
         * jQuery
         * ------------------------------------------------------------------------
         */

        $$$1.fn[NAME] = ScrollSpy._jQueryInterface;
        $$$1.fn[NAME].Constructor = ScrollSpy;

        $$$1.fn[NAME].noConflict = function() {
            $$$1.fn[NAME] = JQUERY_NO_CONFLICT;
            return ScrollSpy._jQueryInterface;
        };

        return ScrollSpy;
    }($);

    /**
     * --------------------------------------------------------------------------
     * Bootstrap (v4.0.0): tab.js
     * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
     * --------------------------------------------------------------------------
     */

    var Tab = function($$$1) {
        /**
         * ------------------------------------------------------------------------
         * Constants
         * ------------------------------------------------------------------------
         */
        var NAME = 'tab';
        var VERSION = '4.0.0';
        var DATA_KEY = 'bs.tab';
        var EVENT_KEY = "." + DATA_KEY;
        var DATA_API_KEY = '.data-api';
        var JQUERY_NO_CONFLICT = $$$1.fn[NAME];
        var TRANSITION_DURATION = 150;
        var Event = {
            HIDE: "hide" + EVENT_KEY,
            HIDDEN: "hidden" + EVENT_KEY,
            SHOW: "show" + EVENT_KEY,
            SHOWN: "shown" + EVENT_KEY,
            CLICK_DATA_API: "click" + EVENT_KEY + DATA_API_KEY
        };
        var ClassName = {
            DROPDOWN_MENU: 'dropdown-menu',
            ACTIVE: 'active',
            DISABLED: 'disabled',
            FADE: 'fade',
            SHOW: 'show'
        };
        var Selector = {
            DROPDOWN: '.dropdown',
            NAV_LIST_GROUP: '.nav, .list-group',
            ACTIVE: '.active',
            ACTIVE_UL: '> li > .active',
            DATA_TOGGLE: '[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',
            DROPDOWN_TOGGLE: '.dropdown-toggle',
            DROPDOWN_ACTIVE_CHILD: '> .dropdown-menu .active'
            /**
             * ------------------------------------------------------------------------
             * Class Definition
             * ------------------------------------------------------------------------
             */

        };

        var Tab =
            /*#__PURE__*/
            function() {
                function Tab(element) {
                    this._element = element;
                } // Getters


                var _proto = Tab.prototype;

                // Public
                _proto.show = function show() {
                    var _this = this;

                    if (this._element.parentNode && this._element.parentNode.nodeType === Node.ELEMENT_NODE && $$$1(this._element).hasClass(ClassName.ACTIVE) || $$$1(this._element).hasClass(ClassName.DISABLED)) {
                        return;
                    }

                    var target;
                    var previous;
                    var listElement = $$$1(this._element).closest(Selector.NAV_LIST_GROUP)[0];
                    var selector = Util.getSelectorFromElement(this._element);

                    if (listElement) {
                        var itemSelector = listElement.nodeName === 'UL' ? Selector.ACTIVE_UL : Selector.ACTIVE;
                        previous = $$$1.makeArray($$$1(listElement).find(itemSelector));
                        previous = previous[previous.length - 1];
                    }

                    var hideEvent = $$$1.Event(Event.HIDE, {
                        relatedTarget: this._element
                    });
                    var showEvent = $$$1.Event(Event.SHOW, {
                        relatedTarget: previous
                    });

                    if (previous) {
                        $$$1(previous).trigger(hideEvent);
                    }

                    $$$1(this._element).trigger(showEvent);

                    if (showEvent.isDefaultPrevented() || hideEvent.isDefaultPrevented()) {
                        return;
                    }

                    if (selector) {
                        target = $$$1(selector)[0];
                    }

                    this._activate(this._element, listElement);

                    var complete = function complete() {
                        var hiddenEvent = $$$1.Event(Event.HIDDEN, {
                            relatedTarget: _this._element
                        });
                        var shownEvent = $$$1.Event(Event.SHOWN, {
                            relatedTarget: previous
                        });
                        $$$1(previous).trigger(hiddenEvent);
                        $$$1(_this._element).trigger(shownEvent);
                    };

                    if (target) {
                        this._activate(target, target.parentNode, complete);
                    } else {
                        complete();
                    }
                };

                _proto.dispose = function dispose() {
                    $$$1.removeData(this._element, DATA_KEY);
                    this._element = null;
                }; // Private


                _proto._activate = function _activate(element, container, callback) {
                    var _this2 = this;

                    var activeElements;

                    if (container.nodeName === 'UL') {
                        activeElements = $$$1(container).find(Selector.ACTIVE_UL);
                    } else {
                        activeElements = $$$1(container).children(Selector.ACTIVE);
                    }

                    var active = activeElements[0];
                    var isTransitioning = callback && Util.supportsTransitionEnd() && active && $$$1(active).hasClass(ClassName.FADE);

                    var complete = function complete() {
                        return _this2._transitionComplete(element, active, callback);
                    };

                    if (active && isTransitioning) {
                        $$$1(active).one(Util.TRANSITION_END, complete).emulateTransitionEnd(TRANSITION_DURATION);
                    } else {
                        complete();
                    }
                };

                _proto._transitionComplete = function _transitionComplete(element, active, callback) {
                    if (active) {
                        $$$1(active).removeClass(ClassName.SHOW + " " + ClassName.ACTIVE);
                        var dropdownChild = $$$1(active.parentNode).find(Selector.DROPDOWN_ACTIVE_CHILD)[0];

                        if (dropdownChild) {
                            $$$1(dropdownChild).removeClass(ClassName.ACTIVE);
                        }

                        if (active.getAttribute('role') === 'tab') {
                            active.setAttribute('aria-selected', false);
                        }
                    }

                    $$$1(element).addClass(ClassName.ACTIVE);

                    if (element.getAttribute('role') === 'tab') {
                        element.setAttribute('aria-selected', true);
                    }

                    Util.reflow(element);
                    $$$1(element).addClass(ClassName.SHOW);

                    if (element.parentNode && $$$1(element.parentNode).hasClass(ClassName.DROPDOWN_MENU)) {
                        var dropdownElement = $$$1(element).closest(Selector.DROPDOWN)[0];

                        if (dropdownElement) {
                            $$$1(dropdownElement).find(Selector.DROPDOWN_TOGGLE).addClass(ClassName.ACTIVE);
                        }

                        element.setAttribute('aria-expanded', true);
                    }

                    if (callback) {
                        callback();
                    }
                }; // Static


                Tab._jQueryInterface = function _jQueryInterface(config) {
                    return this.each(function() {
                        var $this = $$$1(this);
                        var data = $this.data(DATA_KEY);

                        if (!data) {
                            data = new Tab(this);
                            $this.data(DATA_KEY, data);
                        }

                        if (typeof config === 'string') {
                            if (typeof data[config] === 'undefined') {
                                throw new TypeError("No method named \"" + config + "\"");
                            }

                            data[config]();
                        }
                    });
                };

                _createClass(Tab, null, [{
                    key: "VERSION",
                    get: function get() {
                        return VERSION;
                    }
                }]);

                return Tab;
            }();
        /**
         * ------------------------------------------------------------------------
         * Data Api implementation
         * ------------------------------------------------------------------------
         */


        $$$1(document).on(Event.CLICK_DATA_API, Selector.DATA_TOGGLE, function(event) {
            event.preventDefault();

            Tab._jQueryInterface.call($$$1(this), 'show');
        });
        /**
         * ------------------------------------------------------------------------
         * jQuery
         * ------------------------------------------------------------------------
         */

        $$$1.fn[NAME] = Tab._jQueryInterface;
        $$$1.fn[NAME].Constructor = Tab;

        $$$1.fn[NAME].noConflict = function() {
            $$$1.fn[NAME] = JQUERY_NO_CONFLICT;
            return Tab._jQueryInterface;
        };

        return Tab;
    }($);

    var Util$2 = function() {
        /**
         * ------------------------------------------------------------------------
         * Private TransitionEnd Helpers
         * ------------------------------------------------------------------------
         */
        var transitionEnd = false;
        var _transitionEndSelector = "";
        var TransitionEndEvent = {
            WebkitTransition: "webkitTransitionEnd",
            MozTransition: "transitionend",
            OTransition: "oTransitionEnd otransitionend",
            transition: "transitionend"
        };

        function transitionEndTest() {
            if (window.QUnit) {
                return false;
            }

            var el = document.createElement("bmd");

            for (var name in TransitionEndEvent) {
                if (el.style[name] !== undefined) {
                    return TransitionEndEvent[name]; // { end: TransitionEndEvent[name] }
                }
            }

            return false;
        }

        function setTransitionEndSupport() {
            transitionEnd = transitionEndTest(); // generate a concatenated transition end event selector

            for (var name in TransitionEndEvent) {
                _transitionEndSelector += " " + TransitionEndEvent[name];
            }
        }
        /**
         * --------------------------------------------------------------------------
         * Public Util Api
         * --------------------------------------------------------------------------
         */


        var Util = {
            transitionEndSupported: function transitionEndSupported() {
                return transitionEnd;
            },
            transitionEndSelector: function transitionEndSelector() {
                return _transitionEndSelector;
            },
            isChar: function isChar(event) {
                if (typeof event.which === "undefined") {
                    return true;
                } else if (typeof event.which === "number" && event.which > 0) {
                    return !event.ctrlKey && !event.metaKey && !event.altKey && event.which !== 8 && // backspace
                        event.which !== 9 && // tab
                        event.which !== 13 && // enter
                        event.which !== 16 && // shift
                        event.which !== 17 && // ctrl
                        event.which !== 20 && // caps lock
                        event.which !== 27 // escape
                    ;
                }

                return false;
            },
            assert: function assert($element, invalidTest, message) {
                if (invalidTest) {
                    if (!$element === undefined) {
                        $element.css("border", "1px solid red");
                    }

                    console.error(message, $element); // eslint-disable-line no-console

                    throw message;
                }
            },
            describe: function describe($element) {
                if ($element === undefined) {
                    return "undefined";
                } else if ($element.length === 0) {
                    return "(no matching elements)";
                }

                return $element[0].outerHTML.split(">")[0] + ">";
            }
        };
        setTransitionEndSupport();
        return Util;
    }(jQuery);

    var Base = function($$$1) {
        var ClassName = {
            BMD_FORM_GROUP: "bmd-form-group",
            IS_FILLED: "is-filled",
            IS_FOCUSED: "is-focused"
        };
        var Selector = {
            BMD_FORM_GROUP: "." + ClassName.BMD_FORM_GROUP
        };
        var Default = {};
        /**
         * ------------------------------------------------------------------------
         * Class Definition
         * ------------------------------------------------------------------------
         */

        var Base =
            /*#__PURE__*/
            function() {
                /**
                 *
                 * @param element
                 * @param config
                 * @param properties - anything that needs to be set as this[key] = value.  Works around the need to call `super` before using `this`
                 */
                function Base($element, config, properties) {
                    if (properties === void 0) {
                        properties = {};
                    }

                    this.$element = $element;
                    this.config = $$$1.extend(true, {}, Default, config); // set properties for use in the constructor initialization

                    for (var key in properties) {
                        this[key] = properties[key];
                    }
                }

                var _proto = Base.prototype;

                _proto.dispose = function dispose(dataKey) {
                    this.$element.data(dataKey, null);
                    this.$element = null;
                    this.config = null;
                }; // ------------------------------------------------------------------------
                // protected


                _proto.addFormGroupFocus = function addFormGroupFocus() {
                    if (!this.$element.prop("disabled")) {
                        this.$bmdFormGroup.addClass(ClassName.IS_FOCUSED);
                    }
                };

                _proto.removeFormGroupFocus = function removeFormGroupFocus() {
                    this.$bmdFormGroup.removeClass(ClassName.IS_FOCUSED);
                };

                _proto.removeIsFilled = function removeIsFilled() {
                    this.$bmdFormGroup.removeClass(ClassName.IS_FILLED);
                };

                _proto.addIsFilled = function addIsFilled() {
                    this.$bmdFormGroup.addClass(ClassName.IS_FILLED);
                }; // Find bmd-form-group


                _proto.findMdbFormGroup = function findMdbFormGroup(raiseError) {
                    if (raiseError === void 0) {
                        raiseError = true;
                    }

                    var mfg = this.$element.closest(Selector.BMD_FORM_GROUP);

                    if (mfg.length === 0 && raiseError) {
                        $$$1.error("Failed to find " + Selector.BMD_FORM_GROUP + " for " + Util$2.describe(this.$element));
                    }

                    return mfg;
                }; // ------------------------------------------------------------------------
                // private
                // ------------------------------------------------------------------------
                // static


                return Base;
            }();

        return Base;
    }(jQuery);

    var BaseInput = function($$$1) {
        var ClassName = {
            FORM_GROUP: "form-group",
            BMD_FORM_GROUP: "bmd-form-group",
            BMD_LABEL: "bmd-label",
            BMD_LABEL_STATIC: "bmd-label-static",
            BMD_LABEL_PLACEHOLDER: "bmd-label-placeholder",
            BMD_LABEL_FLOATING: "bmd-label-floating",
            HAS_DANGER: "has-danger",
            IS_FILLED: "is-filled",
            IS_FOCUSED: "is-focused",
            INPUT_GROUP: "input-group"
        };
        var Selector = {
            FORM_GROUP: "." + ClassName.FORM_GROUP,
            BMD_FORM_GROUP: "." + ClassName.BMD_FORM_GROUP,
            BMD_LABEL_WILDCARD: "label[class^='" + ClassName.BMD_LABEL + "'], label[class*=' " + ClassName.BMD_LABEL + "']" // match any label variant if specified

        };
        var Default = {
            validate: false,
            formGroup: {
                required: false
            },
            bmdFormGroup: {
                template: "<span class='" + ClassName.BMD_FORM_GROUP + "'></span>",
                create: true,
                // create a wrapper if form-group not found
                required: true // not recommended to turn this off, only used for inline components

            },
            label: {
                required: false,
                // Prioritized find order for resolving the label to be used as an bmd-label if not specified in the markup
                //  - a function(thisComponent); or
                //  - a string selector used like $bmdFormGroup.find(selector)
                //
                // Note this only runs if $bmdFormGroup.find(Selector.BMD_LABEL_WILDCARD) fails to find a label (as authored in the markup)
                //
                selectors: [".form-control-label", // in the case of horizontal or inline forms, this will be marked
                    "> label" // usual case for text inputs, first child.  Deeper would find toggle labels so don't do that.
                ],
                className: ClassName.BMD_LABEL_STATIC
            },
            requiredClasses: [],
            invalidComponentMatches: [],
            convertInputSizeVariations: true
        };
        var FormControlSizeMarkers = {
            "form-control-lg": "bmd-form-group-lg",
            "form-control-sm": "bmd-form-group-sm"
        };
        /**
         * ------------------------------------------------------------------------
         * Class Definition
         * ------------------------------------------------------------------------
         */

        var BaseInput =
            /*#__PURE__*/
            function(_Base) {
                _inheritsLoose(BaseInput, _Base);

                /**
                 *
                 * @param element
                 * @param config
                 * @param properties - anything that needs to be set as this[key] = value.  Works around the need to call `super` before using `this`
                 */
                function BaseInput($element, config, properties) {
                    var _this;

                    if (properties === void 0) {
                        properties = {};
                    }

                    _this = _Base.call(this, $element, $$$1.extend(true, {}, Default, config), properties) || this; // Enforce no overlap between components to prevent side effects

                    _this._rejectInvalidComponentMatches(); // Enforce expected structure (if any)


                    _this.rejectWithoutRequiredStructure(); // Enforce required classes for a consistent rendering


                    _this._rejectWithoutRequiredClasses(); // Resolve the form-group first, it will be used for bmd-form-group if possible
                    //   note: different components have different rules


                    _this.$formGroup = _this.findFormGroup(_this.config.formGroup.required); // Will add bmd-form-group to form-group or create an bmd-form-group
                    //  Performance Note: for those forms that are really performance driven, create the markup with the .bmd-form-group to avoid
                    //    rendering changes once added.

                    _this.$bmdFormGroup = _this.resolveMdbFormGroup(); // Resolve and mark the bmdLabel if necessary as defined by the config

                    _this.$bmdLabel = _this.resolveMdbLabel(); // Signal to the bmd-form-group that a form-control-* variation is being used

                    _this.resolveMdbFormGroupSizing();

                    _this.addFocusListener();

                    _this.addChangeListener();

                    if (_this.$element.val() != "") {
                        _this.addIsFilled();
                    }

                    return _this;
                }

                var _proto = BaseInput.prototype;

                _proto.dispose = function dispose(dataKey) {
                    _Base.prototype.dispose.call(this, dataKey);

                    this.$bmdFormGroup = null;
                    this.$formGroup = null;
                }; // ------------------------------------------------------------------------
                // protected


                _proto.rejectWithoutRequiredStructure = function rejectWithoutRequiredStructure() { // implement
                };

                _proto.addFocusListener = function addFocusListener() {
                    var _this2 = this;

                    this.$element.on("focus", function() {
                        _this2.addFormGroupFocus();
                    }).on("blur", function() {
                        _this2.removeFormGroupFocus();
                    });
                };

                _proto.addChangeListener = function addChangeListener() {
                    var _this3 = this;

                    this.$element.on("keydown paste", function(event) {
                        if (Util$2.isChar(event)) {
                            _this3.addIsFilled();
                        }
                    }).on("keyup change", function() {
                        // make sure empty is added back when there is a programmatic value change.
                        //  NOTE: programmatic changing of value using $.val() must trigger the change event i.e. $.val('x').trigger('change')
                        if (_this3.isEmpty()) {
                            _this3.removeIsFilled();
                        } else {
                            _this3.addIsFilled();
                        }

                        if (_this3.config.validate) {
                            // Validation events do not bubble, so they must be attached directly to the text: http://jsfiddle.net/PEpRM/1/
                            //  Further, even the bind method is being caught, but since we are already calling #checkValidity here, just alter
                            //  the form-group on change.
                            //
                            // NOTE: I'm not sure we should be intervening regarding validation, this seems better as a README and snippet of code.
                            //        BUT, I've left it here for backwards compatibility.
                            var isValid = typeof _this3.$element[0].checkValidity === "undefined" || _this3.$element[0].checkValidity();

                            if (isValid) {
                                _this3.removeHasDanger();
                            } else {
                                _this3.addHasDanger();
                            }
                        }
                    });
                };

                _proto.addHasDanger = function addHasDanger() {
                    this.$bmdFormGroup.addClass(ClassName.HAS_DANGER);
                };

                _proto.removeHasDanger = function removeHasDanger() {
                    this.$bmdFormGroup.removeClass(ClassName.HAS_DANGER);
                };

                _proto.isEmpty = function isEmpty() {
                    return this.$element.val() === null || this.$element.val() === undefined || this.$element.val() === "";
                }; // Will add bmd-form-group to form-group or create a bmd-form-group if necessary


                _proto.resolveMdbFormGroup = function resolveMdbFormGroup() {
                    var mfg = this.findMdbFormGroup(false);

                    if (mfg === undefined || mfg.length === 0) {
                        if (this.config.bmdFormGroup.create && (this.$formGroup === undefined || this.$formGroup.length === 0)) {
                            // If a form-group doesn't exist (not recommended), take a guess and wrap the element (assuming no label).
                            //  note: it's possible to make this smarter, but I need to see valid cases before adding any complexity.
                            // this may be an input-group, wrap that instead
                            if (this.outerElement().parent().hasClass(ClassName.INPUT_GROUP)) {
                                this.outerElement().parent().wrap(this.config.bmdFormGroup.template);
                            } else {
                                this.outerElement().wrap(this.config.bmdFormGroup.template);
                            }
                        } else {
                            // a form-group does exist, add our marker class to it
                            this.$formGroup.addClass(ClassName.BMD_FORM_GROUP); // OLD: may want to implement this after all, see how the styling turns out, but using an existing form-group is less manipulation of the dom and therefore preferable
                            // A form-group does exist, so add an bmd-form-group wrapping it's internal contents
                            //fg.wrapInner(this.config.bmdFormGroup.template)
                        }

                        mfg = this.findMdbFormGroup(this.config.bmdFormGroup.required);
                    }

                    return mfg;
                }; // Demarcation element (e.g. first child of a form-group)
                //  Subclasses such as file inputs may have different structures


                _proto.outerElement = function outerElement() {
                    return this.$element;
                }; // Will add bmd-label to bmd-form-group if not already specified


                _proto.resolveMdbLabel = function resolveMdbLabel() {
                    var label = this.$bmdFormGroup.find(Selector.BMD_LABEL_WILDCARD);

                    if (label === undefined || label.length === 0) {
                        // we need to find it based on the configured selectors
                        label = this.findMdbLabel(this.config.label.required);

                        if (label === undefined || label.length === 0) { // no label found, and finder did not require one
                        } else {
                            // a candidate label was found, add the configured default class name
                            label.addClass(this.config.label.className);
                        }
                    }

                    return label;
                }; // Find bmd-label variant based on the config selectors


                _proto.findMdbLabel = function findMdbLabel(raiseError) {
                    if (raiseError === void 0) {
                        raiseError = true;
                    }

                    var label = null; // use the specified selector order

                    for (var _iterator = this.config.label.selectors, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
                        var _ref;

                        if (_isArray) {
                            if (_i >= _iterator.length) break;
                            _ref = _iterator[_i++];
                        } else {
                            _i = _iterator.next();
                            if (_i.done) break;
                            _ref = _i.value;
                        }

                        var _selector = _ref;

                        if ($$$1.isFunction(_selector)) {
                            label = _selector(this);
                        } else {
                            label = this.$bmdFormGroup.find(_selector);
                        }

                        if (label !== undefined && label.length > 0) {
                            break;
                        }
                    }

                    if (label.length === 0 && raiseError) {
                        $$$1.error("Failed to find " + Selector.BMD_LABEL_WILDCARD + " within form-group for " + Util$2.describe(this.$element));
                    }

                    return label;
                }; // Find bmd-form-group


                _proto.findFormGroup = function findFormGroup(raiseError) {
                    if (raiseError === void 0) {
                        raiseError = true;
                    }

                    var fg = this.$element.closest(Selector.FORM_GROUP);

                    if (fg.length === 0 && raiseError) {
                        $$$1.error("Failed to find " + Selector.FORM_GROUP + " for " + Util$2.describe(this.$element));
                    }

                    return fg;
                }; // Due to the interconnected nature of labels/inputs/help-blocks, signal the bmd-form-group-* size variation based on
                //  a found form-control-* size


                _proto.resolveMdbFormGroupSizing = function resolveMdbFormGroupSizing() {
                    if (!this.config.convertInputSizeVariations) {
                        return;
                    } // Modification - Change text-sm/lg to form-group-sm/lg instead (preferred standard and simpler css/less variants)


                    for (var inputSize in FormControlSizeMarkers) {
                        if (this.$element.hasClass(inputSize)) {
                            //this.$element.removeClass(inputSize)
                            this.$bmdFormGroup.addClass(FormControlSizeMarkers[inputSize]);
                        }
                    }
                }; // ------------------------------------------------------------------------
                // private


                _proto._rejectInvalidComponentMatches = function _rejectInvalidComponentMatches() {
                    for (var _iterator2 = this.config.invalidComponentMatches, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {
                        var _ref2;

                        if (_isArray2) {
                            if (_i2 >= _iterator2.length) break;
                            _ref2 = _iterator2[_i2++];
                        } else {
                            _i2 = _iterator2.next();
                            if (_i2.done) break;
                            _ref2 = _i2.value;
                        }

                        var _otherComponent = _ref2;

                        _otherComponent.rejectMatch(this.constructor.name, this.$element);
                    }
                };

                _proto._rejectWithoutRequiredClasses = function _rejectWithoutRequiredClasses() {
                    for (var _iterator3 = this.config.requiredClasses, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {
                        var _ref3;

                        if (_isArray3) {
                            if (_i3 >= _iterator3.length) break;
                            _ref3 = _iterator3[_i3++];
                        } else {
                            _i3 = _iterator3.next();
                            if (_i3.done) break;
                            _ref3 = _i3.value;
                        }

                        var _requiredClass = _ref3;
                        var found = false; // allow one of several classes to be passed in x||y

                        if (_requiredClass.indexOf("||") !== -1) {
                            var oneOf = _requiredClass.split("||");

                            for (var _iterator4 = oneOf, _isArray4 = Array.isArray(_iterator4), _i4 = 0, _iterator4 = _isArray4 ? _iterator4 : _iterator4[Symbol.iterator]();;) {
                                var _ref4;

                                if (_isArray4) {
                                    if (_i4 >= _iterator4.length) break;
                                    _ref4 = _iterator4[_i4++];
                                } else {
                                    _i4 = _iterator4.next();
                                    if (_i4.done) break;
                                    _ref4 = _i4.value;
                                }

                                var _requiredClass3 = _ref4;

                                if (this.$element.hasClass(_requiredClass3)) {
                                    found = true;
                                    break;
                                }
                            }
                        } else if (this.$element.hasClass(_requiredClass)) {
                            found = true;
                        } // error if not found


                        if (!found) {
                            $$$1.error(this.constructor.name + " element: " + Util$2.describe(this.$element) + " requires class: " + _requiredClass);
                        }
                    }
                }; // ------------------------------------------------------------------------
                // static


                return BaseInput;
            }(Base);

        return BaseInput;
    }(jQuery);

    var BaseSelection = function($$$1) {
        /**
         * ------------------------------------------------------------------------
         * Constants
         * ------------------------------------------------------------------------
         */
        var Default = {
            label: {
                required: false // Prioritized find order for resolving the label to be used as an bmd-label if not specified in the markup
                //  - a function(thisComponent); or
                //  - a string selector used like $bmdFormGroup.find(selector)
                //
                // Note this only runs if $bmdFormGroup.find(Selector.BMD_LABEL_WILDCARD) fails to find a label (as authored in the markup)
                //
                //selectors: [
                //  `.form-control-label`, // in the case of horizontal or inline forms, this will be marked
                //  `> label` // usual case for text inputs
                //]

            }
        };
        var Selector = {
            LABEL: "label"
        };
        /**
         * ------------------------------------------------------------------------
         * Class Definition
         * ------------------------------------------------------------------------
         */

        var BaseSelection =
            /*#__PURE__*/
            function(_BaseInput) {
                _inheritsLoose(BaseSelection, _BaseInput);

                function BaseSelection($element, config, properties) {
                    var _this;

                    // properties = {inputType: checkbox, outerClass: checkbox-inline}
                    // '.checkbox|switch|radio > label > input[type=checkbox|radio]'
                    // '.${this.outerClass} > label > input[type=${this.inputType}]'
                    _this = _BaseInput.call(this, $element, $$$1.extend(true, {}, Default, config), properties) || this;

                    _this.decorateMarkup();

                    return _this;
                } // ------------------------------------------------------------------------
                // protected


                var _proto = BaseSelection.prototype;

                _proto.decorateMarkup = function decorateMarkup() {
                    var $decorator = $$$1(this.config.template);
                    this.$element.after($decorator); // initialize ripples after decorator has been inserted into DOM

                    if (this.config.ripples !== false) {
                        $decorator.bmdRipples();
                    }
                }; // Demarcation element (e.g. first child of a form-group)


                _proto.outerElement = function outerElement() {
                    // .checkbox|switch|radio > label > input[type=checkbox|radio]
                    // label.checkbox-inline > input[type=checkbox|radio]
                    // .${this.outerClass} > label > input[type=${this.inputType}]
                    return this.$element.parent().closest("." + this.outerClass);
                };

                _proto.rejectWithoutRequiredStructure = function rejectWithoutRequiredStructure() {
                    // '.checkbox|switch|radio > label > input[type=checkbox|radio]'
                    // '.${this.outerClass} > label > input[type=${this.inputType}]'
                    Util$2.assert(this.$element, !this.$element.parent().prop("tagName") === "label", this.constructor.name + "'s " + Util$2.describe(this.$element) + " parent element should be <label>.");
                    Util$2.assert(this.$element, !this.outerElement().hasClass(this.outerClass), this.constructor.name + "'s " + Util$2.describe(this.$element) + " outer element should have class " + this.outerClass + ".");
                };

                _proto.addFocusListener = function addFocusListener() {
                    var _this2 = this;

                    // checkboxes didn't appear to bubble to the document, so we'll bind these directly
                    this.$element.closest(Selector.LABEL).hover(function() {
                        _this2.addFormGroupFocus();
                    }, function() {
                        _this2.removeFormGroupFocus();
                    });
                };

                _proto.addChangeListener = function addChangeListener() {
                    var _this3 = this;

                    this.$element.change(function() {
                        _this3.$element.blur();
                    });
                }; // ------------------------------------------------------------------------
                // private


                return BaseSelection;
            }(BaseInput);

        return BaseSelection;
    }(jQuery);

    //import File from './file'
    //import Radio from './radio'
    //import Textarea from './textarea'
    //import Select from './select'

    var Checkbox = function($$$1) {
        /**
         * ------------------------------------------------------------------------
         * Constants
         * ------------------------------------------------------------------------
         */
        var NAME = "checkbox";
        var DATA_KEY = "bmd." + NAME;
        var JQUERY_NAME = "bmd" + (NAME.charAt(0).toUpperCase() + NAME.slice(1));
        var JQUERY_NO_CONFLICT = $$$1.fn[JQUERY_NAME];
        var Default = {
            template: "<span class='checkbox-decorator'><span class='check'></span></span>"
        };
        /**
         * ------------------------------------------------------------------------
         * Class Definition
         * ------------------------------------------------------------------------
         */

        var Checkbox =
            /*#__PURE__*/
            function(_BaseSelection) {
                _inheritsLoose(Checkbox, _BaseSelection);

                function Checkbox($element, config, properties) {
                    if (properties === void 0) {
                        properties = {
                            inputType: NAME,
                            outerClass: NAME
                        };
                    }

                    return _BaseSelection.call(this, $element, $$$1.extend(true, //{invalidComponentMatches: [File, Radio, Text, Textarea, Select]},
                        Default, config), properties) || this;
                }

                var _proto = Checkbox.prototype;

                _proto.dispose = function dispose(dataKey) {
                    if (dataKey === void 0) {
                        dataKey = DATA_KEY;
                    }

                    _BaseSelection.prototype.dispose.call(this, dataKey);
                };

                Checkbox.matches = function matches($element) {
                    // '.checkbox > label > input[type=checkbox]'
                    if ($element.attr("type") === "checkbox") {
                        return true;
                    }

                    return false;
                };

                Checkbox.rejectMatch = function rejectMatch(component, $element) {
                    Util$2.assert(this.$element, this.matches($element), component + " component element " + Util$2.describe($element) + " is invalid for type='checkbox'.");
                }; // ------------------------------------------------------------------------
                // protected
                // ------------------------------------------------------------------------
                // protected
                // ------------------------------------------------------------------------
                // private
                // ------------------------------------------------------------------------
                // static


                Checkbox._jQueryInterface = function _jQueryInterface(config) {
                    return this.each(function() {
                        var $element = $$$1(this);
                        var data = $element.data(DATA_KEY);

                        if (!data) {
                            data = new Checkbox($element, config);
                            $element.data(DATA_KEY, data);
                        }
                    });
                };

                return Checkbox;
            }(BaseSelection);
        /**
         * ------------------------------------------------------------------------
         * jQuery
         * ------------------------------------------------------------------------
         */


        $$$1.fn[JQUERY_NAME] = Checkbox._jQueryInterface;
        $$$1.fn[JQUERY_NAME].Constructor = Checkbox;

        $$$1.fn[JQUERY_NAME].noConflict = function() {
            $$$1.fn[JQUERY_NAME] = JQUERY_NO_CONFLICT;
            return Checkbox._jQueryInterface;
        };

        return Checkbox;
    }(jQuery);

    var CheckboxInline = function($$$1) {
        /**
         * ------------------------------------------------------------------------
         * Constants
         * ------------------------------------------------------------------------
         */
        var NAME = "checkboxInline";
        var DATA_KEY = "bmd." + NAME;
        var JQUERY_NAME = "bmd" + (NAME.charAt(0).toUpperCase() + NAME.slice(1));
        var JQUERY_NO_CONFLICT = $$$1.fn[JQUERY_NAME];
        var Default = {
            bmdFormGroup: {
                create: false,
                // no bmd-form-group creation if form-group not present. It messes with the layout.
                required: false
            }
        };
        /**
         * ------------------------------------------------------------------------
         * Class Definition
         * ------------------------------------------------------------------------
         */

        var CheckboxInline =
            /*#__PURE__*/
            function(_Checkbox) {
                _inheritsLoose(CheckboxInline, _Checkbox);

                function CheckboxInline($element, config, properties) {
                    if (properties === void 0) {
                        properties = {
                            inputType: "checkbox",
                            outerClass: "checkbox-inline"
                        };
                    }

                    return _Checkbox.call(this, $element, $$$1.extend(true, {}, Default, config), properties) || this;
                }

                var _proto = CheckboxInline.prototype;

                _proto.dispose = function dispose() {
                    _Checkbox.prototype.dispose.call(this, DATA_KEY);
                }; //static matches($element) {
                //  // '.checkbox-inline > input[type=checkbox]'
                //  if ($element.attr('type') === 'checkbox') {
                //    return true
                //  }
                //  return false
                //}
                //
                //static rejectMatch(component, $element) {
                //  Util.assert(this.$element, this.matches($element), `${component} component element ${Util.describe($element)} is invalid for type='checkbox'.`)
                //}
                // ------------------------------------------------------------------------
                // protected
                // ------------------------------------------------------------------------
                // protected
                // ------------------------------------------------------------------------
                // private
                // ------------------------------------------------------------------------
                // static


                CheckboxInline._jQueryInterface = function _jQueryInterface(config) {
                    return this.each(function() {
                        var $element = $$$1(this);
                        var data = $element.data(DATA_KEY);

                        if (!data) {
                            data = new CheckboxInline($element, config);
                            $element.data(DATA_KEY, data);
                        }
                    });
                };

                return CheckboxInline;
            }(Checkbox);
        /**
         * ------------------------------------------------------------------------
         * jQuery
         * ------------------------------------------------------------------------
         */


        $$$1.fn[JQUERY_NAME] = CheckboxInline._jQueryInterface;
        $$$1.fn[JQUERY_NAME].Constructor = CheckboxInline;

        $$$1.fn[JQUERY_NAME].noConflict = function() {
            $$$1.fn[JQUERY_NAME] = JQUERY_NO_CONFLICT;
            return CheckboxInline._jQueryInterface;
        };

        return CheckboxInline;
    }(jQuery);

    var CollapseInline = function($$$1) {
        /**
         * ------------------------------------------------------------------------
         * Constants
         * ------------------------------------------------------------------------
         */
        var NAME = "collapseInline";
        var DATA_KEY = "bmd." + NAME;
        var JQUERY_NAME = "bmd" + (NAME.charAt(0).toUpperCase() + NAME.slice(1));
        var JQUERY_NO_CONFLICT = $$$1.fn[JQUERY_NAME];
        var Selector = {
            ANY_INPUT: "input, select, textarea"
        };
        var ClassName = {
            IN: "in",
            COLLAPSE: "collapse",
            COLLAPSING: "collapsing",
            COLLAPSED: "collapsed",
            WIDTH: "width"
        };
        var Default = {};
        /**
         * ------------------------------------------------------------------------
         * Class Definition
         * ------------------------------------------------------------------------
         */

        var CollapseInline =
            /*#__PURE__*/
            function(_Base) {
                _inheritsLoose(CollapseInline, _Base);

                // $element is expected to be the trigger
                //  i.e. <button class="btn bmd-btn-icon" for="search" data-toggle="collapse" data-target="#search-field" aria-expanded="false" aria-controls="search-field">
                function CollapseInline($element, config) {
                    var _this;

                    _this = _Base.call(this, $element, $$$1.extend(true, {}, Default, config)) || this;
                    _this.$bmdFormGroup = _this.findMdbFormGroup(true);
                    var collapseSelector = $element.data("target");
                    _this.$collapse = $$$1(collapseSelector);
                    Util$2.assert($element, _this.$collapse.length === 0, "Cannot find collapse target for " + Util$2.describe($element));
                    Util$2.assert(_this.$collapse, !_this.$collapse.hasClass(ClassName.COLLAPSE), Util$2.describe(_this.$collapse) + " is expected to have the '" + ClassName.COLLAPSE + "' class.  It is being targeted by " + Util$2.describe($element)); // find the first input for focusing

                    var $inputs = _this.$bmdFormGroup.find(Selector.ANY_INPUT);

                    if ($inputs.length > 0) {
                        _this.$input = $inputs.first();
                    } // automatically add the marker class to collapse width instead of height - nice convenience because it is easily forgotten


                    if (!_this.$collapse.hasClass(ClassName.WIDTH)) {
                        _this.$collapse.addClass(ClassName.WIDTH);
                    }

                    if (_this.$input) {
                        // add a listener to set focus
                        _this.$collapse.on("shown.bs.collapse", function() {
                            _this.$input.focus();
                        }); // add a listener to collapse field


                        _this.$input.blur(function() {
                            _this.$collapse.collapse("hide");
                        });
                    }

                    return _this;
                }

                var _proto = CollapseInline.prototype;

                _proto.dispose = function dispose() {
                    _Base.prototype.dispose.call(this, DATA_KEY);

                    this.$bmdFormGroup = null;
                    this.$collapse = null;
                    this.$input = null;
                }; // ------------------------------------------------------------------------
                // private
                // ------------------------------------------------------------------------
                // static


                CollapseInline._jQueryInterface = function _jQueryInterface(config) {
                    return this.each(function() {
                        var $element = $$$1(this);
                        var data = $element.data(DATA_KEY);

                        if (!data) {
                            data = new CollapseInline($element, config);
                            $element.data(DATA_KEY, data);
                        }
                    });
                };

                return CollapseInline;
            }(Base);
        /**
         * ------------------------------------------------------------------------
         * jQuery
         * ------------------------------------------------------------------------
         */


        $$$1.fn[JQUERY_NAME] = CollapseInline._jQueryInterface;
        $$$1.fn[JQUERY_NAME].Constructor = CollapseInline;

        $$$1.fn[JQUERY_NAME].noConflict = function() {
            $$$1.fn[JQUERY_NAME] = JQUERY_NO_CONFLICT;
            return CollapseInline._jQueryInterface;
        };

        return CollapseInline;
    }(jQuery);

    //import Radio from './radio'
    //import Switch from './switch'
    //import Text from './text'
    //import Textarea from './textarea'
    //import Select from './select'

    var File = function($$$1) {
        /**
         * ------------------------------------------------------------------------
         * Constants
         * ------------------------------------------------------------------------
         */
        var NAME = "file";
        var DATA_KEY = "bmd." + NAME;
        var JQUERY_NAME = "bmd" + (NAME.charAt(0).toUpperCase() + NAME.slice(1));
        var JQUERY_NO_CONFLICT = $$$1.fn[JQUERY_NAME];
        var Default = {};
        var ClassName = {
            FILE: NAME,
            IS_FILE: "is-file"
        };
        var Selector = {
            FILENAMES: "input.form-control[readonly]"
        };
        /**
         * ------------------------------------------------------------------------
         * Class Definition
         * ------------------------------------------------------------------------
         */

        var File =
            /*#__PURE__*/
            function(_BaseInput) {
                _inheritsLoose(File, _BaseInput);

                function File($element, config) {
                    var _this;

                    _this = _BaseInput.call(this, $element, $$$1.extend(true, //{invalidComponentMatches: [Checkbox, Radio, Text, Textarea, Select, Switch]},
                        Default, config)) || this;

                    _this.$bmdFormGroup.addClass(ClassName.IS_FILE);

                    return _this;
                }

                var _proto = File.prototype;

                _proto.dispose = function dispose() {
                    _BaseInput.prototype.dispose.call(this, DATA_KEY);
                };

                File.matches = function matches($element) {
                    if ($element.attr("type") === "file") {
                        return true;
                    }

                    return false;
                };

                File.rejectMatch = function rejectMatch(component, $element) {
                    Util$2.assert(this.$element, this.matches($element), component + " component element " + Util$2.describe($element) + " is invalid for type='file'.");
                }; // ------------------------------------------------------------------------
                // protected
                // Demarcation element (e.g. first child of a form-group)


                _proto.outerElement = function outerElement() {
                    // label.file > input[type=file]
                    return this.$element.parent().closest("." + ClassName.FILE);
                };

                _proto.rejectWithoutRequiredStructure = function rejectWithoutRequiredStructure() {
                    // label.file > input[type=file]
                    Util$2.assert(this.$element, !this.outerElement().prop("tagName") === "label", this.constructor.name + "'s " + Util$2.describe(this.$element) + " parent element " + Util$2.describe(this.outerElement()) + " should be <label>.");
                    Util$2.assert(this.$element, !this.outerElement().hasClass(ClassName.FILE), this.constructor.name + "'s " + Util$2.describe(this.$element) + " parent element " + Util$2.describe(this.outerElement()) + " should have class ." + ClassName.FILE + ".");
                };

                _proto.addFocusListener = function addFocusListener() {
                    var _this2 = this;

                    this.$bmdFormGroup.on("focus", function() {
                        _this2.addFormGroupFocus();
                    }).on("blur", function() {
                        _this2.removeFormGroupFocus();
                    });
                };

                _proto.addChangeListener = function addChangeListener() {
                    var _this3 = this;

                    // set the fileinput readonly field with the name of the file
                    this.$element.on("change", function() {
                        var value = "";
                        $$$1.each(_this3.$element.files, function(i, file) {
                            value += file.name + "  , ";
                        });
                        value = value.substring(0, value.length - 2);

                        if (value) {
                            _this3.addIsFilled();
                        } else {
                            _this3.removeIsFilled();
                        }

                        _this3.$bmdFormGroup.find(Selector.FILENAMES).val(value);
                    });
                }; // ------------------------------------------------------------------------
                // private
                // ------------------------------------------------------------------------
                // static


                File._jQueryInterface = function _jQueryInterface(config) {
                    return this.each(function() {
                        var $element = $$$1(this);
                        var data = $element.data(DATA_KEY);

                        if (!data) {
                            data = new File($element, config);
                            $element.data(DATA_KEY, data);
                        }
                    });
                };

                return File;
            }(BaseInput);
        /**
         * ------------------------------------------------------------------------
         * jQuery
         * ------------------------------------------------------------------------
         */


        $$$1.fn[JQUERY_NAME] = File._jQueryInterface;
        $$$1.fn[JQUERY_NAME].Constructor = File;

        $$$1.fn[JQUERY_NAME].noConflict = function() {
            $$$1.fn[JQUERY_NAME] = JQUERY_NO_CONFLICT;
            return File._jQueryInterface;
        };

        return File;
    }(jQuery);

    //import File from './file'
    //import Checkbox from './checkbox'
    //import Switch from './switch'

    var Radio = function($$$1) {
        /**
         * ------------------------------------------------------------------------
         * Constants
         * ------------------------------------------------------------------------
         */
        var NAME = "radio";
        var DATA_KEY = "bmd." + NAME;
        var JQUERY_NAME = "bmd" + (NAME.charAt(0).toUpperCase() + NAME.slice(1));
        var JQUERY_NO_CONFLICT = $$$1.fn[JQUERY_NAME];
        var Default = {
            template: "<span class='bmd-radio'></span>"
        };
        /**
         * ------------------------------------------------------------------------
         * Class Definition
         * ------------------------------------------------------------------------
         */

        var Radio =
            /*#__PURE__*/
            function(_BaseSelection) {
                _inheritsLoose(Radio, _BaseSelection);

                function Radio($element, config, properties) {
                    if (properties === void 0) {
                        properties = {
                            inputType: NAME,
                            outerClass: NAME
                        };
                    }

                    return _BaseSelection.call(this, $element, $$$1.extend(true, //{invalidComponentMatches: [Checkbox, File, Switch, Text]},
                        Default, config), properties) || this;
                }

                var _proto = Radio.prototype;

                _proto.dispose = function dispose(dataKey) {
                    if (dataKey === void 0) {
                        dataKey = DATA_KEY;
                    }

                    _BaseSelection.prototype.dispose.call(this, dataKey);
                };

                Radio.matches = function matches($element) {
                    // '.radio > label > input[type=radio]'
                    if ($element.attr("type") === "radio") {
                        return true;
                    }

                    return false;
                };

                Radio.rejectMatch = function rejectMatch(component, $element) {
                    Util$2.assert(this.$element, this.matches($element), component + " component element " + Util$2.describe($element) + " is invalid for type='radio'.");
                }; // ------------------------------------------------------------------------
                // protected
                //decorateMarkup() {
                //  this.$element.after(this.config.template)
                //}
                // ------------------------------------------------------------------------
                // private
                // ------------------------------------------------------------------------
                // static


                Radio._jQueryInterface = function _jQueryInterface(config) {
                    return this.each(function() {
                        var $element = $$$1(this);
                        var data = $element.data(DATA_KEY);

                        if (!data) {
                            data = new Radio($element, config);
                            $element.data(DATA_KEY, data);
                        }
                    });
                };

                return Radio;
            }(BaseSelection);
        /**
         * ------------------------------------------------------------------------
         * jQuery
         * ------------------------------------------------------------------------
         */


        $$$1.fn[JQUERY_NAME] = Radio._jQueryInterface;
        $$$1.fn[JQUERY_NAME].Constructor = Radio;

        $$$1.fn[JQUERY_NAME].noConflict = function() {
            $$$1.fn[JQUERY_NAME] = JQUERY_NO_CONFLICT;
            return Radio._jQueryInterface;
        };

        return Radio;
    }(jQuery);

    var RadioInline = function($$$1) {
        /**
         * ------------------------------------------------------------------------
         * Constants
         * ------------------------------------------------------------------------
         */
        var NAME = "radioInline";
        var DATA_KEY = "bmd." + NAME;
        var JQUERY_NAME = "bmd" + (NAME.charAt(0).toUpperCase() + NAME.slice(1));
        var JQUERY_NO_CONFLICT = $$$1.fn[JQUERY_NAME];
        var Default = {
            bmdFormGroup: {
                create: false,
                // no bmd-form-group creation if form-group not present. It messes with the layout.
                required: false
            }
        };
        /**
         * ------------------------------------------------------------------------
         * Class Definition
         * ------------------------------------------------------------------------
         */

        var RadioInline =
            /*#__PURE__*/
            function(_Radio) {
                _inheritsLoose(RadioInline, _Radio);

                function RadioInline($element, config, properties) {
                    if (properties === void 0) {
                        properties = {
                            inputType: "radio",
                            outerClass: "radio-inline"
                        };
                    }

                    return _Radio.call(this, $element, $$$1.extend(true, {}, Default, config), properties) || this;
                }

                var _proto = RadioInline.prototype;

                _proto.dispose = function dispose() {
                    _Radio.prototype.dispose.call(this, DATA_KEY);
                }; // ------------------------------------------------------------------------
                // protected
                // ------------------------------------------------------------------------
                // protected
                // ------------------------------------------------------------------------
                // private
                // ------------------------------------------------------------------------
                // static


                RadioInline._jQueryInterface = function _jQueryInterface(config) {
                    return this.each(function() {
                        var $element = $$$1(this);
                        var data = $element.data(DATA_KEY);

                        if (!data) {
                            data = new RadioInline($element, config);
                            $element.data(DATA_KEY, data);
                        }
                    });
                };

                return RadioInline;
            }(Radio);
        /**
         * ------------------------------------------------------------------------
         * jQuery
         * ------------------------------------------------------------------------
         */


        $$$1.fn[JQUERY_NAME] = RadioInline._jQueryInterface;
        $$$1.fn[JQUERY_NAME].Constructor = RadioInline;

        $$$1.fn[JQUERY_NAME].noConflict = function() {
            $$$1.fn[JQUERY_NAME] = JQUERY_NO_CONFLICT;
            return RadioInline._jQueryInterface;
        };

        return RadioInline;
    }(jQuery);

    var BaseFormControl = function($$$1) {
        /**
         * ------------------------------------------------------------------------
         * Constants
         * ------------------------------------------------------------------------
         */
        var Default = {
            requiredClasses: ["form-control"]
        };
        /**
         * ------------------------------------------------------------------------
         * Class Definition
         * ------------------------------------------------------------------------
         */

        var BaseFormControl =
            /*#__PURE__*/
            function(_BaseInput) {
                _inheritsLoose(BaseFormControl, _BaseInput);

                function BaseFormControl($element, config) {
                    var _this;

                    _this = _BaseInput.call(this, $element, $$$1.extend(true, Default, config)) || this; // Initially mark as empty

                    if (_this.isEmpty()) {
                        _this.removeIsFilled();
                    }

                    return _this;
                }

                return BaseFormControl;
            }(BaseInput);

        return BaseFormControl;
    }(jQuery);

    //import File from './file'
    //import Radio from './radio'
    //import Switch from './switch'
    //import Text from './text'
    //import Textarea from './textarea'

    var Select = function($$$1) {
        /**
         * ------------------------------------------------------------------------
         * Constants
         * ------------------------------------------------------------------------
         */
        var NAME = "select";
        var DATA_KEY = "bmd." + NAME;
        var JQUERY_NAME = "bmd" + (NAME.charAt(0).toUpperCase() + NAME.slice(1));
        var JQUERY_NO_CONFLICT = $$$1.fn[JQUERY_NAME];
        var Default = {
            requiredClasses: ["form-control||custom-select"]
        };
        /**
         * ------------------------------------------------------------------------
         * Class Definition
         * ------------------------------------------------------------------------
         */

        var Select =
            /*#__PURE__*/
            function(_BaseFormControl) {
                _inheritsLoose(Select, _BaseFormControl);

                function Select($element, config) {
                    var _this;

                    _this = _BaseFormControl.call(this, $element, $$$1.extend(true, //{invalidComponentMatches: [Checkbox, File, Radio, Switch, Text, Textarea]},
                        Default, config)) || this; // floating labels will cover the options, so trigger them to be above (if used)

                    _this.addIsFilled();

                    return _this;
                }

                var _proto = Select.prototype;

                _proto.dispose = function dispose() {
                    _BaseFormControl.prototype.dispose.call(this, DATA_KEY);
                };

                Select.matches = function matches($element) {
                    if ($element.prop("tagName") === "select") {
                        return true;
                    }

                    return false;
                };

                Select.rejectMatch = function rejectMatch(component, $element) {
                    Util$2.assert(this.$element, this.matches($element), component + " component element " + Util$2.describe($element) + " is invalid for <select>.");
                }; // ------------------------------------------------------------------------
                // protected
                // ------------------------------------------------------------------------
                // private
                // ------------------------------------------------------------------------
                // static


                Select._jQueryInterface = function _jQueryInterface(config) {
                    return this.each(function() {
                        var $element = $$$1(this);
                        var data = $element.data(DATA_KEY);

                        if (!data) {
                            data = new Select($element, config);
                            $element.data(DATA_KEY, data);
                        }
                    });
                };

                return Select;
            }(BaseFormControl);
        /**
         * ------------------------------------------------------------------------
         * jQuery
         * ------------------------------------------------------------------------
         */


        $$$1.fn[JQUERY_NAME] = Select._jQueryInterface;
        $$$1.fn[JQUERY_NAME].Constructor = Select;

        $$$1.fn[JQUERY_NAME].noConflict = function() {
            $$$1.fn[JQUERY_NAME] = JQUERY_NO_CONFLICT;
            return Select._jQueryInterface;
        };

        return Select;
    }(jQuery);

    var Switch = function($$$1) {
        /**
         * ------------------------------------------------------------------------
         * Constants
         * ------------------------------------------------------------------------
         */
        var NAME = "switch";
        var DATA_KEY = "bmd." + NAME;
        var JQUERY_NAME = "bmd" + (NAME.charAt(0).toUpperCase() + NAME.slice(1));
        var JQUERY_NO_CONFLICT = $$$1.fn[JQUERY_NAME];
        var Default = {
            template: "<span class='bmd-switch-track'></span>"
        };
        /**
         * ------------------------------------------------------------------------
         * Class Definition
         * ------------------------------------------------------------------------
         */

        var Switch =
            /*#__PURE__*/
            function(_Checkbox) {
                _inheritsLoose(Switch, _Checkbox);

                function Switch($element, config, properties) {
                    if (properties === void 0) {
                        properties = {
                            inputType: "checkbox",
                            outerClass: "switch"
                        };
                    }

                    return _Checkbox.call(this, $element, $$$1.extend(true, {}, Default, config), properties) || this; // selector: '.switch > label > input[type=checkbox]'
                }

                var _proto = Switch.prototype;

                _proto.dispose = function dispose() {
                    _Checkbox.prototype.dispose.call(this, DATA_KEY);
                }; // ------------------------------------------------------------------------
                // protected
                // ------------------------------------------------------------------------
                // private
                // ------------------------------------------------------------------------
                // static


                Switch._jQueryInterface = function _jQueryInterface(config) {
                    return this.each(function() {
                        var $element = $$$1(this);
                        var data = $element.data(DATA_KEY);

                        if (!data) {
                            data = new Switch($element, config);
                            $element.data(DATA_KEY, data);
                        }
                    });
                };

                return Switch;
            }(Checkbox);
        /**
         * ------------------------------------------------------------------------
         * jQuery
         * ------------------------------------------------------------------------
         */


        $$$1.fn[JQUERY_NAME] = Switch._jQueryInterface;
        $$$1.fn[JQUERY_NAME].Constructor = Switch;

        $$$1.fn[JQUERY_NAME].noConflict = function() {
            $$$1.fn[JQUERY_NAME] = JQUERY_NO_CONFLICT;
            return Switch._jQueryInterface;
        };

        return Switch;
    }(jQuery);

    //import File from './file'
    //import Radio from './radio'
    //import Switch from './switch'
    //import Textarea from './textarea'
    //import Select from './select'

    var Text = function($$$1) {
        /**
         * ------------------------------------------------------------------------
         * Constants
         * ------------------------------------------------------------------------
         */
        var NAME = "text";
        var DATA_KEY = "bmd." + NAME;
        var JQUERY_NAME = "bmd" + (NAME.charAt(0).toUpperCase() + NAME.slice(1));
        var JQUERY_NO_CONFLICT = $$$1.fn[JQUERY_NAME];
        var Default = {};
        /**
         * ------------------------------------------------------------------------
         * Class Definition
         * ------------------------------------------------------------------------
         */

        var Text =
            /*#__PURE__*/
            function(_BaseFormControl) {
                _inheritsLoose(Text, _BaseFormControl);

                function Text($element, config) {
                    return _BaseFormControl.call(this, $element, $$$1.extend(true, //{invalidComponentMatches: [Checkbox, File, Radio, Switch, Select, Textarea]},
                        Default, config)) || this;
                }

                var _proto = Text.prototype;

                _proto.dispose = function dispose(dataKey) {
                    if (dataKey === void 0) {
                        dataKey = DATA_KEY;
                    }

                    _BaseFormControl.prototype.dispose.call(this, dataKey);
                };

                Text.matches = function matches($element) {
                    if ($element.attr("type") === "text") {
                        return true;
                    }

                    return false;
                };

                Text.rejectMatch = function rejectMatch(component, $element) {
                    Util$2.assert(this.$element, this.matches($element), component + " component element " + Util$2.describe($element) + " is invalid for type='text'.");
                }; // ------------------------------------------------------------------------
                // protected
                // ------------------------------------------------------------------------
                // private
                // ------------------------------------------------------------------------
                // static


                Text._jQueryInterface = function _jQueryInterface(config) {
                    return this.each(function() {
                        var $element = $$$1(this);
                        var data = $element.data(DATA_KEY);

                        if (!data) {
                            data = new Text($element, config);
                            $element.data(DATA_KEY, data);
                        }
                    });
                };

                return Text;
            }(BaseFormControl);
        /**
         * ------------------------------------------------------------------------
         * jQuery
         * ------------------------------------------------------------------------
         */


        $$$1.fn[JQUERY_NAME] = Text._jQueryInterface;
        $$$1.fn[JQUERY_NAME].Constructor = Text;

        $$$1.fn[JQUERY_NAME].noConflict = function() {
            $$$1.fn[JQUERY_NAME] = JQUERY_NO_CONFLICT;
            return Text._jQueryInterface;
        };

        return Text;
    }(jQuery);

    //import File from './file'
    //import Radio from './radio'
    //import Switch from './switch'
    //import Text from './text'
    //import Select from './select'

    var Textarea = function($$$1) {
        /**
         * ------------------------------------------------------------------------
         * Constants
         * ------------------------------------------------------------------------
         */
        var NAME = "textarea";
        var DATA_KEY = "bmd." + NAME;
        var JQUERY_NAME = "bmd" + (NAME.charAt(0).toUpperCase() + NAME.slice(1));
        var JQUERY_NO_CONFLICT = $$$1.fn[JQUERY_NAME];
        var Default = {};
        /**
         * ------------------------------------------------------------------------
         * Class Definition
         * ------------------------------------------------------------------------
         */

        var Textarea =
            /*#__PURE__*/
            function(_BaseFormControl) {
                _inheritsLoose(Textarea, _BaseFormControl);

                function Textarea($element, config) {
                    return _BaseFormControl.call(this, $element, $$$1.extend(true, //{invalidComponentMatches: [Checkbox, File, Radio, Text, Select, Switch]},
                        Default, config)) || this;
                }

                var _proto = Textarea.prototype;

                _proto.dispose = function dispose() {
                    _BaseFormControl.prototype.dispose.call(this, DATA_KEY);
                };

                Textarea.matches = function matches($element) {
                    if ($element.prop("tagName") === "textarea") {
                        return true;
                    }

                    return false;
                };

                Textarea.rejectMatch = function rejectMatch(component, $element) {
                    Util$2.assert(this.$element, this.matches($element), component + " component element " + Util$2.describe($element) + " is invalid for <textarea>.");
                }; // ------------------------------------------------------------------------
                // protected
                // ------------------------------------------------------------------------
                // private
                // ------------------------------------------------------------------------
                // static


                Textarea._jQueryInterface = function _jQueryInterface(config) {
                    return this.each(function() {
                        var $element = $$$1(this);
                        var data = $element.data(DATA_KEY);

                        if (!data) {
                            data = new Textarea($element, config);
                            $element.data(DATA_KEY, data);
                        }
                    });
                };

                return Textarea;
            }(BaseFormControl);
        /**
         * ------------------------------------------------------------------------
         * jQuery
         * ------------------------------------------------------------------------
         */


        $$$1.fn[JQUERY_NAME] = Textarea._jQueryInterface;
        $$$1.fn[JQUERY_NAME].Constructor = Textarea;

        $$$1.fn[JQUERY_NAME].noConflict = function() {
            $$$1.fn[JQUERY_NAME] = JQUERY_NO_CONFLICT;
            return Textarea._jQueryInterface;
        };

        return Textarea;
    }(jQuery);

    /* global Popper */

    /**
     * This is a copy of the Bootstrap's original dropdown.js, with the only addition
     * of two new classes: 'showing' and 'hiding', used to handle animaitons.
     */
    /**
     * --------------------------------------------------------------------------
     * Bootstrap (v4.0.0-beta): dropdown.js
     * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
     * --------------------------------------------------------------------------
     */

    var Dropdown = function($$$1) {
        /**
         * Check for Popper dependency
         * Popper - https://popper.js.org
         */
        if (typeof Popper === 'undefined') {
            throw new Error('Bootstrap dropdown require Popper.js (https://popper.js.org)');
        }
        /**
         * ------------------------------------------------------------------------
         * Constants
         * ------------------------------------------------------------------------
         */


        var NAME = 'dropdown';
        var VERSION = '4.0.0-beta';
        var DATA_KEY = 'bs.dropdown';
        var EVENT_KEY = "." + DATA_KEY;
        var DATA_API_KEY = '.data-api';
        var JQUERY_NO_CONFLICT = $$$1.fn[NAME];
        var ESCAPE_KEYCODE = 27; // KeyboardEvent.which value for Escape (Esc) key

        var SPACE_KEYCODE = 32; // KeyboardEvent.which value for space key

        var TAB_KEYCODE = 9; // KeyboardEvent.which value for tab key

        var ARROW_UP_KEYCODE = 38; // KeyboardEvent.which value for up arrow key

        var ARROW_DOWN_KEYCODE = 40; // KeyboardEvent.which value for down arrow key

        var RIGHT_MOUSE_BUTTON_WHICH = 3; // MouseEvent.which value for the right button (assuming a right-handed mouse)

        var REGEXP_KEYDOWN = new RegExp(ARROW_UP_KEYCODE + "|" + ARROW_DOWN_KEYCODE + "|" + ESCAPE_KEYCODE);
        var Event = {
            HIDE: "hide" + EVENT_KEY,
            HIDDEN: "hidden" + EVENT_KEY,
            SHOW: "show" + EVENT_KEY,
            SHOWN: "shown" + EVENT_KEY,
            CLICK: "click" + EVENT_KEY,
            CLICK_DATA_API: "click" + EVENT_KEY + DATA_API_KEY,
            KEYDOWN_DATA_API: "keydown" + EVENT_KEY + DATA_API_KEY,
            KEYUP_DATA_API: "keyup" + EVENT_KEY + DATA_API_KEY,
            TRANSITION_END: 'transitionend webkitTransitionEnd oTransitionEnd animationend webkitAnimationEnd oAnimationEnd'
        };
        var ClassName = {
            DISABLED: 'disabled',
            SHOW: 'show',
            SHOWING: 'showing',
            HIDING: 'hiding',
            DROPUP: 'dropup',
            MENURIGHT: 'dropdown-menu-right',
            MENULEFT: 'dropdown-menu-left'
        };
        var Selector = {
            DATA_TOGGLE: '[data-toggle="dropdown"]',
            FORM_CHILD: '.dropdown form',
            MENU: '.dropdown-menu',
            NAVBAR_NAV: '.navbar-nav',
            VISIBLE_ITEMS: '.dropdown-menu .dropdown-item:not(.disabled)'
        };
        var AttachmentMap = {
            TOP: 'top-start',
            TOPEND: 'top-end',
            BOTTOM: 'bottom-start',
            BOTTOMEND: 'bottom-end'
        };
        var Default = {
            placement: AttachmentMap.BOTTOM,
            offset: 0,
            flip: true
        };
        var DefaultType = {
            placement: 'string',
            offset: '(number|string)',
            flip: 'boolean'
            /**
             * ------------------------------------------------------------------------
             * Class Definition
             * ------------------------------------------------------------------------
             */

        };

        var Dropdown =
            /*#__PURE__*/
            function() {
                function Dropdown(element, config) {
                    this._element = element;
                    this._popper = null;
                    this._config = this._getConfig(config);
                    this._menu = this._getMenuElement();
                    this._inNavbar = this._detectNavbar();

                    this._addEventListeners();
                } // getters


                var _proto = Dropdown.prototype;

                // public
                _proto.toggle = function toggle() {
                    var _this = this;

                    if (this._element.disabled || $$$1(this._element).hasClass(ClassName.DISABLED)) {
                        return;
                    }

                    var parent = Dropdown._getParentFromElement(this._element);

                    var isActive = $$$1(this._menu).hasClass(ClassName.SHOW);

                    Dropdown._clearMenus();

                    if (isActive) {
                        return;
                    }

                    var relatedTarget = {
                        relatedTarget: this._element
                    };
                    var showEvent = $$$1.Event(Event.SHOW, relatedTarget);
                    $$$1(parent).trigger(showEvent);

                    if (showEvent.isDefaultPrevented()) {
                        return;
                    }

                    var element = this._element; // for dropup with alignment we use the parent as popper container

                    if ($$$1(parent).hasClass(ClassName.DROPUP)) {
                        if ($$$1(this._menu).hasClass(ClassName.MENULEFT) || $$$1(this._menu).hasClass(ClassName.MENURIGHT)) {
                            element = parent;
                        }
                    }

                    this._popper = new Popper(element, this._menu, this._getPopperConfig()); // if this is a touch-enabled device we add extra
                    // empty mouseover listeners to the body's immediate children;
                    // only needed because of broken event delegation on iOS
                    // https://www.quirksmode.org/blog/archives/2014/02/mouse_event_bub.html

                    if ('ontouchstart' in document.documentElement && !$$$1(parent).closest(Selector.NAVBAR_NAV).length) {
                        $$$1('body').children().on('mouseover', null, $$$1.noop);
                    }

                    this._element.focus();

                    this._element.setAttribute('aria-expanded', true);

                    $$$1(this._menu).one(Event.TRANSITION_END, function() {
                        $$$1(parent).trigger($$$1.Event(Event.SHOWN, relatedTarget));
                        $$$1(_this._menu).removeClass(ClassName.SHOWING);
                    });
                    $$$1(this._menu).addClass(ClassName.SHOW + " " + ClassName.SHOWING);
                    $$$1(parent).addClass(ClassName.SHOW);
                };

                _proto.dispose = function dispose() {
                    $$$1.removeData(this._element, DATA_KEY);
                    $$$1(this._element).off(EVENT_KEY);
                    this._element = null;
                    this._menu = null;

                    if (this._popper !== null) {
                        this._popper.destroy();
                    }

                    this._popper = null;
                };

                _proto.update = function update() {
                    this._inNavbar = this._detectNavbar();

                    if (this._popper !== null) {
                        this._popper.scheduleUpdate();
                    }
                }; // private


                _proto._addEventListeners = function _addEventListeners() {
                    var _this2 = this;

                    $$$1(this._element).on(Event.CLICK, function(event) {
                        event.preventDefault();
                        event.stopPropagation();

                        _this2.toggle();
                    });
                };

                _proto._getConfig = function _getConfig(config) {
                    var elementData = $$$1(this._element).data();

                    if (elementData.placement !== undefined) {
                        elementData.placement = AttachmentMap[elementData.placement.toUpperCase()];
                    }

                    config = $$$1.extend({}, this.constructor.Default, $$$1(this._element).data(), config);
                    Util.typeCheckConfig(NAME, config, this.constructor.DefaultType);
                    return config;
                };

                _proto._getMenuElement = function _getMenuElement() {
                    if (!this._menu) {
                        var parent = Dropdown._getParentFromElement(this._element);

                        this._menu = $$$1(parent).find(Selector.MENU)[0];
                    }

                    return this._menu;
                };

                _proto._getPlacement = function _getPlacement() {
                    var $parentDropdown = $$$1(this._element).parent();
                    var placement = this._config.placement; // Handle dropup

                    if ($parentDropdown.hasClass(ClassName.DROPUP) || this._config.placement === AttachmentMap.TOP) {
                        placement = AttachmentMap.TOP;

                        if ($$$1(this._menu).hasClass(ClassName.MENURIGHT)) {
                            placement = AttachmentMap.TOPEND;
                        }
                    } else if ($$$1(this._menu).hasClass(ClassName.MENURIGHT)) {
                        placement = AttachmentMap.BOTTOMEND;
                    }

                    return placement;
                };

                _proto._detectNavbar = function _detectNavbar() {
                    return $$$1(this._element).closest('.navbar').length > 0;
                };

                _proto._getPopperConfig = function _getPopperConfig() {
                    var popperConfig = {
                        placement: this._getPlacement(),
                        modifiers: {
                            offset: {
                                offset: this._config.offset
                            },
                            flip: {
                                enabled: this._config.flip
                            }
                        } // Disable Popper.js for Dropdown in Navbar

                    };

                    if (this._inNavbar) {
                        popperConfig.modifiers.applyStyle = {
                            enabled: !this._inNavbar
                        };
                    }

                    return popperConfig;
                }; // static


                Dropdown._jQueryInterface = function _jQueryInterface(config) {
                    return this.each(function() {
                        var data = $$$1(this).data(DATA_KEY);

                        var _config = typeof config === 'object' ? config : null;

                        if (!data) {
                            data = new Dropdown(this, _config);
                            $$$1(this).data(DATA_KEY, data);
                        }

                        if (typeof config === 'string') {
                            if (data[config] === undefined) {
                                throw new Error("No method named \"" + config + "\"");
                            }

                            data[config]();
                        }
                    });
                };

                Dropdown._clearMenus = function _clearMenus(event) {
                    if (event && (event.which === RIGHT_MOUSE_BUTTON_WHICH || event.type === 'keyup' && event.which !== TAB_KEYCODE)) {
                        return;
                    }

                    var toggles = $$$1.makeArray($$$1(Selector.DATA_TOGGLE));

                    var _loop = function _loop(i) {
                        var parent = Dropdown._getParentFromElement(toggles[i]);

                        var context = $$$1(toggles[i]).data(DATA_KEY);
                        var relatedTarget = {
                            relatedTarget: toggles[i]
                        };

                        if (!context) {
                            return "continue";
                        }

                        var dropdownMenu = context._menu;

                        if (!$$$1(parent).hasClass(ClassName.SHOW)) {
                            return "continue";
                        }

                        if (event && (event.type === 'click' && /input|textarea/i.test(event.target.tagName) || event.type === 'keyup' && event.which === TAB_KEYCODE) && $$$1.contains(parent, event.target)) {
                            return "continue";
                        }

                        var hideEvent = $$$1.Event(Event.HIDE, relatedTarget);
                        $$$1(parent).trigger(hideEvent);

                        if (hideEvent.isDefaultPrevented()) {
                            return "continue";
                        } // if this is a touch-enabled device we remove the extra
                        // empty mouseover listeners we added for iOS support


                        if ('ontouchstart' in document.documentElement) {
                            $$$1('body').children().off('mouseover', null, $$$1.noop);
                        }

                        toggles[i].setAttribute('aria-expanded', 'false');
                        $$$1(dropdownMenu).addClass(ClassName.HIDING).removeClass(ClassName.SHOW);
                        $$$1(parent).removeClass(ClassName.SHOW);
                        $$$1(dropdownMenu).one(Event.TRANSITION_END, function() {
                            $$$1(parent).trigger($$$1.Event(Event.HIDDEN, relatedTarget));
                            $$$1(dropdownMenu).removeClass(ClassName.HIDING);
                        });
                    };

                    for (var i = 0; i < toggles.length; i++) {
                        var _ret = _loop(i);

                        if (_ret === "continue") continue;
                    }
                };

                Dropdown._getParentFromElement = function _getParentFromElement(element) {
                    var parent;
                    var selector = Util.getSelectorFromElement(element);

                    if (selector) {
                        parent = $$$1(selector)[0];
                    }

                    return parent || element.parentNode;
                };

                Dropdown._dataApiKeydownHandler = function _dataApiKeydownHandler(event) {
                    if (!REGEXP_KEYDOWN.test(event.which) || /button/i.test(event.target.tagName) && event.which === SPACE_KEYCODE || /input|textarea/i.test(event.target.tagName)) {
                        return;
                    }

                    event.preventDefault();
                    event.stopPropagation();

                    if (this.disabled || $$$1(this).hasClass(ClassName.DISABLED)) {
                        return;
                    }

                    var parent = Dropdown._getParentFromElement(this);

                    var isActive = $$$1(parent).hasClass(ClassName.SHOW);

                    if (!isActive && (event.which !== ESCAPE_KEYCODE || event.which !== SPACE_KEYCODE) || isActive && (event.which === ESCAPE_KEYCODE || event.which === SPACE_KEYCODE)) {
                        if (event.which === ESCAPE_KEYCODE) {
                            var toggle = $$$1(parent).find(Selector.DATA_TOGGLE)[0];
                            $$$1(toggle).trigger('focus');
                        }

                        $$$1(this).trigger('click');
                        return;
                    }

                    var items = $$$1(parent).find(Selector.VISIBLE_ITEMS).get();

                    if (!items.length) {
                        return;
                    }

                    var index = items.indexOf(event.target);

                    if (event.which === ARROW_UP_KEYCODE && index > 0) {
                        // up
                        index--;
                    }

                    if (event.which === ARROW_DOWN_KEYCODE && index < items.length - 1) {
                        // down
                        index++;
                    }

                    if (index < 0) {
                        index = 0;
                    }

                    items[index].focus();
                };

                _createClass(Dropdown, null, [{
                    key: "VERSION",
                    get: function get() {
                        return VERSION;
                    }
                }, {
                    key: "Default",
                    get: function get() {
                        return Default;
                    }
                }, {
                    key: "DefaultType",
                    get: function get() {
                        return DefaultType;
                    }
                }]);

                return Dropdown;
            }();
        /**
         * ------------------------------------------------------------------------
         * Data Api implementation
         * ------------------------------------------------------------------------
         */


        $$$1(document).on(Event.KEYDOWN_DATA_API, Selector.DATA_TOGGLE, Dropdown._dataApiKeydownHandler).on(Event.KEYDOWN_DATA_API, Selector.MENU, Dropdown._dataApiKeydownHandler).on(Event.CLICK_DATA_API + " " + Event.KEYUP_DATA_API, Dropdown._clearMenus).on(Event.CLICK_DATA_API, Selector.DATA_TOGGLE, function(event) {
            event.preventDefault();
            event.stopPropagation();

            Dropdown._jQueryInterface.call($$$1(this), 'toggle');
        }).on(Event.CLICK_DATA_API, Selector.FORM_CHILD, function(e) {
            e.stopPropagation();
        });
        /**
         * ------------------------------------------------------------------------
         * jQuery
         * ------------------------------------------------------------------------
         */

        $$$1.fn[NAME] = Dropdown._jQueryInterface;
        $$$1.fn[NAME].Constructor = Dropdown;

        $$$1.fn[NAME].noConflict = function() {
            $$$1.fn[NAME] = JQUERY_NO_CONFLICT;
            return Dropdown._jQueryInterface;
        };

        return Dropdown;
    }(jQuery);

    var BaseLayout = function($$$1) {
        var ClassName = {
            CANVAS: "bmd-layout-canvas",
            CONTAINER: "bmd-layout-container",
            BACKDROP: "bmd-layout-backdrop"
        };
        var Selector = {
            CANVAS: "." + ClassName.CANVAS,
            CONTAINER: "." + ClassName.CONTAINER,
            BACKDROP: "." + ClassName.BACKDROP
        };
        var Default = {
            canvas: {
                create: true,
                required: true,
                template: "<div class=\"" + ClassName.CANVAS + "\"></div>"
            },
            backdrop: {
                create: true,
                required: true,
                template: "<div class=\"" + ClassName.BACKDROP + "\"></div>"
            }
        };
        /**
         * ------------------------------------------------------------------------
         * Class Definition
         * ------------------------------------------------------------------------
         */

        var BaseLayout =
            /*#__PURE__*/
            function(_Base) {
                _inheritsLoose(BaseLayout, _Base);

                function BaseLayout($element, config, properties) {
                    var _this;

                    if (properties === void 0) {
                        properties = {};
                    }

                    _this = _Base.call(this, $element, $$$1.extend(true, {}, Default, config), properties) || this;
                    _this.$container = _this.findContainer(true);
                    _this.$backdrop = _this.resolveBackdrop();

                    _this.resolveCanvas();

                    return _this;
                }

                var _proto = BaseLayout.prototype;

                _proto.dispose = function dispose(dataKey) {
                    _Base.prototype.dispose.call(this, dataKey);

                    this.$container = null;
                    this.$backdrop = null;
                }; // ------------------------------------------------------------------------
                // protected
                // Will wrap container in bmd-layout-canvas if necessary


                _proto.resolveCanvas = function resolveCanvas() {
                    var bd = this.findCanvas(false);

                    if (bd === undefined || bd.length === 0) {
                        if (this.config.canvas.create) {
                            this.$container.wrap(this.config.canvas.template);
                        }

                        bd = this.findCanvas(this.config.canvas.required);
                    }

                    return bd;
                }; // Find closest bmd-layout-container based on the given context


                _proto.findCanvas = function findCanvas(raiseError, context) {
                    if (raiseError === void 0) {
                        raiseError = true;
                    }

                    if (context === void 0) {
                        context = this.$container;
                    }

                    var canvas = context.closest(Selector.CANVAS);

                    if (canvas.length === 0 && raiseError) {
                        $$$1.error("Failed to find " + Selector.CANVAS + " for " + Util$2.describe(context));
                    }

                    return canvas;
                }; // Will add bmd-layout-backdrop to bmd-layout-container if necessary


                _proto.resolveBackdrop = function resolveBackdrop() {
                    var bd = this.findBackdrop(false);

                    if (bd === undefined || bd.length === 0) {
                        if (this.config.backdrop.create) {
                            this.$container.append(this.config.backdrop.template);
                        }

                        bd = this.findBackdrop(this.config.backdrop.required);
                    }

                    return bd;
                }; // Find closest bmd-layout-container based on the given context


                _proto.findBackdrop = function findBackdrop(raiseError, context) {
                    if (raiseError === void 0) {
                        raiseError = true;
                    }

                    if (context === void 0) {
                        context = this.$container;
                    }

                    var backdrop = context.find("> " + Selector.BACKDROP);

                    if (backdrop.length === 0 && raiseError) {
                        $$$1.error("Failed to find " + Selector.BACKDROP + " for " + Util$2.describe(context));
                    }

                    return backdrop;
                }; // Find closest bmd-layout-container based on the given context


                _proto.findContainer = function findContainer(raiseError, context) {
                    if (raiseError === void 0) {
                        raiseError = true;
                    }

                    if (context === void 0) {
                        context = this.$element;
                    }

                    var container = context.closest(Selector.CONTAINER);

                    if (container.length === 0 && raiseError) {
                        $$$1.error("Failed to find " + Selector.CONTAINER + " for " + Util$2.describe(context));
                    }

                    return container;
                }; // ------------------------------------------------------------------------
                // private
                // ------------------------------------------------------------------------
                // static


                return BaseLayout;
            }(Base);

        return BaseLayout;
    }(jQuery);

    var Drawer = function($$$1) {
        /**
         * ------------------------------------------------------------------------
         * Constants
         * ------------------------------------------------------------------------
         */
        var NAME = "drawer";
        var DATA_KEY = "bmd." + NAME;
        var JQUERY_NAME = "bmd" + (NAME.charAt(0).toUpperCase() + NAME.slice(1));
        var JQUERY_NO_CONFLICT = $$$1.fn[JQUERY_NAME];
        var Keycodes = {
            ESCAPE: 27 //ENTER: 13,
            //SPACE: 32

        };
        var ClassName = {
            IN: "in",
            DRAWER_IN: "bmd-drawer-in",
            DRAWER_OUT: "bmd-drawer-out",
            DRAWER: "bmd-layout-drawer",
            CONTAINER: "bmd-layout-container"
        };
        var Default = {
            focusSelector: "a, button, input"
        };
        /**
         * ------------------------------------------------------------------------
         * Class Definition
         * ------------------------------------------------------------------------
         */

        var Drawer =
            /*#__PURE__*/
            function(_BaseLayout) {
                _inheritsLoose(Drawer, _BaseLayout);

                // $element is expected to be the trigger
                //  i.e. <button class="btn bmd-btn-icon" for="search" data-toggle="drawer" data-target="#my-side-nav-drawer" aria-expanded="false" aria-controls="my-side-nav-drawer">
                function Drawer($element, config) {
                    var _this;

                    _this = _BaseLayout.call(this, $element, $$$1.extend(true, {}, Default, config)) || this;
                    _this.$toggles = $$$1("[data-toggle=\"drawer\"][href=\"#" + _this.$element[0].id + "\"], [data-toggle=\"drawer\"][data-target=\"#" + _this.$element[0].id + "\"]");

                    _this._addAria(); // click or escape on the backdrop closes the drawer


                    _this.$backdrop.keydown(function(ev) {
                        if (ev.which === Keycodes.ESCAPE) {
                            _this.hide();
                        }
                    }).click(function() {
                        _this.hide();
                    }); // escape on the drawer closes it


                    _this.$element.keydown(function(ev) {
                        if (ev.which === Keycodes.ESCAPE) {
                            _this.hide();
                        }
                    }); // any toggle button clicks


                    _this.$toggles.click(function() {
                        _this.toggle();
                    });

                    return _this;
                }

                var _proto = Drawer.prototype;

                _proto.dispose = function dispose() {
                    _BaseLayout.prototype.dispose.call(this, DATA_KEY);

                    this.$toggles = null;
                };

                _proto.toggle = function toggle() {
                    if (this._isOpen()) {
                        this.hide();
                    } else {
                        this.show();
                    }
                };

                _proto.show = function show() {
                    if (this._isForcedClosed() || this._isOpen()) {
                        return;
                    }

                    this.$toggles.attr("aria-expanded", true);
                    this.$element.attr("aria-expanded", true);
                    this.$element.attr("aria-hidden", false); // focus on the first focusable item

                    var $focusOn = this.$element.find(this.config.focusSelector);

                    if ($focusOn.length > 0) {
                        $focusOn.first().focus();
                    }

                    this.$container.addClass(ClassName.DRAWER_IN); // backdrop is responsively styled based on bmd-drawer-overlay, therefore style is none of our concern, simply add the marker class and let the scss determine if it should be displayed or not.

                    this.$backdrop.addClass(ClassName.IN);
                };

                _proto.hide = function hide() {
                    if (!this._isOpen()) {
                        return;
                    }

                    this.$toggles.attr("aria-expanded", false);
                    this.$element.attr("aria-expanded", false);
                    this.$element.attr("aria-hidden", true);
                    this.$container.removeClass(ClassName.DRAWER_IN);
                    this.$backdrop.removeClass(ClassName.IN);
                }; // ------------------------------------------------------------------------
                // private


                _proto._isOpen = function _isOpen() {
                    return this.$container.hasClass(ClassName.DRAWER_IN);
                };

                _proto._isForcedClosed = function _isForcedClosed() {
                    return this.$container.hasClass(ClassName.DRAWER_OUT);
                };

                _proto._addAria = function _addAria() {
                    var isOpen = this._isOpen();

                    this.$element.attr("aria-expanded", isOpen);
                    this.$element.attr("aria-hidden", isOpen);

                    if (this.$toggles.length) {
                        this.$toggles.attr("aria-expanded", isOpen);
                    }
                }; // ------------------------------------------------------------------------
                // static


                Drawer._jQueryInterface = function _jQueryInterface(config) {
                    return this.each(function() {
                        var $element = $$$1(this);
                        var data = $element.data(DATA_KEY);

                        if (!data) {
                            data = new Drawer($element, config);
                            $element.data(DATA_KEY, data);
                        }
                    });
                };

                return Drawer;
            }(BaseLayout);
        /**
         * ------------------------------------------------------------------------
         * jQuery
         * ------------------------------------------------------------------------
         */


        $$$1.fn[JQUERY_NAME] = Drawer._jQueryInterface;
        $$$1.fn[JQUERY_NAME].Constructor = Drawer;

        $$$1.fn[JQUERY_NAME].noConflict = function() {
            $$$1.fn[JQUERY_NAME] = JQUERY_NO_CONFLICT;
            return Drawer._jQueryInterface;
        };

        return Drawer;
    }(jQuery);

    var Ripples = function($$$1) {
        /**
         * ------------------------------------------------------------------------
         * Constants
         * ------------------------------------------------------------------------
         */
        var NAME = "ripples";
        var DATA_KEY = "bmd." + NAME;
        var JQUERY_NAME = "bmd" + (NAME.charAt(0).toUpperCase() + NAME.slice(1));
        var JQUERY_NO_CONFLICT = $$$1.fn[JQUERY_NAME];
        var ClassName = {
            CONTAINER: "ripple-container",
            DECORATOR: "ripple-decorator"
        };
        var Selector = {
            CONTAINER: "." + ClassName.CONTAINER,
            DECORATOR: "." + ClassName.DECORATOR //,

        };
        var Default = {
            container: {
                template: "<div class='" + ClassName.CONTAINER + "'></div>"
            },
            decorator: {
                template: "<div class='" + ClassName.DECORATOR + "'></div>"
            },
            trigger: {
                start: "mousedown touchstart",
                end: "mouseup mouseleave touchend"
            },
            touchUserAgentRegex: /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i,
            duration: 500
        };
        /**
         * ------------------------------------------------------------------------
         * Class Definition
         * ------------------------------------------------------------------------
         */

        var Ripples =
            /*#__PURE__*/
            function() {
                function Ripples($element, config) {
                    var _this = this;

                    this.$element = $element; // console.log(`Adding ripples to ${Util.describe(this.$element)}`)  // eslint-disable-line no-console

                    this.config = $$$1.extend(true, {}, Default, config); // attach initial listener

                    this.$element.on(this.config.trigger.start, function(event) {
                        _this._onStartRipple(event);
                    });
                }

                var _proto = Ripples.prototype;

                _proto.dispose = function dispose() {
                    this.$element.data(DATA_KEY, null);
                    this.$element = null;
                    this.$container = null;
                    this.$decorator = null;
                    this.config = null;
                }; // ------------------------------------------------------------------------
                // private


                _proto._onStartRipple = function _onStartRipple(event) {
                    var _this2 = this;

                    // Verify if the user is just touching on a device and return if so
                    if (this._isTouch() && event.type === "mousedown") {
                        return;
                    } // Find or create the ripple container element


                    this._findOrCreateContainer(); // Get relY and relX positions of the container element


                    var relY = this._getRelY(event);

                    var relX = this._getRelX(event); // If relY and/or relX are false, return the event


                    if (!relY && !relX) {
                        return;
                    } // set the location and color each time (even if element is cached)


                    this.$decorator.css({
                        left: relX,
                        top: relY,
                        "background-color": this._getRipplesColor()
                    }); // Make sure the ripple has the styles applied (ugly hack but it works)

                    this._forceStyleApplication(); // Turn on the ripple animation


                    this.rippleOn(); // Call the rippleEnd function when the transition 'on' ends

                    setTimeout(function() {
                        _this2.rippleEnd();
                    }, this.config.duration); // Detect when the user leaves the element to cleanup if not already done?

                    this.$element.on(this.config.trigger.end, function() {
                        if (_this2.$decorator) {
                            // guard against race condition/mouse attack
                            _this2.$decorator.data("mousedown", "off");

                            if (_this2.$decorator.data("animating") === "off") {
                                _this2.rippleOut();
                            }
                        }
                    });
                };

                _proto._findOrCreateContainer = function _findOrCreateContainer() {
                    if (!this.$container || !this.$container.length > 0) {
                        this.$element.append(this.config.container.template);
                        this.$container = this.$element.find(Selector.CONTAINER);
                    } // always add the rippleElement, it is always removed


                    this.$container.append(this.config.decorator.template);
                    this.$decorator = this.$container.find(Selector.DECORATOR);
                }; // Make sure the ripple has the styles applied (ugly hack but it works)


                _proto._forceStyleApplication = function _forceStyleApplication() {
                    return window.getComputedStyle(this.$decorator[0]).opacity;
                };
                /**
                 * Get the relX
                 */


                _proto._getRelX = function _getRelX(event) {
                    var wrapperOffset = this.$container.offset();
                    var result = null;

                    if (!this._isTouch()) {
                        // Get the mouse position relative to the ripple wrapper
                        result = event.pageX - wrapperOffset.left;
                    } else {
                        // Make sure the user is using only one finger and then get the touch
                        //  position relative to the ripple wrapper
                        event = event.originalEvent;

                        if (event.touches.length === 1) {
                            result = event.touches[0].pageX - wrapperOffset.left;
                        } else {
                            result = false;
                        }
                    }

                    return result;
                };
                /**
                 * Get the relY
                 */


                _proto._getRelY = function _getRelY(event) {
                    var containerOffset = this.$container.offset();
                    var result = null;

                    if (!this._isTouch()) {
                        /**
                         * Get the mouse position relative to the ripple wrapper
                         */
                        result = event.pageY - containerOffset.top;
                    } else {
                        /**
                         * Make sure the user is using only one finger and then get the touch
                         * position relative to the ripple wrapper
                         */
                        event = event.originalEvent;

                        if (event.touches.length === 1) {
                            result = event.touches[0].pageY - containerOffset.top;
                        } else {
                            result = false;
                        }
                    }

                    return result;
                };
                /**
                 * Get the ripple color
                 */


                _proto._getRipplesColor = function _getRipplesColor() {
                    var color = this.$element.data("ripple-color") ? this.$element.data("ripple-color") : window.getComputedStyle(this.$element[0]).color;
                    return color;
                };
                /**
                 * Verify if the client is using a mobile device
                 */


                _proto._isTouch = function _isTouch() {
                    return this.config.touchUserAgentRegex.test(navigator.userAgent);
                };
                /**
                 * End the animation of the ripple
                 */


                _proto.rippleEnd = function rippleEnd() {
                    if (this.$decorator) {
                        // guard against race condition/mouse attack
                        this.$decorator.data("animating", "off");

                        if (this.$decorator.data("mousedown") === "off") {
                            this.rippleOut(this.$decorator);
                        }
                    }
                };
                /**
                 * Turn off the ripple effect
                 */


                _proto.rippleOut = function rippleOut() {
                    var _this3 = this;

                    this.$decorator.off();

                    if (Util$2.transitionEndSupported()) {
                        this.$decorator.addClass("ripple-out");
                    } else {
                        this.$decorator.animate({
                            opacity: 0
                        }, 100, function() {
                            _this3.$decorator.trigger("transitionend");
                        });
                    }

                    this.$decorator.on(Util$2.transitionEndSelector(), function() {
                        if (_this3.$decorator) {
                            _this3.$decorator.remove();

                            _this3.$decorator = null;
                        }
                    });
                };
                /**
                 * Turn on the ripple effect
                 */


                _proto.rippleOn = function rippleOn() {
                    var _this4 = this;

                    var size = this._getNewSize();

                    if (Util$2.transitionEndSupported()) {
                        this.$decorator.css({
                            "-ms-transform": "scale(" + size + ")",
                            "-moz-transform": "scale(" + size + ")",
                            "-webkit-transform": "scale(" + size + ")",
                            transform: "scale(" + size + ")"
                        }).addClass("ripple-on").data("animating", "on").data("mousedown", "on");
                    } else {
                        this.$decorator.animate({
                            width: Math.max(this.$element.outerWidth(), this.$element.outerHeight()) * 2,
                            height: Math.max(this.$element.outerWidth(), this.$element.outerHeight()) * 2,
                            "margin-left": Math.max(this.$element.outerWidth(), this.$element.outerHeight()) * -1,
                            "margin-top": Math.max(this.$element.outerWidth(), this.$element.outerHeight()) * -1,
                            opacity: 0.2
                        }, this.config.duration, function() {
                            _this4.$decorator.trigger("transitionend");
                        });
                    }
                };
                /**
                 * Get the new size based on the element height/width and the ripple width
                 */


                _proto._getNewSize = function _getNewSize() {
                    return Math.max(this.$element.outerWidth(), this.$element.outerHeight()) / this.$decorator.outerWidth() * 2.5;
                }; // ------------------------------------------------------------------------
                // static


                Ripples._jQueryInterface = function _jQueryInterface(config) {
                    return this.each(function() {
                        var $element = $$$1(this);
                        var data = $element.data(DATA_KEY);

                        if (!data) {
                            data = new Ripples($element, config);
                            $element.data(DATA_KEY, data);
                        }
                    });
                };

                return Ripples;
            }();
        /**
         * ------------------------------------------------------------------------
         * jQuery
         * ------------------------------------------------------------------------
         */


        $$$1.fn[JQUERY_NAME] = Ripples._jQueryInterface;
        $$$1.fn[JQUERY_NAME].Constructor = Ripples;

        $$$1.fn[JQUERY_NAME].noConflict = function() {
            $$$1.fn[JQUERY_NAME] = JQUERY_NO_CONFLICT;
            return Ripples._jQueryInterface;
        };

        return Ripples;
    }(jQuery);

    var Autofill = function($$$1) {
        /**
         * ------------------------------------------------------------------------
         * Constants
         * ------------------------------------------------------------------------
         */
        var NAME = "autofill";
        var DATA_KEY = "bmd." + NAME;
        var JQUERY_NAME = "bmd" + (NAME.charAt(0).toUpperCase() + NAME.slice(1));
        var JQUERY_NO_CONFLICT = $$$1.fn[JQUERY_NAME];
        var Default = {};
        /**
         * ------------------------------------------------------------------------
         * Class Definition
         * ------------------------------------------------------------------------
         */

        var Autofill =
            /*#__PURE__*/
            function(_Base) {
                _inheritsLoose(Autofill, _Base);

                function Autofill($element, config) {
                    var _this;

                    _this = _Base.call(this, $element, $$$1.extend(true, {}, Default, config)) || this;

                    _this._watchLoading();

                    _this._attachEventHandlers();

                    return _this;
                }

                var _proto = Autofill.prototype;

                _proto.dispose = function dispose() {
                    _Base.prototype.dispose.call(this, DATA_KEY);
                }; // ------------------------------------------------------------------------
                // private


                _proto._watchLoading = function _watchLoading() {
                    var _this2 = this;

                    // After 10 seconds we are quite sure all the needed inputs are autofilled then we can stop checking them
                    setTimeout(function() {
                        clearInterval(_this2._onLoading);
                    }, 10000);
                }; // This part of code will detect autofill when the page is loading (username and password inputs for example)


                _proto._onLoading = function _onLoading() {
                    setInterval(function() {
                        $$$1("input[type!=checkbox]").each(function(index, element) {
                            var $element = $$$1(element);

                            if ($element.val() && $element.val() !== $element.attr("value")) {
                                $element.trigger("change");
                            }
                        });
                    }, 100);
                };

                _proto._attachEventHandlers = function _attachEventHandlers() {
                    // Listen on inputs of the focused form
                    //  (because user can select from the autofill dropdown only when the input has focus)
                    var focused = null;
                    $$$1(document).on("focus", "input", function(event) {
                        var $inputs = $$$1(event.currentTarget).closest("form").find("input").not("[type=file]");
                        focused = setInterval(function() {
                            $inputs.each(function(index, element) {
                                var $element = $$$1(element);

                                if ($element.val() !== $element.attr("value")) {
                                    $element.trigger("change");
                                }
                            });
                        }, 100);
                    }).on("blur", ".form-group input", function() {
                        clearInterval(focused);
                    });
                }; // ------------------------------------------------------------------------
                // static


                Autofill._jQueryInterface = function _jQueryInterface(config) {
                    return this.each(function() {
                        var $element = $$$1(this);
                        var data = $element.data(DATA_KEY);

                        if (!data) {
                            data = new Autofill($element, config);
                            $element.data(DATA_KEY, data);
                        }
                    });
                };

                return Autofill;
            }(Base);
        /**
         * ------------------------------------------------------------------------
         * jQuery
         * ------------------------------------------------------------------------
         */


        $$$1.fn[JQUERY_NAME] = Autofill._jQueryInterface;
        $$$1.fn[JQUERY_NAME].Constructor = Autofill;

        $$$1.fn[JQUERY_NAME].noConflict = function() {
            $$$1.fn[JQUERY_NAME] = JQUERY_NO_CONFLICT;
            return Autofill._jQueryInterface;
        };

        return Autofill;
    }(jQuery);

    /* globals Popper */
    Popper.Defaults.modifiers.computeStyle.gpuAcceleration = false;
    /**
     * $.bootstrapMaterialDesign(config) is a macro class to configure the components generally
     *  used in Material Design for Bootstrap.  You may pass overrides to the configurations
     *  which will be passed into each component, or you may omit use of this class and
     *  configure each component separately.
     */

    var BootstrapMaterialDesign = function($$$1) {
        /**
         * ------------------------------------------------------------------------
         * Constants
         * ------------------------------------------------------------------------
         */
        var NAME = "bootstrapMaterialDesign";
        var DATA_KEY = "bmd." + NAME;
        var JQUERY_NAME = NAME; // retain this full name since it is long enough not to conflict

        var JQUERY_NO_CONFLICT = $$$1.fn[JQUERY_NAME];
        /**
         * Global configuration:
         *  The global configuration hash will be mixed in to each components' config.
         *    e.g. calling $.bootstrapMaterialDesign({global: { validate: true } }) would pass `validate:true` to every component
         *
         *
         * Component configuration:
         *  - selector: may be a string or an array.  Any array will be joined with a comma to generate the selector
         *  - disable any component by defining it as false with an override. e.g. $.bootstrapMaterialDesign({ autofill: false })
         *
         *  @see each individual component for more configuration settings.
         */

        var Default = {
            global: {
                validate: false,
                label: {
                    className: "bmd-label-static" // default style of label to be used if not specified in the html markup

                }
            },
            autofill: {
                selector: "body"
            },
            checkbox: {
                selector: ".checkbox > label > input[type=checkbox]"
            },
            checkboxInline: {
                selector: "label.checkbox-inline > input[type=checkbox]"
            },
            collapseInline: {
                selector: '.bmd-collapse-inline [data-toggle="collapse"]'
            },
            drawer: {
                selector: ".bmd-layout-drawer"
            },
            file: {
                selector: "input[type=file]"
            },
            radio: {
                selector: ".radio > label > input[type=radio]"
            },
            radioInline: {
                selector: "label.radio-inline > input[type=radio]"
            },
            ripples: {
                //selector: ['.btn:not(.btn-link):not(.ripple-none)'] // testing only
                selector: [".btn:not(.ripple-none)", ".card-image:not(.ripple-none)", ".navbar a:not(.ripple-none)", ".dropdown-menu a:not(.ripple-none)", ".nav-tabs a:not(.ripple-none)", ".pagination li:not(.active):not(.disabled) a:not(.ripple-none)", ".ripple" // generic marker class to add ripple to elements
                ]
            },
            select: {
                selector: ["select"]
            },
            switch: {
                selector: ".switch > label > input[type=checkbox]"
            },
            text: {
                // omit inputs we have specialized components to handle - we need to match text, email, etc.  The easiest way to do this appears to be just omit the ones we don't want to match and let the rest fall through to this.
                selector: ["input:not([type=hidden]):not([type=checkbox]):not([type=radio]):not([type=file]):not([type=button]):not([type=submit]):not([type=reset])"]
            },
            textarea: {
                selector: ["textarea"]
            },
            arrive: true,
            // create an ordered component list for instantiation
            instantiation: ["ripples", "checkbox", "checkboxInline", "collapseInline", "drawer", //'file',
                "radio", "radioInline", "switch", "text", "textarea", // "select",
                "autofill"
            ]
        };
        /**
         * ------------------------------------------------------------------------
         * Class Definition
         * ------------------------------------------------------------------------
         */

        var BootstrapMaterialDesign =
            /*#__PURE__*/
            function() {
                function BootstrapMaterialDesign($element, config) {
                    var _this = this;

                    this.$element = $element;
                    this.config = $$$1.extend(true, {}, Default, config);
                    var $document = $$$1(document);

                    var _loop = function _loop(component) {
                        // the component's config fragment is passed in directly, allowing users to override
                        var componentConfig = _this.config[component]; // check to make sure component config is enabled (not `false`)

                        if (componentConfig) {
                            // assemble the selector as it may be an array
                            var selector = _this._resolveSelector(componentConfig); // mix in global options


                            componentConfig = $$$1.extend(true, {}, _this.config.global, componentConfig); // create the jquery fn name e.g. 'bmdText' for 'text'

                            var componentName = "" + (component.charAt(0).toUpperCase() + component.slice(1));
                            var jqueryFn = "bmd" + componentName;

                            try {
                                // safely instantiate component on selector elements with config, report errors and move on.
                                // console.debug(`instantiating: $('${selector}')[${jqueryFn}](${componentConfig})`) // eslint-disable-line no-console
                                $$$1(selector)[jqueryFn](componentConfig); // add to arrive if present and enabled

                                if (document.arrive && _this.config.arrive) {
                                    $document.arrive(selector, function() {
                                        // eslint-disable-line no-loop-func
                                        $$$1(this)[jqueryFn](componentConfig);
                                    });
                                }
                            } catch (e) {
                                var message = "Failed to instantiate component: $('" + selector + "')[" + jqueryFn + "](" + componentConfig + ")";
                                console.error(message, e, "\nSelected elements: ", $$$1(selector)); // eslint-disable-line no-console

                                throw e;
                            }
                        }
                    };

                    for (var _iterator = this.config.instantiation, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
                        var _ref;

                        if (_isArray) {
                            if (_i >= _iterator.length) break;
                            _ref = _iterator[_i++];
                        } else {
                            _i = _iterator.next();
                            if (_i.done) break;
                            _ref = _i.value;
                        }

                        var component = _ref;

                        _loop(component);
                    }
                }

                var _proto = BootstrapMaterialDesign.prototype;

                _proto.dispose = function dispose() {
                    this.$element.data(DATA_KEY, null);
                    this.$element = null;
                    this.config = null;
                }; // ------------------------------------------------------------------------
                // private


                _proto._resolveSelector = function _resolveSelector(componentConfig) {
                    var selector = componentConfig.selector;

                    if (Array.isArray(selector)) {
                        selector = selector.join(", ");
                    }

                    return selector;
                }; // ------------------------------------------------------------------------
                // static


                BootstrapMaterialDesign._jQueryInterface = function _jQueryInterface(config) {
                    return this.each(function() {
                        var $element = $$$1(this);
                        var data = $element.data(DATA_KEY);

                        if (!data) {
                            data = new BootstrapMaterialDesign($element, config);
                            $element.data(DATA_KEY, data);
                        }
                    });
                };

                return BootstrapMaterialDesign;
            }();
        /**
         * ------------------------------------------------------------------------
         * jQuery
         * ------------------------------------------------------------------------
         */


        $$$1.fn[JQUERY_NAME] = BootstrapMaterialDesign._jQueryInterface;
        $$$1.fn[JQUERY_NAME].Constructor = BootstrapMaterialDesign;

        $$$1.fn[JQUERY_NAME].noConflict = function() {
            $$$1.fn[JQUERY_NAME] = JQUERY_NO_CONFLICT;
            return BootstrapMaterialDesign._jQueryInterface;
        };

        return BootstrapMaterialDesign;
    }(jQuery);

    /*
     * This is the main entry point.
     *
     * You can import other modules here, including external packages. When bundling using rollup you can mark those modules as external and have them excluded or, if they have a jsnext:main entry in their package.json (like this package does), let rollup bundle them into your dist file.
     *
     * at your application entry point.  This is necessary for browsers that do not yet support some ES2015 runtime necessities such as Symbol.  We do this in `index-iife.js` for our iife rollup bundle.
     */
    // Bootstrap components

})));

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("jquery"),require("popper.js")):"function"==typeof define&&define.amd?define(["jquery","popper.js"],e):e(t.jQuery,t.Popper)}(this,function(t,h){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function T(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function s(){return(s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function a(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}t=t&&t.hasOwnProperty("default")?t.default:t,h=h&&h.hasOwnProperty("default")?h.default:h;var r,e,o,n,l,c,u,d,f,p,m,g,_,v,y,b,C,E,I,w,A,S,D,k,N,O,$,j,x,F,R,P,Q,M,L,H,U,W,B,G,K,q,V,Y,z,X,Z,J,tt,et,nt,it,rt,ot,st,at,lt,ct,ht,ut,dt,ft,pt,mt,gt,_t,vt,yt,bt,Ct,Et,It,Tt,wt,At,St,Dt,kt,Nt,Ot,$t,jt,xt,Ft,Rt,Pt,Qt,Mt,Lt,Ht,Ut,Wt,Bt,Gt,Kt,qt,Vt,Yt,zt,Xt,Zt,Jt,te,ee,ne,ie,re,oe,se,ae,le,ce,he,ue,de,fe,pe,me,ge,_e,ve,ye,be,Ce,Ee,Ie,Te,we,Ae,Se,De,ke,Ne,Oe,$e,je,xe,Fe,Re,Pe,Qe,Me,Le,He,Ue,We,Be,Ge,Ke,qe,Ve,Ye,ze,Xe,Ze,Je,tn,en,nn,rn,on,sn,an,ln,cn,hn,un,dn,fn,pn,mn,gn,_n,vn,yn,bn,Cn,En,In,Tn,wn,An,Sn,Dn,kn,Nn,On,$n,jn,xn,Fn,Rn,Pn,Qn,Mn,Ln,Hn,Un,Wn,Bn,Gn,Kn,qn,Vn,Yn,zn,Xn,Zn,Jn,ti,ei,ni,ii,ri,oi,si,ai,li,ci,hi,ui,di,fi,pi,mi,gi,_i,vi,yi,bi,Ci,Ei,Ii,Ti,wi,Ai,Si,Di,ki,Ni,Oi,$i,ji,xi,Fi,Ri,Pi,Qi,Mi,Li,Hi,Ui,Wi,Bi,Gi,Ki,qi,Vi,Yi,zi,Xi,Zi,Ji,tr,er,nr,ir,rr,or,sr,ar,lr,cr,hr,ur,dr,fr,pr,mr,gr,_r,vr,yr,br,Cr,Er,Ir,Tr,wr,Ar,Sr,Dr,kr,Nr,Or,$r,jr,xr,Fr,Rr=function(i){var e=!1;function t(t){var e=this,n=!1;return i(this).one(l.TRANSITION_END,function(){n=!0}),setTimeout(function(){n||l.triggerTransitionEnd(e)},t),this}var l={TRANSITION_END:"bsTransitionEnd",getUID:function(t){for(;t+=~~(1e6*Math.random()),document.getElementById(t););return t},getSelectorFromElement:function(t){var e=t.getAttribute("data-target");e&&"#"!==e||(e=t.getAttribute("href")||"");try{return 0<i(document).find(e).length?e:null}catch(t){return null}},reflow:function(t){return t.offsetHeight},triggerTransitionEnd:function(t){i(t).trigger(e.end)},supportsTransitionEnd:function(){return Boolean(e)},isElement:function(t){return(t[0]||t).nodeType},typeCheckConfig:function(t,e,n){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i],o=e[i],s=o&&l.isElement(o)?"element":(a=o,{}.toString.call(a).match(/\s([a-z]+)/i)[1].toLowerCase());if(!new RegExp(r).test(s))throw new Error(t.toUpperCase()+': Option "'+i+'" provided type "'+s+'" but expected type "'+r+'".')}var a}};return e=("undefined"==typeof window||!window.QUnit)&&{end:"transitionend"},i.fn.emulateTransitionEnd=t,l.supportsTransitionEnd()&&(i.event.special[l.TRANSITION_END]={bindType:e.end,delegateType:e.end,handle:function(t){if(i(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}}),l}(t),Pr=(e="alert",n="."+(o="bs.alert"),l=(r=t).fn[e],c={CLOSE:"close"+n,CLOSED:"closed"+n,CLICK_DATA_API:"click"+n+".data-api"},u="alert",d="fade",f="show",p=function(){function i(t){this._element=t}var t=i.prototype;return t.close=function(t){t=t||this._element;var e=this._getRootElement(t);this._triggerCloseEvent(e).isDefaultPrevented()||this._removeElement(e)},t.dispose=function(){r.removeData(this._element,o),this._element=null},t._getRootElement=function(t){var e=Rr.getSelectorFromElement(t),n=!1;return e&&(n=r(e)[0]),n||(n=r(t).closest("."+u)[0]),n},t._triggerCloseEvent=function(t){var e=r.Event(c.CLOSE);return r(t).trigger(e),e},t._removeElement=function(e){var n=this;r(e).removeClass(f),Rr.supportsTransitionEnd()&&r(e).hasClass(d)?r(e).one(Rr.TRANSITION_END,function(t){return n._destroyElement(e,t)}).emulateTransitionEnd(150):this._destroyElement(e)},t._destroyElement=function(t){r(t).detach().trigger(c.CLOSED).remove()},i._jQueryInterface=function(n){return this.each(function(){var t=r(this),e=t.data(o);e||(e=new i(this),t.data(o,e)),"close"===n&&e[n](this)})},i._handleDismiss=function(e){return function(t){t&&t.preventDefault(),e.close(this)}},T(i,null,[{key:"VERSION",get:function(){return"4.0.0"}}]),i}(),r(document).on(c.CLICK_DATA_API,'[data-dismiss="alert"]',p._handleDismiss(new p)),r.fn[e]=p._jQueryInterface,r.fn[e].Constructor=p,r.fn[e].noConflict=function(){return r.fn[e]=l,p._jQueryInterface},g="button",v="."+(_="bs.button"),y=".data-api",b=(m=t).fn[g],C="active",E="btn",w='[data-toggle^="button"]',A='[data-toggle="buttons"]',S="input",D=".active",k=".btn",N={CLICK_DATA_API:"click"+v+y,FOCUS_BLUR_DATA_API:(I="focus")+v+y+" blur"+v+y},O=function(){function n(t){this._element=t}var t=n.prototype;return t.toggle=function(){var t=!0,e=!0,n=m(this._element).closest(A)[0];if(n){var i=m(this._element).find(S)[0];if(i){if("radio"===i.type)if(i.checked&&m(this._element).hasClass(C))t=!1;else{var r=m(n).find(D)[0];r&&m(r).removeClass(C)}if(t){if(i.hasAttribute("disabled")||n.hasAttribute("disabled")||i.classList.contains("disabled")||n.classList.contains("disabled"))return;i.checked=!m(this._element).hasClass(C),m(i).trigger("change")}i.focus(),e=!1}}e&&this._element.setAttribute("aria-pressed",!m(this._element).hasClass(C)),t&&m(this._element).toggleClass(C)},t.dispose=function(){m.removeData(this._element,_),this._element=null},n._jQueryInterface=function(e){return this.each(function(){var t=m(this).data(_);t||(t=new n(this),m(this).data(_,t)),"toggle"===e&&t[e]()})},T(n,null,[{key:"VERSION",get:function(){return"4.0.0"}}]),n}(),m(document).on(N.CLICK_DATA_API,w,function(t){t.preventDefault();var e=t.target;m(e).hasClass(E)||(e=m(e).closest(k)),O._jQueryInterface.call(m(e),"toggle")}).on(N.FOCUS_BLUR_DATA_API,w,function(t){var e=m(t.target).closest(k)[0];m(e).toggleClass(I,/^focus(in)?$/.test(t.type))}),m.fn[g]=O._jQueryInterface,m.fn[g].Constructor=O,m.fn[g].noConflict=function(){return m.fn[g]=b,O._jQueryInterface},$=jQuery,j="carousel",F="."+(x="bs.carousel"),R=".data-api",P=$.fn[j],Q={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0},M={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean"},L="next",H="prev",U="left",W="right",B={SLIDE:"slide"+F,SLID:"slid"+F,KEYDOWN:"keydown"+F,MOUSEENTER:"mouseenter"+F,MOUSELEAVE:"mouseleave"+F,TOUCHEND:"touchend"+F,LOAD_DATA_API:"load"+F+R,CLICK_DATA_API:"click"+F+R},G="carousel",K="active",q="slide",V="carousel-item-right",Y="carousel-item-left",z="carousel-item-next",X="carousel-item-prev",Z=".active",J=".active.carousel-item",tt=".carousel-item",et=".carousel-item-next, .carousel-item-prev",nt=".carousel-indicators",it="[data-slide], [data-slide-to]",rt='[data-ride="carousel"]',ot=function(){function o(t,e){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this._config=this._getConfig(e),this._element=$(t)[0],this._indicatorsElement=$(this._element).find(nt)[0],this._addEventListeners()}var t=o.prototype;return t.next=function(){this._isSliding||this._slide(L)},t.nextWhenVisible=function(){document.hidden||this.next()},t.prev=function(){this._isSliding||this._slide(H)},t.pause=function(t){t||(this._isPaused=!0),$(this._element).find(et)[0]&&Rr.supportsTransitionEnd()&&(Rr.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},t.cycle=function(t){t||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},t.to=function(t){var e=this;this._activeElement=$(this._element).find(J)[0];var n=this._getItemIndex(this._activeElement);if(!(t>this._items.length-1||t<0))if(this._isSliding)$(this._element).one(B.SLID,function(){return e.to(t)});else{if(n===t)return this.pause(),void this.cycle();var i=n<t?L:H;this._slide(i,this._items[t])}},t.dispose=function(){$(this._element).off(F),$.removeData(this._element,x),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},t._getConfig=function(t){return t=$.extend({},Q,t),Rr.typeCheckConfig(j,t,M),t},t._addEventListeners=function(){var e=this;this._config.keyboard&&$(this._element).on(B.KEYDOWN,function(t){return e._keydown(t)}),"hover"===this._config.pause&&($(this._element).on(B.MOUSEENTER,function(t){return e.pause(t)}).on(B.MOUSELEAVE,function(t){return e.cycle(t)}),"ontouchstart"in document.documentElement&&$(this._element).on(B.TOUCHEND,function(){e.pause(),e.touchTimeout&&clearTimeout(e.touchTimeout),e.touchTimeout=setTimeout(function(t){return e.cycle(t)},500+e._config.interval)}))},t._keydown=function(t){if(!/input|textarea/i.test(t.target.tagName))switch(t.which){case 37:t.preventDefault(),this.prev();break;case 39:t.preventDefault(),this.next();break;default:return}},t._getItemIndex=function(t){return this._items=$.makeArray($(t).parent().find(tt)),this._items.indexOf(t)},t._getItemByDirection=function(t,e){var n=t===L,i=t===H,r=this._getItemIndex(e),o=this._items.length-1;if((i&&0===r||n&&r===o)&&!this._config.wrap)return e;var s=(r+(t===H?-1:1))%this._items.length;return-1===s?this._items[this._items.length-1]:this._items[s]},t._triggerSlideEvent=function(t,e){var n=this._getItemIndex(t),i=this._getItemIndex($(this._element).find(J)[0]),r=$.Event(B.SLIDE,{relatedTarget:t,direction:e,from:i,to:n});return $(this._element).trigger(r),r},t._setActiveIndicatorElement=function(t){if(this._indicatorsElement){$(this._indicatorsElement).find(Z).removeClass(K);var e=this._indicatorsElement.children[this._getItemIndex(t)];e&&$(e).addClass(K)}},t._slide=function(t,e){var n,i,r,o=this,s=$(this._element).find(J)[0],a=this._getItemIndex(s),l=e||s&&this._getItemByDirection(t,s),c=this._getItemIndex(l),h=Boolean(this._interval);if(t===L?(n=Y,i=z,r=U):(n=V,i=X,r=W),l&&$(l).hasClass(K))this._isSliding=!1;else if(!this._triggerSlideEvent(l,r).isDefaultPrevented()&&s&&l){this._isSliding=!0,h&&this.pause(),this._setActiveIndicatorElement(l);var u=$.Event(B.SLID,{relatedTarget:l,direction:r,from:a,to:c});Rr.supportsTransitionEnd()&&$(this._element).hasClass(q)?($(l).addClass(i),Rr.reflow(l),$(s).addClass(n),$(l).addClass(n),$(s).one(Rr.TRANSITION_END,function(){$(l).removeClass(n+" "+i).addClass(K),$(s).removeClass(K+" "+i+" "+n),o._isSliding=!1,setTimeout(function(){return $(o._element).trigger(u)},0)}).emulateTransitionEnd(600)):($(s).removeClass(K),$(l).addClass(K),this._isSliding=!1,$(this._element).trigger(u)),h&&this.cycle()}},o._jQueryInterface=function(i){return this.each(function(){var t=$(this).data(x),e=$.extend({},Q,$(this).data());"object"==typeof i&&$.extend(e,i);var n="string"==typeof i?i:e.slide;if(t||(t=new o(this,e),$(this).data(x,t)),"number"==typeof i)t.to(i);else if("string"==typeof n){if(void 0===t[n])throw new Error('No method named "'+n+'"');t[n]()}else e.interval&&(t.pause(),t.cycle())})},o._dataApiClickHandler=function(t){var e=Rr.getSelectorFromElement(this);if(e){var n=$(e)[0];if(n&&$(n).hasClass(G)){var i=$.extend({},$(n).data(),$(this).data()),r=this.getAttribute("data-slide-to");r&&(i.interval=!1),o._jQueryInterface.call($(n),i),r&&$(n).data(x).to(r),t.preventDefault()}}},T(o,null,[{key:"VERSION",get:function(){return"4.0.0-beta"}},{key:"Default",get:function(){return Q}}]),o}(),$(document).on(B.CLICK_DATA_API,it,ot._dataApiClickHandler),$(window).on(B.LOAD_DATA_API,function(){$(rt).each(function(){var t=$(this);ot._jQueryInterface.call(t,t.data())})}),$.fn[j]=ot._jQueryInterface,$.fn[j].Constructor=ot,$.fn[j].noConflict=function(){return $.fn[j]=P,ot._jQueryInterface},at="collapse",ct="."+(lt="bs.collapse"),ht=(st=t).fn[at],ut={toggle:!0,parent:""},dt={toggle:"boolean",parent:"(string|element)"},ft={SHOW:"show"+ct,SHOWN:"shown"+ct,HIDE:"hide"+ct,HIDDEN:"hidden"+ct,CLICK_DATA_API:"click"+ct+".data-api"},pt="show",mt="collapse",gt="collapsing",_t="collapsed",vt="width",yt="height",bt=".show, .collapsing",Ct='[data-toggle="collapse"]',Et=function(){function a(t,e){this._isTransitioning=!1,this._element=t,this._config=this._getConfig(e),this._triggerArray=st.makeArray(st('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'));for(var n=st(Ct),i=0;i<n.length;i++){var r=n[i],o=Rr.getSelectorFromElement(r);null!==o&&0<st(o).filter(t).length&&(this._selector=o,this._triggerArray.push(r))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var t=a.prototype;return t.toggle=function(){st(this._element).hasClass(pt)?this.hide():this.show()},t.show=function(){var t,e,n=this;if(!this._isTransitioning&&!st(this._element).hasClass(pt)&&(this._parent&&0===(t=st.makeArray(st(this._parent).find(bt).filter('[data-parent="'+this._config.parent+'"]'))).length&&(t=null),!(t&&(e=st(t).not(this._selector).data(lt))&&e._isTransitioning))){var i=st.Event(ft.SHOW);if(st(this._element).trigger(i),!i.isDefaultPrevented()){t&&(a._jQueryInterface.call(st(t).not(this._selector),"hide"),e||st(t).data(lt,null));var r=this._getDimension();st(this._element).removeClass(mt).addClass(gt),(this._element.style[r]=0)<this._triggerArray.length&&st(this._triggerArray).removeClass(_t).attr("aria-expanded",!0),this.setTransitioning(!0);var o=function(){st(n._element).removeClass(gt).addClass(mt).addClass(pt),n._element.style[r]="",n.setTransitioning(!1),st(n._element).trigger(ft.SHOWN)};if(Rr.supportsTransitionEnd()){var s="scroll"+(r[0].toUpperCase()+r.slice(1));st(this._element).one(Rr.TRANSITION_END,o).emulateTransitionEnd(600),this._element.style[r]=this._element[s]+"px"}else o()}}},t.hide=function(){var t=this;if(!this._isTransitioning&&st(this._element).hasClass(pt)){var e=st.Event(ft.HIDE);if(st(this._element).trigger(e),!e.isDefaultPrevented()){var n=this._getDimension();if(this._element.style[n]=this._element.getBoundingClientRect()[n]+"px",Rr.reflow(this._element),st(this._element).addClass(gt).removeClass(mt).removeClass(pt),0<this._triggerArray.length)for(var i=0;i<this._triggerArray.length;i++){var r=this._triggerArray[i],o=Rr.getSelectorFromElement(r);if(null!==o)st(o).hasClass(pt)||st(r).addClass(_t).attr("aria-expanded",!1)}this.setTransitioning(!0);var s=function(){t.setTransitioning(!1),st(t._element).removeClass(gt).addClass(mt).trigger(ft.HIDDEN)};this._element.style[n]="",Rr.supportsTransitionEnd()?st(this._element).one(Rr.TRANSITION_END,s).emulateTransitionEnd(600):s()}}},t.setTransitioning=function(t){this._isTransitioning=t},t.dispose=function(){st.removeData(this._element,lt),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},t._getConfig=function(t){return(t=s({},ut,t)).toggle=Boolean(t.toggle),Rr.typeCheckConfig(at,t,dt),t},t._getDimension=function(){return st(this._element).hasClass(vt)?vt:yt},t._getParent=function(){var n=this,t=null;Rr.isElement(this._config.parent)?(t=this._config.parent,void 0!==this._config.parent.jquery&&(t=this._config.parent[0])):t=st(this._config.parent)[0];var e='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]';return st(t).find(e).each(function(t,e){n._addAriaAndCollapsedClass(a._getTargetFromElement(e),[e])}),t},t._addAriaAndCollapsedClass=function(t,e){if(t){var n=st(t).hasClass(pt);0<e.length&&st(e).toggleClass(_t,!n).attr("aria-expanded",n)}},a._getTargetFromElement=function(t){var e=Rr.getSelectorFromElement(t);return e?st(e)[0]:null},a._jQueryInterface=function(i){return this.each(function(){var t=st(this),e=t.data(lt),n=s({},ut,t.data(),"object"==typeof i&&i);if(!e&&n.toggle&&/show|hide/.test(i)&&(n.toggle=!1),e||(e=new a(this,n),t.data(lt,e)),"string"==typeof i){if(void 0===e[i])throw new TypeError('No method named "'+i+'"');e[i]()}})},T(a,null,[{key:"VERSION",get:function(){return"4.0.0"}},{key:"Default",get:function(){return ut}}]),a}(),st(document).on(ft.CLICK_DATA_API,Ct,function(t){"A"===t.currentTarget.tagName&&t.preventDefault();var n=st(this),e=Rr.getSelectorFromElement(this);st(e).each(function(){var t=st(this),e=t.data(lt)?"toggle":n.data();Et._jQueryInterface.call(t,e)})}),st.fn[at]=Et._jQueryInterface,st.fn[at].Constructor=Et,st.fn[at].noConflict=function(){return st.fn[at]=ht,Et._jQueryInterface},Tt="modal",At="."+(wt="bs.modal"),St=(It=t).fn[Tt],Dt={backdrop:!0,keyboard:!0,focus:!0,show:!0},kt={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},Nt={HIDE:"hide"+At,HIDDEN:"hidden"+At,SHOW:"show"+At,SHOWN:"shown"+At,FOCUSIN:"focusin"+At,RESIZE:"resize"+At,CLICK_DISMISS:"click.dismiss"+At,KEYDOWN_DISMISS:"keydown.dismiss"+At,MOUSEUP_DISMISS:"mouseup.dismiss"+At,MOUSEDOWN_DISMISS:"mousedown.dismiss"+At,CLICK_DATA_API:"click"+At+".data-api"},Ot="modal-scrollbar-measure",$t="modal-backdrop",jt="modal-open",xt="fade",Ft="show",Rt=".modal-dialog",Pt='[data-toggle="modal"]',Qt='[data-dismiss="modal"]',Mt=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Lt=".sticky-top",Ht=".navbar-toggler",Ut=function(){function r(t,e){this._config=this._getConfig(e),this._element=t,this._dialog=It(t).find(Rt)[0],this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._originalBodyPadding=0,this._scrollbarWidth=0}var t=r.prototype;return t.toggle=function(t){return this._isShown?this.hide():this.show(t)},t.show=function(t){var e=this;if(!this._isTransitioning&&!this._isShown){Rr.supportsTransitionEnd()&&It(this._element).hasClass(xt)&&(this._isTransitioning=!0);var n=It.Event(Nt.SHOW,{relatedTarget:t});It(this._element).trigger(n),this._isShown||n.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),It(document.body).addClass(jt),this._setEscapeEvent(),this._setResizeEvent(),It(this._element).on(Nt.CLICK_DISMISS,Qt,function(t){return e.hide(t)}),It(this._dialog).on(Nt.MOUSEDOWN_DISMISS,function(){It(e._element).one(Nt.MOUSEUP_DISMISS,function(t){It(t.target).is(e._element)&&(e._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return e._showElement(t)}))}},t.hide=function(t){var e=this;if(t&&t.preventDefault(),!this._isTransitioning&&this._isShown){var n=It.Event(Nt.HIDE);if(It(this._element).trigger(n),this._isShown&&!n.isDefaultPrevented()){this._isShown=!1;var i=Rr.supportsTransitionEnd()&&It(this._element).hasClass(xt);i&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),It(document).off(Nt.FOCUSIN),It(this._element).removeClass(Ft),It(this._element).off(Nt.CLICK_DISMISS),It(this._dialog).off(Nt.MOUSEDOWN_DISMISS),i?It(this._element).one(Rr.TRANSITION_END,function(t){return e._hideModal(t)}).emulateTransitionEnd(300):this._hideModal()}}},t.dispose=function(){It.removeData(this._element,wt),It(window,document,this._element,this._backdrop).off(At),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._scrollbarWidth=null},t.handleUpdate=function(){this._adjustDialog()},t._getConfig=function(t){return t=s({},Dt,t),Rr.typeCheckConfig(Tt,t,kt),t},t._showElement=function(t){var e=this,n=Rr.supportsTransitionEnd()&&It(this._element).hasClass(xt);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.scrollTop=0,n&&Rr.reflow(this._element),It(this._element).addClass(Ft),this._config.focus&&this._enforceFocus();var i=It.Event(Nt.SHOWN,{relatedTarget:t}),r=function(){e._config.focus&&e._element.focus(),e._isTransitioning=!1,It(e._element).trigger(i)};n?It(this._dialog).one(Rr.TRANSITION_END,r).emulateTransitionEnd(300):r()},t._enforceFocus=function(){var e=this;It(document).off(Nt.FOCUSIN).on(Nt.FOCUSIN,function(t){document!==t.target&&e._element!==t.target&&0===It(e._element).has(t.target).length&&e._element.focus()})},t._setEscapeEvent=function(){var e=this;this._isShown&&this._config.keyboard?It(this._element).on(Nt.KEYDOWN_DISMISS,function(t){27===t.which&&(t.preventDefault(),e.hide())}):this._isShown||It(this._element).off(Nt.KEYDOWN_DISMISS)},t._setResizeEvent=function(){var e=this;this._isShown?It(window).on(Nt.RESIZE,function(t){return e.handleUpdate(t)}):It(window).off(Nt.RESIZE)},t._hideModal=function(){var t=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._isTransitioning=!1,this._showBackdrop(function(){It(document.body).removeClass(jt),t._resetAdjustments(),t._resetScrollbar(),It(t._element).trigger(Nt.HIDDEN)})},t._removeBackdrop=function(){this._backdrop&&(It(this._backdrop).remove(),this._backdrop=null)},t._showBackdrop=function(t){var e=this,n=It(this._element).hasClass(xt)?xt:"";if(this._isShown&&this._config.backdrop){var i=Rr.supportsTransitionEnd()&&n;if(this._backdrop=document.createElement("div"),this._backdrop.className=$t,n&&It(this._backdrop).addClass(n),It(this._backdrop).appendTo(document.body),It(this._element).on(Nt.CLICK_DISMISS,function(t){e._ignoreBackdropClick?e._ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"===e._config.backdrop?e._element.focus():e.hide())}),i&&Rr.reflow(this._backdrop),It(this._backdrop).addClass(Ft),!t)return;if(!i)return void t();It(this._backdrop).one(Rr.TRANSITION_END,t).emulateTransitionEnd(150)}else if(!this._isShown&&this._backdrop){It(this._backdrop).removeClass(Ft);var r=function(){e._removeBackdrop(),t&&t()};Rr.supportsTransitionEnd()&&It(this._element).hasClass(xt)?It(this._backdrop).one(Rr.TRANSITION_END,r).emulateTransitionEnd(150):r()}else t&&t()},t._adjustDialog=function(){var t=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&t&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!t&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},t._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},t._checkScrollbar=function(){var t=document.body.getBoundingClientRect();this._isBodyOverflowing=t.left+t.right<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},t._setScrollbar=function(){var r=this;if(this._isBodyOverflowing){It(Mt).each(function(t,e){var n=It(e)[0].style.paddingRight,i=It(e).css("padding-right");It(e).data("padding-right",n).css("padding-right",parseFloat(i)+r._scrollbarWidth+"px")}),It(Lt).each(function(t,e){var n=It(e)[0].style.marginRight,i=It(e).css("margin-right");It(e).data("margin-right",n).css("margin-right",parseFloat(i)-r._scrollbarWidth+"px")}),It(Ht).each(function(t,e){var n=It(e)[0].style.marginRight,i=It(e).css("margin-right");It(e).data("margin-right",n).css("margin-right",parseFloat(i)+r._scrollbarWidth+"px")});var t=document.body.style.paddingRight,e=It("body").css("padding-right");It("body").data("padding-right",t).css("padding-right",parseFloat(e)+this._scrollbarWidth+"px")}},t._resetScrollbar=function(){It(Mt).each(function(t,e){var n=It(e).data("padding-right");void 0!==n&&It(e).css("padding-right",n).removeData("padding-right")}),It(Lt+", "+Ht).each(function(t,e){var n=It(e).data("margin-right");void 0!==n&&It(e).css("margin-right",n).removeData("margin-right")});var t=It("body").data("padding-right");void 0!==t&&It("body").css("padding-right",t).removeData("padding-right")},t._getScrollbarWidth=function(){var t=document.createElement("div");t.className=Ot,document.body.appendChild(t);var e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e},r._jQueryInterface=function(n,i){return this.each(function(){var t=It(this).data(wt),e=s({},r.Default,It(this).data(),"object"==typeof n&&n);if(t||(t=new r(this,e),It(this).data(wt,t)),"string"==typeof n){if(void 0===t[n])throw new TypeError('No method named "'+n+'"');t[n](i)}else e.show&&t.show(i)})},T(r,null,[{key:"VERSION",get:function(){return"4.0.0"}},{key:"Default",get:function(){return Dt}}]),r}(),It(document).on(Nt.CLICK_DATA_API,Pt,function(t){var e,n=this,i=Rr.getSelectorFromElement(this);i&&(e=It(i)[0]);var r=It(e).data(wt)?"toggle":s({},It(e).data(),It(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||t.preventDefault();var o=It(e).one(Nt.SHOW,function(t){t.isDefaultPrevented()||o.one(Nt.HIDDEN,function(){It(n).is(":visible")&&n.focus()})});Ut._jQueryInterface.call(It(e),r,this)}),It.fn[Tt]=Ut._jQueryInterface,It.fn[Tt].Constructor=Ut,It.fn[Tt].noConflict=function(){return It.fn[Tt]=St,Ut._jQueryInterface},Bt="tooltip",Kt="."+(Gt="bs.tooltip"),qt=(Wt=t).fn[Bt],Vt="bs-tooltip",Yt=new RegExp("(^|\\s)"+Vt+"\\S+","g"),Zt={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!(Xt={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"}),selector:!(zt={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)"}),placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent"},te="out",ee={HIDE:"hide"+Kt,HIDDEN:"hidden"+Kt,SHOW:(Jt="show")+Kt,SHOWN:"shown"+Kt,INSERTED:"inserted"+Kt,CLICK:"click"+Kt,FOCUSIN:"focusin"+Kt,FOCUSOUT:"focusout"+Kt,MOUSEENTER:"mouseenter"+Kt,MOUSELEAVE:"mouseleave"+Kt},ne="fade",ie="show",re=".tooltip-inner",oe=".arrow",se="hover",ae="focus",le="click",ce="manual",he=function(){function c(t,e){if(void 0===h)throw new TypeError("Bootstrap tooltips require Popper.js (https://popper.js.org)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=t,this.config=this._getConfig(e),this.tip=null,this._setListeners()}var t=c.prototype;return t.enable=function(){this._isEnabled=!0},t.disable=function(){this._isEnabled=!1},t.toggleEnabled=function(){this._isEnabled=!this._isEnabled},t.toggle=function(t){if(this._isEnabled)if(t){var e=this.constructor.DATA_KEY,n=Wt(t.currentTarget).data(e);n||(n=new this.constructor(t.currentTarget,this._getDelegateConfig()),Wt(t.currentTarget).data(e,n)),n._activeTrigger.click=!n._activeTrigger.click,n._isWithActiveTrigger()?n._enter(null,n):n._leave(null,n)}else{if(Wt(this.getTipElement()).hasClass(ie))return void this._leave(null,this);this._enter(null,this)}},t.dispose=function(){clearTimeout(this._timeout),Wt.removeData(this.element,this.constructor.DATA_KEY),Wt(this.element).off(this.constructor.EVENT_KEY),Wt(this.element).closest(".modal").off("hide.bs.modal"),this.tip&&Wt(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,(this._activeTrigger=null)!==this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},t.show=function(){var e=this;if("none"===Wt(this.element).css("display"))throw new Error("Please use show on visible elements");var t=Wt.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){Wt(this.element).trigger(t);var n=Wt.contains(this.element.ownerDocument.documentElement,this.element);if(t.isDefaultPrevented()||!n)return;var i=this.getTipElement(),r=Rr.getUID(this.constructor.NAME);i.setAttribute("id",r),this.element.setAttribute("aria-describedby",r),this.setContent(),this.config.animation&&Wt(i).addClass(ne);var o="function"==typeof this.config.placement?this.config.placement.call(this,i,this.element):this.config.placement,s=this._getAttachment(o);this.addAttachmentClass(s);var a=!1===this.config.container?document.body:Wt(this.config.container);Wt(i).data(this.constructor.DATA_KEY,this),Wt.contains(this.element.ownerDocument.documentElement,this.tip)||Wt(i).appendTo(a),Wt(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new h(this.element,i,{placement:s,modifiers:{offset:{offset:this.config.offset},flip:{behavior:this.config.fallbackPlacement},arrow:{element:oe},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(t){t.originalPlacement!==t.placement&&e._handlePopperPlacementChange(t)},onUpdate:function(t){e._handlePopperPlacementChange(t)}}),Wt(i).addClass(ie),"ontouchstart"in document.documentElement&&Wt("body").children().on("mouseover",null,Wt.noop);var l=function(){e.config.animation&&e._fixTransition();var t=e._hoverState;e._hoverState=null,Wt(e.element).trigger(e.constructor.Event.SHOWN),t===te&&e._leave(null,e)};Rr.supportsTransitionEnd()&&Wt(this.tip).hasClass(ne)?Wt(this.tip).one(Rr.TRANSITION_END,l).emulateTransitionEnd(c._TRANSITION_DURATION):l()}},t.hide=function(t){var e=this,n=this.getTipElement(),i=Wt.Event(this.constructor.Event.HIDE),r=function(){e._hoverState!==Jt&&n.parentNode&&n.parentNode.removeChild(n),e._cleanTipClass(),e.element.removeAttribute("aria-describedby"),Wt(e.element).trigger(e.constructor.Event.HIDDEN),null!==e._popper&&e._popper.destroy(),t&&t()};Wt(this.element).trigger(i),i.isDefaultPrevented()||(Wt(n).removeClass(ie),"ontouchstart"in document.documentElement&&Wt("body").children().off("mouseover",null,Wt.noop),this._activeTrigger[le]=!1,this._activeTrigger[ae]=!1,this._activeTrigger[se]=!1,Rr.supportsTransitionEnd()&&Wt(this.tip).hasClass(ne)?Wt(n).one(Rr.TRANSITION_END,r).emulateTransitionEnd(150):r(),this._hoverState="")},t.update=function(){null!==this._popper&&this._popper.scheduleUpdate()},t.isWithContent=function(){return Boolean(this.getTitle())},t.addAttachmentClass=function(t){Wt(this.getTipElement()).addClass(Vt+"-"+t)},t.getTipElement=function(){return this.tip=this.tip||Wt(this.config.template)[0],this.tip},t.setContent=function(){var t=Wt(this.getTipElement());this.setElementContent(t.find(re),this.getTitle()),t.removeClass(ne+" "+ie)},t.setElementContent=function(t,e){var n=this.config.html;"object"==typeof e&&(e.nodeType||e.jquery)?n?Wt(e).parent().is(t)||t.empty().append(e):t.text(Wt(e).text()):t[n?"html":"text"](e)},t.getTitle=function(){var t=this.element.getAttribute("data-original-title");return t||(t="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),t},t._getAttachment=function(t){return Xt[t.toUpperCase()]},t._setListeners=function(){var i=this;this.config.trigger.split(" ").forEach(function(t){if("click"===t)Wt(i.element).on(i.constructor.Event.CLICK,i.config.selector,function(t){return i.toggle(t)});else if(t!==ce){var e=t===se?i.constructor.Event.MOUSEENTER:i.constructor.Event.FOCUSIN,n=t===se?i.constructor.Event.MOUSELEAVE:i.constructor.Event.FOCUSOUT;Wt(i.element).on(e,i.config.selector,function(t){return i._enter(t)}).on(n,i.config.selector,function(t){return i._leave(t)})}Wt(i.element).closest(".modal").on("hide.bs.modal",function(){return i.hide()})}),this.config.selector?this.config=s({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},t._fixTitle=function(){var t=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||"string"!==t)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},t._enter=function(t,e){var n=this.constructor.DATA_KEY;(e=e||Wt(t.currentTarget).data(n))||(e=new this.constructor(t.currentTarget,this._getDelegateConfig()),Wt(t.currentTarget).data(n,e)),t&&(e._activeTrigger["focusin"===t.type?ae:se]=!0),Wt(e.getTipElement()).hasClass(ie)||e._hoverState===Jt?e._hoverState=Jt:(clearTimeout(e._timeout),e._hoverState=Jt,e.config.delay&&e.config.delay.show?e._timeout=setTimeout(function(){e._hoverState===Jt&&e.show()},e.config.delay.show):e.show())},t._leave=function(t,e){var n=this.constructor.DATA_KEY;(e=e||Wt(t.currentTarget).data(n))||(e=new this.constructor(t.currentTarget,this._getDelegateConfig()),Wt(t.currentTarget).data(n,e)),t&&(e._activeTrigger["focusout"===t.type?ae:se]=!1),e._isWithActiveTrigger()||(clearTimeout(e._timeout),e._hoverState=te,e.config.delay&&e.config.delay.hide?e._timeout=setTimeout(function(){e._hoverState===te&&e.hide()},e.config.delay.hide):e.hide())},t._isWithActiveTrigger=function(){for(var t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1},t._getConfig=function(t){return"number"==typeof(t=s({},this.constructor.Default,Wt(this.element).data(),t)).delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),Rr.typeCheckConfig(Bt,t,this.constructor.DefaultType),t},t._getDelegateConfig=function(){var t={};if(this.config)for(var e in this.config)this.constructor.Default[e]!==this.config[e]&&(t[e]=this.config[e]);return t},t._cleanTipClass=function(){var t=Wt(this.getTipElement()),e=t.attr("class").match(Yt);null!==e&&0<e.length&&t.removeClass(e.join(""))},t._handlePopperPlacementChange=function(t){this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(t.placement))},t._fixTransition=function(){var t=this.getTipElement(),e=this.config.animation;null===t.getAttribute("x-placement")&&(Wt(t).removeClass(ne),this.config.animation=!1,this.hide(),this.show(),this.config.animation=e)},c._jQueryInterface=function(n){return this.each(function(){var t=Wt(this).data(Gt),e="object"==typeof n&&n;if((t||!/dispose|hide/.test(n))&&(t||(t=new c(this,e),Wt(this).data(Gt,t)),"string"==typeof n)){if(void 0===t[n])throw new TypeError('No method named "'+n+'"');t[n]()}})},T(c,null,[{key:"VERSION",get:function(){return"4.0.0"}},{key:"Default",get:function(){return Zt}},{key:"NAME",get:function(){return Bt}},{key:"DATA_KEY",get:function(){return Gt}},{key:"Event",get:function(){return ee}},{key:"EVENT_KEY",get:function(){return Kt}},{key:"DefaultType",get:function(){return zt}}]),c}(),Wt.fn[Bt]=he._jQueryInterface,Wt.fn[Bt].Constructor=he,Wt.fn[Bt].noConflict=function(){return Wt.fn[Bt]=qt,he._jQueryInterface},he),Qr=(de="popover",pe="."+(fe="bs.popover"),me=(ue=t).fn[de],ge="bs-popover",_e=new RegExp("(^|\\s)"+ge+"\\S+","g"),ve=s({},Pr.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),ye=s({},Pr.DefaultType,{content:"(string|element|function)"}),be="fade",Ee=".popover-header",Ie=".popover-body",Te={HIDE:"hide"+pe,HIDDEN:"hidden"+pe,SHOW:(Ce="show")+pe,SHOWN:"shown"+pe,INSERTED:"inserted"+pe,CLICK:"click"+pe,FOCUSIN:"focusin"+pe,FOCUSOUT:"focusout"+pe,MOUSEENTER:"mouseenter"+pe,MOUSELEAVE:"mouseleave"+pe},we=function(t){function i(){return t.apply(this,arguments)||this}a(i,t);var e=i.prototype;return e.isWithContent=function(){return this.getTitle()||this._getContent()},e.addAttachmentClass=function(t){ue(this.getTipElement()).addClass(ge+"-"+t)},e.getTipElement=function(){return this.tip=this.tip||ue(this.config.template)[0],this.tip},e.setContent=function(){var t=ue(this.getTipElement());this.setElementContent(t.find(Ee),this.getTitle());var e=this._getContent();"function"==typeof e&&(e=e.call(this.element)),this.setElementContent(t.find(Ie),e),t.removeClass(be+" "+Ce)},e._getContent=function(){return this.element.getAttribute("data-content")||this.config.content},e._cleanTipClass=function(){var t=ue(this.getTipElement()),e=t.attr("class").match(_e);null!==e&&0<e.length&&t.removeClass(e.join(""))},i._jQueryInterface=function(n){return this.each(function(){var t=ue(this).data(fe),e="object"==typeof n?n:null;if((t||!/destroy|hide/.test(n))&&(t||(t=new i(this,e),ue(this).data(fe,t)),"string"==typeof n)){if(void 0===t[n])throw new TypeError('No method named "'+n+'"');t[n]()}})},T(i,null,[{key:"VERSION",get:function(){return"4.0.0"}},{key:"Default",get:function(){return ve}},{key:"NAME",get:function(){return de}},{key:"DATA_KEY",get:function(){return fe}},{key:"Event",get:function(){return Te}},{key:"EVENT_KEY",get:function(){return pe}},{key:"DefaultType",get:function(){return ye}}]),i}(Pr),ue.fn[de]=we._jQueryInterface,ue.fn[de].Constructor=we,ue.fn[de].noConflict=function(){return ue.fn[de]=me,we._jQueryInterface},Se="scrollspy",ke="."+(De="bs.scrollspy"),Ne=(Ae=t).fn[Se],Oe={offset:10,method:"auto",target:""},$e={offset:"number",method:"string",target:"(string|element)"},je={ACTIVATE:"activate"+ke,SCROLL:"scroll"+ke,LOAD_DATA_API:"load"+ke+".data-api"},xe="dropdown-item",Fe="active",Re='[data-spy="scroll"]',Pe=".active",Qe=".nav, .list-group",Me=".nav-link",Le=".nav-item",He=".list-group-item",Ue=".dropdown",We=".dropdown-item",Be=".dropdown-toggle",Ge="offset",Ke="position",qe=function(){function n(t,e){var n=this;this._element=t,this._scrollElement="BODY"===t.tagName?window:t,this._config=this._getConfig(e),this._selector=this._config.target+" "+Me+","+this._config.target+" "+He+","+this._config.target+" "+We,this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,Ae(this._scrollElement).on(je.SCROLL,function(t){return n._process(t)}),this.refresh(),this._process()}var t=n.prototype;return t.refresh=function(){var e=this,t=this._scrollElement===this._scrollElement.window?Ge:Ke,r="auto"===this._config.method?t:this._config.method,o=r===Ke?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),Ae.makeArray(Ae(this._selector)).map(function(t){var e,n=Rr.getSelectorFromElement(t);if(n&&(e=Ae(n)[0]),e){var i=e.getBoundingClientRect();if(i.width||i.height)return[Ae(e)[r]().top+o,n]}return null}).filter(function(t){return t}).sort(function(t,e){return t[0]-e[0]}).forEach(function(t){e._offsets.push(t[0]),e._targets.push(t[1])})},t.dispose=function(){Ae.removeData(this._element,De),Ae(this._scrollElement).off(ke),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},t._getConfig=function(t){if("string"!=typeof(t=s({},Oe,t)).target){var e=Ae(t.target).attr("id");e||(e=Rr.getUID(Se),Ae(t.target).attr("id",e)),t.target="#"+e}return Rr.typeCheckConfig(Se,t,$e),t},t._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},t._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},t._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},t._process=function(){var t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),n=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),n<=t){var i=this._targets[this._targets.length-1];this._activeTarget!==i&&this._activate(i)}else{if(this._activeTarget&&t<this._offsets[0]&&0<this._offsets[0])return this._activeTarget=null,void this._clear();for(var r=this._offsets.length;r--;){this._activeTarget!==this._targets[r]&&t>=this._offsets[r]&&(void 0===this._offsets[r+1]||t<this._offsets[r+1])&&this._activate(this._targets[r])}}},t._activate=function(e){this._activeTarget=e,this._clear();var t=this._selector.split(",");t=t.map(function(t){return t+'[data-target="'+e+'"],'+t+'[href="'+e+'"]'});var n=Ae(t.join(","));n.hasClass(xe)?(n.closest(Ue).find(Be).addClass(Fe),n.addClass(Fe)):(n.addClass(Fe),n.parents(Qe).prev(Me+", "+He).addClass(Fe),n.parents(Qe).prev(Le).children(Me).addClass(Fe)),Ae(this._scrollElement).trigger(je.ACTIVATE,{relatedTarget:e})},t._clear=function(){Ae(this._selector).filter(Pe).removeClass(Fe)},n._jQueryInterface=function(e){return this.each(function(){var t=Ae(this).data(De);if(t||(t=new n(this,"object"==typeof e&&e),Ae(this).data(De,t)),"string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'+e+'"');t[e]()}})},T(n,null,[{key:"VERSION",get:function(){return"4.0.0"}},{key:"Default",get:function(){return Oe}}]),n}(),Ae(window).on(je.LOAD_DATA_API,function(){for(var t=Ae.makeArray(Ae(Re)),e=t.length;e--;){var n=Ae(t[e]);qe._jQueryInterface.call(n,n.data())}}),Ae.fn[Se]=qe._jQueryInterface,Ae.fn[Se].Constructor=qe,Ae.fn[Se].noConflict=function(){return Ae.fn[Se]=Ne,qe._jQueryInterface},ze="."+(Ye="bs.tab"),Xe=(Ve=t).fn.tab,Ze={HIDE:"hide"+ze,HIDDEN:"hidden"+ze,SHOW:"show"+ze,SHOWN:"shown"+ze,CLICK_DATA_API:"click"+ze+".data-api"},Je="dropdown-menu",tn="active",en="disabled",nn="fade",rn="show",on=".dropdown",sn=".nav, .list-group",an=".active",ln="> li > .active",cn='[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',hn=".dropdown-toggle",un="> .dropdown-menu .active",dn=function(){function i(t){this._element=t}var t=i.prototype;return t.show=function(){var n=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&Ve(this._element).hasClass(tn)||Ve(this._element).hasClass(en))){var t,i,e=Ve(this._element).closest(sn)[0],r=Rr.getSelectorFromElement(this._element);if(e){var o="UL"===e.nodeName?ln:an;i=(i=Ve.makeArray(Ve(e).find(o)))[i.length-1]}var s=Ve.Event(Ze.HIDE,{relatedTarget:this._element}),a=Ve.Event(Ze.SHOW,{relatedTarget:i});if(i&&Ve(i).trigger(s),Ve(this._element).trigger(a),!a.isDefaultPrevented()&&!s.isDefaultPrevented()){r&&(t=Ve(r)[0]),this._activate(this._element,e);var l=function(){var t=Ve.Event(Ze.HIDDEN,{relatedTarget:n._element}),e=Ve.Event(Ze.SHOWN,{relatedTarget:i});Ve(i).trigger(t),Ve(n._element).trigger(e)};t?this._activate(t,t.parentNode,l):l()}}},t.dispose=function(){Ve.removeData(this._element,Ye),this._element=null},t._activate=function(t,e,n){var i=this,r=("UL"===e.nodeName?Ve(e).find(ln):Ve(e).children(an))[0],o=n&&Rr.supportsTransitionEnd()&&r&&Ve(r).hasClass(nn),s=function(){return i._transitionComplete(t,r,n)};r&&o?Ve(r).one(Rr.TRANSITION_END,s).emulateTransitionEnd(150):s()},t._transitionComplete=function(t,e,n){if(e){Ve(e).removeClass(rn+" "+tn);var i=Ve(e.parentNode).find(un)[0];i&&Ve(i).removeClass(tn),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!1)}if(Ve(t).addClass(tn),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!0),Rr.reflow(t),Ve(t).addClass(rn),t.parentNode&&Ve(t.parentNode).hasClass(Je)){var r=Ve(t).closest(on)[0];r&&Ve(r).find(hn).addClass(tn),t.setAttribute("aria-expanded",!0)}n&&n()},i._jQueryInterface=function(n){return this.each(function(){var t=Ve(this),e=t.data(Ye);if(e||(e=new i(this),t.data(Ye,e)),"string"==typeof n){if(void 0===e[n])throw new TypeError('No method named "'+n+'"');e[n]()}})},T(i,null,[{key:"VERSION",get:function(){return"4.0.0"}}]),i}(),Ve(document).on(Ze.CLICK_DATA_API,cn,function(t){t.preventDefault(),dn._jQueryInterface.call(Ve(this),"show")}),Ve.fn.tab=dn._jQueryInterface,Ve.fn.tab.Constructor=dn,Ve.fn.tab.noConflict=function(){return Ve.fn.tab=Xe,dn._jQueryInterface},jQuery,fn=!1,pn="",mn={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},gn={transitionEndSupported:function(){return fn},transitionEndSelector:function(){return pn},isChar:function(t){return void 0===t.which||"number"==typeof t.which&&0<t.which&&(!t.ctrlKey&&!t.metaKey&&!t.altKey&&8!==t.which&&9!==t.which&&13!==t.which&&16!==t.which&&17!==t.which&&20!==t.which&&27!==t.which)},assert:function(t,e,n){if(e)throw void 0===!t&&t.css("border","1px solid red"),console.error(n,t),n},describe:function(t){return void 0===t?"undefined":0===t.length?"(no matching elements)":t[0].outerHTML.split(">")[0]+">"}},function(){for(var t in fn=function(){if(window.QUnit)return!1;var t=document.createElement("bmd");for(var e in mn)if(void 0!==t.style[e])return mn[e];return!1}(),mn)pn+=" "+mn[t]}(),gn),Mr=(_n=jQuery,vn="is-filled",yn="is-focused",bn={BMD_FORM_GROUP:"."+"bmd-form-group"},Cn={},function(){function t(t,e,n){for(var i in void 0===n&&(n={}),this.$element=t,this.config=_n.extend(!0,{},Cn,e),n)this[i]=n[i]}var e=t.prototype;return e.dispose=function(t){this.$element.data(t,null),this.$element=null,this.config=null},e.addFormGroupFocus=function(){this.$element.prop("disabled")||this.$bmdFormGroup.addClass(yn)},e.removeFormGroupFocus=function(){this.$bmdFormGroup.removeClass(yn)},e.removeIsFilled=function(){this.$bmdFormGroup.removeClass(vn)},e.addIsFilled=function(){this.$bmdFormGroup.addClass(vn)},e.findMdbFormGroup=function(t){void 0===t&&(t=!0);var e=this.$element.closest(bn.BMD_FORM_GROUP);return 0===e.length&&t&&_n.error("Failed to find "+bn.BMD_FORM_GROUP+" for "+Qr.describe(this.$element)),e},t}()),Lr=(En=jQuery,Dn={validate:!(Sn={FORM_GROUP:"."+"form-group",BMD_FORM_GROUP:"."+(In="bmd-form-group"),BMD_LABEL_WILDCARD:"label[class^='"+(Tn="bmd-label")+"'], label[class*=' "+Tn+"']"}),formGroup:{required:!(An="input-group")},bmdFormGroup:{template:"<span class='"+In+"'></span>",create:!0,required:!0},label:{required:!(wn="has-danger"),selectors:[".form-control-label","> label"],className:"bmd-label-static"},requiredClasses:[],invalidComponentMatches:[],convertInputSizeVariations:!0},kn={"form-control-lg":"bmd-form-group-lg","form-control-sm":"bmd-form-group-sm"},function(r){function t(t,e,n){var i;return void 0===n&&(n={}),(i=r.call(this,t,En.extend(!0,{},Dn,e),n)||this)._rejectInvalidComponentMatches(),i.rejectWithoutRequiredStructure(),i._rejectWithoutRequiredClasses(),i.$formGroup=i.findFormGroup(i.config.formGroup.required),i.$bmdFormGroup=i.resolveMdbFormGroup(),i.$bmdLabel=i.resolveMdbLabel(),i.resolveMdbFormGroupSizing(),i.addFocusListener(),i.addChangeListener(),""!=i.$element.val()&&i.addIsFilled(),i}a(t,r);var e=t.prototype;return e.dispose=function(t){r.prototype.dispose.call(this,t),this.$bmdFormGroup=null,this.$formGroup=null},e.rejectWithoutRequiredStructure=function(){},e.addFocusListener=function(){var t=this;this.$element.on("focus",function(){t.addFormGroupFocus()}).on("blur",function(){t.removeFormGroupFocus()})},e.addChangeListener=function(){var e=this;this.$element.on("keydown paste",function(t){Qr.isChar(t)&&e.addIsFilled()}).on("keyup change",function(){e.isEmpty()?e.removeIsFilled():e.addIsFilled(),e.config.validate&&(void 0===e.$element[0].checkValidity||e.$element[0].checkValidity()?e.removeHasDanger():e.addHasDanger())})},e.addHasDanger=function(){this.$bmdFormGroup.addClass(wn)},e.removeHasDanger=function(){this.$bmdFormGroup.removeClass(wn)},e.isEmpty=function(){return null===this.$element.val()||void 0===this.$element.val()||""===this.$element.val()},e.resolveMdbFormGroup=function(){var t=this.findMdbFormGroup(!1);return void 0!==t&&0!==t.length||(!this.config.bmdFormGroup.create||void 0!==this.$formGroup&&0!==this.$formGroup.length?this.$formGroup.addClass(In):this.outerElement().parent().hasClass(An)?this.outerElement().parent().wrap(this.config.bmdFormGroup.template):this.outerElement().wrap(this.config.bmdFormGroup.template),t=this.findMdbFormGroup(this.config.bmdFormGroup.required)),t},e.outerElement=function(){return this.$element},e.resolveMdbLabel=function(){var t=this.$bmdFormGroup.find(Sn.BMD_LABEL_WILDCARD);return void 0!==t&&0!==t.length||void 0===(t=this.findMdbLabel(this.config.label.required))||0===t.length||t.addClass(this.config.label.className),t},e.findMdbLabel=function(t){void 0===t&&(t=!0);var e=null,n=this.config.label.selectors,i=Array.isArray(n),r=0;for(n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++]}else{if((r=n.next()).done)break;o=r.value}var s=o;if(void 0!==(e=En.isFunction(s)?s(this):this.$bmdFormGroup.find(s))&&0<e.length)break}return 0===e.length&&t&&En.error("Failed to find "+Sn.BMD_LABEL_WILDCARD+" within form-group for "+Qr.describe(this.$element)),e},e.findFormGroup=function(t){void 0===t&&(t=!0);var e=this.$element.closest(Sn.FORM_GROUP);return 0===e.length&&t&&En.error("Failed to find "+Sn.FORM_GROUP+" for "+Qr.describe(this.$element)),e},e.resolveMdbFormGroupSizing=function(){if(this.config.convertInputSizeVariations)for(var t in kn)this.$element.hasClass(t)&&this.$bmdFormGroup.addClass(kn[t])},e._rejectInvalidComponentMatches=function(){var t=this.config.invalidComponentMatches,e=Array.isArray(t),n=0;for(t=e?t:t[Symbol.iterator]();;){var i;if(e){if(n>=t.length)break;i=t[n++]}else{if((n=t.next()).done)break;i=n.value}i.rejectMatch(this.constructor.name,this.$element)}},e._rejectWithoutRequiredClasses=function(){var t=this.config.requiredClasses,e=Array.isArray(t),n=0;for(t=e?t:t[Symbol.iterator]();;){var i;if(e){if(n>=t.length)break;i=t[n++]}else{if((n=t.next()).done)break;i=n.value}var r=i,o=!1;if(-1!==r.indexOf("||")){var s=r.split("||"),a=Array.isArray(s),l=0;for(s=a?s:s[Symbol.iterator]();;){var c;if(a){if(l>=s.length)break;c=s[l++]}else{if((l=s.next()).done)break;c=l.value}var h=c;if(this.$element.hasClass(h)){o=!0;break}}}else this.$element.hasClass(r)&&(o=!0);o||En.error(this.constructor.name+" element: "+Qr.describe(this.$element)+" requires class: "+r)}},t}(Mr)),Hr=(Nn=jQuery,On={label:{required:!1}},$n="label",function(r){function t(t,e,n){var i;return(i=r.call(this,t,Nn.extend(!0,{},On,e),n)||this).decorateMarkup(),i}a(t,r);var e=t.prototype;return e.decorateMarkup=function(){var t=Nn(this.config.template);this.$element.after(t),!1!==this.config.ripples&&t.bmdRipples()},e.outerElement=function(){return this.$element.parent().closest("."+this.outerClass)},e.rejectWithoutRequiredStructure=function(){Qr.assert(this.$element,"label"===!this.$element.parent().prop("tagName"),this.constructor.name+"'s "+Qr.describe(this.$element)+" parent element should be <label>."),Qr.assert(this.$element,!this.outerElement().hasClass(this.outerClass),this.constructor.name+"'s "+Qr.describe(this.$element)+" outer element should have class "+this.outerClass+".")},e.addFocusListener=function(){var t=this;this.$element.closest($n).hover(function(){t.addFormGroupFocus()},function(){t.removeFormGroupFocus()})},e.addChangeListener=function(){var t=this;this.$element.change(function(){t.$element.blur()})},t}(Lr)),Ur=(jn=jQuery,Fn="bmd."+(xn="checkbox"),Rn="bmd"+(xn.charAt(0).toUpperCase()+xn.slice(1)),Pn=jn.fn[Rn],Qn={template:"<span class='checkbox-decorator'><span class='check'></span></span>"},Mn=function(i){function r(t,e,n){return void 0===n&&(n={inputType:xn,outerClass:xn}),i.call(this,t,jn.extend(!0,Qn,e),n)||this}return a(r,i),r.prototype.dispose=function(t){void 0===t&&(t=Fn),i.prototype.dispose.call(this,t)},r.matches=function(t){return"checkbox"===t.attr("type")},r.rejectMatch=function(t,e){Qr.assert(this.$element,this.matches(e),t+" component element "+Qr.describe(e)+" is invalid for type='checkbox'.")},r._jQueryInterface=function(n){return this.each(function(){var t=jn(this),e=t.data(Fn);e||(e=new r(t,n),t.data(Fn,e))})},r}(Hr),jn.fn[Rn]=Mn._jQueryInterface,jn.fn[Rn].Constructor=Mn,jn.fn[Rn].noConflict=function(){return jn.fn[Rn]=Pn,Mn._jQueryInterface},Mn),Wr=(Ln=jQuery,Un="bmd."+(Hn="checkboxInline"),Wn="bmd"+(Hn.charAt(0).toUpperCase()+Hn.slice(1)),Bn=Ln.fn[Wn],Gn={bmdFormGroup:{create:!1,required:!1}},Kn=function(i){function r(t,e,n){return void 0===n&&(n={inputType:"checkbox",outerClass:"checkbox-inline"}),i.call(this,t,Ln.extend(!0,{},Gn,e),n)||this}return a(r,i),r.prototype.dispose=function(){i.prototype.dispose.call(this,Un)},r._jQueryInterface=function(n){return this.each(function(){var t=Ln(this),e=t.data(Un);e||(e=new r(t,n),t.data(Un,e))})},r}(Ur),Ln.fn[Wn]=Kn._jQueryInterface,Ln.fn[Wn].Constructor=Kn,Ln.fn[Wn].noConflict=function(){return Ln.fn[Wn]=Bn,Kn._jQueryInterface},qn=jQuery,Yn="bmd."+(Vn="collapseInline"),zn="bmd"+(Vn.charAt(0).toUpperCase()+Vn.slice(1)),Xn=qn.fn[zn],Zn="input, select, textarea",Jn="collapse",ti="width",ei={},ni=function(o){function i(t,e){var n;(n=o.call(this,t,qn.extend(!0,{},ei,e))||this).$bmdFormGroup=n.findMdbFormGroup(!0);var i=t.data("target");n.$collapse=qn(i),Qr.assert(t,0===n.$collapse.length,"Cannot find collapse target for "+Qr.describe(t)),Qr.assert(n.$collapse,!n.$collapse.hasClass(Jn),Qr.describe(n.$collapse)+" is expected to have the '"+Jn+"' class.  It is being targeted by "+Qr.describe(t));var r=n.$bmdFormGroup.find(Zn);return 0<r.length&&(n.$input=r.first()),n.$collapse.hasClass(ti)||n.$collapse.addClass(ti),n.$input&&(n.$collapse.on("shown.bs.collapse",function(){n.$input.focus()}),n.$input.blur(function(){n.$collapse.collapse("hide")})),n}return a(i,o),i.prototype.dispose=function(){o.prototype.dispose.call(this,Yn),this.$bmdFormGroup=null,this.$collapse=null,this.$input=null},i._jQueryInterface=function(n){return this.each(function(){var t=qn(this),e=t.data(Yn);e||(e=new i(t,n),t.data(Yn,e))})},i}(Mr),qn.fn[zn]=ni._jQueryInterface,qn.fn[zn].Constructor=ni,qn.fn[zn].noConflict=function(){return qn.fn[zn]=Xn,ni._jQueryInterface},ii=jQuery,oi="bmd."+(ri="file"),si="bmd"+(ri.charAt(0).toUpperCase()+ri.slice(1)),ai=ii.fn[si],li={},ci=ri,hi="is-file",ui="input.form-control[readonly]",di=function(i){function r(t,e){var n;return(n=i.call(this,t,ii.extend(!0,li,e))||this).$bmdFormGroup.addClass(hi),n}a(r,i);var t=r.prototype;return t.dispose=function(){i.prototype.dispose.call(this,oi)},r.matches=function(t){return"file"===t.attr("type")},r.rejectMatch=function(t,e){Qr.assert(this.$element,this.matches(e),t+" component element "+Qr.describe(e)+" is invalid for type='file'.")},t.outerElement=function(){return this.$element.parent().closest("."+ci)},t.rejectWithoutRequiredStructure=function(){Qr.assert(this.$element,"label"===!this.outerElement().prop("tagName"),this.constructor.name+"'s "+Qr.describe(this.$element)+" parent element "+Qr.describe(this.outerElement())+" should be <label>."),Qr.assert(this.$element,!this.outerElement().hasClass(ci),this.constructor.name+"'s "+Qr.describe(this.$element)+" parent element "+Qr.describe(this.outerElement())+" should have class ."+ci+".")},t.addFocusListener=function(){var t=this;this.$bmdFormGroup.on("focus",function(){t.addFormGroupFocus()}).on("blur",function(){t.removeFormGroupFocus()})},t.addChangeListener=function(){var t=this;this.$element.on("change",function(){var n="";ii.each(t.$element.files,function(t,e){n+=e.name+"  , "}),(n=n.substring(0,n.length-2))?t.addIsFilled():t.removeIsFilled(),t.$bmdFormGroup.find(ui).val(n)})},r._jQueryInterface=function(n){return this.each(function(){var t=ii(this),e=t.data(oi);e||(e=new r(t,n),t.data(oi,e))})},r}(Lr),ii.fn[si]=di._jQueryInterface,ii.fn[si].Constructor=di,ii.fn[si].noConflict=function(){return ii.fn[si]=ai,di._jQueryInterface},fi=jQuery,mi="bmd."+(pi="radio"),gi="bmd"+(pi.charAt(0).toUpperCase()+pi.slice(1)),_i=fi.fn[gi],vi={template:"<span class='bmd-radio'></span>"},yi=function(i){function r(t,e,n){return void 0===n&&(n={inputType:pi,outerClass:pi}),i.call(this,t,fi.extend(!0,vi,e),n)||this}return a(r,i),r.prototype.dispose=function(t){void 0===t&&(t=mi),i.prototype.dispose.call(this,t)},r.matches=function(t){return"radio"===t.attr("type")},r.rejectMatch=function(t,e){Qr.assert(this.$element,this.matches(e),t+" component element "+Qr.describe(e)+" is invalid for type='radio'.")},r._jQueryInterface=function(n){return this.each(function(){var t=fi(this),e=t.data(mi);e||(e=new r(t,n),t.data(mi,e))})},r}(Hr),fi.fn[gi]=yi._jQueryInterface,fi.fn[gi].Constructor=yi,fi.fn[gi].noConflict=function(){return fi.fn[gi]=_i,yi._jQueryInterface},yi),Br=(bi=jQuery,Ei="bmd."+(Ci="radioInline"),Ii="bmd"+(Ci.charAt(0).toUpperCase()+Ci.slice(1)),Ti=bi.fn[Ii],wi={bmdFormGroup:{create:!1,required:!1}},Ai=function(i){function r(t,e,n){return void 0===n&&(n={inputType:"radio",outerClass:"radio-inline"}),i.call(this,t,bi.extend(!0,{},wi,e),n)||this}return a(r,i),r.prototype.dispose=function(){i.prototype.dispose.call(this,Ei)},r._jQueryInterface=function(n){return this.each(function(){var t=bi(this),e=t.data(Ei);e||(e=new r(t,n),t.data(Ei,e))})},r}(Wr),bi.fn[Ii]=Ai._jQueryInterface,bi.fn[Ii].Constructor=Ai,bi.fn[Ii].noConflict=function(){return bi.fn[Ii]=Ti,Ai._jQueryInterface},Si=jQuery,Di={requiredClasses:["form-control"]},function(i){function t(t,e){var n;return(n=i.call(this,t,Si.extend(!0,Di,e))||this).isEmpty()&&n.removeIsFilled(),n}return a(t,i),t}(Lr)),Gr=(ki=jQuery,Oi="bmd."+(Ni="select"),$i="bmd"+(Ni.charAt(0).toUpperCase()+Ni.slice(1)),ji=ki.fn[$i],xi={requiredClasses:["form-control||custom-select"]},Fi=function(i){function r(t,e){var n;return(n=i.call(this,t,ki.extend(!0,xi,e))||this).addIsFilled(),n}return a(r,i),r.prototype.dispose=function(){i.prototype.dispose.call(this,Oi)},r.matches=function(t){return"select"===t.prop("tagName")},r.rejectMatch=function(t,e){Qr.assert(this.$element,this.matches(e),t+" component element "+Qr.describe(e)+" is invalid for <select>.")},r._jQueryInterface=function(n){return this.each(function(){var t=ki(this),e=t.data(Oi);e||(e=new r(t,n),t.data(Oi,e))})},r}(Br),ki.fn[$i]=Fi._jQueryInterface,ki.fn[$i].Constructor=Fi,ki.fn[$i].noConflict=function(){return ki.fn[$i]=ji,Fi._jQueryInterface},Ri=jQuery,Qi="bmd."+(Pi="switch"),Mi="bmd"+(Pi.charAt(0).toUpperCase()+Pi.slice(1)),Li=Ri.fn[Mi],Hi={template:"<span class='bmd-switch-track'></span>"},Ui=function(i){function r(t,e,n){return void 0===n&&(n={inputType:"checkbox",outerClass:"switch"}),i.call(this,t,Ri.extend(!0,{},Hi,e),n)||this}return a(r,i),r.prototype.dispose=function(){i.prototype.dispose.call(this,Qi)},r._jQueryInterface=function(n){return this.each(function(){var t=Ri(this),e=t.data(Qi);e||(e=new r(t,n),t.data(Qi,e))})},r}(Ur),Ri.fn[Mi]=Ui._jQueryInterface,Ri.fn[Mi].Constructor=Ui,Ri.fn[Mi].noConflict=function(){return Ri.fn[Mi]=Li,Ui._jQueryInterface},Wi=jQuery,Gi="bmd."+(Bi="text"),Ki="bmd"+(Bi.charAt(0).toUpperCase()+Bi.slice(1)),qi=Wi.fn[Ki],Vi={},Yi=function(n){function i(t,e){return n.call(this,t,Wi.extend(!0,Vi,e))||this}return a(i,n),i.prototype.dispose=function(t){void 0===t&&(t=Gi),n.prototype.dispose.call(this,t)},i.matches=function(t){return"text"===t.attr("type")},i.rejectMatch=function(t,e){Qr.assert(this.$element,this.matches(e),t+" component element "+Qr.describe(e)+" is invalid for type='text'.")},i._jQueryInterface=function(n){return this.each(function(){var t=Wi(this),e=t.data(Gi);e||(e=new i(t,n),t.data(Gi,e))})},i}(Br),Wi.fn[Ki]=Yi._jQueryInterface,Wi.fn[Ki].Constructor=Yi,Wi.fn[Ki].noConflict=function(){return Wi.fn[Ki]=qi,Yi._jQueryInterface},zi=jQuery,Zi="bmd."+(Xi="textarea"),Ji="bmd"+(Xi.charAt(0).toUpperCase()+Xi.slice(1)),tr=zi.fn[Ji],er={},nr=function(n){function i(t,e){return n.call(this,t,zi.extend(!0,er,e))||this}return a(i,n),i.prototype.dispose=function(){n.prototype.dispose.call(this,Zi)},i.matches=function(t){return"textarea"===t.prop("tagName")},i.rejectMatch=function(t,e){Qr.assert(this.$element,this.matches(e),t+" component element "+Qr.describe(e)+" is invalid for <textarea>.")},i._jQueryInterface=function(n){return this.each(function(){var t=zi(this),e=t.data(Zi);e||(e=new i(t,n),t.data(Zi,e))})},i}(Br),zi.fn[Ji]=nr._jQueryInterface,zi.fn[Ji].Constructor=nr,zi.fn[Ji].noConflict=function(){return zi.fn[Ji]=tr,nr._jQueryInterface},function(c){if("undefined"==typeof Popper)throw new Error("Bootstrap dropdown require Popper.js (https://popper.js.org)");var n="dropdown",h="bs.dropdown",e="."+h,t=".data-api",i=c.fn[n],s=new RegExp("38|40|27"),u={HIDE:"hide"+e,HIDDEN:"hidden"+e,SHOW:"show"+e,SHOWN:"shown"+e,CLICK:"click"+e,CLICK_DATA_API:"click"+e+t,KEYDOWN_DATA_API:"keydown"+e+t,KEYUP_DATA_API:"keyup"+e+t,TRANSITION_END:"transitionend webkitTransitionEnd oTransitionEnd animationend webkitAnimationEnd oAnimationEnd"},a="disabled",d="show",f="showing",p="hiding",m="dropup",g="dropdown-menu-right",_="dropdown-menu-left",v='[data-toggle="dropdown"]',r=".dropdown form",o=".dropdown-menu",y=".navbar-nav",b=".dropdown-menu .dropdown-item:not(.disabled)",C={TOP:"top-start",TOPEND:"top-end",BOTTOM:"bottom-start",BOTTOMEND:"bottom-end"},E={placement:C.BOTTOM,offset:0,flip:!0},I={placement:"string",offset:"(number|string)",flip:"boolean"},l=function(){function l(t,e){this._element=t,this._popper=null,this._config=this._getConfig(e),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var t=l.prototype;return t.toggle=function(){var t=this;if(!this._element.disabled&&!c(this._element).hasClass(a)){var e=l._getParentFromElement(this._element),n=c(this._menu).hasClass(d);if(l._clearMenus(),!n){var i={relatedTarget:this._element},r=c.Event(u.SHOW,i);if(c(e).trigger(r),!r.isDefaultPrevented()){var o=this._element;c(e).hasClass(m)&&(c(this._menu).hasClass(_)||c(this._menu).hasClass(g))&&(o=e),this._popper=new Popper(o,this._menu,this._getPopperConfig()),"ontouchstart"in document.documentElement&&!c(e).closest(y).length&&c("body").children().on("mouseover",null,c.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),c(this._menu).one(u.TRANSITION_END,function(){c(e).trigger(c.Event(u.SHOWN,i)),c(t._menu).removeClass(f)}),c(this._menu).addClass(d+" "+f),c(e).addClass(d)}}}},t.dispose=function(){c.removeData(this._element,h),c(this._element).off(e),this._element=null,(this._menu=null)!==this._popper&&this._popper.destroy(),this._popper=null},t.update=function(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},t._addEventListeners=function(){var e=this;c(this._element).on(u.CLICK,function(t){t.preventDefault(),t.stopPropagation(),e.toggle()})},t._getConfig=function(t){var e=c(this._element).data();return void 0!==e.placement&&(e.placement=C[e.placement.toUpperCase()]),t=c.extend({},this.constructor.Default,c(this._element).data(),t),Rr.typeCheckConfig(n,t,this.constructor.DefaultType),t},t._getMenuElement=function(){if(!this._menu){var t=l._getParentFromElement(this._element);this._menu=c(t).find(o)[0]}return this._menu},t._getPlacement=function(){var t=c(this._element).parent(),e=this._config.placement;return t.hasClass(m)||this._config.placement===C.TOP?(e=C.TOP,c(this._menu).hasClass(g)&&(e=C.TOPEND)):c(this._menu).hasClass(g)&&(e=C.BOTTOMEND),e},t._detectNavbar=function(){return 0<c(this._element).closest(".navbar").length},t._getPopperConfig=function(){var t={placement:this._getPlacement(),modifiers:{offset:{offset:this._config.offset},flip:{enabled:this._config.flip}}};return this._inNavbar&&(t.modifiers.applyStyle={enabled:!this._inNavbar}),t},l._jQueryInterface=function(e){return this.each(function(){var t=c(this).data(h);if(t||(t=new l(this,"object"==typeof e?e:null),c(this).data(h,t)),"string"==typeof e){if(void 0===t[e])throw new Error('No method named "'+e+'"');t[e]()}})},l._clearMenus=function(s){if(!s||3!==s.which&&("keyup"!==s.type||9===s.which))for(var a=c.makeArray(c(v)),t=function(t){var e=l._getParentFromElement(a[t]),n=c(a[t]).data(h),i={relatedTarget:a[t]};if(!n)return"continue";var r=n._menu;if(!c(e).hasClass(d))return"continue";if(s&&("click"===s.type&&/input|textarea/i.test(s.target.tagName)||"keyup"===s.type&&9===s.which)&&c.contains(e,s.target))return"continue";var o=c.Event(u.HIDE,i);if(c(e).trigger(o),o.isDefaultPrevented())return"continue";"ontouchstart"in document.documentElement&&c("body").children().off("mouseover",null,c.noop),a[t].setAttribute("aria-expanded","false"),c(r).addClass(p).removeClass(d),c(e).removeClass(d),c(r).one(u.TRANSITION_END,function(){c(e).trigger(c.Event(u.HIDDEN,i)),c(r).removeClass(p)})},e=0;e<a.length;e++)t(e)},l._getParentFromElement=function(t){var e,n=Rr.getSelectorFromElement(t);return n&&(e=c(n)[0]),e||t.parentNode},l._dataApiKeydownHandler=function(t){if(!(!s.test(t.which)||/button/i.test(t.target.tagName)&&32===t.which||/input|textarea/i.test(t.target.tagName)||(t.preventDefault(),t.stopPropagation(),this.disabled||c(this).hasClass(a)))){var e=l._getParentFromElement(this),n=c(e).hasClass(d);if((n||27===t.which&&32===t.which)&&(!n||27!==t.which&&32!==t.which)){var i=c(e).find(b).get();if(i.length){var r=i.indexOf(t.target);38===t.which&&0<r&&r--,40===t.which&&r<i.length-1&&r++,r<0&&(r=0),i[r].focus()}}else{if(27===t.which){var o=c(e).find(v)[0];c(o).trigger("focus")}c(this).trigger("click")}}},T(l,null,[{key:"VERSION",get:function(){return"4.0.0-beta"}},{key:"Default",get:function(){return E}},{key:"DefaultType",get:function(){return I}}]),l}();c(document).on(u.KEYDOWN_DATA_API,v,l._dataApiKeydownHandler).on(u.KEYDOWN_DATA_API,o,l._dataApiKeydownHandler).on(u.CLICK_DATA_API+" "+u.KEYUP_DATA_API,l._clearMenus).on(u.CLICK_DATA_API,v,function(t){t.preventDefault(),t.stopPropagation(),l._jQueryInterface.call(c(this),"toggle")}).on(u.CLICK_DATA_API,r,function(t){t.stopPropagation()}),c.fn[n]=l._jQueryInterface,c.fn[n].Constructor=l,c.fn[n].noConflict=function(){return c.fn[n]=i,l._jQueryInterface}}(jQuery),ir=jQuery,sr={CANVAS:"."+(rr="bmd-layout-canvas"),CONTAINER:"."+"bmd-layout-container",BACKDROP:"."+(or="bmd-layout-backdrop")},ar={canvas:{create:!0,required:!0,template:'<div class="'+rr+'"></div>'},backdrop:{create:!0,required:!0,template:'<div class="'+or+'"></div>'}},function(r){function t(t,e,n){var i;return void 0===n&&(n={}),(i=r.call(this,t,ir.extend(!0,{},ar,e),n)||this).$container=i.findContainer(!0),i.$backdrop=i.resolveBackdrop(),i.resolveCanvas(),i}a(t,r);var e=t.prototype;return e.dispose=function(t){r.prototype.dispose.call(this,t),this.$container=null,this.$backdrop=null},e.resolveCanvas=function(){var t=this.findCanvas(!1);return void 0!==t&&0!==t.length||(this.config.canvas.create&&this.$container.wrap(this.config.canvas.template),t=this.findCanvas(this.config.canvas.required)),t},e.findCanvas=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=this.$container);var n=e.closest(sr.CANVAS);return 0===n.length&&t&&ir.error("Failed to find "+sr.CANVAS+" for "+Qr.describe(e)),n},e.resolveBackdrop=function(){var t=this.findBackdrop(!1);return void 0!==t&&0!==t.length||(this.config.backdrop.create&&this.$container.append(this.config.backdrop.template),t=this.findBackdrop(this.config.backdrop.required)),t},e.findBackdrop=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=this.$container);var n=e.find("> "+sr.BACKDROP);return 0===n.length&&t&&ir.error("Failed to find "+sr.BACKDROP+" for "+Qr.describe(e)),n},e.findContainer=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=this.$element);var n=e.closest(sr.CONTAINER);return 0===n.length&&t&&ir.error("Failed to find "+sr.CONTAINER+" for "+Qr.describe(e)),n},t}(Mr));lr=jQuery,hr="bmd."+(cr="drawer"),ur="bmd"+(cr.charAt(0).toUpperCase()+cr.slice(1)),dr=lr.fn[ur],fr=27,pr="in",mr="bmd-drawer-in",gr="bmd-drawer-out",_r={focusSelector:"a, button, input"},vr=function(i){function r(t,e){var n;return(n=i.call(this,t,lr.extend(!0,{},_r,e))||this).$toggles=lr('[data-toggle="drawer"][href="#'+n.$element[0].id+'"], [data-toggle="drawer"][data-target="#'+n.$element[0].id+'"]'),n._addAria(),n.$backdrop.keydown(function(t){t.which===fr&&n.hide()}).click(function(){n.hide()}),n.$element.keydown(function(t){t.which===fr&&n.hide()}),n.$toggles.click(function(){n.toggle()}),n}a(r,i);var t=r.prototype;return t.dispose=function(){i.prototype.dispose.call(this,hr),this.$toggles=null},t.toggle=function(){this._isOpen()?this.hide():this.show()},t.show=function(){if(!this._isForcedClosed()&&!this._isOpen()){this.$toggles.attr("aria-expanded",!0),this.$element.attr("aria-expanded",!0),this.$element.attr("aria-hidden",!1);var t=this.$element.find(this.config.focusSelector);0<t.length&&t.first().focus(),this.$container.addClass(mr),this.$backdrop.addClass(pr)}},t.hide=function(){this._isOpen()&&(this.$toggles.attr("aria-expanded",!1),this.$element.attr("aria-expanded",!1),this.$element.attr("aria-hidden",!0),this.$container.removeClass(mr),this.$backdrop.removeClass(pr))},t._isOpen=function(){return this.$container.hasClass(mr)},t._isForcedClosed=function(){return this.$container.hasClass(gr)},t._addAria=function(){var t=this._isOpen();this.$element.attr("aria-expanded",t),this.$element.attr("aria-hidden",t),this.$toggles.length&&this.$toggles.attr("aria-expanded",t)},r._jQueryInterface=function(n){return this.each(function(){var t=lr(this),e=t.data(hr);e||(e=new r(t,n),t.data(hr,e))})},r}(Gr),lr.fn[ur]=vr._jQueryInterface,lr.fn[ur].Constructor=vr,lr.fn[ur].noConflict=function(){return lr.fn[ur]=dr,vr._jQueryInterface},yr=jQuery,Cr="bmd."+(br="ripples"),Er="bmd"+(br.charAt(0).toUpperCase()+br.slice(1)),Ir=yr.fn[Er],Ar={CONTAINER:"."+(Tr="ripple-container"),DECORATOR:"."+(wr="ripple-decorator")},Sr={container:{template:"<div class='"+Tr+"'></div>"},decorator:{template:"<div class='"+wr+"'></div>"},trigger:{start:"mousedown touchstart",end:"mouseup mouseleave touchend"},touchUserAgentRegex:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i,duration:500},Dr=function(){function i(t,e){var n=this;this.$element=t,this.config=yr.extend(!0,{},Sr,e),this.$element.on(this.config.trigger.start,function(t){n._onStartRipple(t)})}var t=i.prototype;return t.dispose=function(){this.$element.data(Cr,null),this.$element=null,this.$container=null,this.$decorator=null,this.config=null},t._onStartRipple=function(t){var e=this;if(!this._isTouch()||"mousedown"!==t.type){this._findOrCreateContainer();var n=this._getRelY(t),i=this._getRelX(t);(n||i)&&(this.$decorator.css({left:i,top:n,"background-color":this._getRipplesColor()}),this._forceStyleApplication(),this.rippleOn(),setTimeout(function(){e.rippleEnd()},this.config.duration),this.$element.on(this.config.trigger.end,function(){e.$decorator&&(e.$decorator.data("mousedown","off"),"off"===e.$decorator.data("animating")&&e.rippleOut())}))}},t._findOrCreateContainer=function(){(!this.$container||0<!this.$container.length)&&(this.$element.append(this.config.container.template),this.$container=this.$element.find(Ar.CONTAINER)),this.$container.append(this.config.decorator.template),this.$decorator=this.$container.find(Ar.DECORATOR)},t._forceStyleApplication=function(){return window.getComputedStyle(this.$decorator[0]).opacity},t._getRelX=function(t){var e=this.$container.offset();return this._isTouch()?1===(t=t.originalEvent).touches.length&&t.touches[0].pageX-e.left:t.pageX-e.left},t._getRelY=function(t){var e=this.$container.offset();return this._isTouch()?1===(t=t.originalEvent).touches.length&&t.touches[0].pageY-e.top:t.pageY-e.top},t._getRipplesColor=function(){return this.$element.data("ripple-color")?this.$element.data("ripple-color"):window.getComputedStyle(this.$element[0]).color},t._isTouch=function(){return this.config.touchUserAgentRegex.test(navigator.userAgent)},t.rippleEnd=function(){this.$decorator&&(this.$decorator.data("animating","off"),"off"===this.$decorator.data("mousedown")&&this.rippleOut(this.$decorator))},t.rippleOut=function(){var t=this;this.$decorator.off(),Qr.transitionEndSupported()?this.$decorator.addClass("ripple-out"):this.$decorator.animate({opacity:0},100,function(){t.$decorator.trigger("transitionend")}),this.$decorator.on(Qr.transitionEndSelector(),function(){t.$decorator&&(t.$decorator.remove(),t.$decorator=null)})},t.rippleOn=function(){var t=this,e=this._getNewSize();Qr.transitionEndSupported()?this.$decorator.css({"-ms-transform":"scale("+e+")","-moz-transform":"scale("+e+")","-webkit-transform":"scale("+e+")",transform:"scale("+e+")"}).addClass("ripple-on").data("animating","on").data("mousedown","on"):this.$decorator.animate({width:2*Math.max(this.$element.outerWidth(),this.$element.outerHeight()),height:2*Math.max(this.$element.outerWidth(),this.$element.outerHeight()),"margin-left":-1*Math.max(this.$element.outerWidth(),this.$element.outerHeight()),"margin-top":-1*Math.max(this.$element.outerWidth(),this.$element.outerHeight()),opacity:.2},this.config.duration,function(){t.$decorator.trigger("transitionend")})},t._getNewSize=function(){return Math.max(this.$element.outerWidth(),this.$element.outerHeight())/this.$decorator.outerWidth()*2.5},i._jQueryInterface=function(n){return this.each(function(){var t=yr(this),e=t.data(Cr);e||(e=new i(t,n),t.data(Cr,e))})},i}(),yr.fn[Er]=Dr._jQueryInterface,yr.fn[Er].Constructor=Dr,yr.fn[Er].noConflict=function(){return yr.fn[Er]=Ir,Dr._jQueryInterface},kr=jQuery,Or="bmd."+(Nr="autofill"),$r="bmd"+(Nr.charAt(0).toUpperCase()+Nr.slice(1)),jr=kr.fn[$r],xr={},Fr=function(i){function r(t,e){var n;return(n=i.call(this,t,kr.extend(!0,{},xr,e))||this)._watchLoading(),n._attachEventHandlers(),n}a(r,i);var t=r.prototype;return t.dispose=function(){i.prototype.dispose.call(this,Or)},t._watchLoading=function(){var t=this;setTimeout(function(){clearInterval(t._onLoading)},1e4)},t._onLoading=function(){setInterval(function(){kr("input[type!=checkbox]").each(function(t,e){var n=kr(e);n.val()&&n.val()!==n.attr("value")&&n.trigger("change")})},100)},t._attachEventHandlers=function(){var n=null;kr(document).on("focus","input",function(t){var e=kr(t.currentTarget).closest("form").find("input").not("[type=file]");n=setInterval(function(){e.each(function(t,e){var n=kr(e);n.val()!==n.attr("value")&&n.trigger("change")})},100)}).on("blur",".form-group input",function(){clearInterval(n)})},r._jQueryInterface=function(n){return this.each(function(){var t=kr(this),e=t.data(Or);e||(e=new r(t,n),t.data(Or,e))})},r}(Mr),kr.fn[$r]=Fr._jQueryInterface,kr.fn[$r].Constructor=Fr,kr.fn[$r].noConflict=function(){return kr.fn[$r]=jr,Fr._jQueryInterface};Popper.Defaults.modifiers.computeStyle.gpuAcceleration=!1;var Kr,qr,Vr,Yr,zr,Xr,Zr;Kr=jQuery,Vr="bmd."+(qr="bootstrapMaterialDesign"),Yr=qr,zr=Kr.fn[Yr],Xr={global:{validate:!1,label:{className:"bmd-label-static"}},autofill:{selector:"body"},checkbox:{selector:".checkbox > label > input[type=checkbox]"},checkboxInline:{selector:"label.checkbox-inline > input[type=checkbox]"},collapseInline:{selector:'.bmd-collapse-inline [data-toggle="collapse"]'},drawer:{selector:".bmd-layout-drawer"},file:{selector:"input[type=file]"},radio:{selector:".radio > label > input[type=radio]"},radioInline:{selector:"label.radio-inline > input[type=radio]"},ripples:{selector:[".btn:not(.ripple-none)",".card-image:not(.ripple-none)",".navbar a:not(.ripple-none)",".dropdown-menu a:not(.ripple-none)",".nav-tabs a:not(.ripple-none)",".pagination li:not(.active):not(.disabled) a:not(.ripple-none)",".ripple"]},select:{selector:["select"]},switch:{selector:".switch > label > input[type=checkbox]"},text:{selector:["input:not([type=hidden]):not([type=checkbox]):not([type=radio]):not([type=file]):not([type=button]):not([type=submit]):not([type=reset])"]},textarea:{selector:["textarea"]},arrive:!0,instantiation:["ripples","checkbox","checkboxInline","collapseInline","drawer","radio","radioInline","switch","text","textarea","autofill"]},Zr=function(){function i(t,e){var o=this;this.$element=t,this.config=Kr.extend(!0,{},Xr,e);var s=Kr(document),n=function(t){var e=o.config[t];if(e){var n=o._resolveSelector(e);e=Kr.extend(!0,{},o.config.global,e);var i="bmd"+(""+(t.charAt(0).toUpperCase()+t.slice(1)));try{Kr(n)[i](e),document.arrive&&o.config.arrive&&s.arrive(n,function(){Kr(this)[i](e)})}catch(t){var r="Failed to instantiate component: $('"+n+"')["+i+"]("+e+")";throw console.error(r,t,"\nSelected elements: ",Kr(n)),t}}},i=this.config.instantiation,r=Array.isArray(i),a=0;for(i=r?i:i[Symbol.iterator]();;){var l;if(r){if(a>=i.length)break;l=i[a++]}else{if((a=i.next()).done)break;l=a.value}n(l)}}var t=i.prototype;return t.dispose=function(){this.$element.data(Vr,null),this.$element=null,this.config=null},t._resolveSelector=function(t){var e=t.selector;return Array.isArray(e)&&(e=e.join(", ")),e},i._jQueryInterface=function(n){return this.each(function(){var t=Kr(this),e=t.data(Vr);e||(e=new i(t,n),t.data(Vr,e))})},i}(),Kr.fn[Yr]=Zr._jQueryInterface,Kr.fn[Yr].Constructor=Zr,Kr.fn[Yr].noConflict=function(){return Kr.fn[Yr]=zr,Zr._jQueryInterface}});
/*! =========================================================
 *
 * Material Kit PRO - v2.0.2 (Bootstrap 4.0.0 Final Edition)
 *
 * =========================================================
 *
 * Product Page: https://www.creative-tim.com/product/material-kit-pro
 * Available with purchase of license from http://www.creative-tim.com/product/material-kit-pro
 * Copyright 2017 Creative Tim (https://www.creative-tim.com)
 * License Creative Tim (https://www.creative-tim.com/license)
 *
 * ========================================================= */

var big_image;

$(document).ready(function() {
    BrowserDetect.init();

    // Init Material scripts for buttons ripples, inputs animations etc, more info on the next link https://github.com/FezVrasta/bootstrap-material-design#materialjs
    $('body').bootstrapMaterialDesign();

    window_width = $(window).width();

    $navbar = $('.navbar[color-on-scroll]');
    scroll_distance = $navbar.attr('color-on-scroll') || 500;

    $navbar_collapse = $('.navbar').find('.navbar-collapse');

    //  Activate the Tooltips
    $('[data-toggle="tooltip"], [rel="tooltip"]').tooltip();


    // FileInput
    $('.form-file-simple .inputFileVisible').click(function() {
        $(this).siblings('.inputFileHidden').trigger('click');
    });

    $('.form-file-simple .inputFileHidden').change(function() {
        var filename = $(this).val().replace(/C:\\fakepath\\/i, '');
        $(this).siblings('.inputFileVisible').val(filename);
    });

    $('.form-file-multiple .inputFileVisible, .form-file-multiple .input-group-btn').click(function() {
        $(this).parent().parent().find('.inputFileHidden').trigger('click');
        $(this).parent().parent().addClass('is-focused');
    });

    $('.form-file-multiple .inputFileHidden').change(function() {
        var names = '';
        for (var i = 0; i < $(this).get(0).files.length; ++i) {
            if (i < $(this).get(0).files.length - 1) {
                names += $(this).get(0).files.item(i).name + ',';
            } else {
                names += $(this).get(0).files.item(i).name;
            }
        }
        $(this).siblings('.input-group').find('.inputFileVisible').val(names);
    });

    $('.form-file-multiple .btn').on('focus', function() {
        $(this).parent().siblings().trigger('focus');
    });

    $('.form-file-multiple .btn').on('focusout', function() {
        $(this).parent().siblings().trigger('focusout');
    });

    //    Activate bootstrap-select
    if ($(".selectpicker").length != 0) {
        $(".selectpicker").selectpicker();
    }

    // Activate Popovers
    $('[data-toggle="popover"]').popover();

    // Active Carousel
    $('.carousel').carousel({
        interval: 3000
    });

    //Activate tags
    // we style the badges with our colors
    var tagClass = $('.tagsinput').data('color');

    if ($(".tagsinput").length != 0) {
        $('.tagsinput').tagsinput();
    }

    $('.bootstrap-tagsinput').addClass('' + tagClass + '-badge');

    if ($('.navbar-color-on-scroll').length != 0) {
        $(window).on('scroll', materialKit.checkScrollForTransparentNavbar);
    }

    materialKit.checkScrollForTransparentNavbar();

    if (window_width >= 768) {
        big_image = $('.page-header[data-parallax="true"]');
        if (big_image.length != 0) {
            $(window).on('scroll', materialKit.checkScrollForParallax);
        }

    }
});

$(window).on("load", function() {
    //initialise rotating cards
    materialKit.initRotateCard();

    //initialise colored shadow
    materialKit.initColoredShadows();
});

$(document).on('click', '.card-rotate .btn-rotate', function() {
    var $rotating_card_container = $(this).closest('.rotating-card-container');

    if ($rotating_card_container.hasClass('hover')) {
        $rotating_card_container.removeClass('hover');
    } else {
        $rotating_card_container.addClass('hover');
    }
});

$(document).on('click', '.navbar-toggler', function() {
    $toggle = $(this);

    if (materialKit.misc.navbar_menu_visible == 1) {
        $('html').removeClass('nav-open');
        materialKit.misc.navbar_menu_visible = 0;
        $('#bodyClick').remove();
        setTimeout(function() {
            $toggle.removeClass('toggled');
        }, 550);

        $('html').removeClass('nav-open-absolute');
    } else {
        setTimeout(function() {
            $toggle.addClass('toggled');
        }, 580);


        div = '<div id="bodyClick"></div>';
        $(div).appendTo("body").click(function() {
            $('html').removeClass('nav-open');

            if ($('nav').hasClass('navbar-absolute')) {
                $('html').removeClass('nav-open-absolute');
            }
            materialKit.misc.navbar_menu_visible = 0;
            $('#bodyClick').remove();
            setTimeout(function() {
                $toggle.removeClass('toggled');
            }, 550);
        });

        if ($('nav').hasClass('navbar-absolute')) {
            $('html').addClass('nav-open-absolute');
        }

        $('html').addClass('nav-open');
        materialKit.misc.navbar_menu_visible = 1;
    }
});

$(window).on('resize', function() {
    materialKit.initRotateCard();
});

materialKit = {
    misc: {
        navbar_menu_visible: 0,
        window_width: 0,
        transparent: true,
        colored_shadows: true,
        fixedTop: false,
        navbar_initialized: false,
        isWindow: document.documentMode || /Edge/.test(navigator.userAgent)
    },

    checkScrollForParallax: function() {
        oVal = ($(window).scrollTop() / 3);
        big_image.css({
            'transform': 'translate3d(0,' + oVal + 'px,0)',
            '-webkit-transform': 'translate3d(0,' + oVal + 'px,0)',
            '-ms-transform': 'translate3d(0,' + oVal + 'px,0)',
            '-o-transform': 'translate3d(0,' + oVal + 'px,0)'
        });
    },

    initFormExtendedDatetimepickers: function() {
        $('.datetimepicker').datetimepicker({
            icons: {
                time: "fa fa-clock-o",
                date: "fa fa-calendar",
                up: "fa fa-chevron-up",
                down: "fa fa-chevron-down",
                previous: 'fa fa-chevron-left',
                next: 'fa fa-chevron-right',
                today: 'fa fa-screenshot',
                clear: 'fa fa-trash',
                close: 'fa fa-remove'
            }
        });

        $('.datepicker').datetimepicker({
            format: 'MM/DD/YYYY',
            icons: {
                time: "fa fa-clock-o",
                date: "fa fa-calendar",
                up: "fa fa-chevron-up",
                down: "fa fa-chevron-down",
                previous: 'fa fa-chevron-left',
                next: 'fa fa-chevron-right',
                today: 'fa fa-screenshot',
                clear: 'fa fa-trash',
                close: 'fa fa-remove'
            }
        });

        $('.timepicker').datetimepicker({
            //          format: 'H:mm',    // use this format if you want the 24hours timepicker
            format: 'h:mm A', //use this format if you want the 12hours timpiecker with AM/PM toggle
            icons: {
                time: "fa fa-clock-o",
                date: "fa fa-calendar",
                up: "fa fa-chevron-up",
                down: "fa fa-chevron-down",
                previous: 'fa fa-chevron-left',
                next: 'fa fa-chevron-right',
                today: 'fa fa-screenshot',
                clear: 'fa fa-trash',
                close: 'fa fa-remove'

            }
        });
    },


    initSliders: function() {
        // Sliders for demo purpose
        var slider = document.getElementById('sliderRegular');

        noUiSlider.create(slider, {
            start: 40,
            connect: [true, false],
            range: {
                min: 0,
                max: 100
            }
        });

        var slider2 = document.getElementById('sliderDouble');

        noUiSlider.create(slider2, {
            start: [20, 60],
            connect: true,
            range: {
                min: 0,
                max: 100
            }
        });
    },


    initColoredShadows: function() {
        if (materialKit.misc.colored_shadows == true) {
            if (!(BrowserDetect.browser == 'Explorer' && BrowserDetect.version <= 12)) {
                $('.card:not([data-colored-shadow="false"]) .card-header-image').each(function() {
                    $card_img = $(this);

                    is_on_dark_screen = $(this).closest('.section-dark, .section-image').length;

                    // we block the generator of the colored shadows on dark sections, because they are not natural
                    if (is_on_dark_screen == 0) {
                        var img_source = $card_img.find('img').attr('src');
                        var is_rotating = $card_img.closest('.card-rotate').length == 1 ? true : false;
                        var $append_div = $card_img;

                        var colored_shadow_div = $('<div class="colored-shadow"/>');

                        if (is_rotating) {
                            var card_image_height = $card_img.height();
                            var card_image_width = $card_img.width();

                            $(this).find('.back').css({
                                'height': card_image_height + 'px',
                                'width': card_image_width + 'px'
                            });
                            $append_div = $card_img.find('.front');
                        }

                        colored_shadow_div.css({
                            'background-image': 'url(' + img_source + ')'
                        }).appendTo($append_div);

                        if ($card_img.width() > 700) {
                            colored_shadow_div.addClass('colored-shadow-big');
                        }

                        setTimeout(function() {
                            colored_shadow_div.css('opacity', 1);
                        }, 200);
                    }

                });
            }
        }
    },

    initRotateCard: debounce(function() {
        $('.rotating-card-container .card-rotate').each(function() {
            var $this = $(this);

            var card_width = $(this).parent().width();
            var card_height = $(this).find('.front .card-body').outerHeight();

            $this.parent().css({
                'height': card_height + 'px',
                'margin-bottom': 30 + 'px'
            });

            $this.find('.front').css({
                'height': card_height + 35 + 'px',
                'width': card_width + 'px',
            });

            $this.find('.back').css({
                'height': card_height + 35 + 'px',
                'width': card_width + 'px',
            });
        });
    }, 50),

    checkScrollForTransparentNavbar: debounce(function() {
        if ($(document).scrollTop() > scroll_distance) {
            if (materialKit.misc.transparent) {
                materialKit.misc.transparent = false;
                $('.navbar-color-on-scroll').removeClass('navbar-transparent');
            }
        } else {
            if (!materialKit.misc.transparent) {
                materialKit.misc.transparent = true;
                $('.navbar-color-on-scroll').addClass('navbar-transparent');
            }
        }
    }, 17)
};
// Returns a function, that, as long as it continues to be invoked, will not
// be triggered. The function will be called after it stops being called for
// N milliseconds. If `immediate` is passed, trigger the function on the
// leading edge, instead of the trailing.

function debounce(func, wait, immediate) {
    var timeout;
    return function() {
        var context = this,
            args = arguments;
        clearTimeout(timeout);
        timeout = setTimeout(function() {
            timeout = null;
            if (!immediate) func.apply(context, args);
        }, wait);
        if (immediate && !timeout) func.apply(context, args);
    };
}

var BrowserDetect = {
    init: function() {
        this.browser = this.searchString(this.dataBrowser) || "Other";
        this.version = this.searchVersion(navigator.userAgent) || this.searchVersion(navigator.appVersion) || "Unknown";
    },
    searchString: function(data) {
        for (var i = 0; i < data.length; i++) {
            var dataString = data[i].string;
            this.versionSearchString = data[i].subString;

            if (dataString.indexOf(data[i].subString) !== -1) {
                return data[i].identity;
            }
        }
    },
    searchVersion: function(dataString) {
        var index = dataString.indexOf(this.versionSearchString);
        if (index === -1) {
            return;
        }

        var rv = dataString.indexOf("rv:");
        if (this.versionSearchString === "Trident" && rv !== -1) {
            return parseFloat(dataString.substring(rv + 3));
        } else {
            return parseFloat(dataString.substring(index + this.versionSearchString.length + 1));
        }
    },

    dataBrowser: [{
            string: navigator.userAgent,
            subString: "Chrome",
            identity: "Chrome"
        },
        {
            string: navigator.userAgent,
            subString: "MSIE",
            identity: "Explorer"
        },
        {
            string: navigator.userAgent,
            subString: "Trident",
            identity: "Explorer"
        },
        {
            string: navigator.userAgent,
            subString: "Firefox",
            identity: "Firefox"
        },
        {
            string: navigator.userAgent,
            subString: "Safari",
            identity: "Safari"
        },
        {
            string: navigator.userAgent,
            subString: "Opera",
            identity: "Opera"
        }
    ]

};

var better_browser = '<div class="container"><div class="better-browser row"><div class="col-md-2"></div><div class="col-md-8"><h3>We are sorry but it looks like your Browser doesn\'t support our website Features. In order to get the full experience please download a new version of your favourite browser.</h3></div><div class="col-md-2"></div><br><div class="col-md-4"><a href="https://www.mozilla.org/ro/firefox/new/" class="btn btn-warning">Mozilla</a><br></div><div class="col-md-4"><a href="https://www.google.com/chrome/browser/desktop/index.html" class="btn ">Chrome</a><br></div><div class="col-md-4"><a href="http://windows.microsoft.com/en-us/internet-explorer/ie-11-worldwide-languages" class="btn">Internet Explorer</a><br></div><br><br><h4>Thank you!</h4></div></div>';
var big_image;function debounce(a,i,r){var n;return function(){var e=this,t=arguments;clearTimeout(n),n=setTimeout(function(){n=null,r||a.apply(e,t)},i),r&&!n&&a.apply(e,t)}}$(document).ready(function(){BrowserDetect.init(),$("body").bootstrapMaterialDesign(),window_width=$(window).width(),$navbar=$(".navbar[color-on-scroll]"),scroll_distance=$navbar.attr("color-on-scroll")||500,$navbar_collapse=$(".navbar").find(".navbar-collapse"),$('[data-toggle="tooltip"], [rel="tooltip"]').tooltip(),$(".form-file-simple .inputFileVisible").click(function(){$(this).siblings(".inputFileHidden").trigger("click")}),$(".form-file-simple .inputFileHidden").change(function(){var e=$(this).val().replace(/C:\\fakepath\\/i,"");$(this).siblings(".inputFileVisible").val(e)}),$(".form-file-multiple .inputFileVisible, .form-file-multiple .input-group-btn").click(function(){$(this).parent().parent().find(".inputFileHidden").trigger("click"),$(this).parent().parent().addClass("is-focused")}),$(".form-file-multiple .inputFileHidden").change(function(){for(var e="",t=0;t<$(this).get(0).files.length;++t)t<$(this).get(0).files.length-1?e+=$(this).get(0).files.item(t).name+",":e+=$(this).get(0).files.item(t).name;$(this).siblings(".input-group").find(".inputFileVisible").val(e)}),$(".form-file-multiple .btn").on("focus",function(){$(this).parent().siblings().trigger("focus")}),$(".form-file-multiple .btn").on("focusout",function(){$(this).parent().siblings().trigger("focusout")}),0!=$(".selectpicker").length&&$(".selectpicker").selectpicker(),$('[data-toggle="popover"]').popover(),$(".carousel").carousel({interval:3e3});var e=$(".tagsinput").data("color");0!=$(".tagsinput").length&&$(".tagsinput").tagsinput(),$(".bootstrap-tagsinput").addClass(e+"-badge"),0!=$(".navbar-color-on-scroll").length&&$(window).on("scroll",materialKit.checkScrollForTransparentNavbar),materialKit.checkScrollForTransparentNavbar(),768<=window_width&&0!=(big_image=$('.page-header[data-parallax="true"]')).length&&$(window).on("scroll",materialKit.checkScrollForParallax)}),$(window).on("load",function(){materialKit.initRotateCard(),materialKit.initColoredShadows()}),$(document).on("click",".card-rotate .btn-rotate",function(){var e=$(this).closest(".rotating-card-container");e.hasClass("hover")?e.removeClass("hover"):e.addClass("hover")}),$(document).on("click",".navbar-toggler",function(){$toggle=$(this),1==materialKit.misc.navbar_menu_visible?($("html").removeClass("nav-open"),materialKit.misc.navbar_menu_visible=0,$("#bodyClick").remove(),setTimeout(function(){$toggle.removeClass("toggled")},550),$("html").removeClass("nav-open-absolute")):(setTimeout(function(){$toggle.addClass("toggled")},580),div='<div id="bodyClick"></div>',$(div).appendTo("body").click(function(){$("html").removeClass("nav-open"),$("nav").hasClass("navbar-absolute")&&$("html").removeClass("nav-open-absolute"),materialKit.misc.navbar_menu_visible=0,$("#bodyClick").remove(),setTimeout(function(){$toggle.removeClass("toggled")},550)}),$("nav").hasClass("navbar-absolute")&&$("html").addClass("nav-open-absolute"),$("html").addClass("nav-open"),materialKit.misc.navbar_menu_visible=1)}),$(window).on("resize",function(){materialKit.initRotateCard()}),materialKit={misc:{navbar_menu_visible:0,window_width:0,transparent:!0,colored_shadows:!0,fixedTop:!1,navbar_initialized:!1,isWindow:document.documentMode||/Edge/.test(navigator.userAgent)},checkScrollForParallax:function(){oVal=$(window).scrollTop()/3,big_image.css({transform:"translate3d(0,"+oVal+"px,0)","-webkit-transform":"translate3d(0,"+oVal+"px,0)","-ms-transform":"translate3d(0,"+oVal+"px,0)","-o-transform":"translate3d(0,"+oVal+"px,0)"})},initFormExtendedDatetimepickers:function(){$(".datetimepicker").datetimepicker({icons:{time:"fa fa-clock-o",date:"fa fa-calendar",up:"fa fa-chevron-up",down:"fa fa-chevron-down",previous:"fa fa-chevron-left",next:"fa fa-chevron-right",today:"fa fa-screenshot",clear:"fa fa-trash",close:"fa fa-remove"}}),$(".datepicker").datetimepicker({format:"MM/DD/YYYY",icons:{time:"fa fa-clock-o",date:"fa fa-calendar",up:"fa fa-chevron-up",down:"fa fa-chevron-down",previous:"fa fa-chevron-left",next:"fa fa-chevron-right",today:"fa fa-screenshot",clear:"fa fa-trash",close:"fa fa-remove"}}),$(".timepicker").datetimepicker({format:"h:mm A",icons:{time:"fa fa-clock-o",date:"fa fa-calendar",up:"fa fa-chevron-up",down:"fa fa-chevron-down",previous:"fa fa-chevron-left",next:"fa fa-chevron-right",today:"fa fa-screenshot",clear:"fa fa-trash",close:"fa fa-remove"}})},initSliders:function(){var e=document.getElementById("sliderRegular");noUiSlider.create(e,{start:40,connect:[!0,!1],range:{min:0,max:100}});var t=document.getElementById("sliderDouble");noUiSlider.create(t,{start:[20,60],connect:!0,range:{min:0,max:100}})},initColoredShadows:function(){1==materialKit.misc.colored_shadows&&("Explorer"==BrowserDetect.browser&&BrowserDetect.version<=12||$('.card:not([data-colored-shadow="false"]) .card-header-image').each(function(){if($card_img=$(this),is_on_dark_screen=$(this).closest(".section-dark, .section-image").length,0==is_on_dark_screen){var e=$card_img.find("img").attr("src"),t=1==$card_img.closest(".card-rotate").length,a=$card_img,i=$('<div class="colored-shadow"/>');if(t){var r=$card_img.height(),n=$card_img.width();$(this).find(".back").css({height:r+"px",width:n+"px"}),a=$card_img.find(".front")}i.css({"background-image":"url("+e+")"}).appendTo(a),700<$card_img.width()&&i.addClass("colored-shadow-big"),setTimeout(function(){i.css("opacity",1)},200)}}))},initRotateCard:debounce(function(){$(".rotating-card-container .card-rotate").each(function(){var e=$(this),t=$(this).parent().width(),a=$(this).find(".front .card-body").outerHeight();e.parent().css({height:a+"px","margin-bottom":"30px"}),e.find(".front").css({height:a+35+"px",width:t+"px"}),e.find(".back").css({height:a+35+"px",width:t+"px"})})},50),checkScrollForTransparentNavbar:debounce(function(){$(document).scrollTop()>scroll_distance?materialKit.misc.transparent&&(materialKit.misc.transparent=!1,$(".navbar-color-on-scroll").removeClass("navbar-transparent")):materialKit.misc.transparent||(materialKit.misc.transparent=!0,$(".navbar-color-on-scroll").addClass("navbar-transparent"))},17)};var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"Other",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"Unknown"},searchString:function(e){for(var t=0;t<e.length;t++){var a=e[t].string;if(this.versionSearchString=e[t].subString,-1!==a.indexOf(e[t].subString))return e[t].identity}},searchVersion:function(e){var t=e.indexOf(this.versionSearchString);if(-1!==t){var a=e.indexOf("rv:");return"Trident"===this.versionSearchString&&-1!==a?parseFloat(e.substring(a+3)):parseFloat(e.substring(t+this.versionSearchString.length+1))}},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer"},{string:navigator.userAgent,subString:"Trident",identity:"Explorer"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"Safari",identity:"Safari"},{string:navigator.userAgent,subString:"Opera",identity:"Opera"}]},better_browser='<div class="container"><div class="better-browser row"><div class="col-md-2"></div><div class="col-md-8"><h3>We are sorry but it looks like your Browser doesn\'t support our website Features. In order to get the full experience please download a new version of your favourite browser.</h3></div><div class="col-md-2"></div><br><div class="col-md-4"><a href="https://www.mozilla.org/ro/firefox/new/" class="btn btn-warning">Mozilla</a><br></div><div class="col-md-4"><a href="https://www.google.com/chrome/browser/desktop/index.html" class="btn ">Chrome</a><br></div><div class="col-md-4"><a href="http://windows.microsoft.com/en-us/internet-explorer/ie-11-worldwide-languages" class="btn">Internet Explorer</a><br></div><br><br><h4>Thank you!</h4></div></div>';
window.onresize=()=>{
    responsiveFooter();
};

$( document ).ready(function() {
    responsiveFooter();
});

/*
responsive footer
=========================================================
 */

function responsiveFooter() {
    if(window.innerWidth<780) {
        $("#footer-main-content").addClass("responsive-class");
        $('#copyright').addClass('responsive-copyright');
    }
    else{
        $("#footer-main-content").removeClass("responsive-class");
        $('#copyright').removeClass('responsive-copyright');
    }
}


//acordian

let createAccordian = (accordianElem)=>{
    if(accordianElem.is( ":hidden" ))
        accordianElem.slideDown();
    else
        accordianElem.hide("slow");
};

$(document).ready(function(){
    $(".accordian-element").hide();
    $(".accordian-title").click(function(){
        createAccordian($(this).next());
    });
});



function responsiveClass(target, cssClass, flag) {
    $(document).ready(function () {
        if (window.innerWidth < 780 === flag)
            $(target).addClass(cssClass);
        else
            $(target).removeClass(cssClass);
    });

    window.onresize = () => {
        if (window.innerWidth < 780 === flag)
            $(target).addClass(cssClass);
        else
            $(target).removeClass(cssClass);
    }
}



//share
SocialShareKit.init({
    twitter: {
        title: 'FINA LLC',
        via: 'fina2.net'
    },
    onBeforeOpen: function (targetElement, network, paramsObj) {
        console.log(arguments);
    },
    onOpen: function (targetElement, network, url, popupWindow) {
        console.log(arguments);
    },
    onClose: function (targetElement, network, url, popupWindow) {
        console.log(arguments);
    }
});



function myFunction(){var n=document.getElementById("social-links-container");"social-links-class"===n.className?n.className="social-links-class-response":n.className="social-links-class"}var createAccordian=function(n){n.is(":hidden")?n.slideDown():n.hide("slow")};$(document).ready(function(){$(".accordian-element").hide(),$(".accordian-title").click(function(){createAccordian($(this).next())})}),$(document).ready(function(){$("#lang_en").click(function(){$(this).addClass("lang-btn"),$("#lang_ka").removeClass("lang-btn")}),$("#lang_ka").click(function(){$(this).addClass("lang-btn"),$("#lang_en").removeClass("lang-btn")})});
// Chart.js scripts
// -- Set new default font family and font color to mimic Bootstrap's default styling
Chart.defaults.global.defaultFontFamily = '-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif';
Chart.defaults.global.defaultFontColor = '#292b2c';
// -- Area Chart Example
var ctx = document.getElementById("myAreaChart");
var myLineChart = new Chart(ctx, {
  type: 'line',
  data: {
    labels: ["Mar 1", "Mar 2", "Mar 3", "Mar 4", "Mar 5", "Mar 6", "Mar 7", "Mar 8", "Mar 9", "Mar 10", "Mar 11", "Mar 12", "Mar 13"],
    datasets: [{
      label: "Sessions",
      lineTension: 0.3,
      backgroundColor: "rgba(2,117,216,0.2)",
      borderColor: "rgba(2,117,216,1)",
      pointRadius: 5,
      pointBackgroundColor: "rgba(2,117,216,1)",
      pointBorderColor: "rgba(255,255,255,0.8)",
      pointHoverRadius: 5,
      pointHoverBackgroundColor: "rgba(2,117,216,1)",
      pointHitRadius: 20,
      pointBorderWidth: 2,
      data: [10000, 30162, 26263, 18394, 18287, 28682, 31274, 33259, 25849, 24159, 32651, 31984, 38451],
    }],
  },
  options: {
    scales: {
      xAxes: [{
        time: {
          unit: 'date'
        },
        gridLines: {
          display: false
        },
        ticks: {
          maxTicksLimit: 7
        }
      }],
      yAxes: [{
        ticks: {
          min: 0,
          max: 40000,
          maxTicksLimit: 5
        },
        gridLines: {
          color: "rgba(0, 0, 0, .125)",
        }
      }],
    },
    legend: {
      display: false
    }
  }
});
// -- Bar Chart Example
var ctx = document.getElementById("myBarChart");
var myLineChart = new Chart(ctx, {
  type: 'bar',
  data: {
    labels: ["January", "February", "March", "April", "May", "June"],
    datasets: [{
      label: "Revenue",
      backgroundColor: "rgba(2,117,216,1)",
      borderColor: "rgba(2,117,216,1)",
      data: [4215, 5312, 6251, 7841, 9821, 14984],
    }],
  },
  options: {
    scales: {
      xAxes: [{
        time: {
          unit: 'month'
        },
        gridLines: {
          display: false
        },
        ticks: {
          maxTicksLimit: 6
        }
      }],
      yAxes: [{
        ticks: {
          min: 0,
          max: 15000,
          maxTicksLimit: 5
        },
        gridLines: {
          display: true
        }
      }],
    },
    legend: {
      display: false
    }
  }
});
// -- Pie Chart Example
var ctx = document.getElementById("myPieChart");
var myPieChart = new Chart(ctx, {
  type: 'pie',
  data: {
    labels: ["Blue", "Red", "Yellow", "Green"],
    datasets: [{
      data: [12.21, 15.58, 11.25, 8.32],
      backgroundColor: ['#007bff', '#dc3545', '#ffc107', '#28a745'],
    }],
  },
});

Chart.defaults.global.defaultFontFamily='-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif',Chart.defaults.global.defaultFontColor="#292b2c";var ctx=document.getElementById("myAreaChart"),myLineChart=new Chart(ctx,{type:"line",data:{labels:["Mar 1","Mar 2","Mar 3","Mar 4","Mar 5","Mar 6","Mar 7","Mar 8","Mar 9","Mar 10","Mar 11","Mar 12","Mar 13"],datasets:[{label:"Sessions",lineTension:.3,backgroundColor:"rgba(2,117,216,0.2)",borderColor:"rgba(2,117,216,1)",pointRadius:5,pointBackgroundColor:"rgba(2,117,216,1)",pointBorderColor:"rgba(255,255,255,0.8)",pointHoverRadius:5,pointHoverBackgroundColor:"rgba(2,117,216,1)",pointHitRadius:20,pointBorderWidth:2,data:[1e4,30162,26263,18394,18287,28682,31274,33259,25849,24159,32651,31984,38451]}]},options:{scales:{xAxes:[{time:{unit:"date"},gridLines:{display:!1},ticks:{maxTicksLimit:7}}],yAxes:[{ticks:{min:0,max:4e4,maxTicksLimit:5},gridLines:{color:"rgba(0, 0, 0, .125)"}}]},legend:{display:!1}}}),myPieChart=(ctx=document.getElementById("myBarChart"),myLineChart=new Chart(ctx,{type:"bar",data:{labels:["January","February","March","April","May","June"],datasets:[{label:"Revenue",backgroundColor:"rgba(2,117,216,1)",borderColor:"rgba(2,117,216,1)",data:[4215,5312,6251,7841,9821,14984]}]},options:{scales:{xAxes:[{time:{unit:"month"},gridLines:{display:!1},ticks:{maxTicksLimit:6}}],yAxes:[{ticks:{min:0,max:15e3,maxTicksLimit:5},gridLines:{display:!0}}]},legend:{display:!1}}}),ctx=document.getElementById("myPieChart"),new Chart(ctx,{type:"pie",data:{labels:["Blue","Red","Yellow","Green"],datasets:[{data:[12.21,15.58,11.25,8.32],backgroundColor:["#007bff","#dc3545","#ffc107","#28a745"]}]}}));
// Call the dataTables jQuery plugin
$(document).ready(function() {
  $('#dataTable').DataTable();
});

$(document).ready(function(){$("#dataTable").DataTable()});
(function($) {
  "use strict"; // Start of use strict
  // Configure tooltips for collapsed side navigation
  $('.navbar-sidenav [data-toggle="tooltip"]').tooltip({
    template: '<div class="tooltip navbar-sidenav-tooltip" role="tooltip" style="pointer-events: none;"><div class="arrow"></div><div class="tooltip-inner"></div></div>'
  })
  // Toggle the side navigation
  $("#sidenavToggler").click(function(e) {
    e.preventDefault();
    $("body").toggleClass("sidenav-toggled");
    $(".navbar-sidenav .nav-link-collapse").addClass("collapsed");
    $(".navbar-sidenav .sidenav-second-level, .navbar-sidenav .sidenav-third-level").removeClass("show");
  });
  // Force the toggled class to be removed when a collapsible nav link is clicked
  $(".navbar-sidenav .nav-link-collapse").click(function(e) {
    e.preventDefault();
    $("body").removeClass("sidenav-toggled");
  });
  // Prevent the content wrapper from scrolling when the fixed side navigation hovered over
  $('body.fixed-nav .navbar-sidenav, body.fixed-nav .sidenav-toggler, body.fixed-nav .navbar-collapse').on('mousewheel DOMMouseScroll', function(e) {
    var e0 = e.originalEvent,
      delta = e0.wheelDelta || -e0.detail;
    this.scrollTop += (delta < 0 ? 1 : -1) * 30;
    e.preventDefault();
  });
  // Scroll to top button appear
  $(document).scroll(function() {
    var scrollDistance = $(this).scrollTop();
    if (scrollDistance > 100) {
      $('.scroll-to-top').fadeIn();
    } else {
      $('.scroll-to-top').fadeOut();
    }
  });
  // Configure tooltips globally
  $('[data-toggle="tooltip"]').tooltip()
  // Smooth scrolling using jQuery easing
  $(document).on('click', 'a.scroll-to-top', function(event) {
    var $anchor = $(this);
    $('html, body').stop().animate({
      scrollTop: ($($anchor.attr('href')).offset().top)
    }, 1000, 'easeInOutExpo');
    event.preventDefault();
  });
})(jQuery); // End of use strict

!function(t){"use strict";t('.navbar-sidenav [data-toggle="tooltip"]').tooltip({template:'<div class="tooltip navbar-sidenav-tooltip" role="tooltip" style="pointer-events: none;"><div class="arrow"></div><div class="tooltip-inner"></div></div>'}),t("#sidenavToggler").click(function(e){e.preventDefault(),t("body").toggleClass("sidenav-toggled"),t(".navbar-sidenav .nav-link-collapse").addClass("collapsed"),t(".navbar-sidenav .sidenav-second-level, .navbar-sidenav .sidenav-third-level").removeClass("show")}),t(".navbar-sidenav .nav-link-collapse").click(function(e){e.preventDefault(),t("body").removeClass("sidenav-toggled")}),t("body.fixed-nav .navbar-sidenav, body.fixed-nav .sidenav-toggler, body.fixed-nav .navbar-collapse").on("mousewheel DOMMouseScroll",function(e){var o=e.originalEvent,t=o.wheelDelta||-o.detail;this.scrollTop+=30*(t<0?1:-1),e.preventDefault()}),t(document).scroll(function(){100<t(this).scrollTop()?t(".scroll-to-top").fadeIn():t(".scroll-to-top").fadeOut()}),t('[data-toggle="tooltip"]').tooltip(),t(document).on("click","a.scroll-to-top",function(e){var o=t(this);t("html, body").stop().animate({scrollTop:t(o.attr("href")).offset().top},1e3,"easeInOutExpo"),e.preventDefault()})}(jQuery);
var SocialShareKit=(function(){var supportsShare=/(twitter|facebook|google-plus|pinterest|tumblr|vk|linkedin|buffer|email)/,sep='*|*',wrap,_wrap;_wrap=function(opts){var options=opts||{},selector=options.selector||'.ssk-share';this.nodes=$(selector);this.options=options;};_wrap.prototype={share:function(){var els=this.nodes,options=this.options,urlsToCount={};var _init=function(){if(!els.length)return;each(els,function(el){var network=elSupportsShare(el),uniqueKey;if(!network){return;}if(el.getAttribute('data-ssk-ready'))return;el.setAttribute('data-ssk-ready',true);addEventListener(el,'click',onClick);if(el.parentNode.className.indexOf('ssk-count')!==-1){network=network[0];uniqueKey=network+sep+getShareUrl(options,network,el);if(!(uniqueKey in urlsToCount)){urlsToCount[uniqueKey]=[];}urlsToCount[uniqueKey].push(el);}});processShareCount();};if(options.forceInit===true)_init();else
ready(_init);function onClick(e){var target=preventDefault(e),match=elSupportsShare(target),network=match[0],url;if(!match)return;url=getUrl(options,network,target);if(!url)return;if(window.twttr&&target.getAttribute('href').indexOf('twitter.com/intent/')!==-1){target.setAttribute('href',url);return;}if(network!=='email'){var width,height;if(network==='buffer'){width=800;height=680;}else{width=575;height=400;}var win=winOpen(url,width,height);if(options.onOpen){options.onOpen(target,network,url,win);}if(options.onClose){var closeInt=window.setInterval(function(){if(win.closed!==false){window.clearInterval(closeInt);options.onClose(target,network,url,win);}},250);}}else{document.location=url;}}function processShareCount(){var a,ref;for(a in urlsToCount){ref=a.split(sep);(function(els){getCount(ref[0],ref[1],options,function(cnt){for(var c in els)addCount(els[c],cnt);});})(urlsToCount[a]);}}return this.nodes;}};wrap=function(selector){return new _wrap(selector);};function init(opts){return wrap(opts).share();}function ready(fn){if(document.readyState!='loading'){fn();}else if(document.addEventListener){document.addEventListener('DOMContentLoaded',fn);}else{document.attachEvent('onreadystatechange',function(){if(document.readyState!='loading')fn();});}}function $(selector){return document.querySelectorAll(selector);}function each(elements,fn){for(var i=0;i<elements.length;i++)fn(elements[i],i);}function addEventListener(el,eventName,handler){if(el.addEventListener){el.addEventListener(eventName,handler);}else{el.attachEvent('on'+eventName,function(){handler.call(el);});}}function elSupportsShare(el){return el.className.match(supportsShare);}function preventDefault(e){var evt=e||window.event;if(evt.preventDefault){evt.preventDefault();}else{evt.returnValue=false;evt.cancelBubble=true;}return evt.currentTarget||evt.srcElement;}function winOpen(url,width,height){var win,left,top,opts;if(width&&height){left=(document.documentElement.clientWidth/2-width/2);top=(document.documentElement.clientHeight-height)/2;opts='status=1,resizable=yes'+',width='+width+',height='+height+',top='+top+',left='+left;win=window.open(url,'',opts);}else{win=window.open(url);}win.focus();return win;}function getUrl(options,network,el){var url,dataOpts=getDataOpts(options,network,el),shareUrl=getShareUrl(options,network,el,dataOpts),title=typeof dataOpts['title']!=='undefined'?dataOpts['title']:getTitle(network),text=typeof dataOpts['text']!=='undefined'?dataOpts['text']:getText(network),image=dataOpts['image']?dataOpts['image']:getMetaContent('og:image'),via=typeof dataOpts['via']!=='undefined'?dataOpts['via']:getMetaContent('twitter:site'),paramsObj={shareUrl:shareUrl,title:title,text:text,image:image,via:via,options:options,shareUrlEncoded:function(){return encodeURIComponent(this.shareUrl);}};switch(network){case'facebook':url='https://www.facebook.com/share.php?u='+paramsObj.shareUrlEncoded();break;case'twitter':url='https://twitter.com/intent/tweet?url='+paramsObj.shareUrlEncoded()+'&text='+encodeURIComponent(title+(text&&title?' - ':'')+text);if(via)url+='&via='+via.replace('@','');break;case'google-plus':url='https://plus.google.com/share?url='+paramsObj.shareUrlEncoded();break;case'pinterest':url='https://pinterest.com/pin/create/button/?url='+paramsObj.shareUrlEncoded()+'&description='+encodeURIComponent(text);if(image)url+='&media='+encodeURIComponent(image);break;case'tumblr':url='https://www.tumblr.com/share/link?url='+paramsObj.shareUrlEncoded()+'&name='+encodeURIComponent(title)+'&description='+encodeURIComponent(text);break;case'linkedin':url='https://www.linkedin.com/shareArticle?mini=true&url='+paramsObj.shareUrlEncoded()+'&title='+encodeURIComponent(title)+'&summary='+encodeURIComponent(text);break;case'vk':url='https://vkontakte.ru/share.php?url='+paramsObj.shareUrlEncoded();break;case'buffer':url='https://buffer.com/add?source=button&url='+paramsObj.shareUrlEncoded()+'&text='+encodeURIComponent(text);break;case'email':url='mailto:?subject='+encodeURIComponent(title)+'&body='+encodeURIComponent(title+'\n'+shareUrl+'\n\n'+text+'\n');break;}paramsObj.networkUrl=url;if(options.onBeforeOpen){options.onBeforeOpen(el,network,paramsObj)}return paramsObj.networkUrl;}function getShareUrl(options,network,el,dataOpts){dataOpts=dataOpts||getDataOpts(options,network,el);return dataOpts['url']||window.location.href;}function getTitle(network){var title;if(network=='twitter')title=getMetaContent('twitter:title');return title||document.title;}function getText(network){var text;if(network=='twitter')text=getMetaContent('twitter:description');return text||getMetaContent('description');}function getMetaContent(tagName,attr){var text,tag=$('meta['+(attr?attr:tagName.indexOf('og:')===0?'property':'name')+'="'+tagName+'"]');if(tag.length){text=tag[0].getAttribute('content')||'';}return text||''}function getDataOpts(options,network,el){var validOpts=['url','title','text','image'],opts={},optValue,optKey,dataKey,a,parent=el.parentNode;network=='twitter'&&validOpts.push('via');for(a in validOpts){optKey=validOpts[a];dataKey='data-'+optKey;optValue=el.getAttribute(dataKey)||parent.getAttribute(dataKey)||(options[network]&&typeof options[network][optKey]!='undefined'?options[network][optKey]:options[optKey]);if(typeof optValue!='undefined'){opts[optKey]=optValue;}}return opts;}function addCount(el,cnt){var newEl=document.createElement('div');newEl.innerHTML=cnt;newEl.className='ssk-num';el.appendChild(newEl);}function getCount(network,shareUrl,options,onReady){var url,parseFunc,body,shareUrlEnc=encodeURIComponent(shareUrl);switch(network){case'facebook':url='https://graph.facebook.com/?id='+shareUrlEnc;parseFunc=function(r){return onReady(r.share?r.share.share_count:0);};break;case'twitter':if(options&&options.twitter&&options.twitter.countCallback){options.twitter.countCallback(shareUrl,onReady);}break;case'google-plus':url='https://clients6.google.com/rpc?key=AIzaSyCKSbrvQasunBoV16zDH9R33D88CeLr9gQ';body="[{\"method\":\"pos.plusones.get\",\"id\":\"p\","+"\"params\":{\"id\":\""+shareUrl+"\",\"userId\":\"@viewer\",\"groupId\":\"@self\",\"nolog\":true},"+"\"jsonrpc\":\"2.0\",\"key\":\"p\",\"apiVersion\":\"v1\"}]";parseFunc=function(r){r=JSON.parse(r);if(r.length){return onReady(r[0].result.metadata.globalCounts.count);}};ajax(url,parseFunc,body);return;case'linkedin':url='https://www.linkedin.com/countserv/count/share?url='+shareUrlEnc;parseFunc=function(r){return onReady(r.count);};break;case'pinterest':url='https://api.pinterest.com/v1/urls/count.json?url='+shareUrlEnc;parseFunc=function(r){return onReady(r.count);};break;case'vk':url='https://vk.com/share.php?act=count&url='+shareUrlEnc;parseFunc=function(r){return onReady(r);};break;case'buffer':url='https://api.bufferapp.com/1/links/shares.json?url='+shareUrlEnc;parseFunc=function(r){return onReady(r.shares);};break;}url&&parseFunc&&JSONPRequest(network,url,parseFunc,body);}function ajax(url,callback,body){var request=new XMLHttpRequest();request.onreadystatechange=function(){if(this.readyState===4){if(this.status>=200&&this.status<400){callback(this.responseText);}}};request.open('POST',url,true);request.setRequestHeader('Content-Type','application/json');request.send(body);}function JSONPRequest(network,url,callback){var callbackName='cb_'+network+'_'+Math.round(100000*Math.random()),script=document.createElement('script');window[callbackName]=function(data){try{delete window[callbackName];}catch(e){}document.body.removeChild(script);callback(data);};if(network=='vk'){window['VK']={Share:{count:function(a,b){window[callbackName](b);}}};}else if(network=='google-plus'){window['services']={gplus:{cb:window[callbackName]}};}script.src=url+(url.indexOf('?')>=0?'&':'?')+'callback='+callbackName;document.body.appendChild(script);return true;}return{init:init};})();window.SocialShareKit=SocialShareKit;



$(document).ready(function () {
    $.getJSON("vacancies.json", function(json) {
        for(let i=0; i<json.vacancies.length;i++)

            if(json.vacancies[i].id=="interns"){
                $('.vacancies-head').append(
                    '<div id="' + json.vacancies[i].id + '" class="row padding-top padding-bottom vacancies-card">'
                    + '<div class="col-lg-3 col-sm-3 col-12">'
                    + '<img class="vacancies-img" src="' + json.vacancies[i].img + '">'
                    + '</div>'
                    + '<div class="col-lg-9 col-sm-9 col-12">'
                    + '<div class="vacancies-title">' + json.vacancies[i].title + '</div>'
                    + '<hr class="vacancies-hr">'
                    + '<div class="vacancies-text">' + json.vacancies[i].shortDescription + '</div>'
                    + '</div>'
                    + '<div class="col-sm-9 offset-sm-3 col-12">'
                    + '<div class="text-center">'
                    + '<a href="' + json.vacancies[i].formLink + '" target="_blank" style="color:white!important;"><div class="btn my-btn mr-2"><strong>Application Form</strong></div></a>'
                    + '<div class="btn my-btn vacan-btn"  data-vacanID="' + json.vacancies[i].id + '" data-vacanTitle="' + json.vacancies[i].pageName + '"><strong>Read more</strong></div>'
                    + '</div>'
                    + '</div>'
                    + '</div>'
                );
            }else {

                $('.vacancies-head').append(
                    '<div id="' + json.vacancies[i].id + '" class="row padding-top padding-bottom vacancies-card">'
                    + '<div class="col-lg-3 col-sm-3 col-12">'
                    + '<img class="vacancies-img" src="' + json.vacancies[i].img + '">'
                    + '</div>'
                    + '<div class="col-lg-9 col-sm-9 col-12">'
                    + '<div class="vacancies-title">' + json.vacancies[i].title + '</div>'
                    + '<hr class="vacancies-hr">'
                    + '<div class="vacancies-text">' + json.vacancies[i].shortDescription + '</div>'
                    + '</div>'
                    + '<div class="col-sm-9 offset-sm-3 col-12">'
                    + '<div class="text-center">'
                    + '<a href="' + json.vacancies[i].formLink + '" target="_blank" style="color:white!important;"><div class="btn my-btn mr-2"><strong>Application Form</strong></div></a>'
                    + '<div class="btn my-btn vacan-btn"  data-vacanID="' + json.vacancies[i].id + '" data-vacanTitle="' + json.vacancies[i].pageName + '"><strong>Read more</strong></div>'
                    + '</div>'
                    + '</div>'
                    + '</div>'
                );
            }
    });
});


$(document).on('click',".vacan-btn",function () {
    console.log($(this).attr('data-vacanTitle'))
    window.location = window.location.href.replace('vacancies',$(this).attr('data-vacanTitle'));
    /*console.log($(this).attr('data-vacanID'));
    if($(this).attr('data-vacanID')=="interns"){
        window.location = window.location.href.replace('vacancies','interns');
    }else{
        window.location = updateQueryStringParameter(window.location.href.replace('vacancies','vacancion'), 'vacan',$(this).attr('data-vacanID'));
    }*/
});


/*
function updateQueryStringParameter(uri, key, value) {
    const re = new RegExp("([?&])" + key + "=.*?(&|$)", "i");
    const separator = uri.indexOf('?') !== -1 ? "&" : "?";
    if (uri.match(re)) {
        return uri.replace(re, '$1' + key + "=" + value + '$2');
    }
    else {
        return uri + separator + key + "=" + value;
    }
}*/
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJvb3RzdHJhcC1tYXRlcmlhbC1kZXNpZ24uanMiLCJib290c3RyYXAtbWF0ZXJpYWwtZGVzaWduLm1pbi5qcyIsIm1hdGVyaWFsLWtpdC5qcyIsIm1hdGVyaWFsLWtpdC5taW4uanMiLCJteS1qYXZhc2NyaXB0LmpzIiwibXktamF2YXNjcmlwdC5taW4uanMiLCJzYi1hZG1pbi1jaGFydHMuanMiLCJzYi1hZG1pbi1jaGFydHMubWluLmpzIiwic2ItYWRtaW4tZGF0YXRhYmxlcy5qcyIsInNiLWFkbWluLWRhdGF0YWJsZXMubWluLmpzIiwic2ItYWRtaW4uanMiLCJzYi1hZG1pbi5taW4uanMiLCJzb2NpYWwtc2hhcmUta2l0LmpzIiwidmFjYW5jaWVzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3A1TUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzdhQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMvRUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzVHQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNKQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDN0NBO0FDQUE7QUFDQTtBQUNBO0FDRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKGdsb2JhbCwgZmFjdG9yeSkge1xuICAgIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IGZhY3RvcnkocmVxdWlyZSgnanF1ZXJ5JyksIHJlcXVpcmUoJ3BvcHBlci5qcycpKSA6XG4gICAgICAgIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShbJ2pxdWVyeScsICdwb3BwZXIuanMnXSwgZmFjdG9yeSkgOlxuICAgICAgICAoZmFjdG9yeShnbG9iYWwualF1ZXJ5LCBnbG9iYWwuUG9wcGVyKSk7XG59KHRoaXMsIChmdW5jdGlvbigkLCBQb3BwZXIkMSkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgICQgPSAkICYmICQuaGFzT3duUHJvcGVydHkoJ2RlZmF1bHQnKSA/ICRbJ2RlZmF1bHQnXSA6ICQ7XG4gICAgUG9wcGVyJDEgPSBQb3BwZXIkMSAmJiBQb3BwZXIkMS5oYXNPd25Qcm9wZXJ0eSgnZGVmYXVsdCcpID8gUG9wcGVyJDFbJ2RlZmF1bHQnXSA6IFBvcHBlciQxO1xuXG4gICAgZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO1xuICAgICAgICAgICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO1xuICAgICAgICAgICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgICAgICAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XG4gICAgICAgIGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtcbiAgICAgICAgcmV0dXJuIENvbnN0cnVjdG9yO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIF9leHRlbmRzKCkge1xuICAgICAgICBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odGFyZ2V0KSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBfZXh0ZW5kcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIF9pbmhlcml0c0xvb3NlKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG4gICAgICAgIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcy5wcm90b3R5cGUpO1xuICAgICAgICBzdWJDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBzdWJDbGFzcztcbiAgICAgICAgc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAqIEJvb3RzdHJhcCAodjQuMC4wKTogdXRpbC5qc1xuICAgICAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG4gICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgKi9cblxuICAgIHZhciBVdGlsID0gZnVuY3Rpb24oJCQkMSkge1xuICAgICAgICAvKipcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqIFByaXZhdGUgVHJhbnNpdGlvbkVuZCBIZWxwZXJzXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIHRyYW5zaXRpb24gPSBmYWxzZTtcbiAgICAgICAgdmFyIE1BWF9VSUQgPSAxMDAwMDAwOyAvLyBTaG91dG91dCBBbmd1c0Nyb2xsIChodHRwczovL2dvby5nbC9weHdRR3ApXG5cbiAgICAgICAgZnVuY3Rpb24gdG9UeXBlKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIHt9LnRvU3RyaW5nLmNhbGwob2JqKS5tYXRjaCgvXFxzKFthLXpdKykvaSlbMV0udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldFNwZWNpYWxUcmFuc2l0aW9uRW5kRXZlbnQoKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGJpbmRUeXBlOiB0cmFuc2l0aW9uLmVuZCxcbiAgICAgICAgICAgICAgICBkZWxlZ2F0ZVR5cGU6IHRyYW5zaXRpb24uZW5kLFxuICAgICAgICAgICAgICAgIGhhbmRsZTogZnVuY3Rpb24gaGFuZGxlKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkJCQxKGV2ZW50LnRhcmdldCkuaXModGhpcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBldmVudC5oYW5kbGVPYmouaGFuZGxlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIHByZWZlci1yZXN0LXBhcmFtc1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZmluZWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdHJhbnNpdGlvbkVuZFRlc3QoKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LlFVbml0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGVuZDogJ3RyYW5zaXRpb25lbmQnXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdHJhbnNpdGlvbkVuZEVtdWxhdG9yKGR1cmF0aW9uKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgY2FsbGVkID0gZmFsc2U7XG4gICAgICAgICAgICAkJCQxKHRoaXMpLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBjYWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmICghY2FsbGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIFV0aWwudHJpZ2dlclRyYW5zaXRpb25FbmQoX3RoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGR1cmF0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0VHJhbnNpdGlvbkVuZFN1cHBvcnQoKSB7XG4gICAgICAgICAgICB0cmFuc2l0aW9uID0gdHJhbnNpdGlvbkVuZFRlc3QoKTtcbiAgICAgICAgICAgICQkJDEuZm4uZW11bGF0ZVRyYW5zaXRpb25FbmQgPSB0cmFuc2l0aW9uRW5kRW11bGF0b3I7XG5cbiAgICAgICAgICAgIGlmIChVdGlsLnN1cHBvcnRzVHJhbnNpdGlvbkVuZCgpKSB7XG4gICAgICAgICAgICAgICAgJCQkMS5ldmVudC5zcGVjaWFsW1V0aWwuVFJBTlNJVElPTl9FTkRdID0gZ2V0U3BlY2lhbFRyYW5zaXRpb25FbmRFdmVudCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKiBQdWJsaWMgVXRpbCBBcGlcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICovXG5cblxuICAgICAgICB2YXIgVXRpbCA9IHtcbiAgICAgICAgICAgIFRSQU5TSVRJT05fRU5EOiAnYnNUcmFuc2l0aW9uRW5kJyxcbiAgICAgICAgICAgIGdldFVJRDogZnVuY3Rpb24gZ2V0VUlEKHByZWZpeCkge1xuICAgICAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWJpdHdpc2VcbiAgICAgICAgICAgICAgICAgICAgcHJlZml4ICs9IH5+KE1hdGgucmFuZG9tKCkgKiBNQVhfVUlEKTsgLy8gXCJ+flwiIGFjdHMgbGlrZSBhIGZhc3RlciBNYXRoLmZsb29yKCkgaGVyZVxuICAgICAgICAgICAgICAgIH0gd2hpbGUgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHByZWZpeCkpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByZWZpeDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRTZWxlY3RvckZyb21FbGVtZW50OiBmdW5jdGlvbiBnZXRTZWxlY3RvckZyb21FbGVtZW50KGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS10YXJnZXQnKTtcblxuICAgICAgICAgICAgICAgIGlmICghc2VsZWN0b3IgfHwgc2VsZWN0b3IgPT09ICcjJykge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RvciA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdocmVmJykgfHwgJyc7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyICRzZWxlY3RvciA9ICQkJDEoZG9jdW1lbnQpLmZpbmQoc2VsZWN0b3IpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNlbGVjdG9yLmxlbmd0aCA+IDAgPyBzZWxlY3RvciA6IG51bGw7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZWZsb3c6IGZ1bmN0aW9uIHJlZmxvdyhlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRyaWdnZXJUcmFuc2l0aW9uRW5kOiBmdW5jdGlvbiB0cmlnZ2VyVHJhbnNpdGlvbkVuZChlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgJCQkMShlbGVtZW50KS50cmlnZ2VyKHRyYW5zaXRpb24uZW5kKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdXBwb3J0c1RyYW5zaXRpb25FbmQ6IGZ1bmN0aW9uIHN1cHBvcnRzVHJhbnNpdGlvbkVuZCgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gQm9vbGVhbih0cmFuc2l0aW9uKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc0VsZW1lbnQ6IGZ1bmN0aW9uIGlzRWxlbWVudChvYmopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKG9ialswXSB8fCBvYmopLm5vZGVUeXBlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHR5cGVDaGVja0NvbmZpZzogZnVuY3Rpb24gdHlwZUNoZWNrQ29uZmlnKGNvbXBvbmVudE5hbWUsIGNvbmZpZywgY29uZmlnVHlwZXMpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBwcm9wZXJ0eSBpbiBjb25maWdUeXBlcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGNvbmZpZ1R5cGVzLCBwcm9wZXJ0eSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleHBlY3RlZFR5cGVzID0gY29uZmlnVHlwZXNbcHJvcGVydHldO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gY29uZmlnW3Byb3BlcnR5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZVR5cGUgPSB2YWx1ZSAmJiBVdGlsLmlzRWxlbWVudCh2YWx1ZSkgPyAnZWxlbWVudCcgOiB0b1R5cGUodmFsdWUpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW5ldyBSZWdFeHAoZXhwZWN0ZWRUeXBlcykudGVzdCh2YWx1ZVR5cGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGNvbXBvbmVudE5hbWUudG9VcHBlckNhc2UoKSArIFwiOiBcIiArIChcIk9wdGlvbiBcXFwiXCIgKyBwcm9wZXJ0eSArIFwiXFxcIiBwcm92aWRlZCB0eXBlIFxcXCJcIiArIHZhbHVlVHlwZSArIFwiXFxcIiBcIikgKyAoXCJidXQgZXhwZWN0ZWQgdHlwZSBcXFwiXCIgKyBleHBlY3RlZFR5cGVzICsgXCJcXFwiLlwiKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHNldFRyYW5zaXRpb25FbmRTdXBwb3J0KCk7XG4gICAgICAgIHJldHVybiBVdGlsO1xuICAgIH0oJCk7XG5cbiAgICAvKipcbiAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAqIEJvb3RzdHJhcCAodjQuMC4wKTogYWxlcnQuanNcbiAgICAgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICovXG5cbiAgICB2YXIgQWxlcnQgPSBmdW5jdGlvbigkJCQxKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICogQ29uc3RhbnRzXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIE5BTUUgPSAnYWxlcnQnO1xuICAgICAgICB2YXIgVkVSU0lPTiA9ICc0LjAuMCc7XG4gICAgICAgIHZhciBEQVRBX0tFWSA9ICdicy5hbGVydCc7XG4gICAgICAgIHZhciBFVkVOVF9LRVkgPSBcIi5cIiArIERBVEFfS0VZO1xuICAgICAgICB2YXIgREFUQV9BUElfS0VZID0gJy5kYXRhLWFwaSc7XG4gICAgICAgIHZhciBKUVVFUllfTk9fQ09ORkxJQ1QgPSAkJCQxLmZuW05BTUVdO1xuICAgICAgICB2YXIgVFJBTlNJVElPTl9EVVJBVElPTiA9IDE1MDtcbiAgICAgICAgdmFyIFNlbGVjdG9yID0ge1xuICAgICAgICAgICAgRElTTUlTUzogJ1tkYXRhLWRpc21pc3M9XCJhbGVydFwiXSdcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIEV2ZW50ID0ge1xuICAgICAgICAgICAgQ0xPU0U6IFwiY2xvc2VcIiArIEVWRU5UX0tFWSxcbiAgICAgICAgICAgIENMT1NFRDogXCJjbG9zZWRcIiArIEVWRU5UX0tFWSxcbiAgICAgICAgICAgIENMSUNLX0RBVEFfQVBJOiBcImNsaWNrXCIgKyBFVkVOVF9LRVkgKyBEQVRBX0FQSV9LRVlcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIENsYXNzTmFtZSA9IHtcbiAgICAgICAgICAgIEFMRVJUOiAnYWxlcnQnLFxuICAgICAgICAgICAgRkFERTogJ2ZhZGUnLFxuICAgICAgICAgICAgU0hPVzogJ3Nob3cnXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgICogQ2xhc3MgRGVmaW5pdGlvblxuICAgICAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICAgKi9cblxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBBbGVydCA9XG4gICAgICAgICAgICAvKiNfX1BVUkVfXyovXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBBbGVydChlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICAgICAgICAgIH0gLy8gR2V0dGVyc1xuXG5cbiAgICAgICAgICAgICAgICB2YXIgX3Byb3RvID0gQWxlcnQucHJvdG90eXBlO1xuXG4gICAgICAgICAgICAgICAgLy8gUHVibGljXG4gICAgICAgICAgICAgICAgX3Byb3RvLmNsb3NlID0gZnVuY3Rpb24gY2xvc2UoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudCB8fCB0aGlzLl9lbGVtZW50O1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciByb290RWxlbWVudCA9IHRoaXMuX2dldFJvb3RFbGVtZW50KGVsZW1lbnQpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXN0b21FdmVudCA9IHRoaXMuX3RyaWdnZXJDbG9zZUV2ZW50KHJvb3RFbGVtZW50KTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VzdG9tRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlbW92ZUVsZW1lbnQocm9vdEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgICAgICAgICAgICAgICAgICQkJDEucmVtb3ZlRGF0YSh0aGlzLl9lbGVtZW50LCBEQVRBX0tFWSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuICAgICAgICAgICAgICAgIH07IC8vIFByaXZhdGVcblxuXG4gICAgICAgICAgICAgICAgX3Byb3RvLl9nZXRSb290RWxlbWVudCA9IGZ1bmN0aW9uIF9nZXRSb290RWxlbWVudChlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RvciA9IFV0aWwuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudChlbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50ID0gJCQkMShzZWxlY3RvcilbMF07XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50ID0gJCQkMShlbGVtZW50KS5jbG9zZXN0KFwiLlwiICsgQ2xhc3NOYW1lLkFMRVJUKVswXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJlbnQ7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIF9wcm90by5fdHJpZ2dlckNsb3NlRXZlbnQgPSBmdW5jdGlvbiBfdHJpZ2dlckNsb3NlRXZlbnQoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2xvc2VFdmVudCA9ICQkJDEuRXZlbnQoRXZlbnQuQ0xPU0UpO1xuICAgICAgICAgICAgICAgICAgICAkJCQxKGVsZW1lbnQpLnRyaWdnZXIoY2xvc2VFdmVudCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjbG9zZUV2ZW50O1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uX3JlbW92ZUVsZW1lbnQgPSBmdW5jdGlvbiBfcmVtb3ZlRWxlbWVudChlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICAgICAgJCQkMShlbGVtZW50KS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuU0hPVyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFVdGlsLnN1cHBvcnRzVHJhbnNpdGlvbkVuZCgpIHx8ICEkJCQxKGVsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5GQURFKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZGVzdHJveUVsZW1lbnQoZWxlbWVudCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICQkJDEoZWxlbWVudCkub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuX2Rlc3Ryb3lFbGVtZW50KGVsZW1lbnQsIGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoVFJBTlNJVElPTl9EVVJBVElPTik7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIF9wcm90by5fZGVzdHJveUVsZW1lbnQgPSBmdW5jdGlvbiBfZGVzdHJveUVsZW1lbnQoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAkJCQxKGVsZW1lbnQpLmRldGFjaCgpLnRyaWdnZXIoRXZlbnQuQ0xPU0VEKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB9OyAvLyBTdGF0aWNcblxuXG4gICAgICAgICAgICAgICAgQWxlcnQuX2pRdWVyeUludGVyZmFjZSA9IGZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGVsZW1lbnQgPSAkJCQxKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSAkZWxlbWVudC5kYXRhKERBVEFfS0VZKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IG5ldyBBbGVydCh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC5kYXRhKERBVEFfS0VZLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZyA9PT0gJ2Nsb3NlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbY29uZmlnXSh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIEFsZXJ0Ll9oYW5kbGVEaXNtaXNzID0gZnVuY3Rpb24gX2hhbmRsZURpc21pc3MoYWxlcnRJbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0SW5zdGFuY2UuY2xvc2UodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIF9jcmVhdGVDbGFzcyhBbGVydCwgbnVsbCwgW3tcbiAgICAgICAgICAgICAgICAgICAga2V5OiBcIlZFUlNJT05cIixcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gVkVSU0lPTjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1dKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBBbGVydDtcbiAgICAgICAgICAgIH0oKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKiBEYXRhIEFwaSBpbXBsZW1lbnRhdGlvblxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICovXG5cblxuICAgICAgICAkJCQxKGRvY3VtZW50KS5vbihFdmVudC5DTElDS19EQVRBX0FQSSwgU2VsZWN0b3IuRElTTUlTUywgQWxlcnQuX2hhbmRsZURpc21pc3MobmV3IEFsZXJ0KCkpKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKiBqUXVlcnlcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqL1xuXG4gICAgICAgICQkJDEuZm5bTkFNRV0gPSBBbGVydC5falF1ZXJ5SW50ZXJmYWNlO1xuICAgICAgICAkJCQxLmZuW05BTUVdLkNvbnN0cnVjdG9yID0gQWxlcnQ7XG5cbiAgICAgICAgJCQkMS5mbltOQU1FXS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkJCQxLmZuW05BTUVdID0gSlFVRVJZX05PX0NPTkZMSUNUO1xuICAgICAgICAgICAgcmV0dXJuIEFsZXJ0Ll9qUXVlcnlJbnRlcmZhY2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIEFsZXJ0O1xuICAgIH0oJCk7XG5cbiAgICAvKipcbiAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAqIEJvb3RzdHJhcCAodjQuMC4wKTogYnV0dG9uLmpzXG4gICAgICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcbiAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAqL1xuXG4gICAgdmFyIEJ1dHRvbiA9IGZ1bmN0aW9uKCQkJDEpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKiBDb25zdGFudHNcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgTkFNRSA9ICdidXR0b24nO1xuICAgICAgICB2YXIgVkVSU0lPTiA9ICc0LjAuMCc7XG4gICAgICAgIHZhciBEQVRBX0tFWSA9ICdicy5idXR0b24nO1xuICAgICAgICB2YXIgRVZFTlRfS0VZID0gXCIuXCIgKyBEQVRBX0tFWTtcbiAgICAgICAgdmFyIERBVEFfQVBJX0tFWSA9ICcuZGF0YS1hcGknO1xuICAgICAgICB2YXIgSlFVRVJZX05PX0NPTkZMSUNUID0gJCQkMS5mbltOQU1FXTtcbiAgICAgICAgdmFyIENsYXNzTmFtZSA9IHtcbiAgICAgICAgICAgIEFDVElWRTogJ2FjdGl2ZScsXG4gICAgICAgICAgICBCVVRUT046ICdidG4nLFxuICAgICAgICAgICAgRk9DVVM6ICdmb2N1cydcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIFNlbGVjdG9yID0ge1xuICAgICAgICAgICAgREFUQV9UT0dHTEVfQ0FSUk9UOiAnW2RhdGEtdG9nZ2xlXj1cImJ1dHRvblwiXScsXG4gICAgICAgICAgICBEQVRBX1RPR0dMRTogJ1tkYXRhLXRvZ2dsZT1cImJ1dHRvbnNcIl0nLFxuICAgICAgICAgICAgSU5QVVQ6ICdpbnB1dCcsXG4gICAgICAgICAgICBBQ1RJVkU6ICcuYWN0aXZlJyxcbiAgICAgICAgICAgIEJVVFRPTjogJy5idG4nXG4gICAgICAgIH07XG4gICAgICAgIHZhciBFdmVudCA9IHtcbiAgICAgICAgICAgIENMSUNLX0RBVEFfQVBJOiBcImNsaWNrXCIgKyBFVkVOVF9LRVkgKyBEQVRBX0FQSV9LRVksXG4gICAgICAgICAgICBGT0NVU19CTFVSX0RBVEFfQVBJOiBcImZvY3VzXCIgKyBFVkVOVF9LRVkgKyBEQVRBX0FQSV9LRVkgKyBcIiBcIiArIChcImJsdXJcIiArIEVWRU5UX0tFWSArIERBVEFfQVBJX0tFWSlcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICAgKiBDbGFzcyBEZWZpbml0aW9uXG4gICAgICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgICAqL1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIEJ1dHRvbiA9XG4gICAgICAgICAgICAvKiNfX1BVUkVfXyovXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBCdXR0b24oZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgICAgICAgICB9IC8vIEdldHRlcnNcblxuXG4gICAgICAgICAgICAgICAgdmFyIF9wcm90byA9IEJ1dHRvbi5wcm90b3R5cGU7XG5cbiAgICAgICAgICAgICAgICAvLyBQdWJsaWNcbiAgICAgICAgICAgICAgICBfcHJvdG8udG9nZ2xlID0gZnVuY3Rpb24gdG9nZ2xlKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHJpZ2dlckNoYW5nZUV2ZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFkZEFyaWFQcmVzc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJvb3RFbGVtZW50ID0gJCQkMSh0aGlzLl9lbGVtZW50KS5jbG9zZXN0KFNlbGVjdG9yLkRBVEFfVE9HR0xFKVswXTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAocm9vdEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbnB1dCA9ICQkJDEodGhpcy5fZWxlbWVudCkuZmluZChTZWxlY3Rvci5JTlBVVClbMF07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC50eXBlID09PSAncmFkaW8nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5jaGVja2VkICYmICQkJDEodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXJDaGFuZ2VFdmVudCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGl2ZUVsZW1lbnQgPSAkJCQxKHJvb3RFbGVtZW50KS5maW5kKFNlbGVjdG9yLkFDVElWRSlbMF07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhY3RpdmVFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCQkMShhY3RpdmVFbGVtZW50KS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuQUNUSVZFKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlRXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0Lmhhc0F0dHJpYnV0ZSgnZGlzYWJsZWQnKSB8fCByb290RWxlbWVudC5oYXNBdHRyaWJ1dGUoJ2Rpc2FibGVkJykgfHwgaW5wdXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkaXNhYmxlZCcpIHx8IHJvb3RFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZGlzYWJsZWQnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQuY2hlY2tlZCA9ICEkJCQxKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5BQ1RJVkUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkJCQxKGlucHV0KS50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZEFyaWFQcmVzc2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoYWRkQXJpYVByZXNzZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLXByZXNzZWQnLCAhJCQkMSh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuQUNUSVZFKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAodHJpZ2dlckNoYW5nZUV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkJCQxKHRoaXMuX2VsZW1lbnQpLnRvZ2dsZUNsYXNzKENsYXNzTmFtZS5BQ1RJVkUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIF9wcm90by5kaXNwb3NlID0gZnVuY3Rpb24gZGlzcG9zZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgJCQkMS5yZW1vdmVEYXRhKHRoaXMuX2VsZW1lbnQsIERBVEFfS0VZKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG4gICAgICAgICAgICAgICAgfTsgLy8gU3RhdGljXG5cblxuICAgICAgICAgICAgICAgIEJ1dHRvbi5falF1ZXJ5SW50ZXJmYWNlID0gZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gJCQkMSh0aGlzKS5kYXRhKERBVEFfS0VZKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IG5ldyBCdXR0b24odGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCQkMSh0aGlzKS5kYXRhKERBVEFfS0VZLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZyA9PT0gJ3RvZ2dsZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhW2NvbmZpZ10oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIF9jcmVhdGVDbGFzcyhCdXR0b24sIG51bGwsIFt7XG4gICAgICAgICAgICAgICAgICAgIGtleTogXCJWRVJTSU9OXCIsXG4gICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFZFUlNJT047XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gQnV0dG9uO1xuICAgICAgICAgICAgfSgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqIERhdGEgQXBpIGltcGxlbWVudGF0aW9uXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKi9cblxuXG4gICAgICAgICQkJDEoZG9jdW1lbnQpLm9uKEV2ZW50LkNMSUNLX0RBVEFfQVBJLCBTZWxlY3Rvci5EQVRBX1RPR0dMRV9DQVJST1QsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFyIGJ1dHRvbiA9IGV2ZW50LnRhcmdldDtcblxuICAgICAgICAgICAgaWYgKCEkJCQxKGJ1dHRvbikuaGFzQ2xhc3MoQ2xhc3NOYW1lLkJVVFRPTikpIHtcbiAgICAgICAgICAgICAgICBidXR0b24gPSAkJCQxKGJ1dHRvbikuY2xvc2VzdChTZWxlY3Rvci5CVVRUT04pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBCdXR0b24uX2pRdWVyeUludGVyZmFjZS5jYWxsKCQkJDEoYnV0dG9uKSwgJ3RvZ2dsZScpO1xuICAgICAgICB9KS5vbihFdmVudC5GT0NVU19CTFVSX0RBVEFfQVBJLCBTZWxlY3Rvci5EQVRBX1RPR0dMRV9DQVJST1QsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgYnV0dG9uID0gJCQkMShldmVudC50YXJnZXQpLmNsb3Nlc3QoU2VsZWN0b3IuQlVUVE9OKVswXTtcbiAgICAgICAgICAgICQkJDEoYnV0dG9uKS50b2dnbGVDbGFzcyhDbGFzc05hbWUuRk9DVVMsIC9eZm9jdXMoaW4pPyQvLnRlc3QoZXZlbnQudHlwZSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKiBqUXVlcnlcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqL1xuXG4gICAgICAgICQkJDEuZm5bTkFNRV0gPSBCdXR0b24uX2pRdWVyeUludGVyZmFjZTtcbiAgICAgICAgJCQkMS5mbltOQU1FXS5Db25zdHJ1Y3RvciA9IEJ1dHRvbjtcblxuICAgICAgICAkJCQxLmZuW05BTUVdLm5vQ29uZmxpY3QgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQkJDEuZm5bTkFNRV0gPSBKUVVFUllfTk9fQ09ORkxJQ1Q7XG4gICAgICAgICAgICByZXR1cm4gQnV0dG9uLl9qUXVlcnlJbnRlcmZhY2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIEJ1dHRvbjtcbiAgICB9KCQpO1xuXG4gICAgLyoqXG4gICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgKiBCb290c3RyYXAgKHY0LjAuMC1iZXRhKTogY2Fyb3VzZWwuanNcbiAgICAgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICovXG5cbiAgICB2YXIgQ2Fyb3VzZWwgPSBmdW5jdGlvbigkJCQxKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICogQ29uc3RhbnRzXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIE5BTUUgPSAnY2Fyb3VzZWwnO1xuICAgICAgICB2YXIgVkVSU0lPTiA9ICc0LjAuMC1iZXRhJztcbiAgICAgICAgdmFyIERBVEFfS0VZID0gJ2JzLmNhcm91c2VsJztcbiAgICAgICAgdmFyIEVWRU5UX0tFWSA9IFwiLlwiICsgREFUQV9LRVk7XG4gICAgICAgIHZhciBEQVRBX0FQSV9LRVkgPSAnLmRhdGEtYXBpJztcbiAgICAgICAgdmFyIEpRVUVSWV9OT19DT05GTElDVCA9ICQkJDEuZm5bTkFNRV07XG4gICAgICAgIHZhciBUUkFOU0lUSU9OX0RVUkFUSU9OID0gNjAwO1xuICAgICAgICB2YXIgQVJST1dfTEVGVF9LRVlDT0RFID0gMzc7IC8vIEtleWJvYXJkRXZlbnQud2hpY2ggdmFsdWUgZm9yIGxlZnQgYXJyb3cga2V5XG5cbiAgICAgICAgdmFyIEFSUk9XX1JJR0hUX0tFWUNPREUgPSAzOTsgLy8gS2V5Ym9hcmRFdmVudC53aGljaCB2YWx1ZSBmb3IgcmlnaHQgYXJyb3cga2V5XG5cbiAgICAgICAgdmFyIFRPVUNIRVZFTlRfQ09NUEFUX1dBSVQgPSA1MDA7IC8vIFRpbWUgZm9yIG1vdXNlIGNvbXBhdCBldmVudHMgdG8gZmlyZSBhZnRlciB0b3VjaFxuXG4gICAgICAgIHZhciBEZWZhdWx0ID0ge1xuICAgICAgICAgICAgaW50ZXJ2YWw6IDUwMDAsXG4gICAgICAgICAgICBrZXlib2FyZDogdHJ1ZSxcbiAgICAgICAgICAgIHNsaWRlOiBmYWxzZSxcbiAgICAgICAgICAgIHBhdXNlOiAnaG92ZXInLFxuICAgICAgICAgICAgd3JhcDogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgICB2YXIgRGVmYXVsdFR5cGUgPSB7XG4gICAgICAgICAgICBpbnRlcnZhbDogJyhudW1iZXJ8Ym9vbGVhbiknLFxuICAgICAgICAgICAga2V5Ym9hcmQ6ICdib29sZWFuJyxcbiAgICAgICAgICAgIHNsaWRlOiAnKGJvb2xlYW58c3RyaW5nKScsXG4gICAgICAgICAgICBwYXVzZTogJyhzdHJpbmd8Ym9vbGVhbiknLFxuICAgICAgICAgICAgd3JhcDogJ2Jvb2xlYW4nXG4gICAgICAgIH07XG4gICAgICAgIHZhciBEaXJlY3Rpb24gPSB7XG4gICAgICAgICAgICBORVhUOiAnbmV4dCcsXG4gICAgICAgICAgICBQUkVWOiAncHJldicsXG4gICAgICAgICAgICBMRUZUOiAnbGVmdCcsXG4gICAgICAgICAgICBSSUdIVDogJ3JpZ2h0J1xuICAgICAgICB9O1xuICAgICAgICB2YXIgRXZlbnQgPSB7XG4gICAgICAgICAgICBTTElERTogXCJzbGlkZVwiICsgRVZFTlRfS0VZLFxuICAgICAgICAgICAgU0xJRDogXCJzbGlkXCIgKyBFVkVOVF9LRVksXG4gICAgICAgICAgICBLRVlET1dOOiBcImtleWRvd25cIiArIEVWRU5UX0tFWSxcbiAgICAgICAgICAgIE1PVVNFRU5URVI6IFwibW91c2VlbnRlclwiICsgRVZFTlRfS0VZLFxuICAgICAgICAgICAgTU9VU0VMRUFWRTogXCJtb3VzZWxlYXZlXCIgKyBFVkVOVF9LRVksXG4gICAgICAgICAgICBUT1VDSEVORDogXCJ0b3VjaGVuZFwiICsgRVZFTlRfS0VZLFxuICAgICAgICAgICAgTE9BRF9EQVRBX0FQSTogXCJsb2FkXCIgKyBFVkVOVF9LRVkgKyBEQVRBX0FQSV9LRVksXG4gICAgICAgICAgICBDTElDS19EQVRBX0FQSTogXCJjbGlja1wiICsgRVZFTlRfS0VZICsgREFUQV9BUElfS0VZXG4gICAgICAgIH07XG4gICAgICAgIHZhciBDbGFzc05hbWUgPSB7XG4gICAgICAgICAgICBDQVJPVVNFTDogJ2Nhcm91c2VsJyxcbiAgICAgICAgICAgIEFDVElWRTogJ2FjdGl2ZScsXG4gICAgICAgICAgICBTTElERTogJ3NsaWRlJyxcbiAgICAgICAgICAgIFJJR0hUOiAnY2Fyb3VzZWwtaXRlbS1yaWdodCcsXG4gICAgICAgICAgICBMRUZUOiAnY2Fyb3VzZWwtaXRlbS1sZWZ0JyxcbiAgICAgICAgICAgIE5FWFQ6ICdjYXJvdXNlbC1pdGVtLW5leHQnLFxuICAgICAgICAgICAgUFJFVjogJ2Nhcm91c2VsLWl0ZW0tcHJldicsXG4gICAgICAgICAgICBJVEVNOiAnY2Fyb3VzZWwtaXRlbSdcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIFNlbGVjdG9yID0ge1xuICAgICAgICAgICAgQUNUSVZFOiAnLmFjdGl2ZScsXG4gICAgICAgICAgICBBQ1RJVkVfSVRFTTogJy5hY3RpdmUuY2Fyb3VzZWwtaXRlbScsXG4gICAgICAgICAgICBJVEVNOiAnLmNhcm91c2VsLWl0ZW0nLFxuICAgICAgICAgICAgTkVYVF9QUkVWOiAnLmNhcm91c2VsLWl0ZW0tbmV4dCwgLmNhcm91c2VsLWl0ZW0tcHJldicsXG4gICAgICAgICAgICBJTkRJQ0FUT1JTOiAnLmNhcm91c2VsLWluZGljYXRvcnMnLFxuICAgICAgICAgICAgREFUQV9TTElERTogJ1tkYXRhLXNsaWRlXSwgW2RhdGEtc2xpZGUtdG9dJyxcbiAgICAgICAgICAgIERBVEFfUklERTogJ1tkYXRhLXJpZGU9XCJjYXJvdXNlbFwiXSdcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICAgKiBDbGFzcyBEZWZpbml0aW9uXG4gICAgICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgICAqL1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIENhcm91c2VsID1cbiAgICAgICAgICAgIC8qI19fUFVSRV9fKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIENhcm91c2VsKGVsZW1lbnQsIGNvbmZpZykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9pdGVtcyA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2ludGVydmFsID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYWN0aXZlRWxlbWVudCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2lzUGF1c2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2lzU2xpZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdWNoVGltZW91dCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NvbmZpZyA9IHRoaXMuX2dldENvbmZpZyhjb25maWcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9lbGVtZW50ID0gJCQkMShlbGVtZW50KVswXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faW5kaWNhdG9yc0VsZW1lbnQgPSAkJCQxKHRoaXMuX2VsZW1lbnQpLmZpbmQoU2VsZWN0b3IuSU5ESUNBVE9SUylbMF07XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYWRkRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgICAgICAgICB9IC8vIGdldHRlcnNcblxuXG4gICAgICAgICAgICAgICAgdmFyIF9wcm90byA9IENhcm91c2VsLnByb3RvdHlwZTtcblxuICAgICAgICAgICAgICAgIC8vIHB1YmxpY1xuICAgICAgICAgICAgICAgIF9wcm90by5uZXh0ID0gZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9pc1NsaWRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3NsaWRlKERpcmVjdGlvbi5ORVhUKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBfcHJvdG8ubmV4dFdoZW5WaXNpYmxlID0gZnVuY3Rpb24gbmV4dFdoZW5WaXNpYmxlKCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBEb24ndCBjYWxsIG5leHQgd2hlbiB0aGUgcGFnZSBpc24ndCB2aXNpYmxlXG4gICAgICAgICAgICAgICAgICAgIGlmICghZG9jdW1lbnQuaGlkZGVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBfcHJvdG8ucHJldiA9IGZ1bmN0aW9uIHByZXYoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5faXNTbGlkaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zbGlkZShEaXJlY3Rpb24uUFJFVik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLnBhdXNlID0gZnVuY3Rpb24gcGF1c2UoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5faXNQYXVzZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCQkJDEodGhpcy5fZWxlbWVudCkuZmluZChTZWxlY3Rvci5ORVhUX1BSRVYpWzBdICYmIFV0aWwuc3VwcG9ydHNUcmFuc2l0aW9uRW5kKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFV0aWwudHJpZ2dlclRyYW5zaXRpb25FbmQodGhpcy5fZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN5Y2xlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLl9pbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2ludGVydmFsID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLmN5Y2xlID0gZnVuY3Rpb24gY3ljbGUoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5faXNQYXVzZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pbnRlcnZhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLl9pbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9pbnRlcnZhbCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fY29uZmlnLmludGVydmFsICYmICF0aGlzLl9pc1BhdXNlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5faW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlID8gdGhpcy5uZXh0V2hlblZpc2libGUgOiB0aGlzLm5leHQpLmJpbmQodGhpcyksIHRoaXMuX2NvbmZpZy5pbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLnRvID0gZnVuY3Rpb24gdG8oaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9hY3RpdmVFbGVtZW50ID0gJCQkMSh0aGlzLl9lbGVtZW50KS5maW5kKFNlbGVjdG9yLkFDVElWRV9JVEVNKVswXTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aXZlSW5kZXggPSB0aGlzLl9nZXRJdGVtSW5kZXgodGhpcy5fYWN0aXZlRWxlbWVudCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID4gdGhpcy5faXRlbXMubGVuZ3RoIC0gMSB8fCBpbmRleCA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pc1NsaWRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQkJDEodGhpcy5fZWxlbWVudCkub25lKEV2ZW50LlNMSUQsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy50byhpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChhY3RpdmVJbmRleCA9PT0gaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGF1c2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3ljbGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSBpbmRleCA+IGFjdGl2ZUluZGV4ID8gRGlyZWN0aW9uLk5FWFQgOiBEaXJlY3Rpb24uUFJFVjtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zbGlkZShkaXJlY3Rpb24sIHRoaXMuX2l0ZW1zW2luZGV4XSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIF9wcm90by5kaXNwb3NlID0gZnVuY3Rpb24gZGlzcG9zZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgJCQkMSh0aGlzLl9lbGVtZW50KS5vZmYoRVZFTlRfS0VZKTtcbiAgICAgICAgICAgICAgICAgICAgJCQkMS5yZW1vdmVEYXRhKHRoaXMuX2VsZW1lbnQsIERBVEFfS0VZKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faXRlbXMgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb25maWcgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faW50ZXJ2YWwgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9pc1BhdXNlZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2lzU2xpZGluZyA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2FjdGl2ZUVsZW1lbnQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9pbmRpY2F0b3JzRWxlbWVudCA9IG51bGw7XG4gICAgICAgICAgICAgICAgfTsgLy8gcHJpdmF0ZVxuXG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uX2dldENvbmZpZyA9IGZ1bmN0aW9uIF9nZXRDb25maWcoY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZyA9ICQkJDEuZXh0ZW5kKHt9LCBEZWZhdWx0LCBjb25maWcpO1xuICAgICAgICAgICAgICAgICAgICBVdGlsLnR5cGVDaGVja0NvbmZpZyhOQU1FLCBjb25maWcsIERlZmF1bHRUeXBlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLl9hZGRFdmVudExpc3RlbmVycyA9IGZ1bmN0aW9uIF9hZGRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2NvbmZpZy5rZXlib2FyZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCQkMSh0aGlzLl9lbGVtZW50KS5vbihFdmVudC5LRVlET1dOLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuX2tleWRvd24oZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fY29uZmlnLnBhdXNlID09PSAnaG92ZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkJCQxKHRoaXMuX2VsZW1lbnQpLm9uKEV2ZW50Lk1PVVNFRU5URVIsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5wYXVzZShldmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KS5vbihFdmVudC5NT1VTRUxFQVZFLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuY3ljbGUoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgnb250b3VjaHN0YXJ0JyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBpdCdzIGEgdG91Y2gtZW5hYmxlZCBkZXZpY2UsIG1vdXNlZW50ZXIvbGVhdmUgYXJlIGZpcmVkIGFzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGFydCBvZiB0aGUgbW91c2UgY29tcGF0aWJpbGl0eSBldmVudHMgb24gZmlyc3QgdGFwIC0gdGhlIGNhcm91c2VsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd291bGQgc3RvcCBjeWNsaW5nIHVudGlsIHVzZXIgdGFwcGVkIG91dCBvZiBpdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBoZXJlLCB3ZSBsaXN0ZW4gZm9yIHRvdWNoZW5kLCBleHBsaWNpdGx5IHBhdXNlIHRoZSBjYXJvdXNlbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIChhcyBpZiBpdCdzIHRoZSBzZWNvbmQgdGltZSB3ZSB0YXAgb24gaXQsIG1vdXNlZW50ZXIgY29tcGF0IGV2ZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaXMgTk9UIGZpcmVkKSBhbmQgYWZ0ZXIgYSB0aW1lb3V0ICh0byBhbGxvdyBmb3IgbW91c2UgY29tcGF0aWJpbGl0eVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGV2ZW50cyB0byBmaXJlKSB3ZSBleHBsaWNpdGx5IHJlc3RhcnQgY3ljbGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQkJDEodGhpcy5fZWxlbWVudCkub24oRXZlbnQuVE9VQ0hFTkQsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczIucGF1c2UoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMyLnRvdWNoVGltZW91dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KF90aGlzMi50b3VjaFRpbWVvdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyLnRvdWNoVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuY3ljbGUoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBUT1VDSEVWRU5UX0NPTVBBVF9XQUlUICsgX3RoaXMyLl9jb25maWcuaW50ZXJ2YWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIF9wcm90by5fa2V5ZG93biA9IGZ1bmN0aW9uIF9rZXlkb3duKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgvaW5wdXR8dGV4dGFyZWEvaS50ZXN0KGV2ZW50LnRhcmdldC50YWdOYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChldmVudC53aGljaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBBUlJPV19MRUZUX0tFWUNPREU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXYoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBBUlJPV19SSUdIVF9LRVlDT0RFOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIF9wcm90by5fZ2V0SXRlbUluZGV4ID0gZnVuY3Rpb24gX2dldEl0ZW1JbmRleChlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2l0ZW1zID0gJCQkMS5tYWtlQXJyYXkoJCQkMShlbGVtZW50KS5wYXJlbnQoKS5maW5kKFNlbGVjdG9yLklURU0pKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2l0ZW1zLmluZGV4T2YoZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIF9wcm90by5fZ2V0SXRlbUJ5RGlyZWN0aW9uID0gZnVuY3Rpb24gX2dldEl0ZW1CeURpcmVjdGlvbihkaXJlY3Rpb24sIGFjdGl2ZUVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlzTmV4dERpcmVjdGlvbiA9IGRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLk5FWFQ7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpc1ByZXZEaXJlY3Rpb24gPSBkaXJlY3Rpb24gPT09IERpcmVjdGlvbi5QUkVWO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBhY3RpdmVJbmRleCA9IHRoaXMuX2dldEl0ZW1JbmRleChhY3RpdmVFbGVtZW50KTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgbGFzdEl0ZW1JbmRleCA9IHRoaXMuX2l0ZW1zLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpc0dvaW5nVG9XcmFwID0gaXNQcmV2RGlyZWN0aW9uICYmIGFjdGl2ZUluZGV4ID09PSAwIHx8IGlzTmV4dERpcmVjdGlvbiAmJiBhY3RpdmVJbmRleCA9PT0gbGFzdEl0ZW1JbmRleDtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNHb2luZ1RvV3JhcCAmJiAhdGhpcy5fY29uZmlnLndyYXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhY3RpdmVFbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGRlbHRhID0gZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uUFJFViA/IC0xIDogMTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW1JbmRleCA9IChhY3RpdmVJbmRleCArIGRlbHRhKSAlIHRoaXMuX2l0ZW1zLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW1JbmRleCA9PT0gLTEgPyB0aGlzLl9pdGVtc1t0aGlzLl9pdGVtcy5sZW5ndGggLSAxXSA6IHRoaXMuX2l0ZW1zW2l0ZW1JbmRleF07XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIF9wcm90by5fdHJpZ2dlclNsaWRlRXZlbnQgPSBmdW5jdGlvbiBfdHJpZ2dlclNsaWRlRXZlbnQocmVsYXRlZFRhcmdldCwgZXZlbnREaXJlY3Rpb25OYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXRJbmRleCA9IHRoaXMuX2dldEl0ZW1JbmRleChyZWxhdGVkVGFyZ2V0KTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgZnJvbUluZGV4ID0gdGhpcy5fZ2V0SXRlbUluZGV4KCQkJDEodGhpcy5fZWxlbWVudCkuZmluZChTZWxlY3Rvci5BQ1RJVkVfSVRFTSlbMF0pO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBzbGlkZUV2ZW50ID0gJCQkMS5FdmVudChFdmVudC5TTElERSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRlZFRhcmdldDogcmVsYXRlZFRhcmdldCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbjogZXZlbnREaXJlY3Rpb25OYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgZnJvbTogZnJvbUluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgdG86IHRhcmdldEluZGV4XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAkJCQxKHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIoc2xpZGVFdmVudCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzbGlkZUV2ZW50O1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uX3NldEFjdGl2ZUluZGljYXRvckVsZW1lbnQgPSBmdW5jdGlvbiBfc2V0QWN0aXZlSW5kaWNhdG9yRWxlbWVudChlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pbmRpY2F0b3JzRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCQkMSh0aGlzLl9pbmRpY2F0b3JzRWxlbWVudCkuZmluZChTZWxlY3Rvci5BQ1RJVkUpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5BQ1RJVkUpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV4dEluZGljYXRvciA9IHRoaXMuX2luZGljYXRvcnNFbGVtZW50LmNoaWxkcmVuW3RoaXMuX2dldEl0ZW1JbmRleChlbGVtZW50KV07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0SW5kaWNhdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCQkMShuZXh0SW5kaWNhdG9yKS5hZGRDbGFzcyhDbGFzc05hbWUuQUNUSVZFKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uX3NsaWRlID0gZnVuY3Rpb24gX3NsaWRlKGRpcmVjdGlvbiwgZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aXZlRWxlbWVudCA9ICQkJDEodGhpcy5fZWxlbWVudCkuZmluZChTZWxlY3Rvci5BQ1RJVkVfSVRFTSlbMF07XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGl2ZUVsZW1lbnRJbmRleCA9IHRoaXMuX2dldEl0ZW1JbmRleChhY3RpdmVFbGVtZW50KTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV4dEVsZW1lbnQgPSBlbGVtZW50IHx8IGFjdGl2ZUVsZW1lbnQgJiYgdGhpcy5fZ2V0SXRlbUJ5RGlyZWN0aW9uKGRpcmVjdGlvbiwgYWN0aXZlRWxlbWVudCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG5leHRFbGVtZW50SW5kZXggPSB0aGlzLl9nZXRJdGVtSW5kZXgobmV4dEVsZW1lbnQpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBpc0N5Y2xpbmcgPSBCb29sZWFuKHRoaXMuX2ludGVydmFsKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRpcmVjdGlvbmFsQ2xhc3NOYW1lO1xuICAgICAgICAgICAgICAgICAgICB2YXIgb3JkZXJDbGFzc05hbWU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBldmVudERpcmVjdGlvbk5hbWU7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLk5FWFQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbmFsQ2xhc3NOYW1lID0gQ2xhc3NOYW1lLkxFRlQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcmRlckNsYXNzTmFtZSA9IENsYXNzTmFtZS5ORVhUO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnREaXJlY3Rpb25OYW1lID0gRGlyZWN0aW9uLkxFRlQ7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb25hbENsYXNzTmFtZSA9IENsYXNzTmFtZS5SSUdIVDtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyQ2xhc3NOYW1lID0gQ2xhc3NOYW1lLlBSRVY7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudERpcmVjdGlvbk5hbWUgPSBEaXJlY3Rpb24uUklHSFQ7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dEVsZW1lbnQgJiYgJCQkMShuZXh0RWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2lzU2xpZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHNsaWRlRXZlbnQgPSB0aGlzLl90cmlnZ2VyU2xpZGVFdmVudChuZXh0RWxlbWVudCwgZXZlbnREaXJlY3Rpb25OYW1lKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoc2xpZGVFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhY3RpdmVFbGVtZW50IHx8ICFuZXh0RWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc29tZSB3ZWlyZG5lc3MgaXMgaGFwcGVuaW5nLCBzbyB3ZSBiYWlsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9pc1NsaWRpbmcgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0N5Y2xpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGF1c2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NldEFjdGl2ZUluZGljYXRvckVsZW1lbnQobmV4dEVsZW1lbnQpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBzbGlkRXZlbnQgPSAkJCQxLkV2ZW50KEV2ZW50LlNMSUQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0ZWRUYXJnZXQ6IG5leHRFbGVtZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uOiBldmVudERpcmVjdGlvbk5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9tOiBhY3RpdmVFbGVtZW50SW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICB0bzogbmV4dEVsZW1lbnRJbmRleFxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoVXRpbC5zdXBwb3J0c1RyYW5zaXRpb25FbmQoKSAmJiAkJCQxKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5TTElERSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQkJDEobmV4dEVsZW1lbnQpLmFkZENsYXNzKG9yZGVyQ2xhc3NOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFV0aWwucmVmbG93KG5leHRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQkJDEoYWN0aXZlRWxlbWVudCkuYWRkQ2xhc3MoZGlyZWN0aW9uYWxDbGFzc05hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCQkMShuZXh0RWxlbWVudCkuYWRkQ2xhc3MoZGlyZWN0aW9uYWxDbGFzc05hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCQkMShhY3RpdmVFbGVtZW50KS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCQkMShuZXh0RWxlbWVudCkucmVtb3ZlQ2xhc3MoZGlyZWN0aW9uYWxDbGFzc05hbWUgKyBcIiBcIiArIG9yZGVyQ2xhc3NOYW1lKS5hZGRDbGFzcyhDbGFzc05hbWUuQUNUSVZFKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkJCQxKGFjdGl2ZUVsZW1lbnQpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5BQ1RJVkUgKyBcIiBcIiArIG9yZGVyQ2xhc3NOYW1lICsgXCIgXCIgKyBkaXJlY3Rpb25hbENsYXNzTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLl9pc1NsaWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJCQkMShfdGhpczMuX2VsZW1lbnQpLnRyaWdnZXIoc2xpZEV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmVtdWxhdGVUcmFuc2l0aW9uRW5kKFRSQU5TSVRJT05fRFVSQVRJT04pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCQkMShhY3RpdmVFbGVtZW50KS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuQUNUSVZFKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQkJDEobmV4dEVsZW1lbnQpLmFkZENsYXNzKENsYXNzTmFtZS5BQ1RJVkUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5faXNTbGlkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAkJCQxKHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIoc2xpZEV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0N5Y2xpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3ljbGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07IC8vIHN0YXRpY1xuXG5cbiAgICAgICAgICAgICAgICBDYXJvdXNlbC5falF1ZXJ5SW50ZXJmYWNlID0gZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gJCQkMSh0aGlzKS5kYXRhKERBVEFfS0VZKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9jb25maWcgPSAkJCQxLmV4dGVuZCh7fSwgRGVmYXVsdCwgJCQkMSh0aGlzKS5kYXRhKCkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkJCQxLmV4dGVuZChfY29uZmlnLCBjb25maWcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aW9uID0gdHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycgPyBjb25maWcgOiBfY29uZmlnLnNsaWRlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gbmV3IENhcm91c2VsKHRoaXMsIF9jb25maWcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQkJDEodGhpcykuZGF0YShEQVRBX0tFWSwgZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29uZmlnID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEudG8oY29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGFjdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YVthY3Rpb25dID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gbWV0aG9kIG5hbWVkIFxcXCJcIiArIGFjdGlvbiArIFwiXFxcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhW2FjdGlvbl0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoX2NvbmZpZy5pbnRlcnZhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEucGF1c2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmN5Y2xlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBDYXJvdXNlbC5fZGF0YUFwaUNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIF9kYXRhQXBpQ2xpY2tIYW5kbGVyKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RvciA9IFV0aWwuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudCh0aGlzKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIXNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gJCQkMShzZWxlY3RvcilbMF07XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0YXJnZXQgfHwgISQkJDEodGFyZ2V0KS5oYXNDbGFzcyhDbGFzc05hbWUuQ0FST1VTRUwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlnID0gJCQkMS5leHRlbmQoe30sICQkJDEodGFyZ2V0KS5kYXRhKCksICQkJDEodGhpcykuZGF0YSgpKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNsaWRlSW5kZXggPSB0aGlzLmdldEF0dHJpYnV0ZSgnZGF0YS1zbGlkZS10bycpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChzbGlkZUluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWcuaW50ZXJ2YWwgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIENhcm91c2VsLl9qUXVlcnlJbnRlcmZhY2UuY2FsbCgkJCQxKHRhcmdldCksIGNvbmZpZyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHNsaWRlSW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQkJDEodGFyZ2V0KS5kYXRhKERBVEFfS0VZKS50byhzbGlkZUluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIF9jcmVhdGVDbGFzcyhDYXJvdXNlbCwgbnVsbCwgW3tcbiAgICAgICAgICAgICAgICAgICAga2V5OiBcIlZFUlNJT05cIixcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gVkVSU0lPTjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiBcIkRlZmF1bHRcIixcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRGVmYXVsdDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1dKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBDYXJvdXNlbDtcbiAgICAgICAgICAgIH0oKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKiBEYXRhIEFwaSBpbXBsZW1lbnRhdGlvblxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICovXG5cblxuICAgICAgICAkJCQxKGRvY3VtZW50KS5vbihFdmVudC5DTElDS19EQVRBX0FQSSwgU2VsZWN0b3IuREFUQV9TTElERSwgQ2Fyb3VzZWwuX2RhdGFBcGlDbGlja0hhbmRsZXIpO1xuICAgICAgICAkJCQxKHdpbmRvdykub24oRXZlbnQuTE9BRF9EQVRBX0FQSSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkJCQxKFNlbGVjdG9yLkRBVEFfUklERSkuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgJGNhcm91c2VsID0gJCQkMSh0aGlzKTtcblxuICAgICAgICAgICAgICAgIENhcm91c2VsLl9qUXVlcnlJbnRlcmZhY2UuY2FsbCgkY2Fyb3VzZWwsICRjYXJvdXNlbC5kYXRhKCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICAvKipcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqIGpRdWVyeVxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICovXG5cbiAgICAgICAgJCQkMS5mbltOQU1FXSA9IENhcm91c2VsLl9qUXVlcnlJbnRlcmZhY2U7XG4gICAgICAgICQkJDEuZm5bTkFNRV0uQ29uc3RydWN0b3IgPSBDYXJvdXNlbDtcblxuICAgICAgICAkJCQxLmZuW05BTUVdLm5vQ29uZmxpY3QgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQkJDEuZm5bTkFNRV0gPSBKUVVFUllfTk9fQ09ORkxJQ1Q7XG4gICAgICAgICAgICByZXR1cm4gQ2Fyb3VzZWwuX2pRdWVyeUludGVyZmFjZTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gQ2Fyb3VzZWw7XG4gICAgfShqUXVlcnkpO1xuXG4gICAgLyoqXG4gICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgKiBCb290c3RyYXAgKHY0LjAuMCk6IGNvbGxhcHNlLmpzXG4gICAgICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcbiAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAqL1xuXG4gICAgdmFyIENvbGxhcHNlID0gZnVuY3Rpb24oJCQkMSkge1xuICAgICAgICAvKipcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqIENvbnN0YW50c1xuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICovXG4gICAgICAgIHZhciBOQU1FID0gJ2NvbGxhcHNlJztcbiAgICAgICAgdmFyIFZFUlNJT04gPSAnNC4wLjAnO1xuICAgICAgICB2YXIgREFUQV9LRVkgPSAnYnMuY29sbGFwc2UnO1xuICAgICAgICB2YXIgRVZFTlRfS0VZID0gXCIuXCIgKyBEQVRBX0tFWTtcbiAgICAgICAgdmFyIERBVEFfQVBJX0tFWSA9ICcuZGF0YS1hcGknO1xuICAgICAgICB2YXIgSlFVRVJZX05PX0NPTkZMSUNUID0gJCQkMS5mbltOQU1FXTtcbiAgICAgICAgdmFyIFRSQU5TSVRJT05fRFVSQVRJT04gPSA2MDA7XG4gICAgICAgIHZhciBEZWZhdWx0ID0ge1xuICAgICAgICAgICAgdG9nZ2xlOiB0cnVlLFxuICAgICAgICAgICAgcGFyZW50OiAnJ1xuICAgICAgICB9O1xuICAgICAgICB2YXIgRGVmYXVsdFR5cGUgPSB7XG4gICAgICAgICAgICB0b2dnbGU6ICdib29sZWFuJyxcbiAgICAgICAgICAgIHBhcmVudDogJyhzdHJpbmd8ZWxlbWVudCknXG4gICAgICAgIH07XG4gICAgICAgIHZhciBFdmVudCA9IHtcbiAgICAgICAgICAgIFNIT1c6IFwic2hvd1wiICsgRVZFTlRfS0VZLFxuICAgICAgICAgICAgU0hPV046IFwic2hvd25cIiArIEVWRU5UX0tFWSxcbiAgICAgICAgICAgIEhJREU6IFwiaGlkZVwiICsgRVZFTlRfS0VZLFxuICAgICAgICAgICAgSElEREVOOiBcImhpZGRlblwiICsgRVZFTlRfS0VZLFxuICAgICAgICAgICAgQ0xJQ0tfREFUQV9BUEk6IFwiY2xpY2tcIiArIEVWRU5UX0tFWSArIERBVEFfQVBJX0tFWVxuICAgICAgICB9O1xuICAgICAgICB2YXIgQ2xhc3NOYW1lID0ge1xuICAgICAgICAgICAgU0hPVzogJ3Nob3cnLFxuICAgICAgICAgICAgQ09MTEFQU0U6ICdjb2xsYXBzZScsXG4gICAgICAgICAgICBDT0xMQVBTSU5HOiAnY29sbGFwc2luZycsXG4gICAgICAgICAgICBDT0xMQVBTRUQ6ICdjb2xsYXBzZWQnXG4gICAgICAgIH07XG4gICAgICAgIHZhciBEaW1lbnNpb24gPSB7XG4gICAgICAgICAgICBXSURUSDogJ3dpZHRoJyxcbiAgICAgICAgICAgIEhFSUdIVDogJ2hlaWdodCdcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIFNlbGVjdG9yID0ge1xuICAgICAgICAgICAgQUNUSVZFUzogJy5zaG93LCAuY29sbGFwc2luZycsXG4gICAgICAgICAgICBEQVRBX1RPR0dMRTogJ1tkYXRhLXRvZ2dsZT1cImNvbGxhcHNlXCJdJ1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgICAqIENsYXNzIERlZmluaXRpb25cbiAgICAgICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgICovXG5cbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgQ29sbGFwc2UgPVxuICAgICAgICAgICAgLyojX19QVVJFX18qL1xuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gQ29sbGFwc2UoZWxlbWVudCwgY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2lzVHJhbnNpdGlvbmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29uZmlnID0gdGhpcy5fZ2V0Q29uZmlnKGNvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3RyaWdnZXJBcnJheSA9ICQkJDEubWFrZUFycmF5KCQkJDEoXCJbZGF0YS10b2dnbGU9XFxcImNvbGxhcHNlXFxcIl1baHJlZj1cXFwiI1wiICsgZWxlbWVudC5pZCArIFwiXFxcIl0sXCIgKyAoXCJbZGF0YS10b2dnbGU9XFxcImNvbGxhcHNlXFxcIl1bZGF0YS10YXJnZXQ9XFxcIiNcIiArIGVsZW1lbnQuaWQgKyBcIlxcXCJdXCIpKSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YWJUb2dnbGVzID0gJCQkMShTZWxlY3Rvci5EQVRBX1RPR0dMRSk7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0YWJUb2dnbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbSA9IHRhYlRvZ2dsZXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSBVdGlsLmdldFNlbGVjdG9yRnJvbUVsZW1lbnQoZWxlbSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RvciAhPT0gbnVsbCAmJiAkJCQxKHNlbGVjdG9yKS5maWx0ZXIoZWxlbWVudCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3NlbGVjdG9yID0gc2VsZWN0b3I7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl90cmlnZ2VyQXJyYXkucHVzaChlbGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3BhcmVudCA9IHRoaXMuX2NvbmZpZy5wYXJlbnQgPyB0aGlzLl9nZXRQYXJlbnQoKSA6IG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9jb25maWcucGFyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9hZGRBcmlhQW5kQ29sbGFwc2VkQ2xhc3ModGhpcy5fZWxlbWVudCwgdGhpcy5fdHJpZ2dlckFycmF5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9jb25maWcudG9nZ2xlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSAvLyBHZXR0ZXJzXG5cblxuICAgICAgICAgICAgICAgIHZhciBfcHJvdG8gPSBDb2xsYXBzZS5wcm90b3R5cGU7XG5cbiAgICAgICAgICAgICAgICAvLyBQdWJsaWNcbiAgICAgICAgICAgICAgICBfcHJvdG8udG9nZ2xlID0gZnVuY3Rpb24gdG9nZ2xlKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoJCQkMSh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuU0hPVykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLnNob3cgPSBmdW5jdGlvbiBzaG93KCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pc1RyYW5zaXRpb25pbmcgfHwgJCQkMSh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuU0hPVykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBhY3RpdmVzO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aXZlc0RhdGE7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3BhcmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlcyA9ICQkJDEubWFrZUFycmF5KCQkJDEodGhpcy5fcGFyZW50KS5maW5kKFNlbGVjdG9yLkFDVElWRVMpLmZpbHRlcihcIltkYXRhLXBhcmVudD1cXFwiXCIgKyB0aGlzLl9jb25maWcucGFyZW50ICsgXCJcXFwiXVwiKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhY3RpdmVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZXMgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZXNEYXRhID0gJCQkMShhY3RpdmVzKS5ub3QodGhpcy5fc2VsZWN0b3IpLmRhdGEoREFUQV9LRVkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aXZlc0RhdGEgJiYgYWN0aXZlc0RhdGEuX2lzVHJhbnNpdGlvbmluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdGFydEV2ZW50ID0gJCQkMS5FdmVudChFdmVudC5TSE9XKTtcbiAgICAgICAgICAgICAgICAgICAgJCQkMSh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKHN0YXJ0RXZlbnQpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGFydEV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aXZlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgQ29sbGFwc2UuX2pRdWVyeUludGVyZmFjZS5jYWxsKCQkJDEoYWN0aXZlcykubm90KHRoaXMuX3NlbGVjdG9yKSwgJ2hpZGUnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhY3RpdmVzRGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQkJDEoYWN0aXZlcykuZGF0YShEQVRBX0tFWSwgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5fZ2V0RGltZW5zaW9uKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgJCQkMSh0aGlzLl9lbGVtZW50KS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuQ09MTEFQU0UpLmFkZENsYXNzKENsYXNzTmFtZS5DT0xMQVBTSU5HKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZWxlbWVudC5zdHlsZVtkaW1lbnNpb25dID0gMDtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fdHJpZ2dlckFycmF5Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQkJDEodGhpcy5fdHJpZ2dlckFycmF5KS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuQ09MTEFQU0VEKS5hdHRyKCdhcmlhLWV4cGFuZGVkJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFRyYW5zaXRpb25pbmcodHJ1ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbXBsZXRlID0gZnVuY3Rpb24gY29tcGxldGUoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkJCQxKF90aGlzLl9lbGVtZW50KS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuQ09MTEFQU0lORykuYWRkQ2xhc3MoQ2xhc3NOYW1lLkNPTExBUFNFKS5hZGRDbGFzcyhDbGFzc05hbWUuU0hPVyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fZWxlbWVudC5zdHlsZVtkaW1lbnNpb25dID0gJyc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNldFRyYW5zaXRpb25pbmcoZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkJCQxKF90aGlzLl9lbGVtZW50KS50cmlnZ2VyKEV2ZW50LlNIT1dOKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIVV0aWwuc3VwcG9ydHNUcmFuc2l0aW9uRW5kKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgY2FwaXRhbGl6ZWREaW1lbnNpb24gPSBkaW1lbnNpb25bMF0udG9VcHBlckNhc2UoKSArIGRpbWVuc2lvbi5zbGljZSgxKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNjcm9sbFNpemUgPSBcInNjcm9sbFwiICsgY2FwaXRhbGl6ZWREaW1lbnNpb247XG4gICAgICAgICAgICAgICAgICAgICQkJDEodGhpcy5fZWxlbWVudCkub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsIGNvbXBsZXRlKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChUUkFOU0lUSU9OX0RVUkFUSU9OKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZWxlbWVudC5zdHlsZVtkaW1lbnNpb25dID0gdGhpcy5fZWxlbWVudFtzY3JvbGxTaXplXSArIFwicHhcIjtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLmhpZGUgPSBmdW5jdGlvbiBoaWRlKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5faXNUcmFuc2l0aW9uaW5nIHx8ICEkJCQxKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5TSE9XKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXJ0RXZlbnQgPSAkJCQxLkV2ZW50KEV2ZW50LkhJREUpO1xuICAgICAgICAgICAgICAgICAgICAkJCQxKHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIoc3RhcnRFdmVudCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXJ0RXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBkaW1lbnNpb24gPSB0aGlzLl9nZXREaW1lbnNpb24oKTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9lbGVtZW50LnN0eWxlW2RpbWVuc2lvbl0gPSB0aGlzLl9lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpW2RpbWVuc2lvbl0gKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgIFV0aWwucmVmbG93KHRoaXMuX2VsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICAkJCQxKHRoaXMuX2VsZW1lbnQpLmFkZENsYXNzKENsYXNzTmFtZS5DT0xMQVBTSU5HKS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuQ09MTEFQU0UpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5TSE9XKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fdHJpZ2dlckFycmF5Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fdHJpZ2dlckFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRyaWdnZXIgPSB0aGlzLl90cmlnZ2VyQXJyYXlbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdG9yID0gVXRpbC5nZXRTZWxlY3RvckZyb21FbGVtZW50KHRyaWdnZXIpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdG9yICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkZWxlbSA9ICQkJDEoc2VsZWN0b3IpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghJGVsZW0uaGFzQ2xhc3MoQ2xhc3NOYW1lLlNIT1cpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkJCQxKHRyaWdnZXIpLmFkZENsYXNzKENsYXNzTmFtZS5DT0xMQVBTRUQpLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFRyYW5zaXRpb25pbmcodHJ1ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbXBsZXRlID0gZnVuY3Rpb24gY29tcGxldGUoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczIuc2V0VHJhbnNpdGlvbmluZyhmYWxzZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICQkJDEoX3RoaXMyLl9lbGVtZW50KS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuQ09MTEFQU0lORykuYWRkQ2xhc3MoQ2xhc3NOYW1lLkNPTExBUFNFKS50cmlnZ2VyKEV2ZW50LkhJRERFTik7XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZWxlbWVudC5zdHlsZVtkaW1lbnNpb25dID0gJyc7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFVdGlsLnN1cHBvcnRzVHJhbnNpdGlvbkVuZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgJCQkMSh0aGlzLl9lbGVtZW50KS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgY29tcGxldGUpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKFRSQU5TSVRJT05fRFVSQVRJT04pO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uc2V0VHJhbnNpdGlvbmluZyA9IGZ1bmN0aW9uIHNldFRyYW5zaXRpb25pbmcoaXNUcmFuc2l0aW9uaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2lzVHJhbnNpdGlvbmluZyA9IGlzVHJhbnNpdGlvbmluZztcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLmRpc3Bvc2UgPSBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgICAgICAgICAgICAgICAgICAkJCQxLnJlbW92ZURhdGEodGhpcy5fZWxlbWVudCwgREFUQV9LRVkpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb25maWcgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9wYXJlbnQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdHJpZ2dlckFycmF5ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faXNUcmFuc2l0aW9uaW5nID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9OyAvLyBQcml2YXRlXG5cblxuICAgICAgICAgICAgICAgIF9wcm90by5fZ2V0Q29uZmlnID0gZnVuY3Rpb24gX2dldENvbmZpZyhjb25maWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnID0gX2V4dGVuZHMoe30sIERlZmF1bHQsIGNvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZy50b2dnbGUgPSBCb29sZWFuKGNvbmZpZy50b2dnbGUpOyAvLyBDb2VyY2Ugc3RyaW5nIHZhbHVlc1xuXG4gICAgICAgICAgICAgICAgICAgIFV0aWwudHlwZUNoZWNrQ29uZmlnKE5BTUUsIGNvbmZpZywgRGVmYXVsdFR5cGUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29uZmlnO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uX2dldERpbWVuc2lvbiA9IGZ1bmN0aW9uIF9nZXREaW1lbnNpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBoYXNXaWR0aCA9ICQkJDEodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoRGltZW5zaW9uLldJRFRIKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhhc1dpZHRoID8gRGltZW5zaW9uLldJRFRIIDogRGltZW5zaW9uLkhFSUdIVDtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLl9nZXRQYXJlbnQgPSBmdW5jdGlvbiBfZ2V0UGFyZW50KCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFyZW50ID0gbnVsbDtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoVXRpbC5pc0VsZW1lbnQodGhpcy5fY29uZmlnLnBhcmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudCA9IHRoaXMuX2NvbmZpZy5wYXJlbnQ7IC8vIEl0J3MgYSBqUXVlcnkgb2JqZWN0XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5fY29uZmlnLnBhcmVudC5qcXVlcnkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50ID0gdGhpcy5fY29uZmlnLnBhcmVudFswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudCA9ICQkJDEodGhpcy5fY29uZmlnLnBhcmVudClbMF07XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSBcIltkYXRhLXRvZ2dsZT1cXFwiY29sbGFwc2VcXFwiXVtkYXRhLXBhcmVudD1cXFwiXCIgKyB0aGlzLl9jb25maWcucGFyZW50ICsgXCJcXFwiXVwiO1xuICAgICAgICAgICAgICAgICAgICAkJCQxKHBhcmVudCkuZmluZChzZWxlY3RvcikuZWFjaChmdW5jdGlvbihpLCBlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMuX2FkZEFyaWFBbmRDb2xsYXBzZWRDbGFzcyhDb2xsYXBzZS5fZ2V0VGFyZ2V0RnJvbUVsZW1lbnQoZWxlbWVudCksIFtlbGVtZW50XSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyZW50O1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uX2FkZEFyaWFBbmRDb2xsYXBzZWRDbGFzcyA9IGZ1bmN0aW9uIF9hZGRBcmlhQW5kQ29sbGFwc2VkQ2xhc3MoZWxlbWVudCwgdHJpZ2dlckFycmF5KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXNPcGVuID0gJCQkMShlbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuU0hPVyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cmlnZ2VyQXJyYXkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQkJDEodHJpZ2dlckFycmF5KS50b2dnbGVDbGFzcyhDbGFzc05hbWUuQ09MTEFQU0VELCAhaXNPcGVuKS5hdHRyKCdhcmlhLWV4cGFuZGVkJywgaXNPcGVuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07IC8vIFN0YXRpY1xuXG5cbiAgICAgICAgICAgICAgICBDb2xsYXBzZS5fZ2V0VGFyZ2V0RnJvbUVsZW1lbnQgPSBmdW5jdGlvbiBfZ2V0VGFyZ2V0RnJvbUVsZW1lbnQoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSBVdGlsLmdldFNlbGVjdG9yRnJvbUVsZW1lbnQoZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxlY3RvciA/ICQkJDEoc2VsZWN0b3IpWzBdIDogbnVsbDtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgQ29sbGFwc2UuX2pRdWVyeUludGVyZmFjZSA9IGZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSAkJCQxKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSAkdGhpcy5kYXRhKERBVEFfS0VZKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9jb25maWcgPSBfZXh0ZW5kcyh7fSwgRGVmYXVsdCwgJHRoaXMuZGF0YSgpLCB0eXBlb2YgY29uZmlnID09PSAnb2JqZWN0JyAmJiBjb25maWcpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRhdGEgJiYgX2NvbmZpZy50b2dnbGUgJiYgL3Nob3d8aGlkZS8udGVzdChjb25maWcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbmZpZy50b2dnbGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IG5ldyBDb2xsYXBzZSh0aGlzLCBfY29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5kYXRhKERBVEFfS0VZLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb25maWcgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBkYXRhW2NvbmZpZ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJObyBtZXRob2QgbmFtZWQgXFxcIlwiICsgY29uZmlnICsgXCJcXFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbY29uZmlnXSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX2NyZWF0ZUNsYXNzKENvbGxhcHNlLCBudWxsLCBbe1xuICAgICAgICAgICAgICAgICAgICBrZXk6IFwiVkVSU0lPTlwiLFxuICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBWRVJTSU9OO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBrZXk6IFwiRGVmYXVsdFwiLFxuICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBEZWZhdWx0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfV0pO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIENvbGxhcHNlO1xuICAgICAgICAgICAgfSgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqIERhdGEgQXBpIGltcGxlbWVudGF0aW9uXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKi9cblxuXG4gICAgICAgICQkJDEoZG9jdW1lbnQpLm9uKEV2ZW50LkNMSUNLX0RBVEFfQVBJLCBTZWxlY3Rvci5EQVRBX1RPR0dMRSwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIC8vIHByZXZlbnREZWZhdWx0IG9ubHkgZm9yIDxhPiBlbGVtZW50cyAod2hpY2ggY2hhbmdlIHRoZSBVUkwpIG5vdCBpbnNpZGUgdGhlIGNvbGxhcHNpYmxlIGVsZW1lbnRcbiAgICAgICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LnRhZ05hbWUgPT09ICdBJykge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciAkdHJpZ2dlciA9ICQkJDEodGhpcyk7XG4gICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSBVdGlsLmdldFNlbGVjdG9yRnJvbUVsZW1lbnQodGhpcyk7XG4gICAgICAgICAgICAkJCQxKHNlbGVjdG9yKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciAkdGFyZ2V0ID0gJCQkMSh0aGlzKTtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9ICR0YXJnZXQuZGF0YShEQVRBX0tFWSk7XG4gICAgICAgICAgICAgICAgdmFyIGNvbmZpZyA9IGRhdGEgPyAndG9nZ2xlJyA6ICR0cmlnZ2VyLmRhdGEoKTtcblxuICAgICAgICAgICAgICAgIENvbGxhcHNlLl9qUXVlcnlJbnRlcmZhY2UuY2FsbCgkdGFyZ2V0LCBjb25maWcpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICAvKipcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqIGpRdWVyeVxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICovXG5cbiAgICAgICAgJCQkMS5mbltOQU1FXSA9IENvbGxhcHNlLl9qUXVlcnlJbnRlcmZhY2U7XG4gICAgICAgICQkJDEuZm5bTkFNRV0uQ29uc3RydWN0b3IgPSBDb2xsYXBzZTtcblxuICAgICAgICAkJCQxLmZuW05BTUVdLm5vQ29uZmxpY3QgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQkJDEuZm5bTkFNRV0gPSBKUVVFUllfTk9fQ09ORkxJQ1Q7XG4gICAgICAgICAgICByZXR1cm4gQ29sbGFwc2UuX2pRdWVyeUludGVyZmFjZTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gQ29sbGFwc2U7XG4gICAgfSgkKTtcblxuICAgIC8qKlxuICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICogQm9vdHN0cmFwICh2NC4wLjApOiBtb2RhbC5qc1xuICAgICAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG4gICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgKi9cblxuICAgIHZhciBNb2RhbCA9IGZ1bmN0aW9uKCQkJDEpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKiBDb25zdGFudHNcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgTkFNRSA9ICdtb2RhbCc7XG4gICAgICAgIHZhciBWRVJTSU9OID0gJzQuMC4wJztcbiAgICAgICAgdmFyIERBVEFfS0VZID0gJ2JzLm1vZGFsJztcbiAgICAgICAgdmFyIEVWRU5UX0tFWSA9IFwiLlwiICsgREFUQV9LRVk7XG4gICAgICAgIHZhciBEQVRBX0FQSV9LRVkgPSAnLmRhdGEtYXBpJztcbiAgICAgICAgdmFyIEpRVUVSWV9OT19DT05GTElDVCA9ICQkJDEuZm5bTkFNRV07XG4gICAgICAgIHZhciBUUkFOU0lUSU9OX0RVUkFUSU9OID0gMzAwO1xuICAgICAgICB2YXIgQkFDS0RST1BfVFJBTlNJVElPTl9EVVJBVElPTiA9IDE1MDtcbiAgICAgICAgdmFyIEVTQ0FQRV9LRVlDT0RFID0gMjc7IC8vIEtleWJvYXJkRXZlbnQud2hpY2ggdmFsdWUgZm9yIEVzY2FwZSAoRXNjKSBrZXlcblxuICAgICAgICB2YXIgRGVmYXVsdCA9IHtcbiAgICAgICAgICAgIGJhY2tkcm9wOiB0cnVlLFxuICAgICAgICAgICAga2V5Ym9hcmQ6IHRydWUsXG4gICAgICAgICAgICBmb2N1czogdHJ1ZSxcbiAgICAgICAgICAgIHNob3c6IHRydWVcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIERlZmF1bHRUeXBlID0ge1xuICAgICAgICAgICAgYmFja2Ryb3A6ICcoYm9vbGVhbnxzdHJpbmcpJyxcbiAgICAgICAgICAgIGtleWJvYXJkOiAnYm9vbGVhbicsXG4gICAgICAgICAgICBmb2N1czogJ2Jvb2xlYW4nLFxuICAgICAgICAgICAgc2hvdzogJ2Jvb2xlYW4nXG4gICAgICAgIH07XG4gICAgICAgIHZhciBFdmVudCA9IHtcbiAgICAgICAgICAgIEhJREU6IFwiaGlkZVwiICsgRVZFTlRfS0VZLFxuICAgICAgICAgICAgSElEREVOOiBcImhpZGRlblwiICsgRVZFTlRfS0VZLFxuICAgICAgICAgICAgU0hPVzogXCJzaG93XCIgKyBFVkVOVF9LRVksXG4gICAgICAgICAgICBTSE9XTjogXCJzaG93blwiICsgRVZFTlRfS0VZLFxuICAgICAgICAgICAgRk9DVVNJTjogXCJmb2N1c2luXCIgKyBFVkVOVF9LRVksXG4gICAgICAgICAgICBSRVNJWkU6IFwicmVzaXplXCIgKyBFVkVOVF9LRVksXG4gICAgICAgICAgICBDTElDS19ESVNNSVNTOiBcImNsaWNrLmRpc21pc3NcIiArIEVWRU5UX0tFWSxcbiAgICAgICAgICAgIEtFWURPV05fRElTTUlTUzogXCJrZXlkb3duLmRpc21pc3NcIiArIEVWRU5UX0tFWSxcbiAgICAgICAgICAgIE1PVVNFVVBfRElTTUlTUzogXCJtb3VzZXVwLmRpc21pc3NcIiArIEVWRU5UX0tFWSxcbiAgICAgICAgICAgIE1PVVNFRE9XTl9ESVNNSVNTOiBcIm1vdXNlZG93bi5kaXNtaXNzXCIgKyBFVkVOVF9LRVksXG4gICAgICAgICAgICBDTElDS19EQVRBX0FQSTogXCJjbGlja1wiICsgRVZFTlRfS0VZICsgREFUQV9BUElfS0VZXG4gICAgICAgIH07XG4gICAgICAgIHZhciBDbGFzc05hbWUgPSB7XG4gICAgICAgICAgICBTQ1JPTExCQVJfTUVBU1VSRVI6ICdtb2RhbC1zY3JvbGxiYXItbWVhc3VyZScsXG4gICAgICAgICAgICBCQUNLRFJPUDogJ21vZGFsLWJhY2tkcm9wJyxcbiAgICAgICAgICAgIE9QRU46ICdtb2RhbC1vcGVuJyxcbiAgICAgICAgICAgIEZBREU6ICdmYWRlJyxcbiAgICAgICAgICAgIFNIT1c6ICdzaG93J1xuICAgICAgICB9O1xuICAgICAgICB2YXIgU2VsZWN0b3IgPSB7XG4gICAgICAgICAgICBESUFMT0c6ICcubW9kYWwtZGlhbG9nJyxcbiAgICAgICAgICAgIERBVEFfVE9HR0xFOiAnW2RhdGEtdG9nZ2xlPVwibW9kYWxcIl0nLFxuICAgICAgICAgICAgREFUQV9ESVNNSVNTOiAnW2RhdGEtZGlzbWlzcz1cIm1vZGFsXCJdJyxcbiAgICAgICAgICAgIEZJWEVEX0NPTlRFTlQ6ICcuZml4ZWQtdG9wLCAuZml4ZWQtYm90dG9tLCAuaXMtZml4ZWQsIC5zdGlja3ktdG9wJyxcbiAgICAgICAgICAgIFNUSUNLWV9DT05URU5UOiAnLnN0aWNreS10b3AnLFxuICAgICAgICAgICAgTkFWQkFSX1RPR0dMRVI6ICcubmF2YmFyLXRvZ2dsZXInXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgICogQ2xhc3MgRGVmaW5pdGlvblxuICAgICAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICAgKi9cblxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBNb2RhbCA9XG4gICAgICAgICAgICAvKiNfX1BVUkVfXyovXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBNb2RhbChlbGVtZW50LCBjb25maWcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29uZmlnID0gdGhpcy5fZ2V0Q29uZmlnKGNvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9kaWFsb2cgPSAkJCQxKGVsZW1lbnQpLmZpbmQoU2VsZWN0b3IuRElBTE9HKVswXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYmFja2Ryb3AgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9pc1Nob3duID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2lzQm9keU92ZXJmbG93aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2lnbm9yZUJhY2tkcm9wQ2xpY2sgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb3JpZ2luYWxCb2R5UGFkZGluZyA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3Njcm9sbGJhcldpZHRoID0gMDtcbiAgICAgICAgICAgICAgICB9IC8vIEdldHRlcnNcblxuXG4gICAgICAgICAgICAgICAgdmFyIF9wcm90byA9IE1vZGFsLnByb3RvdHlwZTtcblxuICAgICAgICAgICAgICAgIC8vIFB1YmxpY1xuICAgICAgICAgICAgICAgIF9wcm90by50b2dnbGUgPSBmdW5jdGlvbiB0b2dnbGUocmVsYXRlZFRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5faXNTaG93biA/IHRoaXMuaGlkZSgpIDogdGhpcy5zaG93KHJlbGF0ZWRUYXJnZXQpO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uc2hvdyA9IGZ1bmN0aW9uIHNob3cocmVsYXRlZFRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pc1RyYW5zaXRpb25pbmcgfHwgdGhpcy5faXNTaG93bikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKFV0aWwuc3VwcG9ydHNUcmFuc2l0aW9uRW5kKCkgJiYgJCQkMSh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuRkFERSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2lzVHJhbnNpdGlvbmluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgc2hvd0V2ZW50ID0gJCQkMS5FdmVudChFdmVudC5TSE9XLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWxhdGVkVGFyZ2V0OiByZWxhdGVkVGFyZ2V0XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAkJCQxKHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIoc2hvd0V2ZW50KTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5faXNTaG93biB8fCBzaG93RXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2lzU2hvd24gPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrU2Nyb2xsYmFyKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2V0U2Nyb2xsYmFyKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYWRqdXN0RGlhbG9nKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgJCQkMShkb2N1bWVudC5ib2R5KS5hZGRDbGFzcyhDbGFzc05hbWUuT1BFTik7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2V0RXNjYXBlRXZlbnQoKTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zZXRSZXNpemVFdmVudCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICQkJDEodGhpcy5fZWxlbWVudCkub24oRXZlbnQuQ0xJQ0tfRElTTUlTUywgU2VsZWN0b3IuREFUQV9ESVNNSVNTLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmhpZGUoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgJCQkMSh0aGlzLl9kaWFsb2cpLm9uKEV2ZW50Lk1PVVNFRE9XTl9ESVNNSVNTLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQkJDEoX3RoaXMuX2VsZW1lbnQpLm9uZShFdmVudC5NT1VTRVVQX0RJU01JU1MsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQkJDEoZXZlbnQudGFyZ2V0KS5pcyhfdGhpcy5fZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2lnbm9yZUJhY2tkcm9wQ2xpY2sgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zaG93QmFja2Ryb3AoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuX3Nob3dFbGVtZW50KHJlbGF0ZWRUYXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLmhpZGUgPSBmdW5jdGlvbiBoaWRlKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pc1RyYW5zaXRpb25pbmcgfHwgIXRoaXMuX2lzU2hvd24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBoaWRlRXZlbnQgPSAkJCQxLkV2ZW50KEV2ZW50LkhJREUpO1xuICAgICAgICAgICAgICAgICAgICAkJCQxKHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIoaGlkZUV2ZW50KTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2lzU2hvd24gfHwgaGlkZUV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9pc1Nob3duID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0cmFuc2l0aW9uID0gVXRpbC5zdXBwb3J0c1RyYW5zaXRpb25FbmQoKSAmJiAkJCQxKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5GQURFKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodHJhbnNpdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5faXNUcmFuc2l0aW9uaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NldEVzY2FwZUV2ZW50KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2V0UmVzaXplRXZlbnQoKTtcblxuICAgICAgICAgICAgICAgICAgICAkJCQxKGRvY3VtZW50KS5vZmYoRXZlbnQuRk9DVVNJTik7XG4gICAgICAgICAgICAgICAgICAgICQkJDEodGhpcy5fZWxlbWVudCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLlNIT1cpO1xuICAgICAgICAgICAgICAgICAgICAkJCQxKHRoaXMuX2VsZW1lbnQpLm9mZihFdmVudC5DTElDS19ESVNNSVNTKTtcbiAgICAgICAgICAgICAgICAgICAgJCQkMSh0aGlzLl9kaWFsb2cpLm9mZihFdmVudC5NT1VTRURPV05fRElTTUlTUyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRyYW5zaXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQkJDEodGhpcy5fZWxlbWVudCkub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5faGlkZU1vZGFsKGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmVtdWxhdGVUcmFuc2l0aW9uRW5kKFRSQU5TSVRJT05fRFVSQVRJT04pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5faGlkZU1vZGFsKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLmRpc3Bvc2UgPSBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgICAgICAgICAgICAgICAgICAkJCQxLnJlbW92ZURhdGEodGhpcy5fZWxlbWVudCwgREFUQV9LRVkpO1xuICAgICAgICAgICAgICAgICAgICAkJCQxKHdpbmRvdywgZG9jdW1lbnQsIHRoaXMuX2VsZW1lbnQsIHRoaXMuX2JhY2tkcm9wKS5vZmYoRVZFTlRfS0VZKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29uZmlnID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2RpYWxvZyA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2JhY2tkcm9wID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faXNTaG93biA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2lzQm9keU92ZXJmbG93aW5nID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faWdub3JlQmFja2Ryb3BDbGljayA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3Njcm9sbGJhcldpZHRoID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLmhhbmRsZVVwZGF0ZSA9IGZ1bmN0aW9uIGhhbmRsZVVwZGF0ZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYWRqdXN0RGlhbG9nKCk7XG4gICAgICAgICAgICAgICAgfTsgLy8gUHJpdmF0ZVxuXG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uX2dldENvbmZpZyA9IGZ1bmN0aW9uIF9nZXRDb25maWcoY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZyA9IF9leHRlbmRzKHt9LCBEZWZhdWx0LCBjb25maWcpO1xuICAgICAgICAgICAgICAgICAgICBVdGlsLnR5cGVDaGVja0NvbmZpZyhOQU1FLCBjb25maWcsIERlZmF1bHRUeXBlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLl9zaG93RWxlbWVudCA9IGZ1bmN0aW9uIF9zaG93RWxlbWVudChyZWxhdGVkVGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciB0cmFuc2l0aW9uID0gVXRpbC5zdXBwb3J0c1RyYW5zaXRpb25FbmQoKSAmJiAkJCQxKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5GQURFKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2VsZW1lbnQucGFyZW50Tm9kZSB8fCB0aGlzLl9lbGVtZW50LnBhcmVudE5vZGUubm9kZVR5cGUgIT09IE5vZGUuRUxFTUVOVF9OT0RFKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEb24ndCBtb3ZlIG1vZGFsJ3MgRE9NIHBvc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuX2VsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nKTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9lbGVtZW50LnNjcm9sbFRvcCA9IDA7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRyYW5zaXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFV0aWwucmVmbG93KHRoaXMuX2VsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgJCQkMSh0aGlzLl9lbGVtZW50KS5hZGRDbGFzcyhDbGFzc05hbWUuU0hPVyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2NvbmZpZy5mb2N1cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZW5mb3JjZUZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgc2hvd25FdmVudCA9ICQkJDEuRXZlbnQoRXZlbnQuU0hPV04sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0ZWRUYXJnZXQ6IHJlbGF0ZWRUYXJnZXRcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHRyYW5zaXRpb25Db21wbGV0ZSA9IGZ1bmN0aW9uIHRyYW5zaXRpb25Db21wbGV0ZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczMuX2NvbmZpZy5mb2N1cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMy5fZWxlbWVudC5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMuX2lzVHJhbnNpdGlvbmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCQkMShfdGhpczMuX2VsZW1lbnQpLnRyaWdnZXIoc2hvd25FdmVudCk7XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRyYW5zaXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQkJDEodGhpcy5fZGlhbG9nKS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgdHJhbnNpdGlvbkNvbXBsZXRlKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChUUkFOU0lUSU9OX0RVUkFUSU9OKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb25Db21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIF9wcm90by5fZW5mb3JjZUZvY3VzID0gZnVuY3Rpb24gX2VuZm9yY2VGb2N1cygpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICAgICAgJCQkMShkb2N1bWVudCkub2ZmKEV2ZW50LkZPQ1VTSU4pIC8vIEd1YXJkIGFnYWluc3QgaW5maW5pdGUgZm9jdXMgbG9vcFxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uKEV2ZW50LkZPQ1VTSU4sIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50ICE9PSBldmVudC50YXJnZXQgJiYgX3RoaXM0Ll9lbGVtZW50ICE9PSBldmVudC50YXJnZXQgJiYgJCQkMShfdGhpczQuX2VsZW1lbnQpLmhhcyhldmVudC50YXJnZXQpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczQuX2VsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLl9zZXRFc2NhcGVFdmVudCA9IGZ1bmN0aW9uIF9zZXRFc2NhcGVFdmVudCgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF90aGlzNSA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2lzU2hvd24gJiYgdGhpcy5fY29uZmlnLmtleWJvYXJkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkJCQxKHRoaXMuX2VsZW1lbnQpLm9uKEV2ZW50LktFWURPV05fRElTTUlTUywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT09IEVTQ0FQRV9LRVlDT0RFKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM1LmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5faXNTaG93bikge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCQkMSh0aGlzLl9lbGVtZW50KS5vZmYoRXZlbnQuS0VZRE9XTl9ESVNNSVNTKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uX3NldFJlc2l6ZUV2ZW50ID0gZnVuY3Rpb24gX3NldFJlc2l6ZUV2ZW50KCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXM2ID0gdGhpcztcblxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5faXNTaG93bikge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCQkMSh3aW5kb3cpLm9uKEV2ZW50LlJFU0laRSwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM2LmhhbmRsZVVwZGF0ZShldmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQkJDEod2luZG93KS5vZmYoRXZlbnQuUkVTSVpFKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uX2hpZGVNb2RhbCA9IGZ1bmN0aW9uIF9oaWRlTW9kYWwoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfdGhpczcgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCB0cnVlKTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9pc1RyYW5zaXRpb25pbmcgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zaG93QmFja2Ryb3AoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkJCQxKGRvY3VtZW50LmJvZHkpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5PUEVOKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM3Ll9yZXNldEFkanVzdG1lbnRzKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNy5fcmVzZXRTY3JvbGxiYXIoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJCQkMShfdGhpczcuX2VsZW1lbnQpLnRyaWdnZXIoRXZlbnQuSElEREVOKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIF9wcm90by5fcmVtb3ZlQmFja2Ryb3AgPSBmdW5jdGlvbiBfcmVtb3ZlQmFja2Ryb3AoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9iYWNrZHJvcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCQkMSh0aGlzLl9iYWNrZHJvcCkucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9iYWNrZHJvcCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLl9zaG93QmFja2Ryb3AgPSBmdW5jdGlvbiBfc2hvd0JhY2tkcm9wKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfdGhpczggPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBhbmltYXRlID0gJCQkMSh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuRkFERSkgPyBDbGFzc05hbWUuRkFERSA6ICcnO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pc1Nob3duICYmIHRoaXMuX2NvbmZpZy5iYWNrZHJvcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRvQW5pbWF0ZSA9IFV0aWwuc3VwcG9ydHNUcmFuc2l0aW9uRW5kKCkgJiYgYW5pbWF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2JhY2tkcm9wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9iYWNrZHJvcC5jbGFzc05hbWUgPSBDbGFzc05hbWUuQkFDS0RST1A7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbmltYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCQkMSh0aGlzLl9iYWNrZHJvcCkuYWRkQ2xhc3MoYW5pbWF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICQkJDEodGhpcy5fYmFja2Ryb3ApLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCQkMSh0aGlzLl9lbGVtZW50KS5vbihFdmVudC5DTElDS19ESVNNSVNTLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczguX2lnbm9yZUJhY2tkcm9wQ2xpY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4Ll9pZ25vcmVCYWNrZHJvcENsaWNrID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ICE9PSBldmVudC5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXM4Ll9jb25maWcuYmFja2Ryb3AgPT09ICdzdGF0aWMnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5fZWxlbWVudC5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb0FuaW1hdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBVdGlsLnJlZmxvdyh0aGlzLl9iYWNrZHJvcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICQkJDEodGhpcy5fYmFja2Ryb3ApLmFkZENsYXNzKENsYXNzTmFtZS5TSE9XKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFkb0FuaW1hdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgJCQkMSh0aGlzLl9iYWNrZHJvcCkub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsIGNhbGxiYWNrKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChCQUNLRFJPUF9UUkFOU0lUSU9OX0RVUkFUSU9OKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5faXNTaG93biAmJiB0aGlzLl9iYWNrZHJvcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCQkMSh0aGlzLl9iYWNrZHJvcCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLlNIT1cpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2FsbGJhY2tSZW1vdmUgPSBmdW5jdGlvbiBjYWxsYmFja1JlbW92ZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguX3JlbW92ZUJhY2tkcm9wKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoVXRpbC5zdXBwb3J0c1RyYW5zaXRpb25FbmQoKSAmJiAkJCQxKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5GQURFKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQkJDEodGhpcy5fYmFja2Ryb3ApLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELCBjYWxsYmFja1JlbW92ZSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoQkFDS0RST1BfVFJBTlNJVElPTl9EVVJBVElPTik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrUmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9OyAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICAgICAgLy8gdGhlIGZvbGxvd2luZyBtZXRob2RzIGFyZSB1c2VkIHRvIGhhbmRsZSBvdmVyZmxvd2luZyBtb2RhbHNcbiAgICAgICAgICAgICAgICAvLyB0b2RvIChmYXQpOiB0aGVzZSBzaG91bGQgcHJvYmFibHkgYmUgcmVmYWN0b3JlZCBvdXQgb2YgbW9kYWwuanNcbiAgICAgICAgICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblxuICAgICAgICAgICAgICAgIF9wcm90by5fYWRqdXN0RGlhbG9nID0gZnVuY3Rpb24gX2FkanVzdERpYWxvZygpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlzTW9kYWxPdmVyZmxvd2luZyA9IHRoaXMuX2VsZW1lbnQuc2Nyb2xsSGVpZ2h0ID4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2lzQm9keU92ZXJmbG93aW5nICYmIGlzTW9kYWxPdmVyZmxvd2luZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZWxlbWVudC5zdHlsZS5wYWRkaW5nTGVmdCA9IHRoaXMuX3Njcm9sbGJhcldpZHRoICsgXCJweFwiO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2lzQm9keU92ZXJmbG93aW5nICYmICFpc01vZGFsT3ZlcmZsb3dpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGUucGFkZGluZ1JpZ2h0ID0gdGhpcy5fc2Nyb2xsYmFyV2lkdGggKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLl9yZXNldEFkanVzdG1lbnRzID0gZnVuY3Rpb24gX3Jlc2V0QWRqdXN0bWVudHMoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGUucGFkZGluZ0xlZnQgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZWxlbWVudC5zdHlsZS5wYWRkaW5nUmlnaHQgPSAnJztcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLl9jaGVja1Njcm9sbGJhciA9IGZ1bmN0aW9uIF9jaGVja1Njcm9sbGJhcigpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlY3QgPSBkb2N1bWVudC5ib2R5LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9pc0JvZHlPdmVyZmxvd2luZyA9IHJlY3QubGVmdCArIHJlY3QucmlnaHQgPCB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2Nyb2xsYmFyV2lkdGggPSB0aGlzLl9nZXRTY3JvbGxiYXJXaWR0aCgpO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uX3NldFNjcm9sbGJhciA9IGZ1bmN0aW9uIF9zZXRTY3JvbGxiYXIoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfdGhpczkgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pc0JvZHlPdmVyZmxvd2luZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90ZTogRE9NTm9kZS5zdHlsZS5wYWRkaW5nUmlnaHQgcmV0dXJucyB0aGUgYWN0dWFsIHZhbHVlIG9yICcnIGlmIG5vdCBzZXRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgd2hpbGUgJChET01Ob2RlKS5jc3MoJ3BhZGRpbmctcmlnaHQnKSByZXR1cm5zIHRoZSBjYWxjdWxhdGVkIHZhbHVlIG9yIDAgaWYgbm90IHNldFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRqdXN0IGZpeGVkIGNvbnRlbnQgcGFkZGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgJCQkMShTZWxlY3Rvci5GSVhFRF9DT05URU5UKS5lYWNoKGZ1bmN0aW9uKGluZGV4LCBlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjdHVhbFBhZGRpbmcgPSAkJCQxKGVsZW1lbnQpWzBdLnN0eWxlLnBhZGRpbmdSaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2FsY3VsYXRlZFBhZGRpbmcgPSAkJCQxKGVsZW1lbnQpLmNzcygncGFkZGluZy1yaWdodCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQkJDEoZWxlbWVudCkuZGF0YSgncGFkZGluZy1yaWdodCcsIGFjdHVhbFBhZGRpbmcpLmNzcygncGFkZGluZy1yaWdodCcsIHBhcnNlRmxvYXQoY2FsY3VsYXRlZFBhZGRpbmcpICsgX3RoaXM5Ll9zY3JvbGxiYXJXaWR0aCArIFwicHhcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTsgLy8gQWRqdXN0IHN0aWNreSBjb250ZW50IG1hcmdpblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAkJCQxKFNlbGVjdG9yLlNUSUNLWV9DT05URU5UKS5lYWNoKGZ1bmN0aW9uKGluZGV4LCBlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjdHVhbE1hcmdpbiA9ICQkJDEoZWxlbWVudClbMF0uc3R5bGUubWFyZ2luUmlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhbGN1bGF0ZWRNYXJnaW4gPSAkJCQxKGVsZW1lbnQpLmNzcygnbWFyZ2luLXJpZ2h0Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCQkMShlbGVtZW50KS5kYXRhKCdtYXJnaW4tcmlnaHQnLCBhY3R1YWxNYXJnaW4pLmNzcygnbWFyZ2luLXJpZ2h0JywgcGFyc2VGbG9hdChjYWxjdWxhdGVkTWFyZ2luKSAtIF90aGlzOS5fc2Nyb2xsYmFyV2lkdGggKyBcInB4XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7IC8vIEFkanVzdCBuYXZiYXItdG9nZ2xlciBtYXJnaW5cblxuICAgICAgICAgICAgICAgICAgICAgICAgJCQkMShTZWxlY3Rvci5OQVZCQVJfVE9HR0xFUikuZWFjaChmdW5jdGlvbihpbmRleCwgZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhY3R1YWxNYXJnaW4gPSAkJCQxKGVsZW1lbnQpWzBdLnN0eWxlLm1hcmdpblJpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYWxjdWxhdGVkTWFyZ2luID0gJCQkMShlbGVtZW50KS5jc3MoJ21hcmdpbi1yaWdodCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQkJDEoZWxlbWVudCkuZGF0YSgnbWFyZ2luLXJpZ2h0JywgYWN0dWFsTWFyZ2luKS5jc3MoJ21hcmdpbi1yaWdodCcsIHBhcnNlRmxvYXQoY2FsY3VsYXRlZE1hcmdpbikgKyBfdGhpczkuX3Njcm9sbGJhcldpZHRoICsgXCJweFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pOyAvLyBBZGp1c3QgYm9keSBwYWRkaW5nXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhY3R1YWxQYWRkaW5nID0gZG9jdW1lbnQuYm9keS5zdHlsZS5wYWRkaW5nUmlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2FsY3VsYXRlZFBhZGRpbmcgPSAkJCQxKCdib2R5JykuY3NzKCdwYWRkaW5nLXJpZ2h0Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkJCQxKCdib2R5JykuZGF0YSgncGFkZGluZy1yaWdodCcsIGFjdHVhbFBhZGRpbmcpLmNzcygncGFkZGluZy1yaWdodCcsIHBhcnNlRmxvYXQoY2FsY3VsYXRlZFBhZGRpbmcpICsgdGhpcy5fc2Nyb2xsYmFyV2lkdGggKyBcInB4XCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIF9wcm90by5fcmVzZXRTY3JvbGxiYXIgPSBmdW5jdGlvbiBfcmVzZXRTY3JvbGxiYXIoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFJlc3RvcmUgZml4ZWQgY29udGVudCBwYWRkaW5nXG4gICAgICAgICAgICAgICAgICAgICQkJDEoU2VsZWN0b3IuRklYRURfQ09OVEVOVCkuZWFjaChmdW5jdGlvbihpbmRleCwgZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhZGRpbmcgPSAkJCQxKGVsZW1lbnQpLmRhdGEoJ3BhZGRpbmctcmlnaHQnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBwYWRkaW5nICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQkJDEoZWxlbWVudCkuY3NzKCdwYWRkaW5nLXJpZ2h0JywgcGFkZGluZykucmVtb3ZlRGF0YSgncGFkZGluZy1yaWdodCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTsgLy8gUmVzdG9yZSBzdGlja3kgY29udGVudCBhbmQgbmF2YmFyLXRvZ2dsZXIgbWFyZ2luXG5cbiAgICAgICAgICAgICAgICAgICAgJCQkMShTZWxlY3Rvci5TVElDS1lfQ09OVEVOVCArIFwiLCBcIiArIFNlbGVjdG9yLk5BVkJBUl9UT0dHTEVSKS5lYWNoKGZ1bmN0aW9uKGluZGV4LCBlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWFyZ2luID0gJCQkMShlbGVtZW50KS5kYXRhKCdtYXJnaW4tcmlnaHQnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtYXJnaW4gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCQkMShlbGVtZW50KS5jc3MoJ21hcmdpbi1yaWdodCcsIG1hcmdpbikucmVtb3ZlRGF0YSgnbWFyZ2luLXJpZ2h0Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pOyAvLyBSZXN0b3JlIGJvZHkgcGFkZGluZ1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBwYWRkaW5nID0gJCQkMSgnYm9keScpLmRhdGEoJ3BhZGRpbmctcmlnaHQnKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHBhZGRpbmcgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkJCQxKCdib2R5JykuY3NzKCdwYWRkaW5nLXJpZ2h0JywgcGFkZGluZykucmVtb3ZlRGF0YSgncGFkZGluZy1yaWdodCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIF9wcm90by5fZ2V0U2Nyb2xsYmFyV2lkdGggPSBmdW5jdGlvbiBfZ2V0U2Nyb2xsYmFyV2lkdGgoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoeCBkLndhbHNoXG4gICAgICAgICAgICAgICAgICAgIHZhciBzY3JvbGxEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsRGl2LmNsYXNzTmFtZSA9IENsYXNzTmFtZS5TQ1JPTExCQVJfTUVBU1VSRVI7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2Nyb2xsRGl2KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNjcm9sbGJhcldpZHRoID0gc2Nyb2xsRGl2LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoIC0gc2Nyb2xsRGl2LmNsaWVudFdpZHRoO1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHNjcm9sbERpdik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzY3JvbGxiYXJXaWR0aDtcbiAgICAgICAgICAgICAgICB9OyAvLyBTdGF0aWNcblxuXG4gICAgICAgICAgICAgICAgTW9kYWwuX2pRdWVyeUludGVyZmFjZSA9IGZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnLCByZWxhdGVkVGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9ICQkJDEodGhpcykuZGF0YShEQVRBX0tFWSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfY29uZmlnID0gX2V4dGVuZHMoe30sIE1vZGFsLkRlZmF1bHQsICQkJDEodGhpcykuZGF0YSgpLCB0eXBlb2YgY29uZmlnID09PSAnb2JqZWN0JyAmJiBjb25maWcpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gbmV3IE1vZGFsKHRoaXMsIF9jb25maWcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQkJDEodGhpcykuZGF0YShEQVRBX0tFWSwgZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29uZmlnID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGF0YVtjb25maWddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiTm8gbWV0aG9kIG5hbWVkIFxcXCJcIiArIGNvbmZpZyArIFwiXFxcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhW2NvbmZpZ10ocmVsYXRlZFRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF9jb25maWcuc2hvdykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuc2hvdyhyZWxhdGVkVGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIF9jcmVhdGVDbGFzcyhNb2RhbCwgbnVsbCwgW3tcbiAgICAgICAgICAgICAgICAgICAga2V5OiBcIlZFUlNJT05cIixcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gVkVSU0lPTjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiBcIkRlZmF1bHRcIixcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRGVmYXVsdDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1dKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBNb2RhbDtcbiAgICAgICAgICAgIH0oKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKiBEYXRhIEFwaSBpbXBsZW1lbnRhdGlvblxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICovXG5cblxuICAgICAgICAkJCQxKGRvY3VtZW50KS5vbihFdmVudC5DTElDS19EQVRBX0FQSSwgU2VsZWN0b3IuREFUQV9UT0dHTEUsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMxMCA9IHRoaXM7XG5cbiAgICAgICAgICAgIHZhciB0YXJnZXQ7XG4gICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSBVdGlsLmdldFNlbGVjdG9yRnJvbUVsZW1lbnQodGhpcyk7XG5cbiAgICAgICAgICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgICAgICAgICAgIHRhcmdldCA9ICQkJDEoc2VsZWN0b3IpWzBdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgY29uZmlnID0gJCQkMSh0YXJnZXQpLmRhdGEoREFUQV9LRVkpID8gJ3RvZ2dsZScgOiBfZXh0ZW5kcyh7fSwgJCQkMSh0YXJnZXQpLmRhdGEoKSwgJCQkMSh0aGlzKS5kYXRhKCkpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy50YWdOYW1lID09PSAnQScgfHwgdGhpcy50YWdOYW1lID09PSAnQVJFQScpIHtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgJHRhcmdldCA9ICQkJDEodGFyZ2V0KS5vbmUoRXZlbnQuU0hPVywgZnVuY3Rpb24oc2hvd0V2ZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKHNob3dFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IHJlZ2lzdGVyIGZvY3VzIHJlc3RvcmVyIGlmIG1vZGFsIHdpbGwgYWN0dWFsbHkgZ2V0IHNob3duXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAkdGFyZ2V0Lm9uZShFdmVudC5ISURERU4sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoJCQkMShfdGhpczEwKS5pcygnOnZpc2libGUnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMC5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgTW9kYWwuX2pRdWVyeUludGVyZmFjZS5jYWxsKCQkJDEodGFyZ2V0KSwgY29uZmlnLCB0aGlzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICogalF1ZXJ5XG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKi9cblxuICAgICAgICAkJCQxLmZuW05BTUVdID0gTW9kYWwuX2pRdWVyeUludGVyZmFjZTtcbiAgICAgICAgJCQkMS5mbltOQU1FXS5Db25zdHJ1Y3RvciA9IE1vZGFsO1xuXG4gICAgICAgICQkJDEuZm5bTkFNRV0ubm9Db25mbGljdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCQkMS5mbltOQU1FXSA9IEpRVUVSWV9OT19DT05GTElDVDtcbiAgICAgICAgICAgIHJldHVybiBNb2RhbC5falF1ZXJ5SW50ZXJmYWNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBNb2RhbDtcbiAgICB9KCQpO1xuXG4gICAgLyoqXG4gICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgKiBCb290c3RyYXAgKHY0LjAuMCk6IHRvb2x0aXAuanNcbiAgICAgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICovXG5cbiAgICB2YXIgVG9vbHRpcCA9IGZ1bmN0aW9uKCQkJDEpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKiBDb25zdGFudHNcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgTkFNRSA9ICd0b29sdGlwJztcbiAgICAgICAgdmFyIFZFUlNJT04gPSAnNC4wLjAnO1xuICAgICAgICB2YXIgREFUQV9LRVkgPSAnYnMudG9vbHRpcCc7XG4gICAgICAgIHZhciBFVkVOVF9LRVkgPSBcIi5cIiArIERBVEFfS0VZO1xuICAgICAgICB2YXIgSlFVRVJZX05PX0NPTkZMSUNUID0gJCQkMS5mbltOQU1FXTtcbiAgICAgICAgdmFyIFRSQU5TSVRJT05fRFVSQVRJT04gPSAxNTA7XG4gICAgICAgIHZhciBDTEFTU19QUkVGSVggPSAnYnMtdG9vbHRpcCc7XG4gICAgICAgIHZhciBCU0NMU19QUkVGSVhfUkVHRVggPSBuZXcgUmVnRXhwKFwiKF58XFxcXHMpXCIgKyBDTEFTU19QUkVGSVggKyBcIlxcXFxTK1wiLCAnZycpO1xuICAgICAgICB2YXIgRGVmYXVsdFR5cGUgPSB7XG4gICAgICAgICAgICBhbmltYXRpb246ICdib29sZWFuJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgIHRpdGxlOiAnKHN0cmluZ3xlbGVtZW50fGZ1bmN0aW9uKScsXG4gICAgICAgICAgICB0cmlnZ2VyOiAnc3RyaW5nJyxcbiAgICAgICAgICAgIGRlbGF5OiAnKG51bWJlcnxvYmplY3QpJyxcbiAgICAgICAgICAgIGh0bWw6ICdib29sZWFuJyxcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnKHN0cmluZ3xib29sZWFuKScsXG4gICAgICAgICAgICBwbGFjZW1lbnQ6ICcoc3RyaW5nfGZ1bmN0aW9uKScsXG4gICAgICAgICAgICBvZmZzZXQ6ICcobnVtYmVyfHN0cmluZyknLFxuICAgICAgICAgICAgY29udGFpbmVyOiAnKHN0cmluZ3xlbGVtZW50fGJvb2xlYW4pJyxcbiAgICAgICAgICAgIGZhbGxiYWNrUGxhY2VtZW50OiAnKHN0cmluZ3xhcnJheSknLFxuICAgICAgICAgICAgYm91bmRhcnk6ICcoc3RyaW5nfGVsZW1lbnQpJ1xuICAgICAgICB9O1xuICAgICAgICB2YXIgQXR0YWNobWVudE1hcCA9IHtcbiAgICAgICAgICAgIEFVVE86ICdhdXRvJyxcbiAgICAgICAgICAgIFRPUDogJ3RvcCcsXG4gICAgICAgICAgICBSSUdIVDogJ3JpZ2h0JyxcbiAgICAgICAgICAgIEJPVFRPTTogJ2JvdHRvbScsXG4gICAgICAgICAgICBMRUZUOiAnbGVmdCdcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIERlZmF1bHQgPSB7XG4gICAgICAgICAgICBhbmltYXRpb246IHRydWUsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogJzxkaXYgY2xhc3M9XCJ0b29sdGlwXCIgcm9sZT1cInRvb2x0aXBcIj4nICsgJzxkaXYgY2xhc3M9XCJhcnJvd1wiPjwvZGl2PicgKyAnPGRpdiBjbGFzcz1cInRvb2x0aXAtaW5uZXJcIj48L2Rpdj48L2Rpdj4nLFxuICAgICAgICAgICAgdHJpZ2dlcjogJ2hvdmVyIGZvY3VzJyxcbiAgICAgICAgICAgIHRpdGxlOiAnJyxcbiAgICAgICAgICAgIGRlbGF5OiAwLFxuICAgICAgICAgICAgaHRtbDogZmFsc2UsXG4gICAgICAgICAgICBzZWxlY3RvcjogZmFsc2UsXG4gICAgICAgICAgICBwbGFjZW1lbnQ6ICd0b3AnLFxuICAgICAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICAgICAgY29udGFpbmVyOiBmYWxzZSxcbiAgICAgICAgICAgIGZhbGxiYWNrUGxhY2VtZW50OiAnZmxpcCcsXG4gICAgICAgICAgICBib3VuZGFyeTogJ3Njcm9sbFBhcmVudCdcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIEhvdmVyU3RhdGUgPSB7XG4gICAgICAgICAgICBTSE9XOiAnc2hvdycsXG4gICAgICAgICAgICBPVVQ6ICdvdXQnXG4gICAgICAgIH07XG4gICAgICAgIHZhciBFdmVudCA9IHtcbiAgICAgICAgICAgIEhJREU6IFwiaGlkZVwiICsgRVZFTlRfS0VZLFxuICAgICAgICAgICAgSElEREVOOiBcImhpZGRlblwiICsgRVZFTlRfS0VZLFxuICAgICAgICAgICAgU0hPVzogXCJzaG93XCIgKyBFVkVOVF9LRVksXG4gICAgICAgICAgICBTSE9XTjogXCJzaG93blwiICsgRVZFTlRfS0VZLFxuICAgICAgICAgICAgSU5TRVJURUQ6IFwiaW5zZXJ0ZWRcIiArIEVWRU5UX0tFWSxcbiAgICAgICAgICAgIENMSUNLOiBcImNsaWNrXCIgKyBFVkVOVF9LRVksXG4gICAgICAgICAgICBGT0NVU0lOOiBcImZvY3VzaW5cIiArIEVWRU5UX0tFWSxcbiAgICAgICAgICAgIEZPQ1VTT1VUOiBcImZvY3Vzb3V0XCIgKyBFVkVOVF9LRVksXG4gICAgICAgICAgICBNT1VTRUVOVEVSOiBcIm1vdXNlZW50ZXJcIiArIEVWRU5UX0tFWSxcbiAgICAgICAgICAgIE1PVVNFTEVBVkU6IFwibW91c2VsZWF2ZVwiICsgRVZFTlRfS0VZXG4gICAgICAgIH07XG4gICAgICAgIHZhciBDbGFzc05hbWUgPSB7XG4gICAgICAgICAgICBGQURFOiAnZmFkZScsXG4gICAgICAgICAgICBTSE9XOiAnc2hvdydcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIFNlbGVjdG9yID0ge1xuICAgICAgICAgICAgVE9PTFRJUDogJy50b29sdGlwJyxcbiAgICAgICAgICAgIFRPT0xUSVBfSU5ORVI6ICcudG9vbHRpcC1pbm5lcicsXG4gICAgICAgICAgICBBUlJPVzogJy5hcnJvdydcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIFRyaWdnZXIgPSB7XG4gICAgICAgICAgICBIT1ZFUjogJ2hvdmVyJyxcbiAgICAgICAgICAgIEZPQ1VTOiAnZm9jdXMnLFxuICAgICAgICAgICAgQ0xJQ0s6ICdjbGljaycsXG4gICAgICAgICAgICBNQU5VQUw6ICdtYW51YWwnXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgICogQ2xhc3MgRGVmaW5pdGlvblxuICAgICAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICAgKi9cblxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBUb29sdGlwID1cbiAgICAgICAgICAgIC8qI19fUFVSRV9fKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFRvb2x0aXAoZWxlbWVudCwgY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBDaGVjayBmb3IgUG9wcGVyIGRlcGVuZGVuY3lcbiAgICAgICAgICAgICAgICAgICAgICogUG9wcGVyIC0gaHR0cHM6Ly9wb3BwZXIuanMub3JnXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIFBvcHBlciQxID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQm9vdHN0cmFwIHRvb2x0aXBzIHJlcXVpcmUgUG9wcGVyLmpzIChodHRwczovL3BvcHBlci5qcy5vcmcpJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gLy8gcHJpdmF0ZVxuXG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faXNFbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdGltZW91dCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2hvdmVyU3RhdGUgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYWN0aXZlVHJpZ2dlciA9IHt9O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9wb3BwZXIgPSBudWxsOyAvLyBQcm90ZWN0ZWRcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZyA9IHRoaXMuX2dldENvbmZpZyhjb25maWcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRpcCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2V0TGlzdGVuZXJzKCk7XG4gICAgICAgICAgICAgICAgfSAvLyBHZXR0ZXJzXG5cblxuICAgICAgICAgICAgICAgIHZhciBfcHJvdG8gPSBUb29sdGlwLnByb3RvdHlwZTtcblxuICAgICAgICAgICAgICAgIC8vIFB1YmxpY1xuICAgICAgICAgICAgICAgIF9wcm90by5lbmFibGUgPSBmdW5jdGlvbiBlbmFibGUoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2lzRW5hYmxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIF9wcm90by5kaXNhYmxlID0gZnVuY3Rpb24gZGlzYWJsZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faXNFbmFibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIF9wcm90by50b2dnbGVFbmFibGVkID0gZnVuY3Rpb24gdG9nZ2xlRW5hYmxlZCgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faXNFbmFibGVkID0gIXRoaXMuX2lzRW5hYmxlZDtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLnRvZ2dsZSA9IGZ1bmN0aW9uIHRvZ2dsZShldmVudCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2lzRW5hYmxlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YUtleSA9IHRoaXMuY29uc3RydWN0b3IuREFUQV9LRVk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29udGV4dCA9ICQkJDEoZXZlbnQuY3VycmVudFRhcmdldCkuZGF0YShkYXRhS2V5KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dCA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKGV2ZW50LmN1cnJlbnRUYXJnZXQsIHRoaXMuX2dldERlbGVnYXRlQ29uZmlnKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQkJDEoZXZlbnQuY3VycmVudFRhcmdldCkuZGF0YShkYXRhS2V5LCBjb250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5fYWN0aXZlVHJpZ2dlci5jbGljayA9ICFjb250ZXh0Ll9hY3RpdmVUcmlnZ2VyLmNsaWNrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGV4dC5faXNXaXRoQWN0aXZlVHJpZ2dlcigpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5fZW50ZXIobnVsbCwgY29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuX2xlYXZlKG51bGwsIGNvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQkJDEodGhpcy5nZXRUaXBFbGVtZW50KCkpLmhhc0NsYXNzKENsYXNzTmFtZS5TSE9XKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2xlYXZlKG51bGwsIHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9lbnRlcihudWxsLCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl90aW1lb3V0KTtcbiAgICAgICAgICAgICAgICAgICAgJCQkMS5yZW1vdmVEYXRhKHRoaXMuZWxlbWVudCwgdGhpcy5jb25zdHJ1Y3Rvci5EQVRBX0tFWSk7XG4gICAgICAgICAgICAgICAgICAgICQkJDEodGhpcy5lbGVtZW50KS5vZmYodGhpcy5jb25zdHJ1Y3Rvci5FVkVOVF9LRVkpO1xuICAgICAgICAgICAgICAgICAgICAkJCQxKHRoaXMuZWxlbWVudCkuY2xvc2VzdCgnLm1vZGFsJykub2ZmKCdoaWRlLmJzLm1vZGFsJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudGlwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkJCQxKHRoaXMudGlwKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2lzRW5hYmxlZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3RpbWVvdXQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9ob3ZlclN0YXRlID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYWN0aXZlVHJpZ2dlciA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3BvcHBlciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcG9wcGVyLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3BvcHBlciA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50aXAgPSBudWxsO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uc2hvdyA9IGZ1bmN0aW9uIHNob3coKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCQkJDEodGhpcy5lbGVtZW50KS5jc3MoJ2Rpc3BsYXknKSA9PT0gJ25vbmUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSB1c2Ugc2hvdyBvbiB2aXNpYmxlIGVsZW1lbnRzJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgc2hvd0V2ZW50ID0gJCQkMS5FdmVudCh0aGlzLmNvbnN0cnVjdG9yLkV2ZW50LlNIT1cpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzV2l0aENvbnRlbnQoKSAmJiB0aGlzLl9pc0VuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQkJDEodGhpcy5lbGVtZW50KS50cmlnZ2VyKHNob3dFdmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXNJblRoZURvbSA9ICQkJDEuY29udGFpbnModGhpcy5lbGVtZW50Lm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCB0aGlzLmVsZW1lbnQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2hvd0V2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpIHx8ICFpc0luVGhlRG9tKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGlwID0gdGhpcy5nZXRUaXBFbGVtZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGlwSWQgPSBVdGlsLmdldFVJRCh0aGlzLmNvbnN0cnVjdG9yLk5BTUUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGlwLnNldEF0dHJpYnV0ZSgnaWQnLCB0aXBJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWRlc2NyaWJlZGJ5JywgdGlwSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDb250ZW50KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZy5hbmltYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkJCQxKHRpcCkuYWRkQ2xhc3MoQ2xhc3NOYW1lLkZBREUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGxhY2VtZW50ID0gdHlwZW9mIHRoaXMuY29uZmlnLnBsYWNlbWVudCA9PT0gJ2Z1bmN0aW9uJyA/IHRoaXMuY29uZmlnLnBsYWNlbWVudC5jYWxsKHRoaXMsIHRpcCwgdGhpcy5lbGVtZW50KSA6IHRoaXMuY29uZmlnLnBsYWNlbWVudDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGF0dGFjaG1lbnQgPSB0aGlzLl9nZXRBdHRhY2htZW50KHBsYWNlbWVudCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkQXR0YWNobWVudENsYXNzKGF0dGFjaG1lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuY29uZmlnLmNvbnRhaW5lciA9PT0gZmFsc2UgPyBkb2N1bWVudC5ib2R5IDogJCQkMSh0aGlzLmNvbmZpZy5jb250YWluZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCQkMSh0aXApLmRhdGEodGhpcy5jb25zdHJ1Y3Rvci5EQVRBX0tFWSwgdGhpcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghJCQkMS5jb250YWlucyh0aGlzLmVsZW1lbnQub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIHRoaXMudGlwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQkJDEodGlwKS5hcHBlbmRUbyhjb250YWluZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAkJCQxKHRoaXMuZWxlbWVudCkudHJpZ2dlcih0aGlzLmNvbnN0cnVjdG9yLkV2ZW50LklOU0VSVEVEKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3BvcHBlciA9IG5ldyBQb3BwZXIkMSh0aGlzLmVsZW1lbnQsIHRpcCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudDogYXR0YWNobWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RpZmllcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQ6IHRoaXMuY29uZmlnLm9mZnNldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGlwOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWhhdmlvcjogdGhpcy5jb25maWcuZmFsbGJhY2tQbGFjZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyb3c6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IFNlbGVjdG9yLkFSUk9XXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZlbnRPdmVyZmxvdzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm91bmRhcmllc0VsZW1lbnQ6IHRoaXMuY29uZmlnLmJvdW5kYXJ5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ3JlYXRlOiBmdW5jdGlvbiBvbkNyZWF0ZShkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLm9yaWdpbmFsUGxhY2VtZW50ICE9PSBkYXRhLnBsYWNlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2hhbmRsZVBvcHBlclBsYWNlbWVudENoYW5nZShkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25VcGRhdGU6IGZ1bmN0aW9uIG9uVXBkYXRlKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2hhbmRsZVBvcHBlclBsYWNlbWVudENoYW5nZShkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQkJDEodGlwKS5hZGRDbGFzcyhDbGFzc05hbWUuU0hPVyk7IC8vIElmIHRoaXMgaXMgYSB0b3VjaC1lbmFibGVkIGRldmljZSB3ZSBhZGQgZXh0cmFcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVtcHR5IG1vdXNlb3ZlciBsaXN0ZW5lcnMgdG8gdGhlIGJvZHkncyBpbW1lZGlhdGUgY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBvbmx5IG5lZWRlZCBiZWNhdXNlIG9mIGJyb2tlbiBldmVudCBkZWxlZ2F0aW9uIG9uIGlPU1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly93d3cucXVpcmtzbW9kZS5vcmcvYmxvZy9hcmNoaXZlcy8yMDE0LzAyL21vdXNlX2V2ZW50X2J1Yi5odG1sXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgnb250b3VjaHN0YXJ0JyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkJCQxKCdib2R5JykuY2hpbGRyZW4oKS5vbignbW91c2VvdmVyJywgbnVsbCwgJCQkMS5ub29wKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbXBsZXRlID0gZnVuY3Rpb24gY29tcGxldGUoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmNvbmZpZy5hbmltYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2ZpeFRyYW5zaXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJldkhvdmVyU3RhdGUgPSBfdGhpcy5faG92ZXJTdGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5faG92ZXJTdGF0ZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCQkMShfdGhpcy5lbGVtZW50KS50cmlnZ2VyKF90aGlzLmNvbnN0cnVjdG9yLkV2ZW50LlNIT1dOKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcmV2SG92ZXJTdGF0ZSA9PT0gSG92ZXJTdGF0ZS5PVVQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2xlYXZlKG51bGwsIF90aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoVXRpbC5zdXBwb3J0c1RyYW5zaXRpb25FbmQoKSAmJiAkJCQxKHRoaXMudGlwKS5oYXNDbGFzcyhDbGFzc05hbWUuRkFERSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkJCQxKHRoaXMudGlwKS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgY29tcGxldGUpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKFRvb2x0aXAuX1RSQU5TSVRJT05fRFVSQVRJT04pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIF9wcm90by5oaWRlID0gZnVuY3Rpb24gaGlkZShjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICAgICAgICAgICAgICB2YXIgdGlwID0gdGhpcy5nZXRUaXBFbGVtZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBoaWRlRXZlbnQgPSAkJCQxLkV2ZW50KHRoaXMuY29uc3RydWN0b3IuRXZlbnQuSElERSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbXBsZXRlID0gZnVuY3Rpb24gY29tcGxldGUoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMyLl9ob3ZlclN0YXRlICE9PSBIb3ZlclN0YXRlLlNIT1cgJiYgdGlwLnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXAucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczIuX2NsZWFuVGlwQ2xhc3MoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWRlc2NyaWJlZGJ5Jyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICQkJDEoX3RoaXMyLmVsZW1lbnQpLnRyaWdnZXIoX3RoaXMyLmNvbnN0cnVjdG9yLkV2ZW50LkhJRERFTik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczIuX3BvcHBlciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi5fcG9wcGVyLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAkJCQxKHRoaXMuZWxlbWVudCkudHJpZ2dlcihoaWRlRXZlbnQpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChoaWRlRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICQkJDEodGlwKS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuU0hPVyk7IC8vIElmIHRoaXMgaXMgYSB0b3VjaC1lbmFibGVkIGRldmljZSB3ZSByZW1vdmUgdGhlIGV4dHJhXG4gICAgICAgICAgICAgICAgICAgIC8vIGVtcHR5IG1vdXNlb3ZlciBsaXN0ZW5lcnMgd2UgYWRkZWQgZm9yIGlPUyBzdXBwb3J0XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCdvbnRvdWNoc3RhcnQnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCQkMSgnYm9keScpLmNoaWxkcmVuKCkub2ZmKCdtb3VzZW92ZXInLCBudWxsLCAkJCQxLm5vb3ApO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYWN0aXZlVHJpZ2dlcltUcmlnZ2VyLkNMSUNLXSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9hY3RpdmVUcmlnZ2VyW1RyaWdnZXIuRk9DVVNdID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2FjdGl2ZVRyaWdnZXJbVHJpZ2dlci5IT1ZFUl0gPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoVXRpbC5zdXBwb3J0c1RyYW5zaXRpb25FbmQoKSAmJiAkJCQxKHRoaXMudGlwKS5oYXNDbGFzcyhDbGFzc05hbWUuRkFERSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQkJDEodGlwKS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgY29tcGxldGUpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKFRSQU5TSVRJT05fRFVSQVRJT04pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2hvdmVyU3RhdGUgPSAnJztcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLnVwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3BvcHBlciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcG9wcGVyLnNjaGVkdWxlVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9OyAvLyBQcm90ZWN0ZWRcblxuXG4gICAgICAgICAgICAgICAgX3Byb3RvLmlzV2l0aENvbnRlbnQgPSBmdW5jdGlvbiBpc1dpdGhDb250ZW50KCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gQm9vbGVhbih0aGlzLmdldFRpdGxlKCkpO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uYWRkQXR0YWNobWVudENsYXNzID0gZnVuY3Rpb24gYWRkQXR0YWNobWVudENsYXNzKGF0dGFjaG1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgJCQkMSh0aGlzLmdldFRpcEVsZW1lbnQoKSkuYWRkQ2xhc3MoQ0xBU1NfUFJFRklYICsgXCItXCIgKyBhdHRhY2htZW50KTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLmdldFRpcEVsZW1lbnQgPSBmdW5jdGlvbiBnZXRUaXBFbGVtZW50KCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRpcCA9IHRoaXMudGlwIHx8ICQkJDEodGhpcy5jb25maWcudGVtcGxhdGUpWzBdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50aXA7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIF9wcm90by5zZXRDb250ZW50ID0gZnVuY3Rpb24gc2V0Q29udGVudCgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyICR0aXAgPSAkJCQxKHRoaXMuZ2V0VGlwRWxlbWVudCgpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRFbGVtZW50Q29udGVudCgkdGlwLmZpbmQoU2VsZWN0b3IuVE9PTFRJUF9JTk5FUiksIHRoaXMuZ2V0VGl0bGUoKSk7XG4gICAgICAgICAgICAgICAgICAgICR0aXAucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkZBREUgKyBcIiBcIiArIENsYXNzTmFtZS5TSE9XKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLnNldEVsZW1lbnRDb250ZW50ID0gZnVuY3Rpb24gc2V0RWxlbWVudENvbnRlbnQoJGVsZW1lbnQsIGNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGh0bWwgPSB0aGlzLmNvbmZpZy5odG1sO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29udGVudCA9PT0gJ29iamVjdCcgJiYgKGNvbnRlbnQubm9kZVR5cGUgfHwgY29udGVudC5qcXVlcnkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDb250ZW50IGlzIGEgRE9NIG5vZGUgb3IgYSBqUXVlcnlcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChodG1sKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEkJCQxKGNvbnRlbnQpLnBhcmVudCgpLmlzKCRlbGVtZW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC5lbXB0eSgpLmFwcGVuZChjb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRlbGVtZW50LnRleHQoJCQkMShjb250ZW50KS50ZXh0KCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnRbaHRtbCA/ICdodG1sJyA6ICd0ZXh0J10oY29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLmdldFRpdGxlID0gZnVuY3Rpb24gZ2V0VGl0bGUoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0aXRsZSA9IHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtb3JpZ2luYWwtdGl0bGUnKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRpdGxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZSA9IHR5cGVvZiB0aGlzLmNvbmZpZy50aXRsZSA9PT0gJ2Z1bmN0aW9uJyA/IHRoaXMuY29uZmlnLnRpdGxlLmNhbGwodGhpcy5lbGVtZW50KSA6IHRoaXMuY29uZmlnLnRpdGxlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRpdGxlO1xuICAgICAgICAgICAgICAgIH07IC8vIFByaXZhdGVcblxuXG4gICAgICAgICAgICAgICAgX3Byb3RvLl9nZXRBdHRhY2htZW50ID0gZnVuY3Rpb24gX2dldEF0dGFjaG1lbnQocGxhY2VtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBBdHRhY2htZW50TWFwW3BsYWNlbWVudC50b1VwcGVyQ2FzZSgpXTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLl9zZXRMaXN0ZW5lcnMgPSBmdW5jdGlvbiBfc2V0TGlzdGVuZXJzKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgICAgICAgICAgICAgICB2YXIgdHJpZ2dlcnMgPSB0aGlzLmNvbmZpZy50cmlnZ2VyLnNwbGl0KCcgJyk7XG4gICAgICAgICAgICAgICAgICAgIHRyaWdnZXJzLmZvckVhY2goZnVuY3Rpb24odHJpZ2dlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyaWdnZXIgPT09ICdjbGljaycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkJCQxKF90aGlzMy5lbGVtZW50KS5vbihfdGhpczMuY29uc3RydWN0b3IuRXZlbnQuQ0xJQ0ssIF90aGlzMy5jb25maWcuc2VsZWN0b3IsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczMudG9nZ2xlKGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHJpZ2dlciAhPT0gVHJpZ2dlci5NQU5VQUwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXZlbnRJbiA9IHRyaWdnZXIgPT09IFRyaWdnZXIuSE9WRVIgPyBfdGhpczMuY29uc3RydWN0b3IuRXZlbnQuTU9VU0VFTlRFUiA6IF90aGlzMy5jb25zdHJ1Y3Rvci5FdmVudC5GT0NVU0lOO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBldmVudE91dCA9IHRyaWdnZXIgPT09IFRyaWdnZXIuSE9WRVIgPyBfdGhpczMuY29uc3RydWN0b3IuRXZlbnQuTU9VU0VMRUFWRSA6IF90aGlzMy5jb25zdHJ1Y3Rvci5FdmVudC5GT0NVU09VVDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkJCQxKF90aGlzMy5lbGVtZW50KS5vbihldmVudEluLCBfdGhpczMuY29uZmlnLnNlbGVjdG9yLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzLl9lbnRlcihldmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkub24oZXZlbnRPdXQsIF90aGlzMy5jb25maWcuc2VsZWN0b3IsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczMuX2xlYXZlKGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgJCQkMShfdGhpczMuZWxlbWVudCkuY2xvc2VzdCgnLm1vZGFsJykub24oJ2hpZGUuYnMubW9kYWwnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jb25maWcuc2VsZWN0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnID0gX2V4dGVuZHMoe30sIHRoaXMuY29uZmlnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogJ21hbnVhbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3I6ICcnXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2ZpeFRpdGxlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLl9maXhUaXRsZSA9IGZ1bmN0aW9uIF9maXhUaXRsZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRpdGxlVHlwZSA9IHR5cGVvZiB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLW9yaWdpbmFsLXRpdGxlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3RpdGxlJykgfHwgdGl0bGVUeXBlICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1vcmlnaW5hbC10aXRsZScsIHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3RpdGxlJykgfHwgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgndGl0bGUnLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLl9lbnRlciA9IGZ1bmN0aW9uIF9lbnRlcihldmVudCwgY29udGV4dCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YUtleSA9IHRoaXMuY29uc3RydWN0b3IuREFUQV9LRVk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQgPSBjb250ZXh0IHx8ICQkJDEoZXZlbnQuY3VycmVudFRhcmdldCkuZGF0YShkYXRhS2V5KTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbnRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQgPSBuZXcgdGhpcy5jb25zdHJ1Y3RvcihldmVudC5jdXJyZW50VGFyZ2V0LCB0aGlzLl9nZXREZWxlZ2F0ZUNvbmZpZygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQkJDEoZXZlbnQuY3VycmVudFRhcmdldCkuZGF0YShkYXRhS2V5LCBjb250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5fYWN0aXZlVHJpZ2dlcltldmVudC50eXBlID09PSAnZm9jdXNpbicgPyBUcmlnZ2VyLkZPQ1VTIDogVHJpZ2dlci5IT1ZFUl0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCQkJDEoY29udGV4dC5nZXRUaXBFbGVtZW50KCkpLmhhc0NsYXNzKENsYXNzTmFtZS5TSE9XKSB8fCBjb250ZXh0Ll9ob3ZlclN0YXRlID09PSBIb3ZlclN0YXRlLlNIT1cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuX2hvdmVyU3RhdGUgPSBIb3ZlclN0YXRlLlNIT1c7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoY29udGV4dC5fdGltZW91dCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuX2hvdmVyU3RhdGUgPSBIb3ZlclN0YXRlLlNIT1c7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjb250ZXh0LmNvbmZpZy5kZWxheSB8fCAhY29udGV4dC5jb25maWcuZGVsYXkuc2hvdykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0Ll90aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZXh0Ll9ob3ZlclN0YXRlID09PSBIb3ZlclN0YXRlLlNIT1cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSwgY29udGV4dC5jb25maWcuZGVsYXkuc2hvdyk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIF9wcm90by5fbGVhdmUgPSBmdW5jdGlvbiBfbGVhdmUoZXZlbnQsIGNvbnRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGFLZXkgPSB0aGlzLmNvbnN0cnVjdG9yLkRBVEFfS0VZO1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0ID0gY29udGV4dCB8fCAkJCQxKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmRhdGEoZGF0YUtleSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0ID0gbmV3IHRoaXMuY29uc3RydWN0b3IoZXZlbnQuY3VycmVudFRhcmdldCwgdGhpcy5fZ2V0RGVsZWdhdGVDb25maWcoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkJCQxKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmRhdGEoZGF0YUtleSwgY29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuX2FjdGl2ZVRyaWdnZXJbZXZlbnQudHlwZSA9PT0gJ2ZvY3Vzb3V0JyA/IFRyaWdnZXIuRk9DVVMgOiBUcmlnZ2VyLkhPVkVSXSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRleHQuX2lzV2l0aEFjdGl2ZVRyaWdnZXIoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGNvbnRleHQuX3RpbWVvdXQpO1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0Ll9ob3ZlclN0YXRlID0gSG92ZXJTdGF0ZS5PVVQ7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjb250ZXh0LmNvbmZpZy5kZWxheSB8fCAhY29udGV4dC5jb25maWcuZGVsYXkuaGlkZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0Ll90aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZXh0Ll9ob3ZlclN0YXRlID09PSBIb3ZlclN0YXRlLk9VVCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LCBjb250ZXh0LmNvbmZpZy5kZWxheS5oaWRlKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLl9pc1dpdGhBY3RpdmVUcmlnZ2VyID0gZnVuY3Rpb24gX2lzV2l0aEFjdGl2ZVRyaWdnZXIoKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHRyaWdnZXIgaW4gdGhpcy5fYWN0aXZlVHJpZ2dlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2FjdGl2ZVRyaWdnZXJbdHJpZ2dlcl0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLl9nZXRDb25maWcgPSBmdW5jdGlvbiBfZ2V0Q29uZmlnKGNvbmZpZykge1xuICAgICAgICAgICAgICAgICAgICBjb25maWcgPSBfZXh0ZW5kcyh7fSwgdGhpcy5jb25zdHJ1Y3Rvci5EZWZhdWx0LCAkJCQxKHRoaXMuZWxlbWVudCkuZGF0YSgpLCBjb25maWcpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29uZmlnLmRlbGF5ID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLmRlbGF5ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3c6IGNvbmZpZy5kZWxheSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlOiBjb25maWcuZGVsYXlcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy50aXRsZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy50aXRsZSA9IGNvbmZpZy50aXRsZS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb25maWcuY29udGVudCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5jb250ZW50ID0gY29uZmlnLmNvbnRlbnQudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIFV0aWwudHlwZUNoZWNrQ29uZmlnKE5BTUUsIGNvbmZpZywgdGhpcy5jb25zdHJ1Y3Rvci5EZWZhdWx0VHlwZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb25maWc7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIF9wcm90by5fZ2V0RGVsZWdhdGVDb25maWcgPSBmdW5jdGlvbiBfZ2V0RGVsZWdhdGVDb25maWcoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb25maWcgPSB7fTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jb25maWcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmNvbmZpZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbnN0cnVjdG9yLkRlZmF1bHRba2V5XSAhPT0gdGhpcy5jb25maWdba2V5XSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWdba2V5XSA9IHRoaXMuY29uZmlnW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLl9jbGVhblRpcENsYXNzID0gZnVuY3Rpb24gX2NsZWFuVGlwQ2xhc3MoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciAkdGlwID0gJCQkMSh0aGlzLmdldFRpcEVsZW1lbnQoKSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YWJDbGFzcyA9ICR0aXAuYXR0cignY2xhc3MnKS5tYXRjaChCU0NMU19QUkVGSVhfUkVHRVgpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0YWJDbGFzcyAhPT0gbnVsbCAmJiB0YWJDbGFzcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkdGlwLnJlbW92ZUNsYXNzKHRhYkNsYXNzLmpvaW4oJycpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uX2hhbmRsZVBvcHBlclBsYWNlbWVudENoYW5nZSA9IGZ1bmN0aW9uIF9oYW5kbGVQb3BwZXJQbGFjZW1lbnRDaGFuZ2UoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jbGVhblRpcENsYXNzKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRBdHRhY2htZW50Q2xhc3ModGhpcy5fZ2V0QXR0YWNobWVudChkYXRhLnBsYWNlbWVudCkpO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uX2ZpeFRyYW5zaXRpb24gPSBmdW5jdGlvbiBfZml4VHJhbnNpdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRpcCA9IHRoaXMuZ2V0VGlwRWxlbWVudCgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW5pdENvbmZpZ0FuaW1hdGlvbiA9IHRoaXMuY29uZmlnLmFuaW1hdGlvbjtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodGlwLmdldEF0dHJpYnV0ZSgneC1wbGFjZW1lbnQnKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgJCQkMSh0aXApLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5GQURFKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcuYW5pbWF0aW9uID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcuYW5pbWF0aW9uID0gaW5pdENvbmZpZ0FuaW1hdGlvbjtcbiAgICAgICAgICAgICAgICB9OyAvLyBTdGF0aWNcblxuXG4gICAgICAgICAgICAgICAgVG9vbHRpcC5falF1ZXJ5SW50ZXJmYWNlID0gZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gJCQkMSh0aGlzKS5kYXRhKERBVEFfS0VZKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9jb25maWcgPSB0eXBlb2YgY29uZmlnID09PSAnb2JqZWN0JyAmJiBjb25maWc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZGF0YSAmJiAvZGlzcG9zZXxoaWRlLy50ZXN0KGNvbmZpZykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBuZXcgVG9vbHRpcCh0aGlzLCBfY29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkJCQxKHRoaXMpLmRhdGEoREFUQV9LRVksIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGRhdGFbY29uZmlnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk5vIG1ldGhvZCBuYW1lZCBcXFwiXCIgKyBjb25maWcgKyBcIlxcXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtjb25maWddKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBfY3JlYXRlQ2xhc3MoVG9vbHRpcCwgbnVsbCwgW3tcbiAgICAgICAgICAgICAgICAgICAga2V5OiBcIlZFUlNJT05cIixcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gVkVSU0lPTjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiBcIkRlZmF1bHRcIixcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRGVmYXVsdDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiBcIk5BTUVcIixcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTkFNRTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiBcIkRBVEFfS0VZXCIsXG4gICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERBVEFfS0VZO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBrZXk6IFwiRXZlbnRcIixcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRXZlbnQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogXCJFVkVOVF9LRVlcIixcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRVZFTlRfS0VZO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBrZXk6IFwiRGVmYXVsdFR5cGVcIixcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRGVmYXVsdFR5cGU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gVG9vbHRpcDtcbiAgICAgICAgICAgIH0oKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKiBqUXVlcnlcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqL1xuXG5cbiAgICAgICAgJCQkMS5mbltOQU1FXSA9IFRvb2x0aXAuX2pRdWVyeUludGVyZmFjZTtcbiAgICAgICAgJCQkMS5mbltOQU1FXS5Db25zdHJ1Y3RvciA9IFRvb2x0aXA7XG5cbiAgICAgICAgJCQkMS5mbltOQU1FXS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkJCQxLmZuW05BTUVdID0gSlFVRVJZX05PX0NPTkZMSUNUO1xuICAgICAgICAgICAgcmV0dXJuIFRvb2x0aXAuX2pRdWVyeUludGVyZmFjZTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gVG9vbHRpcDtcbiAgICB9KCQsIFBvcHBlciQxKTtcblxuICAgIC8qKlxuICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICogQm9vdHN0cmFwICh2NC4wLjApOiBwb3BvdmVyLmpzXG4gICAgICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcbiAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAqL1xuXG4gICAgdmFyIFBvcG92ZXIgPSBmdW5jdGlvbigkJCQxKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICogQ29uc3RhbnRzXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIE5BTUUgPSAncG9wb3Zlcic7XG4gICAgICAgIHZhciBWRVJTSU9OID0gJzQuMC4wJztcbiAgICAgICAgdmFyIERBVEFfS0VZID0gJ2JzLnBvcG92ZXInO1xuICAgICAgICB2YXIgRVZFTlRfS0VZID0gXCIuXCIgKyBEQVRBX0tFWTtcbiAgICAgICAgdmFyIEpRVUVSWV9OT19DT05GTElDVCA9ICQkJDEuZm5bTkFNRV07XG4gICAgICAgIHZhciBDTEFTU19QUkVGSVggPSAnYnMtcG9wb3Zlcic7XG4gICAgICAgIHZhciBCU0NMU19QUkVGSVhfUkVHRVggPSBuZXcgUmVnRXhwKFwiKF58XFxcXHMpXCIgKyBDTEFTU19QUkVGSVggKyBcIlxcXFxTK1wiLCAnZycpO1xuXG4gICAgICAgIHZhciBEZWZhdWx0ID0gX2V4dGVuZHMoe30sIFRvb2x0aXAuRGVmYXVsdCwge1xuICAgICAgICAgICAgcGxhY2VtZW50OiAncmlnaHQnLFxuICAgICAgICAgICAgdHJpZ2dlcjogJ2NsaWNrJyxcbiAgICAgICAgICAgIGNvbnRlbnQ6ICcnLFxuICAgICAgICAgICAgdGVtcGxhdGU6ICc8ZGl2IGNsYXNzPVwicG9wb3ZlclwiIHJvbGU9XCJ0b29sdGlwXCI+JyArICc8ZGl2IGNsYXNzPVwiYXJyb3dcIj48L2Rpdj4nICsgJzxoMyBjbGFzcz1cInBvcG92ZXItaGVhZGVyXCI+PC9oMz4nICsgJzxkaXYgY2xhc3M9XCJwb3BvdmVyLWJvZHlcIj48L2Rpdj48L2Rpdj4nXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBEZWZhdWx0VHlwZSA9IF9leHRlbmRzKHt9LCBUb29sdGlwLkRlZmF1bHRUeXBlLCB7XG4gICAgICAgICAgICBjb250ZW50OiAnKHN0cmluZ3xlbGVtZW50fGZ1bmN0aW9uKSdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIENsYXNzTmFtZSA9IHtcbiAgICAgICAgICAgIEZBREU6ICdmYWRlJyxcbiAgICAgICAgICAgIFNIT1c6ICdzaG93J1xuICAgICAgICB9O1xuICAgICAgICB2YXIgU2VsZWN0b3IgPSB7XG4gICAgICAgICAgICBUSVRMRTogJy5wb3BvdmVyLWhlYWRlcicsXG4gICAgICAgICAgICBDT05URU5UOiAnLnBvcG92ZXItYm9keSdcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIEV2ZW50ID0ge1xuICAgICAgICAgICAgSElERTogXCJoaWRlXCIgKyBFVkVOVF9LRVksXG4gICAgICAgICAgICBISURERU46IFwiaGlkZGVuXCIgKyBFVkVOVF9LRVksXG4gICAgICAgICAgICBTSE9XOiBcInNob3dcIiArIEVWRU5UX0tFWSxcbiAgICAgICAgICAgIFNIT1dOOiBcInNob3duXCIgKyBFVkVOVF9LRVksXG4gICAgICAgICAgICBJTlNFUlRFRDogXCJpbnNlcnRlZFwiICsgRVZFTlRfS0VZLFxuICAgICAgICAgICAgQ0xJQ0s6IFwiY2xpY2tcIiArIEVWRU5UX0tFWSxcbiAgICAgICAgICAgIEZPQ1VTSU46IFwiZm9jdXNpblwiICsgRVZFTlRfS0VZLFxuICAgICAgICAgICAgRk9DVVNPVVQ6IFwiZm9jdXNvdXRcIiArIEVWRU5UX0tFWSxcbiAgICAgICAgICAgIE1PVVNFRU5URVI6IFwibW91c2VlbnRlclwiICsgRVZFTlRfS0VZLFxuICAgICAgICAgICAgTU9VU0VMRUFWRTogXCJtb3VzZWxlYXZlXCIgKyBFVkVOVF9LRVlcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICAgKiBDbGFzcyBEZWZpbml0aW9uXG4gICAgICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgICAqL1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIFBvcG92ZXIgPVxuICAgICAgICAgICAgLyojX19QVVJFX18qL1xuICAgICAgICAgICAgZnVuY3Rpb24oX1Rvb2x0aXApIHtcbiAgICAgICAgICAgICAgICBfaW5oZXJpdHNMb29zZShQb3BvdmVyLCBfVG9vbHRpcCk7XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBQb3BvdmVyKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX1Rvb2x0aXAuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBfcHJvdG8gPSBQb3BvdmVyLnByb3RvdHlwZTtcblxuICAgICAgICAgICAgICAgIC8vIE92ZXJyaWRlc1xuICAgICAgICAgICAgICAgIF9wcm90by5pc1dpdGhDb250ZW50ID0gZnVuY3Rpb24gaXNXaXRoQ29udGVudCgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGl0bGUoKSB8fCB0aGlzLl9nZXRDb250ZW50KCk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIF9wcm90by5hZGRBdHRhY2htZW50Q2xhc3MgPSBmdW5jdGlvbiBhZGRBdHRhY2htZW50Q2xhc3MoYXR0YWNobWVudCkge1xuICAgICAgICAgICAgICAgICAgICAkJCQxKHRoaXMuZ2V0VGlwRWxlbWVudCgpKS5hZGRDbGFzcyhDTEFTU19QUkVGSVggKyBcIi1cIiArIGF0dGFjaG1lbnQpO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uZ2V0VGlwRWxlbWVudCA9IGZ1bmN0aW9uIGdldFRpcEVsZW1lbnQoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGlwID0gdGhpcy50aXAgfHwgJCQkMSh0aGlzLmNvbmZpZy50ZW1wbGF0ZSlbMF07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRpcDtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLnNldENvbnRlbnQgPSBmdW5jdGlvbiBzZXRDb250ZW50KCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgJHRpcCA9ICQkJDEodGhpcy5nZXRUaXBFbGVtZW50KCkpOyAvLyBXZSB1c2UgYXBwZW5kIGZvciBodG1sIG9iamVjdHMgdG8gbWFpbnRhaW4ganMgZXZlbnRzXG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRFbGVtZW50Q29udGVudCgkdGlwLmZpbmQoU2VsZWN0b3IuVElUTEUpLCB0aGlzLmdldFRpdGxlKCkpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0gdGhpcy5fZ2V0Q29udGVudCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29udGVudCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQuY2FsbCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRFbGVtZW50Q29udGVudCgkdGlwLmZpbmQoU2VsZWN0b3IuQ09OVEVOVCksIGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICAkdGlwLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5GQURFICsgXCIgXCIgKyBDbGFzc05hbWUuU0hPVyk7XG4gICAgICAgICAgICAgICAgfTsgLy8gUHJpdmF0ZVxuXG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uX2dldENvbnRlbnQgPSBmdW5jdGlvbiBfZ2V0Q29udGVudCgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY29udGVudCcpIHx8IHRoaXMuY29uZmlnLmNvbnRlbnQ7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIF9wcm90by5fY2xlYW5UaXBDbGFzcyA9IGZ1bmN0aW9uIF9jbGVhblRpcENsYXNzKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgJHRpcCA9ICQkJDEodGhpcy5nZXRUaXBFbGVtZW50KCkpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGFiQ2xhc3MgPSAkdGlwLmF0dHIoJ2NsYXNzJykubWF0Y2goQlNDTFNfUFJFRklYX1JFR0VYKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodGFiQ2xhc3MgIT09IG51bGwgJiYgdGFiQ2xhc3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRpcC5yZW1vdmVDbGFzcyh0YWJDbGFzcy5qb2luKCcnKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9OyAvLyBTdGF0aWNcblxuXG4gICAgICAgICAgICAgICAgUG9wb3Zlci5falF1ZXJ5SW50ZXJmYWNlID0gZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gJCQkMSh0aGlzKS5kYXRhKERBVEFfS0VZKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9jb25maWcgPSB0eXBlb2YgY29uZmlnID09PSAnb2JqZWN0JyA/IGNvbmZpZyA6IG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZGF0YSAmJiAvZGVzdHJveXxoaWRlLy50ZXN0KGNvbmZpZykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBuZXcgUG9wb3Zlcih0aGlzLCBfY29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkJCQxKHRoaXMpLmRhdGEoREFUQV9LRVksIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGRhdGFbY29uZmlnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk5vIG1ldGhvZCBuYW1lZCBcXFwiXCIgKyBjb25maWcgKyBcIlxcXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtjb25maWddKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBfY3JlYXRlQ2xhc3MoUG9wb3ZlciwgbnVsbCwgW3tcbiAgICAgICAgICAgICAgICAgICAga2V5OiBcIlZFUlNJT05cIixcbiAgICAgICAgICAgICAgICAgICAgLy8gR2V0dGVyc1xuICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBWRVJTSU9OO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBrZXk6IFwiRGVmYXVsdFwiLFxuICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBEZWZhdWx0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBrZXk6IFwiTkFNRVwiLFxuICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBOQU1FO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBrZXk6IFwiREFUQV9LRVlcIixcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gREFUQV9LRVk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogXCJFdmVudFwiLFxuICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBFdmVudDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiBcIkVWRU5UX0tFWVwiLFxuICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBFVkVOVF9LRVk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogXCJEZWZhdWx0VHlwZVwiLFxuICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBEZWZhdWx0VHlwZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1dKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBQb3BvdmVyO1xuICAgICAgICAgICAgfShUb29sdGlwKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKiBqUXVlcnlcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqL1xuXG5cbiAgICAgICAgJCQkMS5mbltOQU1FXSA9IFBvcG92ZXIuX2pRdWVyeUludGVyZmFjZTtcbiAgICAgICAgJCQkMS5mbltOQU1FXS5Db25zdHJ1Y3RvciA9IFBvcG92ZXI7XG5cbiAgICAgICAgJCQkMS5mbltOQU1FXS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkJCQxLmZuW05BTUVdID0gSlFVRVJZX05PX0NPTkZMSUNUO1xuICAgICAgICAgICAgcmV0dXJuIFBvcG92ZXIuX2pRdWVyeUludGVyZmFjZTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gUG9wb3ZlcjtcbiAgICB9KCQpO1xuXG4gICAgLyoqXG4gICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgKiBCb290c3RyYXAgKHY0LjAuMCk6IHNjcm9sbHNweS5qc1xuICAgICAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG4gICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgKi9cblxuICAgIHZhciBTY3JvbGxTcHkgPSBmdW5jdGlvbigkJCQxKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICogQ29uc3RhbnRzXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIE5BTUUgPSAnc2Nyb2xsc3B5JztcbiAgICAgICAgdmFyIFZFUlNJT04gPSAnNC4wLjAnO1xuICAgICAgICB2YXIgREFUQV9LRVkgPSAnYnMuc2Nyb2xsc3B5JztcbiAgICAgICAgdmFyIEVWRU5UX0tFWSA9IFwiLlwiICsgREFUQV9LRVk7XG4gICAgICAgIHZhciBEQVRBX0FQSV9LRVkgPSAnLmRhdGEtYXBpJztcbiAgICAgICAgdmFyIEpRVUVSWV9OT19DT05GTElDVCA9ICQkJDEuZm5bTkFNRV07XG4gICAgICAgIHZhciBEZWZhdWx0ID0ge1xuICAgICAgICAgICAgb2Zmc2V0OiAxMCxcbiAgICAgICAgICAgIG1ldGhvZDogJ2F1dG8nLFxuICAgICAgICAgICAgdGFyZ2V0OiAnJ1xuICAgICAgICB9O1xuICAgICAgICB2YXIgRGVmYXVsdFR5cGUgPSB7XG4gICAgICAgICAgICBvZmZzZXQ6ICdudW1iZXInLFxuICAgICAgICAgICAgbWV0aG9kOiAnc3RyaW5nJyxcbiAgICAgICAgICAgIHRhcmdldDogJyhzdHJpbmd8ZWxlbWVudCknXG4gICAgICAgIH07XG4gICAgICAgIHZhciBFdmVudCA9IHtcbiAgICAgICAgICAgIEFDVElWQVRFOiBcImFjdGl2YXRlXCIgKyBFVkVOVF9LRVksXG4gICAgICAgICAgICBTQ1JPTEw6IFwic2Nyb2xsXCIgKyBFVkVOVF9LRVksXG4gICAgICAgICAgICBMT0FEX0RBVEFfQVBJOiBcImxvYWRcIiArIEVWRU5UX0tFWSArIERBVEFfQVBJX0tFWVxuICAgICAgICB9O1xuICAgICAgICB2YXIgQ2xhc3NOYW1lID0ge1xuICAgICAgICAgICAgRFJPUERPV05fSVRFTTogJ2Ryb3Bkb3duLWl0ZW0nLFxuICAgICAgICAgICAgRFJPUERPV05fTUVOVTogJ2Ryb3Bkb3duLW1lbnUnLFxuICAgICAgICAgICAgQUNUSVZFOiAnYWN0aXZlJ1xuICAgICAgICB9O1xuICAgICAgICB2YXIgU2VsZWN0b3IgPSB7XG4gICAgICAgICAgICBEQVRBX1NQWTogJ1tkYXRhLXNweT1cInNjcm9sbFwiXScsXG4gICAgICAgICAgICBBQ1RJVkU6ICcuYWN0aXZlJyxcbiAgICAgICAgICAgIE5BVl9MSVNUX0dST1VQOiAnLm5hdiwgLmxpc3QtZ3JvdXAnLFxuICAgICAgICAgICAgTkFWX0xJTktTOiAnLm5hdi1saW5rJyxcbiAgICAgICAgICAgIE5BVl9JVEVNUzogJy5uYXYtaXRlbScsXG4gICAgICAgICAgICBMSVNUX0lURU1TOiAnLmxpc3QtZ3JvdXAtaXRlbScsXG4gICAgICAgICAgICBEUk9QRE9XTjogJy5kcm9wZG93bicsXG4gICAgICAgICAgICBEUk9QRE9XTl9JVEVNUzogJy5kcm9wZG93bi1pdGVtJyxcbiAgICAgICAgICAgIERST1BET1dOX1RPR0dMRTogJy5kcm9wZG93bi10b2dnbGUnXG4gICAgICAgIH07XG4gICAgICAgIHZhciBPZmZzZXRNZXRob2QgPSB7XG4gICAgICAgICAgICBPRkZTRVQ6ICdvZmZzZXQnLFxuICAgICAgICAgICAgUE9TSVRJT046ICdwb3NpdGlvbidcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICAgKiBDbGFzcyBEZWZpbml0aW9uXG4gICAgICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgICAqL1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIFNjcm9sbFNweSA9XG4gICAgICAgICAgICAvKiNfX1BVUkVfXyovXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBTY3JvbGxTcHkoZWxlbWVudCwgY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3Njcm9sbEVsZW1lbnQgPSBlbGVtZW50LnRhZ05hbWUgPT09ICdCT0RZJyA/IHdpbmRvdyA6IGVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NvbmZpZyA9IHRoaXMuX2dldENvbmZpZyhjb25maWcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zZWxlY3RvciA9IHRoaXMuX2NvbmZpZy50YXJnZXQgKyBcIiBcIiArIFNlbGVjdG9yLk5BVl9MSU5LUyArIFwiLFwiICsgKHRoaXMuX2NvbmZpZy50YXJnZXQgKyBcIiBcIiArIFNlbGVjdG9yLkxJU1RfSVRFTVMgKyBcIixcIikgKyAodGhpcy5fY29uZmlnLnRhcmdldCArIFwiIFwiICsgU2VsZWN0b3IuRFJPUERPV05fSVRFTVMpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vZmZzZXRzID0gW107XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3RhcmdldHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYWN0aXZlVGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2Nyb2xsSGVpZ2h0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgJCQkMSh0aGlzLl9zY3JvbGxFbGVtZW50KS5vbihFdmVudC5TQ1JPTEwsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuX3Byb2Nlc3MoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHJvY2VzcygpO1xuICAgICAgICAgICAgICAgIH0gLy8gR2V0dGVyc1xuXG5cbiAgICAgICAgICAgICAgICB2YXIgX3Byb3RvID0gU2Nyb2xsU3B5LnByb3RvdHlwZTtcblxuICAgICAgICAgICAgICAgIC8vIFB1YmxpY1xuICAgICAgICAgICAgICAgIF9wcm90by5yZWZyZXNoID0gZnVuY3Rpb24gcmVmcmVzaCgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGF1dG9NZXRob2QgPSB0aGlzLl9zY3JvbGxFbGVtZW50ID09PSB0aGlzLl9zY3JvbGxFbGVtZW50LndpbmRvdyA/IE9mZnNldE1ldGhvZC5PRkZTRVQgOiBPZmZzZXRNZXRob2QuUE9TSVRJT047XG4gICAgICAgICAgICAgICAgICAgIHZhciBvZmZzZXRNZXRob2QgPSB0aGlzLl9jb25maWcubWV0aG9kID09PSAnYXV0bycgPyBhdXRvTWV0aG9kIDogdGhpcy5fY29uZmlnLm1ldGhvZDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9mZnNldEJhc2UgPSBvZmZzZXRNZXRob2QgPT09IE9mZnNldE1ldGhvZC5QT1NJVElPTiA/IHRoaXMuX2dldFNjcm9sbFRvcCgpIDogMDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb2Zmc2V0cyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl90YXJnZXRzID0gW107XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3Njcm9sbEhlaWdodCA9IHRoaXMuX2dldFNjcm9sbEhlaWdodCgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0cyA9ICQkJDEubWFrZUFycmF5KCQkJDEodGhpcy5fc2VsZWN0b3IpKTtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0cy5tYXAoZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXRTZWxlY3RvciA9IFV0aWwuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudChlbGVtZW50KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldFNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gJCQkMSh0YXJnZXRTZWxlY3RvcilbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0QkNSID0gdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldEJDUi53aWR0aCB8fCB0YXJnZXRCQ1IuaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE8gKGZhdCk6IHJlbW92ZSBza2V0Y2ggcmVsaWFuY2Ugb24galF1ZXJ5IHBvc2l0aW9uL29mZnNldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyQkJDEodGFyZ2V0KVtvZmZzZXRNZXRob2RdKCkudG9wICsgb2Zmc2V0QmFzZSwgdGFyZ2V0U2VsZWN0b3JdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH0pLmZpbHRlcihmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgICAgICAgICAgICAgfSkuc29ydChmdW5jdGlvbihhLCBiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYVswXSAtIGJbMF07XG4gICAgICAgICAgICAgICAgICAgIH0pLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyLl9vZmZzZXRzLnB1c2goaXRlbVswXSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi5fdGFyZ2V0cy5wdXNoKGl0ZW1bMV0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLmRpc3Bvc2UgPSBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgICAgICAgICAgICAgICAgICAkJCQxLnJlbW92ZURhdGEodGhpcy5fZWxlbWVudCwgREFUQV9LRVkpO1xuICAgICAgICAgICAgICAgICAgICAkJCQxKHRoaXMuX3Njcm9sbEVsZW1lbnQpLm9mZihFVkVOVF9LRVkpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2Nyb2xsRWxlbWVudCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NvbmZpZyA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NlbGVjdG9yID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb2Zmc2V0cyA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3RhcmdldHMgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9hY3RpdmVUYXJnZXQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zY3JvbGxIZWlnaHQgPSBudWxsO1xuICAgICAgICAgICAgICAgIH07IC8vIFByaXZhdGVcblxuXG4gICAgICAgICAgICAgICAgX3Byb3RvLl9nZXRDb25maWcgPSBmdW5jdGlvbiBfZ2V0Q29uZmlnKGNvbmZpZykge1xuICAgICAgICAgICAgICAgICAgICBjb25maWcgPSBfZXh0ZW5kcyh7fSwgRGVmYXVsdCwgY29uZmlnKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy50YXJnZXQgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWQgPSAkJCQxKGNvbmZpZy50YXJnZXQpLmF0dHIoJ2lkJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZCA9IFV0aWwuZ2V0VUlEKE5BTUUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQkJDEoY29uZmlnLnRhcmdldCkuYXR0cignaWQnLCBpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy50YXJnZXQgPSBcIiNcIiArIGlkO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgVXRpbC50eXBlQ2hlY2tDb25maWcoTkFNRSwgY29uZmlnLCBEZWZhdWx0VHlwZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb25maWc7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIF9wcm90by5fZ2V0U2Nyb2xsVG9wID0gZnVuY3Rpb24gX2dldFNjcm9sbFRvcCgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbEVsZW1lbnQgPT09IHdpbmRvdyA/IHRoaXMuX3Njcm9sbEVsZW1lbnQucGFnZVlPZmZzZXQgOiB0aGlzLl9zY3JvbGxFbGVtZW50LnNjcm9sbFRvcDtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLl9nZXRTY3JvbGxIZWlnaHQgPSBmdW5jdGlvbiBfZ2V0U2Nyb2xsSGVpZ2h0KCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fc2Nyb2xsRWxlbWVudC5zY3JvbGxIZWlnaHQgfHwgTWF0aC5tYXgoZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQsIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQpO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uX2dldE9mZnNldEhlaWdodCA9IGZ1bmN0aW9uIF9nZXRPZmZzZXRIZWlnaHQoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9zY3JvbGxFbGVtZW50ID09PSB3aW5kb3cgPyB3aW5kb3cuaW5uZXJIZWlnaHQgOiB0aGlzLl9zY3JvbGxFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLl9wcm9jZXNzID0gZnVuY3Rpb24gX3Byb2Nlc3MoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzY3JvbGxUb3AgPSB0aGlzLl9nZXRTY3JvbGxUb3AoKSArIHRoaXMuX2NvbmZpZy5vZmZzZXQ7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHNjcm9sbEhlaWdodCA9IHRoaXMuX2dldFNjcm9sbEhlaWdodCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXhTY3JvbGwgPSB0aGlzLl9jb25maWcub2Zmc2V0ICsgc2Nyb2xsSGVpZ2h0IC0gdGhpcy5fZ2V0T2Zmc2V0SGVpZ2h0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3Njcm9sbEhlaWdodCAhPT0gc2Nyb2xsSGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChzY3JvbGxUb3AgPj0gbWF4U2Nyb2xsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gdGhpcy5fdGFyZ2V0c1t0aGlzLl90YXJnZXRzLmxlbmd0aCAtIDFdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fYWN0aXZlVGFyZ2V0ICE9PSB0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9hY3RpdmF0ZSh0YXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fYWN0aXZlVGFyZ2V0ICYmIHNjcm9sbFRvcCA8IHRoaXMuX29mZnNldHNbMF0gJiYgdGhpcy5fb2Zmc2V0c1swXSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2FjdGl2ZVRhcmdldCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2NsZWFyKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSB0aGlzLl9vZmZzZXRzLmxlbmd0aDsgaS0tOykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzQWN0aXZlVGFyZ2V0ID0gdGhpcy5fYWN0aXZlVGFyZ2V0ICE9PSB0aGlzLl90YXJnZXRzW2ldICYmIHNjcm9sbFRvcCA+PSB0aGlzLl9vZmZzZXRzW2ldICYmICh0eXBlb2YgdGhpcy5fb2Zmc2V0c1tpICsgMV0gPT09ICd1bmRlZmluZWQnIHx8IHNjcm9sbFRvcCA8IHRoaXMuX29mZnNldHNbaSArIDFdKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQWN0aXZlVGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYWN0aXZhdGUodGhpcy5fdGFyZ2V0c1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLl9hY3RpdmF0ZSA9IGZ1bmN0aW9uIF9hY3RpdmF0ZSh0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYWN0aXZlVGFyZ2V0ID0gdGFyZ2V0O1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NsZWFyKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHF1ZXJpZXMgPSB0aGlzLl9zZWxlY3Rvci5zcGxpdCgnLCcpOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgYXJyb3ctYm9keS1zdHlsZVxuXG5cbiAgICAgICAgICAgICAgICAgICAgcXVlcmllcyA9IHF1ZXJpZXMubWFwKGZ1bmN0aW9uKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZWN0b3IgKyBcIltkYXRhLXRhcmdldD1cXFwiXCIgKyB0YXJnZXQgKyBcIlxcXCJdLFwiICsgKHNlbGVjdG9yICsgXCJbaHJlZj1cXFwiXCIgKyB0YXJnZXQgKyBcIlxcXCJdXCIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyICRsaW5rID0gJCQkMShxdWVyaWVzLmpvaW4oJywnKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCRsaW5rLmhhc0NsYXNzKENsYXNzTmFtZS5EUk9QRE9XTl9JVEVNKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGxpbmsuY2xvc2VzdChTZWxlY3Rvci5EUk9QRE9XTikuZmluZChTZWxlY3Rvci5EUk9QRE9XTl9UT0dHTEUpLmFkZENsYXNzKENsYXNzTmFtZS5BQ1RJVkUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGxpbmsuYWRkQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdHJpZ2dlcmVkIGxpbmsgYXMgYWN0aXZlXG4gICAgICAgICAgICAgICAgICAgICAgICAkbGluay5hZGRDbGFzcyhDbGFzc05hbWUuQUNUSVZFKTsgLy8gU2V0IHRyaWdnZXJlZCBsaW5rcyBwYXJlbnRzIGFzIGFjdGl2ZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2l0aCBib3RoIDx1bD4gYW5kIDxuYXY+IG1hcmt1cCBhIHBhcmVudCBpcyB0aGUgcHJldmlvdXMgc2libGluZyBvZiBhbnkgbmF2IGFuY2VzdG9yXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICRsaW5rLnBhcmVudHMoU2VsZWN0b3IuTkFWX0xJU1RfR1JPVVApLnByZXYoU2VsZWN0b3IuTkFWX0xJTktTICsgXCIsIFwiICsgU2VsZWN0b3IuTElTVF9JVEVNUykuYWRkQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSk7IC8vIEhhbmRsZSBzcGVjaWFsIGNhc2Ugd2hlbiAubmF2LWxpbmsgaXMgaW5zaWRlIC5uYXYtaXRlbVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAkbGluay5wYXJlbnRzKFNlbGVjdG9yLk5BVl9MSVNUX0dST1VQKS5wcmV2KFNlbGVjdG9yLk5BVl9JVEVNUykuY2hpbGRyZW4oU2VsZWN0b3IuTkFWX0xJTktTKS5hZGRDbGFzcyhDbGFzc05hbWUuQUNUSVZFKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICQkJDEodGhpcy5fc2Nyb2xsRWxlbWVudCkudHJpZ2dlcihFdmVudC5BQ1RJVkFURSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRlZFRhcmdldDogdGFyZ2V0XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uX2NsZWFyID0gZnVuY3Rpb24gX2NsZWFyKCkge1xuICAgICAgICAgICAgICAgICAgICAkJCQxKHRoaXMuX3NlbGVjdG9yKS5maWx0ZXIoU2VsZWN0b3IuQUNUSVZFKS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuQUNUSVZFKTtcbiAgICAgICAgICAgICAgICB9OyAvLyBTdGF0aWNcblxuXG4gICAgICAgICAgICAgICAgU2Nyb2xsU3B5Ll9qUXVlcnlJbnRlcmZhY2UgPSBmdW5jdGlvbiBfalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSAkJCQxKHRoaXMpLmRhdGEoREFUQV9LRVkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2NvbmZpZyA9IHR5cGVvZiBjb25maWcgPT09ICdvYmplY3QnICYmIGNvbmZpZztcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IG5ldyBTY3JvbGxTcHkodGhpcywgX2NvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCQkMSh0aGlzKS5kYXRhKERBVEFfS0VZLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb25maWcgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBkYXRhW2NvbmZpZ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJObyBtZXRob2QgbmFtZWQgXFxcIlwiICsgY29uZmlnICsgXCJcXFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbY29uZmlnXSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX2NyZWF0ZUNsYXNzKFNjcm9sbFNweSwgbnVsbCwgW3tcbiAgICAgICAgICAgICAgICAgICAga2V5OiBcIlZFUlNJT05cIixcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gVkVSU0lPTjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiBcIkRlZmF1bHRcIixcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRGVmYXVsdDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1dKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBTY3JvbGxTcHk7XG4gICAgICAgICAgICB9KCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICogRGF0YSBBcGkgaW1wbGVtZW50YXRpb25cbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqL1xuXG5cbiAgICAgICAgJCQkMSh3aW5kb3cpLm9uKEV2ZW50LkxPQURfREFUQV9BUEksIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHNjcm9sbFNweXMgPSAkJCQxLm1ha2VBcnJheSgkJCQxKFNlbGVjdG9yLkRBVEFfU1BZKSk7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBzY3JvbGxTcHlzLmxlbmd0aDsgaS0tOykge1xuICAgICAgICAgICAgICAgIHZhciAkc3B5ID0gJCQkMShzY3JvbGxTcHlzW2ldKTtcblxuICAgICAgICAgICAgICAgIFNjcm9sbFNweS5falF1ZXJ5SW50ZXJmYWNlLmNhbGwoJHNweSwgJHNweS5kYXRhKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKiBqUXVlcnlcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqL1xuXG4gICAgICAgICQkJDEuZm5bTkFNRV0gPSBTY3JvbGxTcHkuX2pRdWVyeUludGVyZmFjZTtcbiAgICAgICAgJCQkMS5mbltOQU1FXS5Db25zdHJ1Y3RvciA9IFNjcm9sbFNweTtcblxuICAgICAgICAkJCQxLmZuW05BTUVdLm5vQ29uZmxpY3QgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQkJDEuZm5bTkFNRV0gPSBKUVVFUllfTk9fQ09ORkxJQ1Q7XG4gICAgICAgICAgICByZXR1cm4gU2Nyb2xsU3B5Ll9qUXVlcnlJbnRlcmZhY2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIFNjcm9sbFNweTtcbiAgICB9KCQpO1xuXG4gICAgLyoqXG4gICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgKiBCb290c3RyYXAgKHY0LjAuMCk6IHRhYi5qc1xuICAgICAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG4gICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgKi9cblxuICAgIHZhciBUYWIgPSBmdW5jdGlvbigkJCQxKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICogQ29uc3RhbnRzXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIE5BTUUgPSAndGFiJztcbiAgICAgICAgdmFyIFZFUlNJT04gPSAnNC4wLjAnO1xuICAgICAgICB2YXIgREFUQV9LRVkgPSAnYnMudGFiJztcbiAgICAgICAgdmFyIEVWRU5UX0tFWSA9IFwiLlwiICsgREFUQV9LRVk7XG4gICAgICAgIHZhciBEQVRBX0FQSV9LRVkgPSAnLmRhdGEtYXBpJztcbiAgICAgICAgdmFyIEpRVUVSWV9OT19DT05GTElDVCA9ICQkJDEuZm5bTkFNRV07XG4gICAgICAgIHZhciBUUkFOU0lUSU9OX0RVUkFUSU9OID0gMTUwO1xuICAgICAgICB2YXIgRXZlbnQgPSB7XG4gICAgICAgICAgICBISURFOiBcImhpZGVcIiArIEVWRU5UX0tFWSxcbiAgICAgICAgICAgIEhJRERFTjogXCJoaWRkZW5cIiArIEVWRU5UX0tFWSxcbiAgICAgICAgICAgIFNIT1c6IFwic2hvd1wiICsgRVZFTlRfS0VZLFxuICAgICAgICAgICAgU0hPV046IFwic2hvd25cIiArIEVWRU5UX0tFWSxcbiAgICAgICAgICAgIENMSUNLX0RBVEFfQVBJOiBcImNsaWNrXCIgKyBFVkVOVF9LRVkgKyBEQVRBX0FQSV9LRVlcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIENsYXNzTmFtZSA9IHtcbiAgICAgICAgICAgIERST1BET1dOX01FTlU6ICdkcm9wZG93bi1tZW51JyxcbiAgICAgICAgICAgIEFDVElWRTogJ2FjdGl2ZScsXG4gICAgICAgICAgICBESVNBQkxFRDogJ2Rpc2FibGVkJyxcbiAgICAgICAgICAgIEZBREU6ICdmYWRlJyxcbiAgICAgICAgICAgIFNIT1c6ICdzaG93J1xuICAgICAgICB9O1xuICAgICAgICB2YXIgU2VsZWN0b3IgPSB7XG4gICAgICAgICAgICBEUk9QRE9XTjogJy5kcm9wZG93bicsXG4gICAgICAgICAgICBOQVZfTElTVF9HUk9VUDogJy5uYXYsIC5saXN0LWdyb3VwJyxcbiAgICAgICAgICAgIEFDVElWRTogJy5hY3RpdmUnLFxuICAgICAgICAgICAgQUNUSVZFX1VMOiAnPiBsaSA+IC5hY3RpdmUnLFxuICAgICAgICAgICAgREFUQV9UT0dHTEU6ICdbZGF0YS10b2dnbGU9XCJ0YWJcIl0sIFtkYXRhLXRvZ2dsZT1cInBpbGxcIl0sIFtkYXRhLXRvZ2dsZT1cImxpc3RcIl0nLFxuICAgICAgICAgICAgRFJPUERPV05fVE9HR0xFOiAnLmRyb3Bkb3duLXRvZ2dsZScsXG4gICAgICAgICAgICBEUk9QRE9XTl9BQ1RJVkVfQ0hJTEQ6ICc+IC5kcm9wZG93bi1tZW51IC5hY3RpdmUnXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgICogQ2xhc3MgRGVmaW5pdGlvblxuICAgICAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICAgKi9cblxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBUYWIgPVxuICAgICAgICAgICAgLyojX19QVVJFX18qL1xuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gVGFiKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgfSAvLyBHZXR0ZXJzXG5cblxuICAgICAgICAgICAgICAgIHZhciBfcHJvdG8gPSBUYWIucHJvdG90eXBlO1xuXG4gICAgICAgICAgICAgICAgLy8gUHVibGljXG4gICAgICAgICAgICAgICAgX3Byb3RvLnNob3cgPSBmdW5jdGlvbiBzaG93KCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9lbGVtZW50LnBhcmVudE5vZGUgJiYgdGhpcy5fZWxlbWVudC5wYXJlbnROb2RlLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSAmJiAkJCQxKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5BQ1RJVkUpIHx8ICQkJDEodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkRJU0FCTEVEKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByZXZpb3VzO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdEVsZW1lbnQgPSAkJCQxKHRoaXMuX2VsZW1lbnQpLmNsb3Nlc3QoU2VsZWN0b3IuTkFWX0xJU1RfR1JPVVApWzBdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSBVdGlsLmdldFNlbGVjdG9yRnJvbUVsZW1lbnQodGhpcy5fZWxlbWVudCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpc3RFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbVNlbGVjdG9yID0gbGlzdEVsZW1lbnQubm9kZU5hbWUgPT09ICdVTCcgPyBTZWxlY3Rvci5BQ1RJVkVfVUwgOiBTZWxlY3Rvci5BQ1RJVkU7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91cyA9ICQkJDEubWFrZUFycmF5KCQkJDEobGlzdEVsZW1lbnQpLmZpbmQoaXRlbVNlbGVjdG9yKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91cyA9IHByZXZpb3VzW3ByZXZpb3VzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGhpZGVFdmVudCA9ICQkJDEuRXZlbnQoRXZlbnQuSElERSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRlZFRhcmdldDogdGhpcy5fZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNob3dFdmVudCA9ICQkJDEuRXZlbnQoRXZlbnQuU0hPVywge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRlZFRhcmdldDogcHJldmlvdXNcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkJCQxKHByZXZpb3VzKS50cmlnZ2VyKGhpZGVFdmVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAkJCQxKHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIoc2hvd0V2ZW50KTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoc2hvd0V2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpIHx8IGhpZGVFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSAkJCQxKHNlbGVjdG9yKVswXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2FjdGl2YXRlKHRoaXMuX2VsZW1lbnQsIGxpc3RFbGVtZW50KTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgY29tcGxldGUgPSBmdW5jdGlvbiBjb21wbGV0ZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoaWRkZW5FdmVudCA9ICQkJDEuRXZlbnQoRXZlbnQuSElEREVOLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRlZFRhcmdldDogX3RoaXMuX2VsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNob3duRXZlbnQgPSAkJCQxLkV2ZW50KEV2ZW50LlNIT1dOLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRlZFRhcmdldDogcHJldmlvdXNcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCQkMShwcmV2aW91cykudHJpZ2dlcihoaWRkZW5FdmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkJCQxKF90aGlzLl9lbGVtZW50KS50cmlnZ2VyKHNob3duRXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2FjdGl2YXRlKHRhcmdldCwgdGFyZ2V0LnBhcmVudE5vZGUsIGNvbXBsZXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLmRpc3Bvc2UgPSBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgICAgICAgICAgICAgICAgICAkJCQxLnJlbW92ZURhdGEodGhpcy5fZWxlbWVudCwgREFUQV9LRVkpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9OyAvLyBQcml2YXRlXG5cblxuICAgICAgICAgICAgICAgIF9wcm90by5fYWN0aXZhdGUgPSBmdW5jdGlvbiBfYWN0aXZhdGUoZWxlbWVudCwgY29udGFpbmVyLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aXZlRWxlbWVudHM7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRhaW5lci5ub2RlTmFtZSA9PT0gJ1VMJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlRWxlbWVudHMgPSAkJCQxKGNvbnRhaW5lcikuZmluZChTZWxlY3Rvci5BQ1RJVkVfVUwpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlRWxlbWVudHMgPSAkJCQxKGNvbnRhaW5lcikuY2hpbGRyZW4oU2VsZWN0b3IuQUNUSVZFKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBhY3RpdmUgPSBhY3RpdmVFbGVtZW50c1swXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlzVHJhbnNpdGlvbmluZyA9IGNhbGxiYWNrICYmIFV0aWwuc3VwcG9ydHNUcmFuc2l0aW9uRW5kKCkgJiYgYWN0aXZlICYmICQkJDEoYWN0aXZlKS5oYXNDbGFzcyhDbGFzc05hbWUuRkFERSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbXBsZXRlID0gZnVuY3Rpb24gY29tcGxldGUoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLl90cmFuc2l0aW9uQ29tcGxldGUoZWxlbWVudCwgYWN0aXZlLCBjYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZSAmJiBpc1RyYW5zaXRpb25pbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQkJDEoYWN0aXZlKS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgY29tcGxldGUpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKFRSQU5TSVRJT05fRFVSQVRJT04pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uX3RyYW5zaXRpb25Db21wbGV0ZSA9IGZ1bmN0aW9uIF90cmFuc2l0aW9uQ29tcGxldGUoZWxlbWVudCwgYWN0aXZlLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkJCQxKGFjdGl2ZSkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLlNIT1cgKyBcIiBcIiArIENsYXNzTmFtZS5BQ1RJVkUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRyb3Bkb3duQ2hpbGQgPSAkJCQxKGFjdGl2ZS5wYXJlbnROb2RlKS5maW5kKFNlbGVjdG9yLkRST1BET1dOX0FDVElWRV9DSElMRClbMF07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkcm9wZG93bkNoaWxkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCQkMShkcm9wZG93bkNoaWxkKS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuQUNUSVZFKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZS5nZXRBdHRyaWJ1dGUoJ3JvbGUnKSA9PT0gJ3RhYicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmUuc2V0QXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgJCQkMShlbGVtZW50KS5hZGRDbGFzcyhDbGFzc05hbWUuQUNUSVZFKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3JvbGUnKSA9PT0gJ3RhYicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBVdGlsLnJlZmxvdyhlbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgJCQkMShlbGVtZW50KS5hZGRDbGFzcyhDbGFzc05hbWUuU0hPVyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQucGFyZW50Tm9kZSAmJiAkJCQxKGVsZW1lbnQucGFyZW50Tm9kZSkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkRST1BET1dOX01FTlUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZHJvcGRvd25FbGVtZW50ID0gJCQkMShlbGVtZW50KS5jbG9zZXN0KFNlbGVjdG9yLkRST1BET1dOKVswXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRyb3Bkb3duRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQkJDEoZHJvcGRvd25FbGVtZW50KS5maW5kKFNlbGVjdG9yLkRST1BET1dOX1RPR0dMRSkuYWRkQ2xhc3MoQ2xhc3NOYW1lLkFDVElWRSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9OyAvLyBTdGF0aWNcblxuXG4gICAgICAgICAgICAgICAgVGFiLl9qUXVlcnlJbnRlcmZhY2UgPSBmdW5jdGlvbiBfalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCQkMSh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gJHRoaXMuZGF0YShEQVRBX0tFWSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBuZXcgVGFiKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmRhdGEoREFUQV9LRVksIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGRhdGFbY29uZmlnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk5vIG1ldGhvZCBuYW1lZCBcXFwiXCIgKyBjb25maWcgKyBcIlxcXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtjb25maWddKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBfY3JlYXRlQ2xhc3MoVGFiLCBudWxsLCBbe1xuICAgICAgICAgICAgICAgICAgICBrZXk6IFwiVkVSU0lPTlwiLFxuICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBWRVJTSU9OO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfV0pO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFRhYjtcbiAgICAgICAgICAgIH0oKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKiBEYXRhIEFwaSBpbXBsZW1lbnRhdGlvblxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICovXG5cblxuICAgICAgICAkJCQxKGRvY3VtZW50KS5vbihFdmVudC5DTElDS19EQVRBX0FQSSwgU2VsZWN0b3IuREFUQV9UT0dHTEUsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICBUYWIuX2pRdWVyeUludGVyZmFjZS5jYWxsKCQkJDEodGhpcyksICdzaG93Jyk7XG4gICAgICAgIH0pO1xuICAgICAgICAvKipcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqIGpRdWVyeVxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICovXG5cbiAgICAgICAgJCQkMS5mbltOQU1FXSA9IFRhYi5falF1ZXJ5SW50ZXJmYWNlO1xuICAgICAgICAkJCQxLmZuW05BTUVdLkNvbnN0cnVjdG9yID0gVGFiO1xuXG4gICAgICAgICQkJDEuZm5bTkFNRV0ubm9Db25mbGljdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCQkMS5mbltOQU1FXSA9IEpRVUVSWV9OT19DT05GTElDVDtcbiAgICAgICAgICAgIHJldHVybiBUYWIuX2pRdWVyeUludGVyZmFjZTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gVGFiO1xuICAgIH0oJCk7XG5cbiAgICB2YXIgVXRpbCQyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICogUHJpdmF0ZSBUcmFuc2l0aW9uRW5kIEhlbHBlcnNcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgdHJhbnNpdGlvbkVuZCA9IGZhbHNlO1xuICAgICAgICB2YXIgX3RyYW5zaXRpb25FbmRTZWxlY3RvciA9IFwiXCI7XG4gICAgICAgIHZhciBUcmFuc2l0aW9uRW5kRXZlbnQgPSB7XG4gICAgICAgICAgICBXZWJraXRUcmFuc2l0aW9uOiBcIndlYmtpdFRyYW5zaXRpb25FbmRcIixcbiAgICAgICAgICAgIE1velRyYW5zaXRpb246IFwidHJhbnNpdGlvbmVuZFwiLFxuICAgICAgICAgICAgT1RyYW5zaXRpb246IFwib1RyYW5zaXRpb25FbmQgb3RyYW5zaXRpb25lbmRcIixcbiAgICAgICAgICAgIHRyYW5zaXRpb246IFwidHJhbnNpdGlvbmVuZFwiXG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gdHJhbnNpdGlvbkVuZFRlc3QoKSB7XG4gICAgICAgICAgICBpZiAod2luZG93LlFVbml0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYm1kXCIpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBuYW1lIGluIFRyYW5zaXRpb25FbmRFdmVudCkge1xuICAgICAgICAgICAgICAgIGlmIChlbC5zdHlsZVtuYW1lXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBUcmFuc2l0aW9uRW5kRXZlbnRbbmFtZV07IC8vIHsgZW5kOiBUcmFuc2l0aW9uRW5kRXZlbnRbbmFtZV0gfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0VHJhbnNpdGlvbkVuZFN1cHBvcnQoKSB7XG4gICAgICAgICAgICB0cmFuc2l0aW9uRW5kID0gdHJhbnNpdGlvbkVuZFRlc3QoKTsgLy8gZ2VuZXJhdGUgYSBjb25jYXRlbmF0ZWQgdHJhbnNpdGlvbiBlbmQgZXZlbnQgc2VsZWN0b3JcblxuICAgICAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBUcmFuc2l0aW9uRW5kRXZlbnQpIHtcbiAgICAgICAgICAgICAgICBfdHJhbnNpdGlvbkVuZFNlbGVjdG9yICs9IFwiIFwiICsgVHJhbnNpdGlvbkVuZEV2ZW50W25hbWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKiBQdWJsaWMgVXRpbCBBcGlcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICovXG5cblxuICAgICAgICB2YXIgVXRpbCA9IHtcbiAgICAgICAgICAgIHRyYW5zaXRpb25FbmRTdXBwb3J0ZWQ6IGZ1bmN0aW9uIHRyYW5zaXRpb25FbmRTdXBwb3J0ZWQoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zaXRpb25FbmQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdHJhbnNpdGlvbkVuZFNlbGVjdG9yOiBmdW5jdGlvbiB0cmFuc2l0aW9uRW5kU2VsZWN0b3IoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90cmFuc2l0aW9uRW5kU2VsZWN0b3I7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaXNDaGFyOiBmdW5jdGlvbiBpc0NoYXIoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGV2ZW50LndoaWNoID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGV2ZW50LndoaWNoID09PSBcIm51bWJlclwiICYmIGV2ZW50LndoaWNoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWV2ZW50LmN0cmxLZXkgJiYgIWV2ZW50Lm1ldGFLZXkgJiYgIWV2ZW50LmFsdEtleSAmJiBldmVudC53aGljaCAhPT0gOCAmJiAvLyBiYWNrc3BhY2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LndoaWNoICE9PSA5ICYmIC8vIHRhYlxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQud2hpY2ggIT09IDEzICYmIC8vIGVudGVyXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC53aGljaCAhPT0gMTYgJiYgLy8gc2hpZnRcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LndoaWNoICE9PSAxNyAmJiAvLyBjdHJsXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC53aGljaCAhPT0gMjAgJiYgLy8gY2FwcyBsb2NrXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC53aGljaCAhPT0gMjcgLy8gZXNjYXBlXG4gICAgICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXNzZXJ0OiBmdW5jdGlvbiBhc3NlcnQoJGVsZW1lbnQsIGludmFsaWRUZXN0LCBtZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGludmFsaWRUZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghJGVsZW1lbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnQuY3NzKFwiYm9yZGVyXCIsIFwiMXB4IHNvbGlkIHJlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSwgJGVsZW1lbnQpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGVcblxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZXNjcmliZTogZnVuY3Rpb24gZGVzY3JpYmUoJGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoJGVsZW1lbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ1bmRlZmluZWRcIjtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCRlbGVtZW50Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCIobm8gbWF0Y2hpbmcgZWxlbWVudHMpXCI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuICRlbGVtZW50WzBdLm91dGVySFRNTC5zcGxpdChcIj5cIilbMF0gKyBcIj5cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgc2V0VHJhbnNpdGlvbkVuZFN1cHBvcnQoKTtcbiAgICAgICAgcmV0dXJuIFV0aWw7XG4gICAgfShqUXVlcnkpO1xuXG4gICAgdmFyIEJhc2UgPSBmdW5jdGlvbigkJCQxKSB7XG4gICAgICAgIHZhciBDbGFzc05hbWUgPSB7XG4gICAgICAgICAgICBCTURfRk9STV9HUk9VUDogXCJibWQtZm9ybS1ncm91cFwiLFxuICAgICAgICAgICAgSVNfRklMTEVEOiBcImlzLWZpbGxlZFwiLFxuICAgICAgICAgICAgSVNfRk9DVVNFRDogXCJpcy1mb2N1c2VkXCJcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIFNlbGVjdG9yID0ge1xuICAgICAgICAgICAgQk1EX0ZPUk1fR1JPVVA6IFwiLlwiICsgQ2xhc3NOYW1lLkJNRF9GT1JNX0dST1VQXG4gICAgICAgIH07XG4gICAgICAgIHZhciBEZWZhdWx0ID0ge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICogQ2xhc3MgRGVmaW5pdGlvblxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICovXG5cbiAgICAgICAgdmFyIEJhc2UgPVxuICAgICAgICAgICAgLyojX19QVVJFX18qL1xuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gZWxlbWVudFxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSBjb25maWdcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gcHJvcGVydGllcyAtIGFueXRoaW5nIHRoYXQgbmVlZHMgdG8gYmUgc2V0IGFzIHRoaXNba2V5XSA9IHZhbHVlLiAgV29ya3MgYXJvdW5kIHRoZSBuZWVkIHRvIGNhbGwgYHN1cGVyYCBiZWZvcmUgdXNpbmcgYHRoaXNgXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gQmFzZSgkZWxlbWVudCwgY29uZmlnLCBwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXMgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGVsZW1lbnQgPSAkZWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcgPSAkJCQxLmV4dGVuZCh0cnVlLCB7fSwgRGVmYXVsdCwgY29uZmlnKTsgLy8gc2V0IHByb3BlcnRpZXMgZm9yIHVzZSBpbiB0aGUgY29uc3RydWN0b3IgaW5pdGlhbGl6YXRpb25cblxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gcHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXldID0gcHJvcGVydGllc1trZXldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIF9wcm90byA9IEJhc2UucHJvdG90eXBlO1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLmRpc3Bvc2UgPSBmdW5jdGlvbiBkaXNwb3NlKGRhdGFLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kZWxlbWVudC5kYXRhKGRhdGFLZXksIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbGVtZW50ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcgPSBudWxsO1xuICAgICAgICAgICAgICAgIH07IC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgICAgIC8vIHByb3RlY3RlZFxuXG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uYWRkRm9ybUdyb3VwRm9jdXMgPSBmdW5jdGlvbiBhZGRGb3JtR3JvdXBGb2N1cygpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLiRlbGVtZW50LnByb3AoXCJkaXNhYmxlZFwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kYm1kRm9ybUdyb3VwLmFkZENsYXNzKENsYXNzTmFtZS5JU19GT0NVU0VEKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBfcHJvdG8ucmVtb3ZlRm9ybUdyb3VwRm9jdXMgPSBmdW5jdGlvbiByZW1vdmVGb3JtR3JvdXBGb2N1cygpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kYm1kRm9ybUdyb3VwLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5JU19GT0NVU0VEKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLnJlbW92ZUlzRmlsbGVkID0gZnVuY3Rpb24gcmVtb3ZlSXNGaWxsZWQoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGJtZEZvcm1Hcm91cC5yZW1vdmVDbGFzcyhDbGFzc05hbWUuSVNfRklMTEVEKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLmFkZElzRmlsbGVkID0gZnVuY3Rpb24gYWRkSXNGaWxsZWQoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGJtZEZvcm1Hcm91cC5hZGRDbGFzcyhDbGFzc05hbWUuSVNfRklMTEVEKTtcbiAgICAgICAgICAgICAgICB9OyAvLyBGaW5kIGJtZC1mb3JtLWdyb3VwXG5cblxuICAgICAgICAgICAgICAgIF9wcm90by5maW5kTWRiRm9ybUdyb3VwID0gZnVuY3Rpb24gZmluZE1kYkZvcm1Hcm91cChyYWlzZUVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyYWlzZUVycm9yID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG1mZyA9IHRoaXMuJGVsZW1lbnQuY2xvc2VzdChTZWxlY3Rvci5CTURfRk9STV9HUk9VUCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG1mZy5sZW5ndGggPT09IDAgJiYgcmFpc2VFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCQkMS5lcnJvcihcIkZhaWxlZCB0byBmaW5kIFwiICsgU2VsZWN0b3IuQk1EX0ZPUk1fR1JPVVAgKyBcIiBmb3IgXCIgKyBVdGlsJDIuZGVzY3JpYmUodGhpcy4kZWxlbWVudCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1mZztcbiAgICAgICAgICAgICAgICB9OyAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgICAgICAvLyBwcml2YXRlXG4gICAgICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICAgICAgLy8gc3RhdGljXG5cblxuICAgICAgICAgICAgICAgIHJldHVybiBCYXNlO1xuICAgICAgICAgICAgfSgpO1xuXG4gICAgICAgIHJldHVybiBCYXNlO1xuICAgIH0oalF1ZXJ5KTtcblxuICAgIHZhciBCYXNlSW5wdXQgPSBmdW5jdGlvbigkJCQxKSB7XG4gICAgICAgIHZhciBDbGFzc05hbWUgPSB7XG4gICAgICAgICAgICBGT1JNX0dST1VQOiBcImZvcm0tZ3JvdXBcIixcbiAgICAgICAgICAgIEJNRF9GT1JNX0dST1VQOiBcImJtZC1mb3JtLWdyb3VwXCIsXG4gICAgICAgICAgICBCTURfTEFCRUw6IFwiYm1kLWxhYmVsXCIsXG4gICAgICAgICAgICBCTURfTEFCRUxfU1RBVElDOiBcImJtZC1sYWJlbC1zdGF0aWNcIixcbiAgICAgICAgICAgIEJNRF9MQUJFTF9QTEFDRUhPTERFUjogXCJibWQtbGFiZWwtcGxhY2Vob2xkZXJcIixcbiAgICAgICAgICAgIEJNRF9MQUJFTF9GTE9BVElORzogXCJibWQtbGFiZWwtZmxvYXRpbmdcIixcbiAgICAgICAgICAgIEhBU19EQU5HRVI6IFwiaGFzLWRhbmdlclwiLFxuICAgICAgICAgICAgSVNfRklMTEVEOiBcImlzLWZpbGxlZFwiLFxuICAgICAgICAgICAgSVNfRk9DVVNFRDogXCJpcy1mb2N1c2VkXCIsXG4gICAgICAgICAgICBJTlBVVF9HUk9VUDogXCJpbnB1dC1ncm91cFwiXG4gICAgICAgIH07XG4gICAgICAgIHZhciBTZWxlY3RvciA9IHtcbiAgICAgICAgICAgIEZPUk1fR1JPVVA6IFwiLlwiICsgQ2xhc3NOYW1lLkZPUk1fR1JPVVAsXG4gICAgICAgICAgICBCTURfRk9STV9HUk9VUDogXCIuXCIgKyBDbGFzc05hbWUuQk1EX0ZPUk1fR1JPVVAsXG4gICAgICAgICAgICBCTURfTEFCRUxfV0lMRENBUkQ6IFwibGFiZWxbY2xhc3NePSdcIiArIENsYXNzTmFtZS5CTURfTEFCRUwgKyBcIiddLCBsYWJlbFtjbGFzcyo9JyBcIiArIENsYXNzTmFtZS5CTURfTEFCRUwgKyBcIiddXCIgLy8gbWF0Y2ggYW55IGxhYmVsIHZhcmlhbnQgaWYgc3BlY2lmaWVkXG5cbiAgICAgICAgfTtcbiAgICAgICAgdmFyIERlZmF1bHQgPSB7XG4gICAgICAgICAgICB2YWxpZGF0ZTogZmFsc2UsXG4gICAgICAgICAgICBmb3JtR3JvdXA6IHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBibWRGb3JtR3JvdXA6IHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogXCI8c3BhbiBjbGFzcz0nXCIgKyBDbGFzc05hbWUuQk1EX0ZPUk1fR1JPVVAgKyBcIic+PC9zcGFuPlwiLFxuICAgICAgICAgICAgICAgIGNyZWF0ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAvLyBjcmVhdGUgYSB3cmFwcGVyIGlmIGZvcm0tZ3JvdXAgbm90IGZvdW5kXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUgLy8gbm90IHJlY29tbWVuZGVkIHRvIHR1cm4gdGhpcyBvZmYsIG9ubHkgdXNlZCBmb3IgaW5saW5lIGNvbXBvbmVudHNcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGxhYmVsOiB7XG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIC8vIFByaW9yaXRpemVkIGZpbmQgb3JkZXIgZm9yIHJlc29sdmluZyB0aGUgbGFiZWwgdG8gYmUgdXNlZCBhcyBhbiBibWQtbGFiZWwgaWYgbm90IHNwZWNpZmllZCBpbiB0aGUgbWFya3VwXG4gICAgICAgICAgICAgICAgLy8gIC0gYSBmdW5jdGlvbih0aGlzQ29tcG9uZW50KTsgb3JcbiAgICAgICAgICAgICAgICAvLyAgLSBhIHN0cmluZyBzZWxlY3RvciB1c2VkIGxpa2UgJGJtZEZvcm1Hcm91cC5maW5kKHNlbGVjdG9yKVxuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgLy8gTm90ZSB0aGlzIG9ubHkgcnVucyBpZiAkYm1kRm9ybUdyb3VwLmZpbmQoU2VsZWN0b3IuQk1EX0xBQkVMX1dJTERDQVJEKSBmYWlscyB0byBmaW5kIGEgbGFiZWwgKGFzIGF1dGhvcmVkIGluIHRoZSBtYXJrdXApXG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICBzZWxlY3RvcnM6IFtcIi5mb3JtLWNvbnRyb2wtbGFiZWxcIiwgLy8gaW4gdGhlIGNhc2Ugb2YgaG9yaXpvbnRhbCBvciBpbmxpbmUgZm9ybXMsIHRoaXMgd2lsbCBiZSBtYXJrZWRcbiAgICAgICAgICAgICAgICAgICAgXCI+IGxhYmVsXCIgLy8gdXN1YWwgY2FzZSBmb3IgdGV4dCBpbnB1dHMsIGZpcnN0IGNoaWxkLiAgRGVlcGVyIHdvdWxkIGZpbmQgdG9nZ2xlIGxhYmVscyBzbyBkb24ndCBkbyB0aGF0LlxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBDbGFzc05hbWUuQk1EX0xBQkVMX1NUQVRJQ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlcXVpcmVkQ2xhc3NlczogW10sXG4gICAgICAgICAgICBpbnZhbGlkQ29tcG9uZW50TWF0Y2hlczogW10sXG4gICAgICAgICAgICBjb252ZXJ0SW5wdXRTaXplVmFyaWF0aW9uczogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgICB2YXIgRm9ybUNvbnRyb2xTaXplTWFya2VycyA9IHtcbiAgICAgICAgICAgIFwiZm9ybS1jb250cm9sLWxnXCI6IFwiYm1kLWZvcm0tZ3JvdXAtbGdcIixcbiAgICAgICAgICAgIFwiZm9ybS1jb250cm9sLXNtXCI6IFwiYm1kLWZvcm0tZ3JvdXAtc21cIlxuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqIENsYXNzIERlZmluaXRpb25cbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqL1xuXG4gICAgICAgIHZhciBCYXNlSW5wdXQgPVxuICAgICAgICAgICAgLyojX19QVVJFX18qL1xuICAgICAgICAgICAgZnVuY3Rpb24oX0Jhc2UpIHtcbiAgICAgICAgICAgICAgICBfaW5oZXJpdHNMb29zZShCYXNlSW5wdXQsIF9CYXNlKTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIGVsZW1lbnRcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gY29uZmlnXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHByb3BlcnRpZXMgLSBhbnl0aGluZyB0aGF0IG5lZWRzIHRvIGJlIHNldCBhcyB0aGlzW2tleV0gPSB2YWx1ZS4gIFdvcmtzIGFyb3VuZCB0aGUgbmVlZCB0byBjYWxsIGBzdXBlcmAgYmVmb3JlIHVzaW5nIGB0aGlzYFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEJhc2VJbnB1dCgkZWxlbWVudCwgY29uZmlnLCBwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfdGhpcztcblxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcyA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzID0ge307XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBfdGhpcyA9IF9CYXNlLmNhbGwodGhpcywgJGVsZW1lbnQsICQkJDEuZXh0ZW5kKHRydWUsIHt9LCBEZWZhdWx0LCBjb25maWcpLCBwcm9wZXJ0aWVzKSB8fCB0aGlzOyAvLyBFbmZvcmNlIG5vIG92ZXJsYXAgYmV0d2VlbiBjb21wb25lbnRzIHRvIHByZXZlbnQgc2lkZSBlZmZlY3RzXG5cbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuX3JlamVjdEludmFsaWRDb21wb25lbnRNYXRjaGVzKCk7IC8vIEVuZm9yY2UgZXhwZWN0ZWQgc3RydWN0dXJlIChpZiBhbnkpXG5cblxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZWplY3RXaXRob3V0UmVxdWlyZWRTdHJ1Y3R1cmUoKTsgLy8gRW5mb3JjZSByZXF1aXJlZCBjbGFzc2VzIGZvciBhIGNvbnNpc3RlbnQgcmVuZGVyaW5nXG5cblxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5fcmVqZWN0V2l0aG91dFJlcXVpcmVkQ2xhc3NlcygpOyAvLyBSZXNvbHZlIHRoZSBmb3JtLWdyb3VwIGZpcnN0LCBpdCB3aWxsIGJlIHVzZWQgZm9yIGJtZC1mb3JtLWdyb3VwIGlmIHBvc3NpYmxlXG4gICAgICAgICAgICAgICAgICAgIC8vICAgbm90ZTogZGlmZmVyZW50IGNvbXBvbmVudHMgaGF2ZSBkaWZmZXJlbnQgcnVsZXNcblxuXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLiRmb3JtR3JvdXAgPSBfdGhpcy5maW5kRm9ybUdyb3VwKF90aGlzLmNvbmZpZy5mb3JtR3JvdXAucmVxdWlyZWQpOyAvLyBXaWxsIGFkZCBibWQtZm9ybS1ncm91cCB0byBmb3JtLWdyb3VwIG9yIGNyZWF0ZSBhbiBibWQtZm9ybS1ncm91cFxuICAgICAgICAgICAgICAgICAgICAvLyAgUGVyZm9ybWFuY2UgTm90ZTogZm9yIHRob3NlIGZvcm1zIHRoYXQgYXJlIHJlYWxseSBwZXJmb3JtYW5jZSBkcml2ZW4sIGNyZWF0ZSB0aGUgbWFya3VwIHdpdGggdGhlIC5ibWQtZm9ybS1ncm91cCB0byBhdm9pZFxuICAgICAgICAgICAgICAgICAgICAvLyAgICByZW5kZXJpbmcgY2hhbmdlcyBvbmNlIGFkZGVkLlxuXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLiRibWRGb3JtR3JvdXAgPSBfdGhpcy5yZXNvbHZlTWRiRm9ybUdyb3VwKCk7IC8vIFJlc29sdmUgYW5kIG1hcmsgdGhlIGJtZExhYmVsIGlmIG5lY2Vzc2FyeSBhcyBkZWZpbmVkIGJ5IHRoZSBjb25maWdcblxuICAgICAgICAgICAgICAgICAgICBfdGhpcy4kYm1kTGFiZWwgPSBfdGhpcy5yZXNvbHZlTWRiTGFiZWwoKTsgLy8gU2lnbmFsIHRvIHRoZSBibWQtZm9ybS1ncm91cCB0aGF0IGEgZm9ybS1jb250cm9sLSogdmFyaWF0aW9uIGlzIGJlaW5nIHVzZWRcblxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZXNvbHZlTWRiRm9ybUdyb3VwU2l6aW5nKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuYWRkRm9jdXNMaXN0ZW5lcigpO1xuXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmFkZENoYW5nZUxpc3RlbmVyKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLiRlbGVtZW50LnZhbCgpICE9IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmFkZElzRmlsbGVkKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIF9wcm90byA9IEJhc2VJbnB1dC5wcm90b3R5cGU7XG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoZGF0YUtleSkge1xuICAgICAgICAgICAgICAgICAgICBfQmFzZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMsIGRhdGFLZXkpO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGJtZEZvcm1Hcm91cCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGZvcm1Hcm91cCA9IG51bGw7XG4gICAgICAgICAgICAgICAgfTsgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICAgICAgLy8gcHJvdGVjdGVkXG5cblxuICAgICAgICAgICAgICAgIF9wcm90by5yZWplY3RXaXRob3V0UmVxdWlyZWRTdHJ1Y3R1cmUgPSBmdW5jdGlvbiByZWplY3RXaXRob3V0UmVxdWlyZWRTdHJ1Y3R1cmUoKSB7IC8vIGltcGxlbWVudFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uYWRkRm9jdXNMaXN0ZW5lciA9IGZ1bmN0aW9uIGFkZEZvY3VzTGlzdGVuZXIoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGVsZW1lbnQub24oXCJmb2N1c1wiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi5hZGRGb3JtR3JvdXBGb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICB9KS5vbihcImJsdXJcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczIucmVtb3ZlRm9ybUdyb3VwRm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIF9wcm90by5hZGRDaGFuZ2VMaXN0ZW5lciA9IGZ1bmN0aW9uIGFkZENoYW5nZUxpc3RlbmVyKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbGVtZW50Lm9uKFwia2V5ZG93biBwYXN0ZVwiLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFV0aWwkMi5pc0NoYXIoZXZlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLmFkZElzRmlsbGVkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pLm9uKFwia2V5dXAgY2hhbmdlXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWFrZSBzdXJlIGVtcHR5IGlzIGFkZGVkIGJhY2sgd2hlbiB0aGVyZSBpcyBhIHByb2dyYW1tYXRpYyB2YWx1ZSBjaGFuZ2UuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgTk9URTogcHJvZ3JhbW1hdGljIGNoYW5naW5nIG9mIHZhbHVlIHVzaW5nICQudmFsKCkgbXVzdCB0cmlnZ2VyIHRoZSBjaGFuZ2UgZXZlbnQgaS5lLiAkLnZhbCgneCcpLnRyaWdnZXIoJ2NoYW5nZScpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMzLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMy5yZW1vdmVJc0ZpbGxlZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMuYWRkSXNGaWxsZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzMy5jb25maWcudmFsaWRhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWYWxpZGF0aW9uIGV2ZW50cyBkbyBub3QgYnViYmxlLCBzbyB0aGV5IG11c3QgYmUgYXR0YWNoZWQgZGlyZWN0bHkgdG8gdGhlIHRleHQ6IGh0dHA6Ly9qc2ZpZGRsZS5uZXQvUEVwUk0vMS9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgRnVydGhlciwgZXZlbiB0aGUgYmluZCBtZXRob2QgaXMgYmVpbmcgY2F1Z2h0LCBidXQgc2luY2Ugd2UgYXJlIGFscmVhZHkgY2FsbGluZyAjY2hlY2tWYWxpZGl0eSBoZXJlLCBqdXN0IGFsdGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gIHRoZSBmb3JtLWdyb3VwIG9uIGNoYW5nZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5PVEU6IEknbSBub3Qgc3VyZSB3ZSBzaG91bGQgYmUgaW50ZXJ2ZW5pbmcgcmVnYXJkaW5nIHZhbGlkYXRpb24sIHRoaXMgc2VlbXMgYmV0dGVyIGFzIGEgUkVBRE1FIGFuZCBzbmlwcGV0IG9mIGNvZGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgIEJVVCwgSSd2ZSBsZWZ0IGl0IGhlcmUgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc1ZhbGlkID0gdHlwZW9mIF90aGlzMy4kZWxlbWVudFswXS5jaGVja1ZhbGlkaXR5ID09PSBcInVuZGVmaW5lZFwiIHx8IF90aGlzMy4kZWxlbWVudFswXS5jaGVja1ZhbGlkaXR5KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNWYWxpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMucmVtb3ZlSGFzRGFuZ2VyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLmFkZEhhc0RhbmdlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIF9wcm90by5hZGRIYXNEYW5nZXIgPSBmdW5jdGlvbiBhZGRIYXNEYW5nZXIoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGJtZEZvcm1Hcm91cC5hZGRDbGFzcyhDbGFzc05hbWUuSEFTX0RBTkdFUik7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIF9wcm90by5yZW1vdmVIYXNEYW5nZXIgPSBmdW5jdGlvbiByZW1vdmVIYXNEYW5nZXIoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGJtZEZvcm1Hcm91cC5yZW1vdmVDbGFzcyhDbGFzc05hbWUuSEFTX0RBTkdFUik7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIF9wcm90by5pc0VtcHR5ID0gZnVuY3Rpb24gaXNFbXB0eSgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGVsZW1lbnQudmFsKCkgPT09IG51bGwgfHwgdGhpcy4kZWxlbWVudC52YWwoKSA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuJGVsZW1lbnQudmFsKCkgPT09IFwiXCI7XG4gICAgICAgICAgICAgICAgfTsgLy8gV2lsbCBhZGQgYm1kLWZvcm0tZ3JvdXAgdG8gZm9ybS1ncm91cCBvciBjcmVhdGUgYSBibWQtZm9ybS1ncm91cCBpZiBuZWNlc3NhcnlcblxuXG4gICAgICAgICAgICAgICAgX3Byb3RvLnJlc29sdmVNZGJGb3JtR3JvdXAgPSBmdW5jdGlvbiByZXNvbHZlTWRiRm9ybUdyb3VwKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWZnID0gdGhpcy5maW5kTWRiRm9ybUdyb3VwKGZhbHNlKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobWZnID09PSB1bmRlZmluZWQgfHwgbWZnLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlnLmJtZEZvcm1Hcm91cC5jcmVhdGUgJiYgKHRoaXMuJGZvcm1Hcm91cCA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuJGZvcm1Hcm91cC5sZW5ndGggPT09IDApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgYSBmb3JtLWdyb3VwIGRvZXNuJ3QgZXhpc3QgKG5vdCByZWNvbW1lbmRlZCksIHRha2UgYSBndWVzcyBhbmQgd3JhcCB0aGUgZWxlbWVudCAoYXNzdW1pbmcgbm8gbGFiZWwpLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICBub3RlOiBpdCdzIHBvc3NpYmxlIHRvIG1ha2UgdGhpcyBzbWFydGVyLCBidXQgSSBuZWVkIHRvIHNlZSB2YWxpZCBjYXNlcyBiZWZvcmUgYWRkaW5nIGFueSBjb21wbGV4aXR5LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgbWF5IGJlIGFuIGlucHV0LWdyb3VwLCB3cmFwIHRoYXQgaW5zdGVhZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm91dGVyRWxlbWVudCgpLnBhcmVudCgpLmhhc0NsYXNzKENsYXNzTmFtZS5JTlBVVF9HUk9VUCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vdXRlckVsZW1lbnQoKS5wYXJlbnQoKS53cmFwKHRoaXMuY29uZmlnLmJtZEZvcm1Hcm91cC50ZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vdXRlckVsZW1lbnQoKS53cmFwKHRoaXMuY29uZmlnLmJtZEZvcm1Hcm91cC50ZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhIGZvcm0tZ3JvdXAgZG9lcyBleGlzdCwgYWRkIG91ciBtYXJrZXIgY2xhc3MgdG8gaXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRmb3JtR3JvdXAuYWRkQ2xhc3MoQ2xhc3NOYW1lLkJNRF9GT1JNX0dST1VQKTsgLy8gT0xEOiBtYXkgd2FudCB0byBpbXBsZW1lbnQgdGhpcyBhZnRlciBhbGwsIHNlZSBob3cgdGhlIHN0eWxpbmcgdHVybnMgb3V0LCBidXQgdXNpbmcgYW4gZXhpc3RpbmcgZm9ybS1ncm91cCBpcyBsZXNzIG1hbmlwdWxhdGlvbiBvZiB0aGUgZG9tIGFuZCB0aGVyZWZvcmUgcHJlZmVyYWJsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEEgZm9ybS1ncm91cCBkb2VzIGV4aXN0LCBzbyBhZGQgYW4gYm1kLWZvcm0tZ3JvdXAgd3JhcHBpbmcgaXQncyBpbnRlcm5hbCBjb250ZW50c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vZmcud3JhcElubmVyKHRoaXMuY29uZmlnLmJtZEZvcm1Hcm91cC50ZW1wbGF0ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgbWZnID0gdGhpcy5maW5kTWRiRm9ybUdyb3VwKHRoaXMuY29uZmlnLmJtZEZvcm1Hcm91cC5yZXF1aXJlZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWZnO1xuICAgICAgICAgICAgICAgIH07IC8vIERlbWFyY2F0aW9uIGVsZW1lbnQgKGUuZy4gZmlyc3QgY2hpbGQgb2YgYSBmb3JtLWdyb3VwKVxuICAgICAgICAgICAgICAgIC8vICBTdWJjbGFzc2VzIHN1Y2ggYXMgZmlsZSBpbnB1dHMgbWF5IGhhdmUgZGlmZmVyZW50IHN0cnVjdHVyZXNcblxuXG4gICAgICAgICAgICAgICAgX3Byb3RvLm91dGVyRWxlbWVudCA9IGZ1bmN0aW9uIG91dGVyRWxlbWVudCgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgfTsgLy8gV2lsbCBhZGQgYm1kLWxhYmVsIHRvIGJtZC1mb3JtLWdyb3VwIGlmIG5vdCBhbHJlYWR5IHNwZWNpZmllZFxuXG5cbiAgICAgICAgICAgICAgICBfcHJvdG8ucmVzb2x2ZU1kYkxhYmVsID0gZnVuY3Rpb24gcmVzb2x2ZU1kYkxhYmVsKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGFiZWwgPSB0aGlzLiRibWRGb3JtR3JvdXAuZmluZChTZWxlY3Rvci5CTURfTEFCRUxfV0lMRENBUkQpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChsYWJlbCA9PT0gdW5kZWZpbmVkIHx8IGxhYmVsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UgbmVlZCB0byBmaW5kIGl0IGJhc2VkIG9uIHRoZSBjb25maWd1cmVkIHNlbGVjdG9yc1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWwgPSB0aGlzLmZpbmRNZGJMYWJlbCh0aGlzLmNvbmZpZy5sYWJlbC5yZXF1aXJlZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsYWJlbCA9PT0gdW5kZWZpbmVkIHx8IGxhYmVsLmxlbmd0aCA9PT0gMCkgeyAvLyBubyBsYWJlbCBmb3VuZCwgYW5kIGZpbmRlciBkaWQgbm90IHJlcXVpcmUgb25lXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGEgY2FuZGlkYXRlIGxhYmVsIHdhcyBmb3VuZCwgYWRkIHRoZSBjb25maWd1cmVkIGRlZmF1bHQgY2xhc3MgbmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsLmFkZENsYXNzKHRoaXMuY29uZmlnLmxhYmVsLmNsYXNzTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGFiZWw7XG4gICAgICAgICAgICAgICAgfTsgLy8gRmluZCBibWQtbGFiZWwgdmFyaWFudCBiYXNlZCBvbiB0aGUgY29uZmlnIHNlbGVjdG9yc1xuXG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uZmluZE1kYkxhYmVsID0gZnVuY3Rpb24gZmluZE1kYkxhYmVsKHJhaXNlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJhaXNlRXJyb3IgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2VFcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgbGFiZWwgPSBudWxsOyAvLyB1c2UgdGhlIHNwZWNpZmllZCBzZWxlY3RvciBvcmRlclxuXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvciA9IHRoaXMuY29uZmlnLmxhYmVsLnNlbGVjdG9ycywgX2lzQXJyYXkgPSBBcnJheS5pc0FycmF5KF9pdGVyYXRvciksIF9pID0gMCwgX2l0ZXJhdG9yID0gX2lzQXJyYXkgPyBfaXRlcmF0b3IgOiBfaXRlcmF0b3JbU3ltYm9sLml0ZXJhdG9yXSgpOzspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfcmVmO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX2lzQXJyYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX2kgPj0gX2l0ZXJhdG9yLmxlbmd0aCkgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlZiA9IF9pdGVyYXRvcltfaSsrXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2kgPSBfaXRlcmF0b3IubmV4dCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfaS5kb25lKSBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVmID0gX2kudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfc2VsZWN0b3IgPSBfcmVmO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCQkMS5pc0Z1bmN0aW9uKF9zZWxlY3RvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbCA9IF9zZWxlY3Rvcih0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWwgPSB0aGlzLiRibWRGb3JtR3JvdXAuZmluZChfc2VsZWN0b3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGFiZWwgIT09IHVuZGVmaW5lZCAmJiBsYWJlbC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAobGFiZWwubGVuZ3RoID09PSAwICYmIHJhaXNlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQkJDEuZXJyb3IoXCJGYWlsZWQgdG8gZmluZCBcIiArIFNlbGVjdG9yLkJNRF9MQUJFTF9XSUxEQ0FSRCArIFwiIHdpdGhpbiBmb3JtLWdyb3VwIGZvciBcIiArIFV0aWwkMi5kZXNjcmliZSh0aGlzLiRlbGVtZW50KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGFiZWw7XG4gICAgICAgICAgICAgICAgfTsgLy8gRmluZCBibWQtZm9ybS1ncm91cFxuXG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uZmluZEZvcm1Hcm91cCA9IGZ1bmN0aW9uIGZpbmRGb3JtR3JvdXAocmFpc2VFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmFpc2VFcnJvciA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByYWlzZUVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBmZyA9IHRoaXMuJGVsZW1lbnQuY2xvc2VzdChTZWxlY3Rvci5GT1JNX0dST1VQKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZmcubGVuZ3RoID09PSAwICYmIHJhaXNlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQkJDEuZXJyb3IoXCJGYWlsZWQgdG8gZmluZCBcIiArIFNlbGVjdG9yLkZPUk1fR1JPVVAgKyBcIiBmb3IgXCIgKyBVdGlsJDIuZGVzY3JpYmUodGhpcy4kZWxlbWVudCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZnO1xuICAgICAgICAgICAgICAgIH07IC8vIER1ZSB0byB0aGUgaW50ZXJjb25uZWN0ZWQgbmF0dXJlIG9mIGxhYmVscy9pbnB1dHMvaGVscC1ibG9ja3MsIHNpZ25hbCB0aGUgYm1kLWZvcm0tZ3JvdXAtKiBzaXplIHZhcmlhdGlvbiBiYXNlZCBvblxuICAgICAgICAgICAgICAgIC8vICBhIGZvdW5kIGZvcm0tY29udHJvbC0qIHNpemVcblxuXG4gICAgICAgICAgICAgICAgX3Byb3RvLnJlc29sdmVNZGJGb3JtR3JvdXBTaXppbmcgPSBmdW5jdGlvbiByZXNvbHZlTWRiRm9ybUdyb3VwU2l6aW5nKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY29uZmlnLmNvbnZlcnRJbnB1dFNpemVWYXJpYXRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH0gLy8gTW9kaWZpY2F0aW9uIC0gQ2hhbmdlIHRleHQtc20vbGcgdG8gZm9ybS1ncm91cC1zbS9sZyBpbnN0ZWFkIChwcmVmZXJyZWQgc3RhbmRhcmQgYW5kIHNpbXBsZXIgY3NzL2xlc3MgdmFyaWFudHMpXG5cblxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpbnB1dFNpemUgaW4gRm9ybUNvbnRyb2xTaXplTWFya2Vycykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoaW5wdXRTaXplKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcyhpbnB1dFNpemUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kYm1kRm9ybUdyb3VwLmFkZENsYXNzKEZvcm1Db250cm9sU2l6ZU1hcmtlcnNbaW5wdXRTaXplXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9OyAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgICAgICAvLyBwcml2YXRlXG5cblxuICAgICAgICAgICAgICAgIF9wcm90by5fcmVqZWN0SW52YWxpZENvbXBvbmVudE1hdGNoZXMgPSBmdW5jdGlvbiBfcmVqZWN0SW52YWxpZENvbXBvbmVudE1hdGNoZXMoKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjIgPSB0aGlzLmNvbmZpZy5pbnZhbGlkQ29tcG9uZW50TWF0Y2hlcywgX2lzQXJyYXkyID0gQXJyYXkuaXNBcnJheShfaXRlcmF0b3IyKSwgX2kyID0gMCwgX2l0ZXJhdG9yMiA9IF9pc0FycmF5MiA/IF9pdGVyYXRvcjIgOiBfaXRlcmF0b3IyW1N5bWJvbC5pdGVyYXRvcl0oKTs7KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3JlZjI7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfaXNBcnJheTIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX2kyID49IF9pdGVyYXRvcjIubGVuZ3RoKSBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVmMiA9IF9pdGVyYXRvcjJbX2kyKytdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaTIgPSBfaXRlcmF0b3IyLm5leHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX2kyLmRvbmUpIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWYyID0gX2kyLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX290aGVyQ29tcG9uZW50ID0gX3JlZjI7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9vdGhlckNvbXBvbmVudC5yZWplY3RNYXRjaCh0aGlzLmNvbnN0cnVjdG9yLm5hbWUsIHRoaXMuJGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIF9wcm90by5fcmVqZWN0V2l0aG91dFJlcXVpcmVkQ2xhc3NlcyA9IGZ1bmN0aW9uIF9yZWplY3RXaXRob3V0UmVxdWlyZWRDbGFzc2VzKCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IzID0gdGhpcy5jb25maWcucmVxdWlyZWRDbGFzc2VzLCBfaXNBcnJheTMgPSBBcnJheS5pc0FycmF5KF9pdGVyYXRvcjMpLCBfaTMgPSAwLCBfaXRlcmF0b3IzID0gX2lzQXJyYXkzID8gX2l0ZXJhdG9yMyA6IF9pdGVyYXRvcjNbU3ltYm9sLml0ZXJhdG9yXSgpOzspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfcmVmMztcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9pc0FycmF5Mykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfaTMgPj0gX2l0ZXJhdG9yMy5sZW5ndGgpIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWYzID0gX2l0ZXJhdG9yM1tfaTMrK107XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pMyA9IF9pdGVyYXRvcjMubmV4dCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfaTMuZG9uZSkgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlZjMgPSBfaTMudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfcmVxdWlyZWRDbGFzcyA9IF9yZWYzO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZvdW5kID0gZmFsc2U7IC8vIGFsbG93IG9uZSBvZiBzZXZlcmFsIGNsYXNzZXMgdG8gYmUgcGFzc2VkIGluIHh8fHlcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9yZXF1aXJlZENsYXNzLmluZGV4T2YoXCJ8fFwiKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb25lT2YgPSBfcmVxdWlyZWRDbGFzcy5zcGxpdChcInx8XCIpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yNCA9IG9uZU9mLCBfaXNBcnJheTQgPSBBcnJheS5pc0FycmF5KF9pdGVyYXRvcjQpLCBfaTQgPSAwLCBfaXRlcmF0b3I0ID0gX2lzQXJyYXk0ID8gX2l0ZXJhdG9yNCA6IF9pdGVyYXRvcjRbU3ltYm9sLml0ZXJhdG9yXSgpOzspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9yZWY0O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfaXNBcnJheTQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfaTQgPj0gX2l0ZXJhdG9yNC5sZW5ndGgpIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlZjQgPSBfaXRlcmF0b3I0W19pNCsrXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pNCA9IF9pdGVyYXRvcjQubmV4dCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9pNC5kb25lKSBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWY0ID0gX2k0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9yZXF1aXJlZENsYXNzMyA9IF9yZWY0O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKF9yZXF1aXJlZENsYXNzMykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKF9yZXF1aXJlZENsYXNzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gLy8gZXJyb3IgaWYgbm90IGZvdW5kXG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQkJDEuZXJyb3IodGhpcy5jb25zdHJ1Y3Rvci5uYW1lICsgXCIgZWxlbWVudDogXCIgKyBVdGlsJDIuZGVzY3JpYmUodGhpcy4kZWxlbWVudCkgKyBcIiByZXF1aXJlcyBjbGFzczogXCIgKyBfcmVxdWlyZWRDbGFzcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9OyAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgICAgICAvLyBzdGF0aWNcblxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIEJhc2VJbnB1dDtcbiAgICAgICAgICAgIH0oQmFzZSk7XG5cbiAgICAgICAgcmV0dXJuIEJhc2VJbnB1dDtcbiAgICB9KGpRdWVyeSk7XG5cbiAgICB2YXIgQmFzZVNlbGVjdGlvbiA9IGZ1bmN0aW9uKCQkJDEpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKiBDb25zdGFudHNcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgRGVmYXVsdCA9IHtcbiAgICAgICAgICAgIGxhYmVsOiB7XG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlIC8vIFByaW9yaXRpemVkIGZpbmQgb3JkZXIgZm9yIHJlc29sdmluZyB0aGUgbGFiZWwgdG8gYmUgdXNlZCBhcyBhbiBibWQtbGFiZWwgaWYgbm90IHNwZWNpZmllZCBpbiB0aGUgbWFya3VwXG4gICAgICAgICAgICAgICAgLy8gIC0gYSBmdW5jdGlvbih0aGlzQ29tcG9uZW50KTsgb3JcbiAgICAgICAgICAgICAgICAvLyAgLSBhIHN0cmluZyBzZWxlY3RvciB1c2VkIGxpa2UgJGJtZEZvcm1Hcm91cC5maW5kKHNlbGVjdG9yKVxuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgLy8gTm90ZSB0aGlzIG9ubHkgcnVucyBpZiAkYm1kRm9ybUdyb3VwLmZpbmQoU2VsZWN0b3IuQk1EX0xBQkVMX1dJTERDQVJEKSBmYWlscyB0byBmaW5kIGEgbGFiZWwgKGFzIGF1dGhvcmVkIGluIHRoZSBtYXJrdXApXG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAvL3NlbGVjdG9yczogW1xuICAgICAgICAgICAgICAgIC8vICBgLmZvcm0tY29udHJvbC1sYWJlbGAsIC8vIGluIHRoZSBjYXNlIG9mIGhvcml6b250YWwgb3IgaW5saW5lIGZvcm1zLCB0aGlzIHdpbGwgYmUgbWFya2VkXG4gICAgICAgICAgICAgICAgLy8gIGA+IGxhYmVsYCAvLyB1c3VhbCBjYXNlIGZvciB0ZXh0IGlucHV0c1xuICAgICAgICAgICAgICAgIC8vXVxuXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHZhciBTZWxlY3RvciA9IHtcbiAgICAgICAgICAgIExBQkVMOiBcImxhYmVsXCJcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKiBDbGFzcyBEZWZpbml0aW9uXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKi9cblxuICAgICAgICB2YXIgQmFzZVNlbGVjdGlvbiA9XG4gICAgICAgICAgICAvKiNfX1BVUkVfXyovXG4gICAgICAgICAgICBmdW5jdGlvbihfQmFzZUlucHV0KSB7XG4gICAgICAgICAgICAgICAgX2luaGVyaXRzTG9vc2UoQmFzZVNlbGVjdGlvbiwgX0Jhc2VJbnB1dCk7XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBCYXNlU2VsZWN0aW9uKCRlbGVtZW50LCBjb25maWcsIHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF90aGlzO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIHByb3BlcnRpZXMgPSB7aW5wdXRUeXBlOiBjaGVja2JveCwgb3V0ZXJDbGFzczogY2hlY2tib3gtaW5saW5lfVxuICAgICAgICAgICAgICAgICAgICAvLyAnLmNoZWNrYm94fHN3aXRjaHxyYWRpbyA+IGxhYmVsID4gaW5wdXRbdHlwZT1jaGVja2JveHxyYWRpb10nXG4gICAgICAgICAgICAgICAgICAgIC8vICcuJHt0aGlzLm91dGVyQ2xhc3N9ID4gbGFiZWwgPiBpbnB1dFt0eXBlPSR7dGhpcy5pbnB1dFR5cGV9XSdcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMgPSBfQmFzZUlucHV0LmNhbGwodGhpcywgJGVsZW1lbnQsICQkJDEuZXh0ZW5kKHRydWUsIHt9LCBEZWZhdWx0LCBjb25maWcpLCBwcm9wZXJ0aWVzKSB8fCB0aGlzO1xuXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmRlY29yYXRlTWFya3VwKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICAgICAgICAgIH0gLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICAgICAgLy8gcHJvdGVjdGVkXG5cblxuICAgICAgICAgICAgICAgIHZhciBfcHJvdG8gPSBCYXNlU2VsZWN0aW9uLnByb3RvdHlwZTtcblxuICAgICAgICAgICAgICAgIF9wcm90by5kZWNvcmF0ZU1hcmt1cCA9IGZ1bmN0aW9uIGRlY29yYXRlTWFya3VwKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgJGRlY29yYXRvciA9ICQkJDEodGhpcy5jb25maWcudGVtcGxhdGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbGVtZW50LmFmdGVyKCRkZWNvcmF0b3IpOyAvLyBpbml0aWFsaXplIHJpcHBsZXMgYWZ0ZXIgZGVjb3JhdG9yIGhhcyBiZWVuIGluc2VydGVkIGludG8gRE9NXG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlnLnJpcHBsZXMgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkZGVjb3JhdG9yLmJtZFJpcHBsZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07IC8vIERlbWFyY2F0aW9uIGVsZW1lbnQgKGUuZy4gZmlyc3QgY2hpbGQgb2YgYSBmb3JtLWdyb3VwKVxuXG5cbiAgICAgICAgICAgICAgICBfcHJvdG8ub3V0ZXJFbGVtZW50ID0gZnVuY3Rpb24gb3V0ZXJFbGVtZW50KCkge1xuICAgICAgICAgICAgICAgICAgICAvLyAuY2hlY2tib3h8c3dpdGNofHJhZGlvID4gbGFiZWwgPiBpbnB1dFt0eXBlPWNoZWNrYm94fHJhZGlvXVxuICAgICAgICAgICAgICAgICAgICAvLyBsYWJlbC5jaGVja2JveC1pbmxpbmUgPiBpbnB1dFt0eXBlPWNoZWNrYm94fHJhZGlvXVxuICAgICAgICAgICAgICAgICAgICAvLyAuJHt0aGlzLm91dGVyQ2xhc3N9ID4gbGFiZWwgPiBpbnB1dFt0eXBlPSR7dGhpcy5pbnB1dFR5cGV9XVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kZWxlbWVudC5wYXJlbnQoKS5jbG9zZXN0KFwiLlwiICsgdGhpcy5vdXRlckNsYXNzKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLnJlamVjdFdpdGhvdXRSZXF1aXJlZFN0cnVjdHVyZSA9IGZ1bmN0aW9uIHJlamVjdFdpdGhvdXRSZXF1aXJlZFN0cnVjdHVyZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gJy5jaGVja2JveHxzd2l0Y2h8cmFkaW8gPiBsYWJlbCA+IGlucHV0W3R5cGU9Y2hlY2tib3h8cmFkaW9dJ1xuICAgICAgICAgICAgICAgICAgICAvLyAnLiR7dGhpcy5vdXRlckNsYXNzfSA+IGxhYmVsID4gaW5wdXRbdHlwZT0ke3RoaXMuaW5wdXRUeXBlfV0nXG4gICAgICAgICAgICAgICAgICAgIFV0aWwkMi5hc3NlcnQodGhpcy4kZWxlbWVudCwgIXRoaXMuJGVsZW1lbnQucGFyZW50KCkucHJvcChcInRhZ05hbWVcIikgPT09IFwibGFiZWxcIiwgdGhpcy5jb25zdHJ1Y3Rvci5uYW1lICsgXCIncyBcIiArIFV0aWwkMi5kZXNjcmliZSh0aGlzLiRlbGVtZW50KSArIFwiIHBhcmVudCBlbGVtZW50IHNob3VsZCBiZSA8bGFiZWw+LlwiKTtcbiAgICAgICAgICAgICAgICAgICAgVXRpbCQyLmFzc2VydCh0aGlzLiRlbGVtZW50LCAhdGhpcy5vdXRlckVsZW1lbnQoKS5oYXNDbGFzcyh0aGlzLm91dGVyQ2xhc3MpLCB0aGlzLmNvbnN0cnVjdG9yLm5hbWUgKyBcIidzIFwiICsgVXRpbCQyLmRlc2NyaWJlKHRoaXMuJGVsZW1lbnQpICsgXCIgb3V0ZXIgZWxlbWVudCBzaG91bGQgaGF2ZSBjbGFzcyBcIiArIHRoaXMub3V0ZXJDbGFzcyArIFwiLlwiKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLmFkZEZvY3VzTGlzdGVuZXIgPSBmdW5jdGlvbiBhZGRGb2N1c0xpc3RlbmVyKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICAgICAgICAgICAgICAvLyBjaGVja2JveGVzIGRpZG4ndCBhcHBlYXIgdG8gYnViYmxlIHRvIHRoZSBkb2N1bWVudCwgc28gd2UnbGwgYmluZCB0aGVzZSBkaXJlY3RseVxuICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbGVtZW50LmNsb3Nlc3QoU2VsZWN0b3IuTEFCRUwpLmhvdmVyKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyLmFkZEZvcm1Hcm91cEZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyLnJlbW92ZUZvcm1Hcm91cEZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uYWRkQ2hhbmdlTGlzdGVuZXIgPSBmdW5jdGlvbiBhZGRDaGFuZ2VMaXN0ZW5lcigpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kZWxlbWVudC5jaGFuZ2UoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMuJGVsZW1lbnQuYmx1cigpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9OyAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgICAgICAvLyBwcml2YXRlXG5cblxuICAgICAgICAgICAgICAgIHJldHVybiBCYXNlU2VsZWN0aW9uO1xuICAgICAgICAgICAgfShCYXNlSW5wdXQpO1xuXG4gICAgICAgIHJldHVybiBCYXNlU2VsZWN0aW9uO1xuICAgIH0oalF1ZXJ5KTtcblxuICAgIC8vaW1wb3J0IEZpbGUgZnJvbSAnLi9maWxlJ1xuICAgIC8vaW1wb3J0IFJhZGlvIGZyb20gJy4vcmFkaW8nXG4gICAgLy9pbXBvcnQgVGV4dGFyZWEgZnJvbSAnLi90ZXh0YXJlYSdcbiAgICAvL2ltcG9ydCBTZWxlY3QgZnJvbSAnLi9zZWxlY3QnXG5cbiAgICB2YXIgQ2hlY2tib3ggPSBmdW5jdGlvbigkJCQxKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICogQ29uc3RhbnRzXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIE5BTUUgPSBcImNoZWNrYm94XCI7XG4gICAgICAgIHZhciBEQVRBX0tFWSA9IFwiYm1kLlwiICsgTkFNRTtcbiAgICAgICAgdmFyIEpRVUVSWV9OQU1FID0gXCJibWRcIiArIChOQU1FLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgTkFNRS5zbGljZSgxKSk7XG4gICAgICAgIHZhciBKUVVFUllfTk9fQ09ORkxJQ1QgPSAkJCQxLmZuW0pRVUVSWV9OQU1FXTtcbiAgICAgICAgdmFyIERlZmF1bHQgPSB7XG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCI8c3BhbiBjbGFzcz0nY2hlY2tib3gtZGVjb3JhdG9yJz48c3BhbiBjbGFzcz0nY2hlY2snPjwvc3Bhbj48L3NwYW4+XCJcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKiBDbGFzcyBEZWZpbml0aW9uXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKi9cblxuICAgICAgICB2YXIgQ2hlY2tib3ggPVxuICAgICAgICAgICAgLyojX19QVVJFX18qL1xuICAgICAgICAgICAgZnVuY3Rpb24oX0Jhc2VTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBfaW5oZXJpdHNMb29zZShDaGVja2JveCwgX0Jhc2VTZWxlY3Rpb24pO1xuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gQ2hlY2tib3goJGVsZW1lbnQsIGNvbmZpZywgcHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcyA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0VHlwZTogTkFNRSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRlckNsYXNzOiBOQU1FXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9CYXNlU2VsZWN0aW9uLmNhbGwodGhpcywgJGVsZW1lbnQsICQkJDEuZXh0ZW5kKHRydWUsIC8ve2ludmFsaWRDb21wb25lbnRNYXRjaGVzOiBbRmlsZSwgUmFkaW8sIFRleHQsIFRleHRhcmVhLCBTZWxlY3RdfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQsIGNvbmZpZyksIHByb3BlcnRpZXMpIHx8IHRoaXM7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIF9wcm90byA9IENoZWNrYm94LnByb3RvdHlwZTtcblxuICAgICAgICAgICAgICAgIF9wcm90by5kaXNwb3NlID0gZnVuY3Rpb24gZGlzcG9zZShkYXRhS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhS2V5ID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFLZXkgPSBEQVRBX0tFWTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIF9CYXNlU2VsZWN0aW9uLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcywgZGF0YUtleSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIENoZWNrYm94Lm1hdGNoZXMgPSBmdW5jdGlvbiBtYXRjaGVzKCRlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vICcuY2hlY2tib3ggPiBsYWJlbCA+IGlucHV0W3R5cGU9Y2hlY2tib3hdJ1xuICAgICAgICAgICAgICAgICAgICBpZiAoJGVsZW1lbnQuYXR0cihcInR5cGVcIikgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIENoZWNrYm94LnJlamVjdE1hdGNoID0gZnVuY3Rpb24gcmVqZWN0TWF0Y2goY29tcG9uZW50LCAkZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICBVdGlsJDIuYXNzZXJ0KHRoaXMuJGVsZW1lbnQsIHRoaXMubWF0Y2hlcygkZWxlbWVudCksIGNvbXBvbmVudCArIFwiIGNvbXBvbmVudCBlbGVtZW50IFwiICsgVXRpbCQyLmRlc2NyaWJlKCRlbGVtZW50KSArIFwiIGlzIGludmFsaWQgZm9yIHR5cGU9J2NoZWNrYm94Jy5cIik7XG4gICAgICAgICAgICAgICAgfTsgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICAgICAgLy8gcHJvdGVjdGVkXG4gICAgICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICAgICAgLy8gcHJvdGVjdGVkXG4gICAgICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICAgICAgLy8gcHJpdmF0ZVxuICAgICAgICAgICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgICAgIC8vIHN0YXRpY1xuXG5cbiAgICAgICAgICAgICAgICBDaGVja2JveC5falF1ZXJ5SW50ZXJmYWNlID0gZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkZWxlbWVudCA9ICQkJDEodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9ICRlbGVtZW50LmRhdGEoREFUQV9LRVkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gbmV3IENoZWNrYm94KCRlbGVtZW50LCBjb25maWcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRlbGVtZW50LmRhdGEoREFUQV9LRVksIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIENoZWNrYm94O1xuICAgICAgICAgICAgfShCYXNlU2VsZWN0aW9uKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKiBqUXVlcnlcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqL1xuXG5cbiAgICAgICAgJCQkMS5mbltKUVVFUllfTkFNRV0gPSBDaGVja2JveC5falF1ZXJ5SW50ZXJmYWNlO1xuICAgICAgICAkJCQxLmZuW0pRVUVSWV9OQU1FXS5Db25zdHJ1Y3RvciA9IENoZWNrYm94O1xuXG4gICAgICAgICQkJDEuZm5bSlFVRVJZX05BTUVdLm5vQ29uZmxpY3QgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQkJDEuZm5bSlFVRVJZX05BTUVdID0gSlFVRVJZX05PX0NPTkZMSUNUO1xuICAgICAgICAgICAgcmV0dXJuIENoZWNrYm94Ll9qUXVlcnlJbnRlcmZhY2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIENoZWNrYm94O1xuICAgIH0oalF1ZXJ5KTtcblxuICAgIHZhciBDaGVja2JveElubGluZSA9IGZ1bmN0aW9uKCQkJDEpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKiBDb25zdGFudHNcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgTkFNRSA9IFwiY2hlY2tib3hJbmxpbmVcIjtcbiAgICAgICAgdmFyIERBVEFfS0VZID0gXCJibWQuXCIgKyBOQU1FO1xuICAgICAgICB2YXIgSlFVRVJZX05BTUUgPSBcImJtZFwiICsgKE5BTUUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBOQU1FLnNsaWNlKDEpKTtcbiAgICAgICAgdmFyIEpRVUVSWV9OT19DT05GTElDVCA9ICQkJDEuZm5bSlFVRVJZX05BTUVdO1xuICAgICAgICB2YXIgRGVmYXVsdCA9IHtcbiAgICAgICAgICAgIGJtZEZvcm1Hcm91cDoge1xuICAgICAgICAgICAgICAgIGNyZWF0ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgLy8gbm8gYm1kLWZvcm0tZ3JvdXAgY3JlYXRpb24gaWYgZm9ybS1ncm91cCBub3QgcHJlc2VudC4gSXQgbWVzc2VzIHdpdGggdGhlIGxheW91dC5cbiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKiBDbGFzcyBEZWZpbml0aW9uXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKi9cblxuICAgICAgICB2YXIgQ2hlY2tib3hJbmxpbmUgPVxuICAgICAgICAgICAgLyojX19QVVJFX18qL1xuICAgICAgICAgICAgZnVuY3Rpb24oX0NoZWNrYm94KSB7XG4gICAgICAgICAgICAgICAgX2luaGVyaXRzTG9vc2UoQ2hlY2tib3hJbmxpbmUsIF9DaGVja2JveCk7XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBDaGVja2JveElubGluZSgkZWxlbWVudCwgY29uZmlnLCBwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRUeXBlOiBcImNoZWNrYm94XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0ZXJDbGFzczogXCJjaGVja2JveC1pbmxpbmVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfQ2hlY2tib3guY2FsbCh0aGlzLCAkZWxlbWVudCwgJCQkMS5leHRlbmQodHJ1ZSwge30sIERlZmF1bHQsIGNvbmZpZyksIHByb3BlcnRpZXMpIHx8IHRoaXM7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIF9wcm90byA9IENoZWNrYm94SW5saW5lLnByb3RvdHlwZTtcblxuICAgICAgICAgICAgICAgIF9wcm90by5kaXNwb3NlID0gZnVuY3Rpb24gZGlzcG9zZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgX0NoZWNrYm94LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcywgREFUQV9LRVkpO1xuICAgICAgICAgICAgICAgIH07IC8vc3RhdGljIG1hdGNoZXMoJGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAvLyAgLy8gJy5jaGVja2JveC1pbmxpbmUgPiBpbnB1dFt0eXBlPWNoZWNrYm94XSdcbiAgICAgICAgICAgICAgICAvLyAgaWYgKCRlbGVtZW50LmF0dHIoJ3R5cGUnKSA9PT0gJ2NoZWNrYm94Jykge1xuICAgICAgICAgICAgICAgIC8vICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICAgICAgLy8gIH1cbiAgICAgICAgICAgICAgICAvLyAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICAgICAgLy99XG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAvL3N0YXRpYyByZWplY3RNYXRjaChjb21wb25lbnQsICRlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgLy8gIFV0aWwuYXNzZXJ0KHRoaXMuJGVsZW1lbnQsIHRoaXMubWF0Y2hlcygkZWxlbWVudCksIGAke2NvbXBvbmVudH0gY29tcG9uZW50IGVsZW1lbnQgJHtVdGlsLmRlc2NyaWJlKCRlbGVtZW50KX0gaXMgaW52YWxpZCBmb3IgdHlwZT0nY2hlY2tib3gnLmApXG4gICAgICAgICAgICAgICAgLy99XG4gICAgICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICAgICAgLy8gcHJvdGVjdGVkXG4gICAgICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICAgICAgLy8gcHJvdGVjdGVkXG4gICAgICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICAgICAgLy8gcHJpdmF0ZVxuICAgICAgICAgICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgICAgIC8vIHN0YXRpY1xuXG5cbiAgICAgICAgICAgICAgICBDaGVja2JveElubGluZS5falF1ZXJ5SW50ZXJmYWNlID0gZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkZWxlbWVudCA9ICQkJDEodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9ICRlbGVtZW50LmRhdGEoREFUQV9LRVkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gbmV3IENoZWNrYm94SW5saW5lKCRlbGVtZW50LCBjb25maWcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRlbGVtZW50LmRhdGEoREFUQV9LRVksIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIENoZWNrYm94SW5saW5lO1xuICAgICAgICAgICAgfShDaGVja2JveCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICogalF1ZXJ5XG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKi9cblxuXG4gICAgICAgICQkJDEuZm5bSlFVRVJZX05BTUVdID0gQ2hlY2tib3hJbmxpbmUuX2pRdWVyeUludGVyZmFjZTtcbiAgICAgICAgJCQkMS5mbltKUVVFUllfTkFNRV0uQ29uc3RydWN0b3IgPSBDaGVja2JveElubGluZTtcblxuICAgICAgICAkJCQxLmZuW0pRVUVSWV9OQU1FXS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkJCQxLmZuW0pRVUVSWV9OQU1FXSA9IEpRVUVSWV9OT19DT05GTElDVDtcbiAgICAgICAgICAgIHJldHVybiBDaGVja2JveElubGluZS5falF1ZXJ5SW50ZXJmYWNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBDaGVja2JveElubGluZTtcbiAgICB9KGpRdWVyeSk7XG5cbiAgICB2YXIgQ29sbGFwc2VJbmxpbmUgPSBmdW5jdGlvbigkJCQxKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICogQ29uc3RhbnRzXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIE5BTUUgPSBcImNvbGxhcHNlSW5saW5lXCI7XG4gICAgICAgIHZhciBEQVRBX0tFWSA9IFwiYm1kLlwiICsgTkFNRTtcbiAgICAgICAgdmFyIEpRVUVSWV9OQU1FID0gXCJibWRcIiArIChOQU1FLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgTkFNRS5zbGljZSgxKSk7XG4gICAgICAgIHZhciBKUVVFUllfTk9fQ09ORkxJQ1QgPSAkJCQxLmZuW0pRVUVSWV9OQU1FXTtcbiAgICAgICAgdmFyIFNlbGVjdG9yID0ge1xuICAgICAgICAgICAgQU5ZX0lOUFVUOiBcImlucHV0LCBzZWxlY3QsIHRleHRhcmVhXCJcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIENsYXNzTmFtZSA9IHtcbiAgICAgICAgICAgIElOOiBcImluXCIsXG4gICAgICAgICAgICBDT0xMQVBTRTogXCJjb2xsYXBzZVwiLFxuICAgICAgICAgICAgQ09MTEFQU0lORzogXCJjb2xsYXBzaW5nXCIsXG4gICAgICAgICAgICBDT0xMQVBTRUQ6IFwiY29sbGFwc2VkXCIsXG4gICAgICAgICAgICBXSURUSDogXCJ3aWR0aFwiXG4gICAgICAgIH07XG4gICAgICAgIHZhciBEZWZhdWx0ID0ge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICogQ2xhc3MgRGVmaW5pdGlvblxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICovXG5cbiAgICAgICAgdmFyIENvbGxhcHNlSW5saW5lID1cbiAgICAgICAgICAgIC8qI19fUFVSRV9fKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uKF9CYXNlKSB7XG4gICAgICAgICAgICAgICAgX2luaGVyaXRzTG9vc2UoQ29sbGFwc2VJbmxpbmUsIF9CYXNlKTtcblxuICAgICAgICAgICAgICAgIC8vICRlbGVtZW50IGlzIGV4cGVjdGVkIHRvIGJlIHRoZSB0cmlnZ2VyXG4gICAgICAgICAgICAgICAgLy8gIGkuZS4gPGJ1dHRvbiBjbGFzcz1cImJ0biBibWQtYnRuLWljb25cIiBmb3I9XCJzZWFyY2hcIiBkYXRhLXRvZ2dsZT1cImNvbGxhcHNlXCIgZGF0YS10YXJnZXQ9XCIjc2VhcmNoLWZpZWxkXCIgYXJpYS1leHBhbmRlZD1cImZhbHNlXCIgYXJpYS1jb250cm9scz1cInNlYXJjaC1maWVsZFwiPlxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIENvbGxhcHNlSW5saW5lKCRlbGVtZW50LCBjb25maWcpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF90aGlzO1xuXG4gICAgICAgICAgICAgICAgICAgIF90aGlzID0gX0Jhc2UuY2FsbCh0aGlzLCAkZWxlbWVudCwgJCQkMS5leHRlbmQodHJ1ZSwge30sIERlZmF1bHQsIGNvbmZpZykpIHx8IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLiRibWRGb3JtR3JvdXAgPSBfdGhpcy5maW5kTWRiRm9ybUdyb3VwKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29sbGFwc2VTZWxlY3RvciA9ICRlbGVtZW50LmRhdGEoXCJ0YXJnZXRcIik7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLiRjb2xsYXBzZSA9ICQkJDEoY29sbGFwc2VTZWxlY3Rvcik7XG4gICAgICAgICAgICAgICAgICAgIFV0aWwkMi5hc3NlcnQoJGVsZW1lbnQsIF90aGlzLiRjb2xsYXBzZS5sZW5ndGggPT09IDAsIFwiQ2Fubm90IGZpbmQgY29sbGFwc2UgdGFyZ2V0IGZvciBcIiArIFV0aWwkMi5kZXNjcmliZSgkZWxlbWVudCkpO1xuICAgICAgICAgICAgICAgICAgICBVdGlsJDIuYXNzZXJ0KF90aGlzLiRjb2xsYXBzZSwgIV90aGlzLiRjb2xsYXBzZS5oYXNDbGFzcyhDbGFzc05hbWUuQ09MTEFQU0UpLCBVdGlsJDIuZGVzY3JpYmUoX3RoaXMuJGNvbGxhcHNlKSArIFwiIGlzIGV4cGVjdGVkIHRvIGhhdmUgdGhlICdcIiArIENsYXNzTmFtZS5DT0xMQVBTRSArIFwiJyBjbGFzcy4gIEl0IGlzIGJlaW5nIHRhcmdldGVkIGJ5IFwiICsgVXRpbCQyLmRlc2NyaWJlKCRlbGVtZW50KSk7IC8vIGZpbmQgdGhlIGZpcnN0IGlucHV0IGZvciBmb2N1c2luZ1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciAkaW5wdXRzID0gX3RoaXMuJGJtZEZvcm1Hcm91cC5maW5kKFNlbGVjdG9yLkFOWV9JTlBVVCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCRpbnB1dHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuJGlucHV0ID0gJGlucHV0cy5maXJzdCgpO1xuICAgICAgICAgICAgICAgICAgICB9IC8vIGF1dG9tYXRpY2FsbHkgYWRkIHRoZSBtYXJrZXIgY2xhc3MgdG8gY29sbGFwc2Ugd2lkdGggaW5zdGVhZCBvZiBoZWlnaHQgLSBuaWNlIGNvbnZlbmllbmNlIGJlY2F1c2UgaXQgaXMgZWFzaWx5IGZvcmdvdHRlblxuXG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfdGhpcy4kY29sbGFwc2UuaGFzQ2xhc3MoQ2xhc3NOYW1lLldJRFRIKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuJGNvbGxhcHNlLmFkZENsYXNzKENsYXNzTmFtZS5XSURUSCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuJGlucHV0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgYSBsaXN0ZW5lciB0byBzZXQgZm9jdXNcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLiRjb2xsYXBzZS5vbihcInNob3duLmJzLmNvbGxhcHNlXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLiRpbnB1dC5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7IC8vIGFkZCBhIGxpc3RlbmVyIHRvIGNvbGxhcHNlIGZpZWxkXG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuJGlucHV0LmJsdXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuJGNvbGxhcHNlLmNvbGxhcHNlKFwiaGlkZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBfcHJvdG8gPSBDb2xsYXBzZUlubGluZS5wcm90b3R5cGU7XG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgICAgICAgICAgICAgICAgIF9CYXNlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcywgREFUQV9LRVkpO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGJtZEZvcm1Hcm91cCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGNvbGxhcHNlID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kaW5wdXQgPSBudWxsO1xuICAgICAgICAgICAgICAgIH07IC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgICAgIC8vIHByaXZhdGVcbiAgICAgICAgICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgICAgICAvLyBzdGF0aWNcblxuXG4gICAgICAgICAgICAgICAgQ29sbGFwc2VJbmxpbmUuX2pRdWVyeUludGVyZmFjZSA9IGZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGVsZW1lbnQgPSAkJCQxKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSAkZWxlbWVudC5kYXRhKERBVEFfS0VZKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IG5ldyBDb2xsYXBzZUlubGluZSgkZWxlbWVudCwgY29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC5kYXRhKERBVEFfS0VZLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBDb2xsYXBzZUlubGluZTtcbiAgICAgICAgICAgIH0oQmFzZSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICogalF1ZXJ5XG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKi9cblxuXG4gICAgICAgICQkJDEuZm5bSlFVRVJZX05BTUVdID0gQ29sbGFwc2VJbmxpbmUuX2pRdWVyeUludGVyZmFjZTtcbiAgICAgICAgJCQkMS5mbltKUVVFUllfTkFNRV0uQ29uc3RydWN0b3IgPSBDb2xsYXBzZUlubGluZTtcblxuICAgICAgICAkJCQxLmZuW0pRVUVSWV9OQU1FXS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkJCQxLmZuW0pRVUVSWV9OQU1FXSA9IEpRVUVSWV9OT19DT05GTElDVDtcbiAgICAgICAgICAgIHJldHVybiBDb2xsYXBzZUlubGluZS5falF1ZXJ5SW50ZXJmYWNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBDb2xsYXBzZUlubGluZTtcbiAgICB9KGpRdWVyeSk7XG5cbiAgICAvL2ltcG9ydCBSYWRpbyBmcm9tICcuL3JhZGlvJ1xuICAgIC8vaW1wb3J0IFN3aXRjaCBmcm9tICcuL3N3aXRjaCdcbiAgICAvL2ltcG9ydCBUZXh0IGZyb20gJy4vdGV4dCdcbiAgICAvL2ltcG9ydCBUZXh0YXJlYSBmcm9tICcuL3RleHRhcmVhJ1xuICAgIC8vaW1wb3J0IFNlbGVjdCBmcm9tICcuL3NlbGVjdCdcblxuICAgIHZhciBGaWxlID0gZnVuY3Rpb24oJCQkMSkge1xuICAgICAgICAvKipcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqIENvbnN0YW50c1xuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICovXG4gICAgICAgIHZhciBOQU1FID0gXCJmaWxlXCI7XG4gICAgICAgIHZhciBEQVRBX0tFWSA9IFwiYm1kLlwiICsgTkFNRTtcbiAgICAgICAgdmFyIEpRVUVSWV9OQU1FID0gXCJibWRcIiArIChOQU1FLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgTkFNRS5zbGljZSgxKSk7XG4gICAgICAgIHZhciBKUVVFUllfTk9fQ09ORkxJQ1QgPSAkJCQxLmZuW0pRVUVSWV9OQU1FXTtcbiAgICAgICAgdmFyIERlZmF1bHQgPSB7fTtcbiAgICAgICAgdmFyIENsYXNzTmFtZSA9IHtcbiAgICAgICAgICAgIEZJTEU6IE5BTUUsXG4gICAgICAgICAgICBJU19GSUxFOiBcImlzLWZpbGVcIlxuICAgICAgICB9O1xuICAgICAgICB2YXIgU2VsZWN0b3IgPSB7XG4gICAgICAgICAgICBGSUxFTkFNRVM6IFwiaW5wdXQuZm9ybS1jb250cm9sW3JlYWRvbmx5XVwiXG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICogQ2xhc3MgRGVmaW5pdGlvblxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICovXG5cbiAgICAgICAgdmFyIEZpbGUgPVxuICAgICAgICAgICAgLyojX19QVVJFX18qL1xuICAgICAgICAgICAgZnVuY3Rpb24oX0Jhc2VJbnB1dCkge1xuICAgICAgICAgICAgICAgIF9pbmhlcml0c0xvb3NlKEZpbGUsIF9CYXNlSW5wdXQpO1xuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gRmlsZSgkZWxlbWVudCwgY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfdGhpcztcblxuICAgICAgICAgICAgICAgICAgICBfdGhpcyA9IF9CYXNlSW5wdXQuY2FsbCh0aGlzLCAkZWxlbWVudCwgJCQkMS5leHRlbmQodHJ1ZSwgLy97aW52YWxpZENvbXBvbmVudE1hdGNoZXM6IFtDaGVja2JveCwgUmFkaW8sIFRleHQsIFRleHRhcmVhLCBTZWxlY3QsIFN3aXRjaF19LFxuICAgICAgICAgICAgICAgICAgICAgICAgRGVmYXVsdCwgY29uZmlnKSkgfHwgdGhpcztcblxuICAgICAgICAgICAgICAgICAgICBfdGhpcy4kYm1kRm9ybUdyb3VwLmFkZENsYXNzKENsYXNzTmFtZS5JU19GSUxFKTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIF9wcm90byA9IEZpbGUucHJvdG90eXBlO1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLmRpc3Bvc2UgPSBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgICAgICAgICAgICAgICAgICBfQmFzZUlucHV0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcywgREFUQV9LRVkpO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBGaWxlLm1hdGNoZXMgPSBmdW5jdGlvbiBtYXRjaGVzKCRlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkZWxlbWVudC5hdHRyKFwidHlwZVwiKSA9PT0gXCJmaWxlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBGaWxlLnJlamVjdE1hdGNoID0gZnVuY3Rpb24gcmVqZWN0TWF0Y2goY29tcG9uZW50LCAkZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICBVdGlsJDIuYXNzZXJ0KHRoaXMuJGVsZW1lbnQsIHRoaXMubWF0Y2hlcygkZWxlbWVudCksIGNvbXBvbmVudCArIFwiIGNvbXBvbmVudCBlbGVtZW50IFwiICsgVXRpbCQyLmRlc2NyaWJlKCRlbGVtZW50KSArIFwiIGlzIGludmFsaWQgZm9yIHR5cGU9J2ZpbGUnLlwiKTtcbiAgICAgICAgICAgICAgICB9OyAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgICAgICAvLyBwcm90ZWN0ZWRcbiAgICAgICAgICAgICAgICAvLyBEZW1hcmNhdGlvbiBlbGVtZW50IChlLmcuIGZpcnN0IGNoaWxkIG9mIGEgZm9ybS1ncm91cClcblxuXG4gICAgICAgICAgICAgICAgX3Byb3RvLm91dGVyRWxlbWVudCA9IGZ1bmN0aW9uIG91dGVyRWxlbWVudCgpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbGFiZWwuZmlsZSA+IGlucHV0W3R5cGU9ZmlsZV1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGVsZW1lbnQucGFyZW50KCkuY2xvc2VzdChcIi5cIiArIENsYXNzTmFtZS5GSUxFKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLnJlamVjdFdpdGhvdXRSZXF1aXJlZFN0cnVjdHVyZSA9IGZ1bmN0aW9uIHJlamVjdFdpdGhvdXRSZXF1aXJlZFN0cnVjdHVyZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbGFiZWwuZmlsZSA+IGlucHV0W3R5cGU9ZmlsZV1cbiAgICAgICAgICAgICAgICAgICAgVXRpbCQyLmFzc2VydCh0aGlzLiRlbGVtZW50LCAhdGhpcy5vdXRlckVsZW1lbnQoKS5wcm9wKFwidGFnTmFtZVwiKSA9PT0gXCJsYWJlbFwiLCB0aGlzLmNvbnN0cnVjdG9yLm5hbWUgKyBcIidzIFwiICsgVXRpbCQyLmRlc2NyaWJlKHRoaXMuJGVsZW1lbnQpICsgXCIgcGFyZW50IGVsZW1lbnQgXCIgKyBVdGlsJDIuZGVzY3JpYmUodGhpcy5vdXRlckVsZW1lbnQoKSkgKyBcIiBzaG91bGQgYmUgPGxhYmVsPi5cIik7XG4gICAgICAgICAgICAgICAgICAgIFV0aWwkMi5hc3NlcnQodGhpcy4kZWxlbWVudCwgIXRoaXMub3V0ZXJFbGVtZW50KCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkZJTEUpLCB0aGlzLmNvbnN0cnVjdG9yLm5hbWUgKyBcIidzIFwiICsgVXRpbCQyLmRlc2NyaWJlKHRoaXMuJGVsZW1lbnQpICsgXCIgcGFyZW50IGVsZW1lbnQgXCIgKyBVdGlsJDIuZGVzY3JpYmUodGhpcy5vdXRlckVsZW1lbnQoKSkgKyBcIiBzaG91bGQgaGF2ZSBjbGFzcyAuXCIgKyBDbGFzc05hbWUuRklMRSArIFwiLlwiKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLmFkZEZvY3VzTGlzdGVuZXIgPSBmdW5jdGlvbiBhZGRGb2N1c0xpc3RlbmVyKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLiRibWRGb3JtR3JvdXAub24oXCJmb2N1c1wiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi5hZGRGb3JtR3JvdXBGb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICB9KS5vbihcImJsdXJcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczIucmVtb3ZlRm9ybUdyb3VwRm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIF9wcm90by5hZGRDaGFuZ2VMaXN0ZW5lciA9IGZ1bmN0aW9uIGFkZENoYW5nZUxpc3RlbmVyKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgICAgICAgICAgICAgICAvLyBzZXQgdGhlIGZpbGVpbnB1dCByZWFkb25seSBmaWVsZCB3aXRoIHRoZSBuYW1lIG9mIHRoZSBmaWxlXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGVsZW1lbnQub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCQkMS5lYWNoKF90aGlzMy4kZWxlbWVudC5maWxlcywgZnVuY3Rpb24oaSwgZmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICs9IGZpbGUubmFtZSArIFwiICAsIFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnN1YnN0cmluZygwLCB2YWx1ZS5sZW5ndGggLSAyKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLmFkZElzRmlsbGVkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMy5yZW1vdmVJc0ZpbGxlZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMuJGJtZEZvcm1Hcm91cC5maW5kKFNlbGVjdG9yLkZJTEVOQU1FUykudmFsKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfTsgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICAgICAgLy8gcHJpdmF0ZVxuICAgICAgICAgICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgICAgIC8vIHN0YXRpY1xuXG5cbiAgICAgICAgICAgICAgICBGaWxlLl9qUXVlcnlJbnRlcmZhY2UgPSBmdW5jdGlvbiBfalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRlbGVtZW50ID0gJCQkMSh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gJGVsZW1lbnQuZGF0YShEQVRBX0tFWSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBuZXcgRmlsZSgkZWxlbWVudCwgY29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC5kYXRhKERBVEFfS0VZLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBGaWxlO1xuICAgICAgICAgICAgfShCYXNlSW5wdXQpO1xuICAgICAgICAvKipcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqIGpRdWVyeVxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICovXG5cblxuICAgICAgICAkJCQxLmZuW0pRVUVSWV9OQU1FXSA9IEZpbGUuX2pRdWVyeUludGVyZmFjZTtcbiAgICAgICAgJCQkMS5mbltKUVVFUllfTkFNRV0uQ29uc3RydWN0b3IgPSBGaWxlO1xuXG4gICAgICAgICQkJDEuZm5bSlFVRVJZX05BTUVdLm5vQ29uZmxpY3QgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQkJDEuZm5bSlFVRVJZX05BTUVdID0gSlFVRVJZX05PX0NPTkZMSUNUO1xuICAgICAgICAgICAgcmV0dXJuIEZpbGUuX2pRdWVyeUludGVyZmFjZTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gRmlsZTtcbiAgICB9KGpRdWVyeSk7XG5cbiAgICAvL2ltcG9ydCBGaWxlIGZyb20gJy4vZmlsZSdcbiAgICAvL2ltcG9ydCBDaGVja2JveCBmcm9tICcuL2NoZWNrYm94J1xuICAgIC8vaW1wb3J0IFN3aXRjaCBmcm9tICcuL3N3aXRjaCdcblxuICAgIHZhciBSYWRpbyA9IGZ1bmN0aW9uKCQkJDEpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKiBDb25zdGFudHNcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgTkFNRSA9IFwicmFkaW9cIjtcbiAgICAgICAgdmFyIERBVEFfS0VZID0gXCJibWQuXCIgKyBOQU1FO1xuICAgICAgICB2YXIgSlFVRVJZX05BTUUgPSBcImJtZFwiICsgKE5BTUUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBOQU1FLnNsaWNlKDEpKTtcbiAgICAgICAgdmFyIEpRVUVSWV9OT19DT05GTElDVCA9ICQkJDEuZm5bSlFVRVJZX05BTUVdO1xuICAgICAgICB2YXIgRGVmYXVsdCA9IHtcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIjxzcGFuIGNsYXNzPSdibWQtcmFkaW8nPjwvc3Bhbj5cIlxuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqIENsYXNzIERlZmluaXRpb25cbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqL1xuXG4gICAgICAgIHZhciBSYWRpbyA9XG4gICAgICAgICAgICAvKiNfX1BVUkVfXyovXG4gICAgICAgICAgICBmdW5jdGlvbihfQmFzZVNlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgIF9pbmhlcml0c0xvb3NlKFJhZGlvLCBfQmFzZVNlbGVjdGlvbik7XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBSYWRpbygkZWxlbWVudCwgY29uZmlnLCBwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRUeXBlOiBOQU1FLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dGVyQ2xhc3M6IE5BTUVcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX0Jhc2VTZWxlY3Rpb24uY2FsbCh0aGlzLCAkZWxlbWVudCwgJCQkMS5leHRlbmQodHJ1ZSwgLy97aW52YWxpZENvbXBvbmVudE1hdGNoZXM6IFtDaGVja2JveCwgRmlsZSwgU3dpdGNoLCBUZXh0XX0sXG4gICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0LCBjb25maWcpLCBwcm9wZXJ0aWVzKSB8fCB0aGlzO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBfcHJvdG8gPSBSYWRpby5wcm90b3R5cGU7XG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoZGF0YUtleSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YUtleSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhS2V5ID0gREFUQV9LRVk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBfQmFzZVNlbGVjdGlvbi5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMsIGRhdGFLZXkpO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBSYWRpby5tYXRjaGVzID0gZnVuY3Rpb24gbWF0Y2hlcygkZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAvLyAnLnJhZGlvID4gbGFiZWwgPiBpbnB1dFt0eXBlPXJhZGlvXSdcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRlbGVtZW50LmF0dHIoXCJ0eXBlXCIpID09PSBcInJhZGlvXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBSYWRpby5yZWplY3RNYXRjaCA9IGZ1bmN0aW9uIHJlamVjdE1hdGNoKGNvbXBvbmVudCwgJGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgVXRpbCQyLmFzc2VydCh0aGlzLiRlbGVtZW50LCB0aGlzLm1hdGNoZXMoJGVsZW1lbnQpLCBjb21wb25lbnQgKyBcIiBjb21wb25lbnQgZWxlbWVudCBcIiArIFV0aWwkMi5kZXNjcmliZSgkZWxlbWVudCkgKyBcIiBpcyBpbnZhbGlkIGZvciB0eXBlPSdyYWRpbycuXCIpO1xuICAgICAgICAgICAgICAgIH07IC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgICAgIC8vIHByb3RlY3RlZFxuICAgICAgICAgICAgICAgIC8vZGVjb3JhdGVNYXJrdXAoKSB7XG4gICAgICAgICAgICAgICAgLy8gIHRoaXMuJGVsZW1lbnQuYWZ0ZXIodGhpcy5jb25maWcudGVtcGxhdGUpXG4gICAgICAgICAgICAgICAgLy99XG4gICAgICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICAgICAgLy8gcHJpdmF0ZVxuICAgICAgICAgICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgICAgIC8vIHN0YXRpY1xuXG5cbiAgICAgICAgICAgICAgICBSYWRpby5falF1ZXJ5SW50ZXJmYWNlID0gZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkZWxlbWVudCA9ICQkJDEodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9ICRlbGVtZW50LmRhdGEoREFUQV9LRVkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gbmV3IFJhZGlvKCRlbGVtZW50LCBjb25maWcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRlbGVtZW50LmRhdGEoREFUQV9LRVksIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFJhZGlvO1xuICAgICAgICAgICAgfShCYXNlU2VsZWN0aW9uKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKiBqUXVlcnlcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqL1xuXG5cbiAgICAgICAgJCQkMS5mbltKUVVFUllfTkFNRV0gPSBSYWRpby5falF1ZXJ5SW50ZXJmYWNlO1xuICAgICAgICAkJCQxLmZuW0pRVUVSWV9OQU1FXS5Db25zdHJ1Y3RvciA9IFJhZGlvO1xuXG4gICAgICAgICQkJDEuZm5bSlFVRVJZX05BTUVdLm5vQ29uZmxpY3QgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQkJDEuZm5bSlFVRVJZX05BTUVdID0gSlFVRVJZX05PX0NPTkZMSUNUO1xuICAgICAgICAgICAgcmV0dXJuIFJhZGlvLl9qUXVlcnlJbnRlcmZhY2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIFJhZGlvO1xuICAgIH0oalF1ZXJ5KTtcblxuICAgIHZhciBSYWRpb0lubGluZSA9IGZ1bmN0aW9uKCQkJDEpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKiBDb25zdGFudHNcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgTkFNRSA9IFwicmFkaW9JbmxpbmVcIjtcbiAgICAgICAgdmFyIERBVEFfS0VZID0gXCJibWQuXCIgKyBOQU1FO1xuICAgICAgICB2YXIgSlFVRVJZX05BTUUgPSBcImJtZFwiICsgKE5BTUUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBOQU1FLnNsaWNlKDEpKTtcbiAgICAgICAgdmFyIEpRVUVSWV9OT19DT05GTElDVCA9ICQkJDEuZm5bSlFVRVJZX05BTUVdO1xuICAgICAgICB2YXIgRGVmYXVsdCA9IHtcbiAgICAgICAgICAgIGJtZEZvcm1Hcm91cDoge1xuICAgICAgICAgICAgICAgIGNyZWF0ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgLy8gbm8gYm1kLWZvcm0tZ3JvdXAgY3JlYXRpb24gaWYgZm9ybS1ncm91cCBub3QgcHJlc2VudC4gSXQgbWVzc2VzIHdpdGggdGhlIGxheW91dC5cbiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKiBDbGFzcyBEZWZpbml0aW9uXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKi9cblxuICAgICAgICB2YXIgUmFkaW9JbmxpbmUgPVxuICAgICAgICAgICAgLyojX19QVVJFX18qL1xuICAgICAgICAgICAgZnVuY3Rpb24oX1JhZGlvKSB7XG4gICAgICAgICAgICAgICAgX2luaGVyaXRzTG9vc2UoUmFkaW9JbmxpbmUsIF9SYWRpbyk7XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBSYWRpb0lubGluZSgkZWxlbWVudCwgY29uZmlnLCBwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRUeXBlOiBcInJhZGlvXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0ZXJDbGFzczogXCJyYWRpby1pbmxpbmVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfUmFkaW8uY2FsbCh0aGlzLCAkZWxlbWVudCwgJCQkMS5leHRlbmQodHJ1ZSwge30sIERlZmF1bHQsIGNvbmZpZyksIHByb3BlcnRpZXMpIHx8IHRoaXM7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIF9wcm90byA9IFJhZGlvSW5saW5lLnByb3RvdHlwZTtcblxuICAgICAgICAgICAgICAgIF9wcm90by5kaXNwb3NlID0gZnVuY3Rpb24gZGlzcG9zZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgX1JhZGlvLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcywgREFUQV9LRVkpO1xuICAgICAgICAgICAgICAgIH07IC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgICAgIC8vIHByb3RlY3RlZFxuICAgICAgICAgICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgICAgIC8vIHByb3RlY3RlZFxuICAgICAgICAgICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgICAgIC8vIHByaXZhdGVcbiAgICAgICAgICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgICAgICAvLyBzdGF0aWNcblxuXG4gICAgICAgICAgICAgICAgUmFkaW9JbmxpbmUuX2pRdWVyeUludGVyZmFjZSA9IGZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGVsZW1lbnQgPSAkJCQxKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSAkZWxlbWVudC5kYXRhKERBVEFfS0VZKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IG5ldyBSYWRpb0lubGluZSgkZWxlbWVudCwgY29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC5kYXRhKERBVEFfS0VZLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBSYWRpb0lubGluZTtcbiAgICAgICAgICAgIH0oUmFkaW8pO1xuICAgICAgICAvKipcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqIGpRdWVyeVxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICovXG5cblxuICAgICAgICAkJCQxLmZuW0pRVUVSWV9OQU1FXSA9IFJhZGlvSW5saW5lLl9qUXVlcnlJbnRlcmZhY2U7XG4gICAgICAgICQkJDEuZm5bSlFVRVJZX05BTUVdLkNvbnN0cnVjdG9yID0gUmFkaW9JbmxpbmU7XG5cbiAgICAgICAgJCQkMS5mbltKUVVFUllfTkFNRV0ubm9Db25mbGljdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCQkMS5mbltKUVVFUllfTkFNRV0gPSBKUVVFUllfTk9fQ09ORkxJQ1Q7XG4gICAgICAgICAgICByZXR1cm4gUmFkaW9JbmxpbmUuX2pRdWVyeUludGVyZmFjZTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gUmFkaW9JbmxpbmU7XG4gICAgfShqUXVlcnkpO1xuXG4gICAgdmFyIEJhc2VGb3JtQ29udHJvbCA9IGZ1bmN0aW9uKCQkJDEpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKiBDb25zdGFudHNcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgRGVmYXVsdCA9IHtcbiAgICAgICAgICAgIHJlcXVpcmVkQ2xhc3NlczogW1wiZm9ybS1jb250cm9sXCJdXG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICogQ2xhc3MgRGVmaW5pdGlvblxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICovXG5cbiAgICAgICAgdmFyIEJhc2VGb3JtQ29udHJvbCA9XG4gICAgICAgICAgICAvKiNfX1BVUkVfXyovXG4gICAgICAgICAgICBmdW5jdGlvbihfQmFzZUlucHV0KSB7XG4gICAgICAgICAgICAgICAgX2luaGVyaXRzTG9vc2UoQmFzZUZvcm1Db250cm9sLCBfQmFzZUlucHV0KTtcblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEJhc2VGb3JtQ29udHJvbCgkZWxlbWVudCwgY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfdGhpcztcblxuICAgICAgICAgICAgICAgICAgICBfdGhpcyA9IF9CYXNlSW5wdXQuY2FsbCh0aGlzLCAkZWxlbWVudCwgJCQkMS5leHRlbmQodHJ1ZSwgRGVmYXVsdCwgY29uZmlnKSkgfHwgdGhpczsgLy8gSW5pdGlhbGx5IG1hcmsgYXMgZW1wdHlcblxuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZW1vdmVJc0ZpbGxlZCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBCYXNlRm9ybUNvbnRyb2w7XG4gICAgICAgICAgICB9KEJhc2VJbnB1dCk7XG5cbiAgICAgICAgcmV0dXJuIEJhc2VGb3JtQ29udHJvbDtcbiAgICB9KGpRdWVyeSk7XG5cbiAgICAvL2ltcG9ydCBGaWxlIGZyb20gJy4vZmlsZSdcbiAgICAvL2ltcG9ydCBSYWRpbyBmcm9tICcuL3JhZGlvJ1xuICAgIC8vaW1wb3J0IFN3aXRjaCBmcm9tICcuL3N3aXRjaCdcbiAgICAvL2ltcG9ydCBUZXh0IGZyb20gJy4vdGV4dCdcbiAgICAvL2ltcG9ydCBUZXh0YXJlYSBmcm9tICcuL3RleHRhcmVhJ1xuXG4gICAgdmFyIFNlbGVjdCA9IGZ1bmN0aW9uKCQkJDEpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKiBDb25zdGFudHNcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgTkFNRSA9IFwic2VsZWN0XCI7XG4gICAgICAgIHZhciBEQVRBX0tFWSA9IFwiYm1kLlwiICsgTkFNRTtcbiAgICAgICAgdmFyIEpRVUVSWV9OQU1FID0gXCJibWRcIiArIChOQU1FLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgTkFNRS5zbGljZSgxKSk7XG4gICAgICAgIHZhciBKUVVFUllfTk9fQ09ORkxJQ1QgPSAkJCQxLmZuW0pRVUVSWV9OQU1FXTtcbiAgICAgICAgdmFyIERlZmF1bHQgPSB7XG4gICAgICAgICAgICByZXF1aXJlZENsYXNzZXM6IFtcImZvcm0tY29udHJvbHx8Y3VzdG9tLXNlbGVjdFwiXVxuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqIENsYXNzIERlZmluaXRpb25cbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqL1xuXG4gICAgICAgIHZhciBTZWxlY3QgPVxuICAgICAgICAgICAgLyojX19QVVJFX18qL1xuICAgICAgICAgICAgZnVuY3Rpb24oX0Jhc2VGb3JtQ29udHJvbCkge1xuICAgICAgICAgICAgICAgIF9pbmhlcml0c0xvb3NlKFNlbGVjdCwgX0Jhc2VGb3JtQ29udHJvbCk7XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBTZWxlY3QoJGVsZW1lbnQsIGNvbmZpZykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXM7XG5cbiAgICAgICAgICAgICAgICAgICAgX3RoaXMgPSBfQmFzZUZvcm1Db250cm9sLmNhbGwodGhpcywgJGVsZW1lbnQsICQkJDEuZXh0ZW5kKHRydWUsIC8ve2ludmFsaWRDb21wb25lbnRNYXRjaGVzOiBbQ2hlY2tib3gsIEZpbGUsIFJhZGlvLCBTd2l0Y2gsIFRleHQsIFRleHRhcmVhXX0sXG4gICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0LCBjb25maWcpKSB8fCB0aGlzOyAvLyBmbG9hdGluZyBsYWJlbHMgd2lsbCBjb3ZlciB0aGUgb3B0aW9ucywgc28gdHJpZ2dlciB0aGVtIHRvIGJlIGFib3ZlIChpZiB1c2VkKVxuXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmFkZElzRmlsbGVkKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBfcHJvdG8gPSBTZWxlY3QucHJvdG90eXBlO1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLmRpc3Bvc2UgPSBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgICAgICAgICAgICAgICAgICBfQmFzZUZvcm1Db250cm9sLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcywgREFUQV9LRVkpO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBTZWxlY3QubWF0Y2hlcyA9IGZ1bmN0aW9uIG1hdGNoZXMoJGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRlbGVtZW50LnByb3AoXCJ0YWdOYW1lXCIpID09PSBcInNlbGVjdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgU2VsZWN0LnJlamVjdE1hdGNoID0gZnVuY3Rpb24gcmVqZWN0TWF0Y2goY29tcG9uZW50LCAkZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICBVdGlsJDIuYXNzZXJ0KHRoaXMuJGVsZW1lbnQsIHRoaXMubWF0Y2hlcygkZWxlbWVudCksIGNvbXBvbmVudCArIFwiIGNvbXBvbmVudCBlbGVtZW50IFwiICsgVXRpbCQyLmRlc2NyaWJlKCRlbGVtZW50KSArIFwiIGlzIGludmFsaWQgZm9yIDxzZWxlY3Q+LlwiKTtcbiAgICAgICAgICAgICAgICB9OyAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgICAgICAvLyBwcm90ZWN0ZWRcbiAgICAgICAgICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgICAgICAvLyBwcml2YXRlXG4gICAgICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICAgICAgLy8gc3RhdGljXG5cblxuICAgICAgICAgICAgICAgIFNlbGVjdC5falF1ZXJ5SW50ZXJmYWNlID0gZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkZWxlbWVudCA9ICQkJDEodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9ICRlbGVtZW50LmRhdGEoREFUQV9LRVkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gbmV3IFNlbGVjdCgkZWxlbWVudCwgY29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC5kYXRhKERBVEFfS0VZLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBTZWxlY3Q7XG4gICAgICAgICAgICB9KEJhc2VGb3JtQ29udHJvbCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICogalF1ZXJ5XG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKi9cblxuXG4gICAgICAgICQkJDEuZm5bSlFVRVJZX05BTUVdID0gU2VsZWN0Ll9qUXVlcnlJbnRlcmZhY2U7XG4gICAgICAgICQkJDEuZm5bSlFVRVJZX05BTUVdLkNvbnN0cnVjdG9yID0gU2VsZWN0O1xuXG4gICAgICAgICQkJDEuZm5bSlFVRVJZX05BTUVdLm5vQ29uZmxpY3QgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQkJDEuZm5bSlFVRVJZX05BTUVdID0gSlFVRVJZX05PX0NPTkZMSUNUO1xuICAgICAgICAgICAgcmV0dXJuIFNlbGVjdC5falF1ZXJ5SW50ZXJmYWNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBTZWxlY3Q7XG4gICAgfShqUXVlcnkpO1xuXG4gICAgdmFyIFN3aXRjaCA9IGZ1bmN0aW9uKCQkJDEpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKiBDb25zdGFudHNcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgTkFNRSA9IFwic3dpdGNoXCI7XG4gICAgICAgIHZhciBEQVRBX0tFWSA9IFwiYm1kLlwiICsgTkFNRTtcbiAgICAgICAgdmFyIEpRVUVSWV9OQU1FID0gXCJibWRcIiArIChOQU1FLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgTkFNRS5zbGljZSgxKSk7XG4gICAgICAgIHZhciBKUVVFUllfTk9fQ09ORkxJQ1QgPSAkJCQxLmZuW0pRVUVSWV9OQU1FXTtcbiAgICAgICAgdmFyIERlZmF1bHQgPSB7XG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCI8c3BhbiBjbGFzcz0nYm1kLXN3aXRjaC10cmFjayc+PC9zcGFuPlwiXG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICogQ2xhc3MgRGVmaW5pdGlvblxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICovXG5cbiAgICAgICAgdmFyIFN3aXRjaCA9XG4gICAgICAgICAgICAvKiNfX1BVUkVfXyovXG4gICAgICAgICAgICBmdW5jdGlvbihfQ2hlY2tib3gpIHtcbiAgICAgICAgICAgICAgICBfaW5oZXJpdHNMb29zZShTd2l0Y2gsIF9DaGVja2JveCk7XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBTd2l0Y2goJGVsZW1lbnQsIGNvbmZpZywgcHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcyA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0VHlwZTogXCJjaGVja2JveFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dGVyQ2xhc3M6IFwic3dpdGNoXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX0NoZWNrYm94LmNhbGwodGhpcywgJGVsZW1lbnQsICQkJDEuZXh0ZW5kKHRydWUsIHt9LCBEZWZhdWx0LCBjb25maWcpLCBwcm9wZXJ0aWVzKSB8fCB0aGlzOyAvLyBzZWxlY3RvcjogJy5zd2l0Y2ggPiBsYWJlbCA+IGlucHV0W3R5cGU9Y2hlY2tib3hdJ1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBfcHJvdG8gPSBTd2l0Y2gucHJvdG90eXBlO1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLmRpc3Bvc2UgPSBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgICAgICAgICAgICAgICAgICBfQ2hlY2tib3gucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzLCBEQVRBX0tFWSk7XG4gICAgICAgICAgICAgICAgfTsgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICAgICAgLy8gcHJvdGVjdGVkXG4gICAgICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICAgICAgLy8gcHJpdmF0ZVxuICAgICAgICAgICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgICAgIC8vIHN0YXRpY1xuXG5cbiAgICAgICAgICAgICAgICBTd2l0Y2guX2pRdWVyeUludGVyZmFjZSA9IGZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGVsZW1lbnQgPSAkJCQxKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSAkZWxlbWVudC5kYXRhKERBVEFfS0VZKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IG5ldyBTd2l0Y2goJGVsZW1lbnQsIGNvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnQuZGF0YShEQVRBX0tFWSwgZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gU3dpdGNoO1xuICAgICAgICAgICAgfShDaGVja2JveCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICogalF1ZXJ5XG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKi9cblxuXG4gICAgICAgICQkJDEuZm5bSlFVRVJZX05BTUVdID0gU3dpdGNoLl9qUXVlcnlJbnRlcmZhY2U7XG4gICAgICAgICQkJDEuZm5bSlFVRVJZX05BTUVdLkNvbnN0cnVjdG9yID0gU3dpdGNoO1xuXG4gICAgICAgICQkJDEuZm5bSlFVRVJZX05BTUVdLm5vQ29uZmxpY3QgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQkJDEuZm5bSlFVRVJZX05BTUVdID0gSlFVRVJZX05PX0NPTkZMSUNUO1xuICAgICAgICAgICAgcmV0dXJuIFN3aXRjaC5falF1ZXJ5SW50ZXJmYWNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBTd2l0Y2g7XG4gICAgfShqUXVlcnkpO1xuXG4gICAgLy9pbXBvcnQgRmlsZSBmcm9tICcuL2ZpbGUnXG4gICAgLy9pbXBvcnQgUmFkaW8gZnJvbSAnLi9yYWRpbydcbiAgICAvL2ltcG9ydCBTd2l0Y2ggZnJvbSAnLi9zd2l0Y2gnXG4gICAgLy9pbXBvcnQgVGV4dGFyZWEgZnJvbSAnLi90ZXh0YXJlYSdcbiAgICAvL2ltcG9ydCBTZWxlY3QgZnJvbSAnLi9zZWxlY3QnXG5cbiAgICB2YXIgVGV4dCA9IGZ1bmN0aW9uKCQkJDEpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKiBDb25zdGFudHNcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgTkFNRSA9IFwidGV4dFwiO1xuICAgICAgICB2YXIgREFUQV9LRVkgPSBcImJtZC5cIiArIE5BTUU7XG4gICAgICAgIHZhciBKUVVFUllfTkFNRSA9IFwiYm1kXCIgKyAoTkFNRS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIE5BTUUuc2xpY2UoMSkpO1xuICAgICAgICB2YXIgSlFVRVJZX05PX0NPTkZMSUNUID0gJCQkMS5mbltKUVVFUllfTkFNRV07XG4gICAgICAgIHZhciBEZWZhdWx0ID0ge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICogQ2xhc3MgRGVmaW5pdGlvblxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICovXG5cbiAgICAgICAgdmFyIFRleHQgPVxuICAgICAgICAgICAgLyojX19QVVJFX18qL1xuICAgICAgICAgICAgZnVuY3Rpb24oX0Jhc2VGb3JtQ29udHJvbCkge1xuICAgICAgICAgICAgICAgIF9pbmhlcml0c0xvb3NlKFRleHQsIF9CYXNlRm9ybUNvbnRyb2wpO1xuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gVGV4dCgkZWxlbWVudCwgY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfQmFzZUZvcm1Db250cm9sLmNhbGwodGhpcywgJGVsZW1lbnQsICQkJDEuZXh0ZW5kKHRydWUsIC8ve2ludmFsaWRDb21wb25lbnRNYXRjaGVzOiBbQ2hlY2tib3gsIEZpbGUsIFJhZGlvLCBTd2l0Y2gsIFNlbGVjdCwgVGV4dGFyZWFdfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQsIGNvbmZpZykpIHx8IHRoaXM7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIF9wcm90byA9IFRleHQucHJvdG90eXBlO1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLmRpc3Bvc2UgPSBmdW5jdGlvbiBkaXNwb3NlKGRhdGFLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFLZXkgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUtleSA9IERBVEFfS0VZO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgX0Jhc2VGb3JtQ29udHJvbC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMsIGRhdGFLZXkpO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBUZXh0Lm1hdGNoZXMgPSBmdW5jdGlvbiBtYXRjaGVzKCRlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkZWxlbWVudC5hdHRyKFwidHlwZVwiKSA9PT0gXCJ0ZXh0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBUZXh0LnJlamVjdE1hdGNoID0gZnVuY3Rpb24gcmVqZWN0TWF0Y2goY29tcG9uZW50LCAkZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICBVdGlsJDIuYXNzZXJ0KHRoaXMuJGVsZW1lbnQsIHRoaXMubWF0Y2hlcygkZWxlbWVudCksIGNvbXBvbmVudCArIFwiIGNvbXBvbmVudCBlbGVtZW50IFwiICsgVXRpbCQyLmRlc2NyaWJlKCRlbGVtZW50KSArIFwiIGlzIGludmFsaWQgZm9yIHR5cGU9J3RleHQnLlwiKTtcbiAgICAgICAgICAgICAgICB9OyAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgICAgICAvLyBwcm90ZWN0ZWRcbiAgICAgICAgICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgICAgICAvLyBwcml2YXRlXG4gICAgICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICAgICAgLy8gc3RhdGljXG5cblxuICAgICAgICAgICAgICAgIFRleHQuX2pRdWVyeUludGVyZmFjZSA9IGZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGVsZW1lbnQgPSAkJCQxKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSAkZWxlbWVudC5kYXRhKERBVEFfS0VZKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IG5ldyBUZXh0KCRlbGVtZW50LCBjb25maWcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRlbGVtZW50LmRhdGEoREFUQV9LRVksIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFRleHQ7XG4gICAgICAgICAgICB9KEJhc2VGb3JtQ29udHJvbCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICogalF1ZXJ5XG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKi9cblxuXG4gICAgICAgICQkJDEuZm5bSlFVRVJZX05BTUVdID0gVGV4dC5falF1ZXJ5SW50ZXJmYWNlO1xuICAgICAgICAkJCQxLmZuW0pRVUVSWV9OQU1FXS5Db25zdHJ1Y3RvciA9IFRleHQ7XG5cbiAgICAgICAgJCQkMS5mbltKUVVFUllfTkFNRV0ubm9Db25mbGljdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCQkMS5mbltKUVVFUllfTkFNRV0gPSBKUVVFUllfTk9fQ09ORkxJQ1Q7XG4gICAgICAgICAgICByZXR1cm4gVGV4dC5falF1ZXJ5SW50ZXJmYWNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBUZXh0O1xuICAgIH0oalF1ZXJ5KTtcblxuICAgIC8vaW1wb3J0IEZpbGUgZnJvbSAnLi9maWxlJ1xuICAgIC8vaW1wb3J0IFJhZGlvIGZyb20gJy4vcmFkaW8nXG4gICAgLy9pbXBvcnQgU3dpdGNoIGZyb20gJy4vc3dpdGNoJ1xuICAgIC8vaW1wb3J0IFRleHQgZnJvbSAnLi90ZXh0J1xuICAgIC8vaW1wb3J0IFNlbGVjdCBmcm9tICcuL3NlbGVjdCdcblxuICAgIHZhciBUZXh0YXJlYSA9IGZ1bmN0aW9uKCQkJDEpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKiBDb25zdGFudHNcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgTkFNRSA9IFwidGV4dGFyZWFcIjtcbiAgICAgICAgdmFyIERBVEFfS0VZID0gXCJibWQuXCIgKyBOQU1FO1xuICAgICAgICB2YXIgSlFVRVJZX05BTUUgPSBcImJtZFwiICsgKE5BTUUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBOQU1FLnNsaWNlKDEpKTtcbiAgICAgICAgdmFyIEpRVUVSWV9OT19DT05GTElDVCA9ICQkJDEuZm5bSlFVRVJZX05BTUVdO1xuICAgICAgICB2YXIgRGVmYXVsdCA9IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqIENsYXNzIERlZmluaXRpb25cbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqL1xuXG4gICAgICAgIHZhciBUZXh0YXJlYSA9XG4gICAgICAgICAgICAvKiNfX1BVUkVfXyovXG4gICAgICAgICAgICBmdW5jdGlvbihfQmFzZUZvcm1Db250cm9sKSB7XG4gICAgICAgICAgICAgICAgX2luaGVyaXRzTG9vc2UoVGV4dGFyZWEsIF9CYXNlRm9ybUNvbnRyb2wpO1xuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gVGV4dGFyZWEoJGVsZW1lbnQsIGNvbmZpZykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX0Jhc2VGb3JtQ29udHJvbC5jYWxsKHRoaXMsICRlbGVtZW50LCAkJCQxLmV4dGVuZCh0cnVlLCAvL3tpbnZhbGlkQ29tcG9uZW50TWF0Y2hlczogW0NoZWNrYm94LCBGaWxlLCBSYWRpbywgVGV4dCwgU2VsZWN0LCBTd2l0Y2hdfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQsIGNvbmZpZykpIHx8IHRoaXM7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIF9wcm90byA9IFRleHRhcmVhLnByb3RvdHlwZTtcblxuICAgICAgICAgICAgICAgIF9wcm90by5kaXNwb3NlID0gZnVuY3Rpb24gZGlzcG9zZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgX0Jhc2VGb3JtQ29udHJvbC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMsIERBVEFfS0VZKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgVGV4dGFyZWEubWF0Y2hlcyA9IGZ1bmN0aW9uIG1hdGNoZXMoJGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRlbGVtZW50LnByb3AoXCJ0YWdOYW1lXCIpID09PSBcInRleHRhcmVhXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBUZXh0YXJlYS5yZWplY3RNYXRjaCA9IGZ1bmN0aW9uIHJlamVjdE1hdGNoKGNvbXBvbmVudCwgJGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgVXRpbCQyLmFzc2VydCh0aGlzLiRlbGVtZW50LCB0aGlzLm1hdGNoZXMoJGVsZW1lbnQpLCBjb21wb25lbnQgKyBcIiBjb21wb25lbnQgZWxlbWVudCBcIiArIFV0aWwkMi5kZXNjcmliZSgkZWxlbWVudCkgKyBcIiBpcyBpbnZhbGlkIGZvciA8dGV4dGFyZWE+LlwiKTtcbiAgICAgICAgICAgICAgICB9OyAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgICAgICAvLyBwcm90ZWN0ZWRcbiAgICAgICAgICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgICAgICAvLyBwcml2YXRlXG4gICAgICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICAgICAgLy8gc3RhdGljXG5cblxuICAgICAgICAgICAgICAgIFRleHRhcmVhLl9qUXVlcnlJbnRlcmZhY2UgPSBmdW5jdGlvbiBfalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRlbGVtZW50ID0gJCQkMSh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gJGVsZW1lbnQuZGF0YShEQVRBX0tFWSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBuZXcgVGV4dGFyZWEoJGVsZW1lbnQsIGNvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnQuZGF0YShEQVRBX0tFWSwgZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gVGV4dGFyZWE7XG4gICAgICAgICAgICB9KEJhc2VGb3JtQ29udHJvbCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICogalF1ZXJ5XG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKi9cblxuXG4gICAgICAgICQkJDEuZm5bSlFVRVJZX05BTUVdID0gVGV4dGFyZWEuX2pRdWVyeUludGVyZmFjZTtcbiAgICAgICAgJCQkMS5mbltKUVVFUllfTkFNRV0uQ29uc3RydWN0b3IgPSBUZXh0YXJlYTtcblxuICAgICAgICAkJCQxLmZuW0pRVUVSWV9OQU1FXS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkJCQxLmZuW0pRVUVSWV9OQU1FXSA9IEpRVUVSWV9OT19DT05GTElDVDtcbiAgICAgICAgICAgIHJldHVybiBUZXh0YXJlYS5falF1ZXJ5SW50ZXJmYWNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBUZXh0YXJlYTtcbiAgICB9KGpRdWVyeSk7XG5cbiAgICAvKiBnbG9iYWwgUG9wcGVyICovXG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGlzIGEgY29weSBvZiB0aGUgQm9vdHN0cmFwJ3Mgb3JpZ2luYWwgZHJvcGRvd24uanMsIHdpdGggdGhlIG9ubHkgYWRkaXRpb25cbiAgICAgKiBvZiB0d28gbmV3IGNsYXNzZXM6ICdzaG93aW5nJyBhbmQgJ2hpZGluZycsIHVzZWQgdG8gaGFuZGxlIGFuaW1haXRvbnMuXG4gICAgICovXG4gICAgLyoqXG4gICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgKiBCb290c3RyYXAgKHY0LjAuMC1iZXRhKTogZHJvcGRvd24uanNcbiAgICAgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICovXG5cbiAgICB2YXIgRHJvcGRvd24gPSBmdW5jdGlvbigkJCQxKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDaGVjayBmb3IgUG9wcGVyIGRlcGVuZGVuY3lcbiAgICAgICAgICogUG9wcGVyIC0gaHR0cHM6Ly9wb3BwZXIuanMub3JnXG4gICAgICAgICAqL1xuICAgICAgICBpZiAodHlwZW9mIFBvcHBlciA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQm9vdHN0cmFwIGRyb3Bkb3duIHJlcXVpcmUgUG9wcGVyLmpzIChodHRwczovL3BvcHBlci5qcy5vcmcpJyk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKiBDb25zdGFudHNcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqL1xuXG5cbiAgICAgICAgdmFyIE5BTUUgPSAnZHJvcGRvd24nO1xuICAgICAgICB2YXIgVkVSU0lPTiA9ICc0LjAuMC1iZXRhJztcbiAgICAgICAgdmFyIERBVEFfS0VZID0gJ2JzLmRyb3Bkb3duJztcbiAgICAgICAgdmFyIEVWRU5UX0tFWSA9IFwiLlwiICsgREFUQV9LRVk7XG4gICAgICAgIHZhciBEQVRBX0FQSV9LRVkgPSAnLmRhdGEtYXBpJztcbiAgICAgICAgdmFyIEpRVUVSWV9OT19DT05GTElDVCA9ICQkJDEuZm5bTkFNRV07XG4gICAgICAgIHZhciBFU0NBUEVfS0VZQ09ERSA9IDI3OyAvLyBLZXlib2FyZEV2ZW50LndoaWNoIHZhbHVlIGZvciBFc2NhcGUgKEVzYykga2V5XG5cbiAgICAgICAgdmFyIFNQQUNFX0tFWUNPREUgPSAzMjsgLy8gS2V5Ym9hcmRFdmVudC53aGljaCB2YWx1ZSBmb3Igc3BhY2Uga2V5XG5cbiAgICAgICAgdmFyIFRBQl9LRVlDT0RFID0gOTsgLy8gS2V5Ym9hcmRFdmVudC53aGljaCB2YWx1ZSBmb3IgdGFiIGtleVxuXG4gICAgICAgIHZhciBBUlJPV19VUF9LRVlDT0RFID0gMzg7IC8vIEtleWJvYXJkRXZlbnQud2hpY2ggdmFsdWUgZm9yIHVwIGFycm93IGtleVxuXG4gICAgICAgIHZhciBBUlJPV19ET1dOX0tFWUNPREUgPSA0MDsgLy8gS2V5Ym9hcmRFdmVudC53aGljaCB2YWx1ZSBmb3IgZG93biBhcnJvdyBrZXlcblxuICAgICAgICB2YXIgUklHSFRfTU9VU0VfQlVUVE9OX1dISUNIID0gMzsgLy8gTW91c2VFdmVudC53aGljaCB2YWx1ZSBmb3IgdGhlIHJpZ2h0IGJ1dHRvbiAoYXNzdW1pbmcgYSByaWdodC1oYW5kZWQgbW91c2UpXG5cbiAgICAgICAgdmFyIFJFR0VYUF9LRVlET1dOID0gbmV3IFJlZ0V4cChBUlJPV19VUF9LRVlDT0RFICsgXCJ8XCIgKyBBUlJPV19ET1dOX0tFWUNPREUgKyBcInxcIiArIEVTQ0FQRV9LRVlDT0RFKTtcbiAgICAgICAgdmFyIEV2ZW50ID0ge1xuICAgICAgICAgICAgSElERTogXCJoaWRlXCIgKyBFVkVOVF9LRVksXG4gICAgICAgICAgICBISURERU46IFwiaGlkZGVuXCIgKyBFVkVOVF9LRVksXG4gICAgICAgICAgICBTSE9XOiBcInNob3dcIiArIEVWRU5UX0tFWSxcbiAgICAgICAgICAgIFNIT1dOOiBcInNob3duXCIgKyBFVkVOVF9LRVksXG4gICAgICAgICAgICBDTElDSzogXCJjbGlja1wiICsgRVZFTlRfS0VZLFxuICAgICAgICAgICAgQ0xJQ0tfREFUQV9BUEk6IFwiY2xpY2tcIiArIEVWRU5UX0tFWSArIERBVEFfQVBJX0tFWSxcbiAgICAgICAgICAgIEtFWURPV05fREFUQV9BUEk6IFwia2V5ZG93blwiICsgRVZFTlRfS0VZICsgREFUQV9BUElfS0VZLFxuICAgICAgICAgICAgS0VZVVBfREFUQV9BUEk6IFwia2V5dXBcIiArIEVWRU5UX0tFWSArIERBVEFfQVBJX0tFWSxcbiAgICAgICAgICAgIFRSQU5TSVRJT05fRU5EOiAndHJhbnNpdGlvbmVuZCB3ZWJraXRUcmFuc2l0aW9uRW5kIG9UcmFuc2l0aW9uRW5kIGFuaW1hdGlvbmVuZCB3ZWJraXRBbmltYXRpb25FbmQgb0FuaW1hdGlvbkVuZCdcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIENsYXNzTmFtZSA9IHtcbiAgICAgICAgICAgIERJU0FCTEVEOiAnZGlzYWJsZWQnLFxuICAgICAgICAgICAgU0hPVzogJ3Nob3cnLFxuICAgICAgICAgICAgU0hPV0lORzogJ3Nob3dpbmcnLFxuICAgICAgICAgICAgSElESU5HOiAnaGlkaW5nJyxcbiAgICAgICAgICAgIERST1BVUDogJ2Ryb3B1cCcsXG4gICAgICAgICAgICBNRU5VUklHSFQ6ICdkcm9wZG93bi1tZW51LXJpZ2h0JyxcbiAgICAgICAgICAgIE1FTlVMRUZUOiAnZHJvcGRvd24tbWVudS1sZWZ0J1xuICAgICAgICB9O1xuICAgICAgICB2YXIgU2VsZWN0b3IgPSB7XG4gICAgICAgICAgICBEQVRBX1RPR0dMRTogJ1tkYXRhLXRvZ2dsZT1cImRyb3Bkb3duXCJdJyxcbiAgICAgICAgICAgIEZPUk1fQ0hJTEQ6ICcuZHJvcGRvd24gZm9ybScsXG4gICAgICAgICAgICBNRU5VOiAnLmRyb3Bkb3duLW1lbnUnLFxuICAgICAgICAgICAgTkFWQkFSX05BVjogJy5uYXZiYXItbmF2JyxcbiAgICAgICAgICAgIFZJU0lCTEVfSVRFTVM6ICcuZHJvcGRvd24tbWVudSAuZHJvcGRvd24taXRlbTpub3QoLmRpc2FibGVkKSdcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIEF0dGFjaG1lbnRNYXAgPSB7XG4gICAgICAgICAgICBUT1A6ICd0b3Atc3RhcnQnLFxuICAgICAgICAgICAgVE9QRU5EOiAndG9wLWVuZCcsXG4gICAgICAgICAgICBCT1RUT006ICdib3R0b20tc3RhcnQnLFxuICAgICAgICAgICAgQk9UVE9NRU5EOiAnYm90dG9tLWVuZCdcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIERlZmF1bHQgPSB7XG4gICAgICAgICAgICBwbGFjZW1lbnQ6IEF0dGFjaG1lbnRNYXAuQk9UVE9NLFxuICAgICAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICAgICAgZmxpcDogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgICB2YXIgRGVmYXVsdFR5cGUgPSB7XG4gICAgICAgICAgICBwbGFjZW1lbnQ6ICdzdHJpbmcnLFxuICAgICAgICAgICAgb2Zmc2V0OiAnKG51bWJlcnxzdHJpbmcpJyxcbiAgICAgICAgICAgIGZsaXA6ICdib29sZWFuJ1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgICAqIENsYXNzIERlZmluaXRpb25cbiAgICAgICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgICovXG5cbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgRHJvcGRvd24gPVxuICAgICAgICAgICAgLyojX19QVVJFX18qL1xuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gRHJvcGRvd24oZWxlbWVudCwgY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9wb3BwZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb25maWcgPSB0aGlzLl9nZXRDb25maWcoY29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWVudSA9IHRoaXMuX2dldE1lbnVFbGVtZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2luTmF2YmFyID0gdGhpcy5fZGV0ZWN0TmF2YmFyKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYWRkRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgICAgICAgICB9IC8vIGdldHRlcnNcblxuXG4gICAgICAgICAgICAgICAgdmFyIF9wcm90byA9IERyb3Bkb3duLnByb3RvdHlwZTtcblxuICAgICAgICAgICAgICAgIC8vIHB1YmxpY1xuICAgICAgICAgICAgICAgIF9wcm90by50b2dnbGUgPSBmdW5jdGlvbiB0b2dnbGUoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2VsZW1lbnQuZGlzYWJsZWQgfHwgJCQkMSh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuRElTQUJMRUQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFyZW50ID0gRHJvcGRvd24uX2dldFBhcmVudEZyb21FbGVtZW50KHRoaXMuX2VsZW1lbnQpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBpc0FjdGl2ZSA9ICQkJDEodGhpcy5fbWVudSkuaGFzQ2xhc3MoQ2xhc3NOYW1lLlNIT1cpO1xuXG4gICAgICAgICAgICAgICAgICAgIERyb3Bkb3duLl9jbGVhck1lbnVzKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVsYXRlZFRhcmdldCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0ZWRUYXJnZXQ6IHRoaXMuX2VsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNob3dFdmVudCA9ICQkJDEuRXZlbnQoRXZlbnQuU0hPVywgcmVsYXRlZFRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgICQkJDEocGFyZW50KS50cmlnZ2VyKHNob3dFdmVudCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHNob3dFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLl9lbGVtZW50OyAvLyBmb3IgZHJvcHVwIHdpdGggYWxpZ25tZW50IHdlIHVzZSB0aGUgcGFyZW50IGFzIHBvcHBlciBjb250YWluZXJcblxuICAgICAgICAgICAgICAgICAgICBpZiAoJCQkMShwYXJlbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5EUk9QVVApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCQkMSh0aGlzLl9tZW51KS5oYXNDbGFzcyhDbGFzc05hbWUuTUVOVUxFRlQpIHx8ICQkJDEodGhpcy5fbWVudSkuaGFzQ2xhc3MoQ2xhc3NOYW1lLk1FTlVSSUdIVCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcG9wcGVyID0gbmV3IFBvcHBlcihlbGVtZW50LCB0aGlzLl9tZW51LCB0aGlzLl9nZXRQb3BwZXJDb25maWcoKSk7IC8vIGlmIHRoaXMgaXMgYSB0b3VjaC1lbmFibGVkIGRldmljZSB3ZSBhZGQgZXh0cmFcbiAgICAgICAgICAgICAgICAgICAgLy8gZW1wdHkgbW91c2VvdmVyIGxpc3RlbmVycyB0byB0aGUgYm9keSdzIGltbWVkaWF0ZSBjaGlsZHJlbjtcbiAgICAgICAgICAgICAgICAgICAgLy8gb25seSBuZWVkZWQgYmVjYXVzZSBvZiBicm9rZW4gZXZlbnQgZGVsZWdhdGlvbiBvbiBpT1NcbiAgICAgICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly93d3cucXVpcmtzbW9kZS5vcmcvYmxvZy9hcmNoaXZlcy8yMDE0LzAyL21vdXNlX2V2ZW50X2J1Yi5odG1sXG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCdvbnRvdWNoc3RhcnQnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiAhJCQkMShwYXJlbnQpLmNsb3Nlc3QoU2VsZWN0b3IuTkFWQkFSX05BVikubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkJCQxKCdib2R5JykuY2hpbGRyZW4oKS5vbignbW91c2VvdmVyJywgbnVsbCwgJCQkMS5ub29wKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQuZm9jdXMoKTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsIHRydWUpO1xuXG4gICAgICAgICAgICAgICAgICAgICQkJDEodGhpcy5fbWVudSkub25lKEV2ZW50LlRSQU5TSVRJT05fRU5ELCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQkJDEocGFyZW50KS50cmlnZ2VyKCQkJDEuRXZlbnQoRXZlbnQuU0hPV04sIHJlbGF0ZWRUYXJnZXQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQkJDEoX3RoaXMuX21lbnUpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5TSE9XSU5HKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICQkJDEodGhpcy5fbWVudSkuYWRkQ2xhc3MoQ2xhc3NOYW1lLlNIT1cgKyBcIiBcIiArIENsYXNzTmFtZS5TSE9XSU5HKTtcbiAgICAgICAgICAgICAgICAgICAgJCQkMShwYXJlbnQpLmFkZENsYXNzKENsYXNzTmFtZS5TSE9XKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLmRpc3Bvc2UgPSBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgICAgICAgICAgICAgICAgICAkJCQxLnJlbW92ZURhdGEodGhpcy5fZWxlbWVudCwgREFUQV9LRVkpO1xuICAgICAgICAgICAgICAgICAgICAkJCQxKHRoaXMuX2VsZW1lbnQpLm9mZihFVkVOVF9LRVkpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWVudSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3BvcHBlciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcG9wcGVyLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3BvcHBlciA9IG51bGw7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIF9wcm90by51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2luTmF2YmFyID0gdGhpcy5fZGV0ZWN0TmF2YmFyKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3BvcHBlciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcG9wcGVyLnNjaGVkdWxlVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9OyAvLyBwcml2YXRlXG5cblxuICAgICAgICAgICAgICAgIF9wcm90by5fYWRkRXZlbnRMaXN0ZW5lcnMgPSBmdW5jdGlvbiBfYWRkRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgICAgICQkJDEodGhpcy5fZWxlbWVudCkub24oRXZlbnQuQ0xJQ0ssIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi50b2dnbGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIF9wcm90by5fZ2V0Q29uZmlnID0gZnVuY3Rpb24gX2dldENvbmZpZyhjb25maWcpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnREYXRhID0gJCQkMSh0aGlzLl9lbGVtZW50KS5kYXRhKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnREYXRhLnBsYWNlbWVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50RGF0YS5wbGFjZW1lbnQgPSBBdHRhY2htZW50TWFwW2VsZW1lbnREYXRhLnBsYWNlbWVudC50b1VwcGVyQ2FzZSgpXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZyA9ICQkJDEuZXh0ZW5kKHt9LCB0aGlzLmNvbnN0cnVjdG9yLkRlZmF1bHQsICQkJDEodGhpcy5fZWxlbWVudCkuZGF0YSgpLCBjb25maWcpO1xuICAgICAgICAgICAgICAgICAgICBVdGlsLnR5cGVDaGVja0NvbmZpZyhOQU1FLCBjb25maWcsIHRoaXMuY29uc3RydWN0b3IuRGVmYXVsdFR5cGUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29uZmlnO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uX2dldE1lbnVFbGVtZW50ID0gZnVuY3Rpb24gX2dldE1lbnVFbGVtZW50KCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX21lbnUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnQgPSBEcm9wZG93bi5fZ2V0UGFyZW50RnJvbUVsZW1lbnQodGhpcy5fZWxlbWVudCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX21lbnUgPSAkJCQxKHBhcmVudCkuZmluZChTZWxlY3Rvci5NRU5VKVswXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9tZW51O1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uX2dldFBsYWNlbWVudCA9IGZ1bmN0aW9uIF9nZXRQbGFjZW1lbnQoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciAkcGFyZW50RHJvcGRvd24gPSAkJCQxKHRoaXMuX2VsZW1lbnQpLnBhcmVudCgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGxhY2VtZW50ID0gdGhpcy5fY29uZmlnLnBsYWNlbWVudDsgLy8gSGFuZGxlIGRyb3B1cFxuXG4gICAgICAgICAgICAgICAgICAgIGlmICgkcGFyZW50RHJvcGRvd24uaGFzQ2xhc3MoQ2xhc3NOYW1lLkRST1BVUCkgfHwgdGhpcy5fY29uZmlnLnBsYWNlbWVudCA9PT0gQXR0YWNobWVudE1hcC5UT1ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudCA9IEF0dGFjaG1lbnRNYXAuVE9QO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCQkMSh0aGlzLl9tZW51KS5oYXNDbGFzcyhDbGFzc05hbWUuTUVOVVJJR0hUKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudCA9IEF0dGFjaG1lbnRNYXAuVE9QRU5EO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCQkJDEodGhpcy5fbWVudSkuaGFzQ2xhc3MoQ2xhc3NOYW1lLk1FTlVSSUdIVCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudCA9IEF0dGFjaG1lbnRNYXAuQk9UVE9NRU5EO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBsYWNlbWVudDtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLl9kZXRlY3ROYXZiYXIgPSBmdW5jdGlvbiBfZGV0ZWN0TmF2YmFyKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJCQkMSh0aGlzLl9lbGVtZW50KS5jbG9zZXN0KCcubmF2YmFyJykubGVuZ3RoID4gMDtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLl9nZXRQb3BwZXJDb25maWcgPSBmdW5jdGlvbiBfZ2V0UG9wcGVyQ29uZmlnKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcG9wcGVyQ29uZmlnID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50OiB0aGlzLl9nZXRQbGFjZW1lbnQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGlmaWVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQ6IHRoaXMuX2NvbmZpZy5vZmZzZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsaXA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogdGhpcy5fY29uZmlnLmZsaXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IC8vIERpc2FibGUgUG9wcGVyLmpzIGZvciBEcm9wZG93biBpbiBOYXZiYXJcblxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pbk5hdmJhcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9wcGVyQ29uZmlnLm1vZGlmaWVycy5hcHBseVN0eWxlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6ICF0aGlzLl9pbk5hdmJhclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwb3BwZXJDb25maWc7XG4gICAgICAgICAgICAgICAgfTsgLy8gc3RhdGljXG5cblxuICAgICAgICAgICAgICAgIERyb3Bkb3duLl9qUXVlcnlJbnRlcmZhY2UgPSBmdW5jdGlvbiBfalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSAkJCQxKHRoaXMpLmRhdGEoREFUQV9LRVkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2NvbmZpZyA9IHR5cGVvZiBjb25maWcgPT09ICdvYmplY3QnID8gY29uZmlnIDogbnVsbDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IG5ldyBEcm9wZG93bih0aGlzLCBfY29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkJCQxKHRoaXMpLmRhdGEoREFUQV9LRVksIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YVtjb25maWddID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gbWV0aG9kIG5hbWVkIFxcXCJcIiArIGNvbmZpZyArIFwiXFxcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhW2NvbmZpZ10oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIERyb3Bkb3duLl9jbGVhck1lbnVzID0gZnVuY3Rpb24gX2NsZWFyTWVudXMoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50ICYmIChldmVudC53aGljaCA9PT0gUklHSFRfTU9VU0VfQlVUVE9OX1dISUNIIHx8IGV2ZW50LnR5cGUgPT09ICdrZXl1cCcgJiYgZXZlbnQud2hpY2ggIT09IFRBQl9LRVlDT0RFKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvZ2dsZXMgPSAkJCQxLm1ha2VBcnJheSgkJCQxKFNlbGVjdG9yLkRBVEFfVE9HR0xFKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudCA9IERyb3Bkb3duLl9nZXRQYXJlbnRGcm9tRWxlbWVudCh0b2dnbGVzW2ldKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRleHQgPSAkJCQxKHRvZ2dsZXNbaV0pLmRhdGEoREFUQV9LRVkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlbGF0ZWRUYXJnZXQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRlZFRhcmdldDogdG9nZ2xlc1tpXVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiY29udGludWVcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRyb3Bkb3duTWVudSA9IGNvbnRleHQuX21lbnU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghJCQkMShwYXJlbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5TSE9XKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImNvbnRpbnVlXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudCAmJiAoZXZlbnQudHlwZSA9PT0gJ2NsaWNrJyAmJiAvaW5wdXR8dGV4dGFyZWEvaS50ZXN0KGV2ZW50LnRhcmdldC50YWdOYW1lKSB8fCBldmVudC50eXBlID09PSAna2V5dXAnICYmIGV2ZW50LndoaWNoID09PSBUQUJfS0VZQ09ERSkgJiYgJCQkMS5jb250YWlucyhwYXJlbnQsIGV2ZW50LnRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJjb250aW51ZVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGlkZUV2ZW50ID0gJCQkMS5FdmVudChFdmVudC5ISURFLCByZWxhdGVkVGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQkJDEocGFyZW50KS50cmlnZ2VyKGhpZGVFdmVudCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoaWRlRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJjb250aW51ZVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSAvLyBpZiB0aGlzIGlzIGEgdG91Y2gtZW5hYmxlZCBkZXZpY2Ugd2UgcmVtb3ZlIHRoZSBleHRyYVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZW1wdHkgbW91c2VvdmVyIGxpc3RlbmVycyB3ZSBhZGRlZCBmb3IgaU9TIHN1cHBvcnRcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJ29udG91Y2hzdGFydCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCQkMSgnYm9keScpLmNoaWxkcmVuKCkub2ZmKCdtb3VzZW92ZXInLCBudWxsLCAkJCQxLm5vb3ApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGVzW2ldLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICdmYWxzZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCQkMShkcm9wZG93bk1lbnUpLmFkZENsYXNzKENsYXNzTmFtZS5ISURJTkcpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5TSE9XKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQkJDEocGFyZW50KS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuU0hPVyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkJCQxKGRyb3Bkb3duTWVudSkub25lKEV2ZW50LlRSQU5TSVRJT05fRU5ELCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkJCQxKHBhcmVudCkudHJpZ2dlcigkJCQxLkV2ZW50KEV2ZW50LkhJRERFTiwgcmVsYXRlZFRhcmdldCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQkJDEoZHJvcGRvd25NZW51KS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuSElESU5HKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdG9nZ2xlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9yZXQgPSBfbG9vcChpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9yZXQgPT09IFwiY29udGludWVcIikgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgRHJvcGRvd24uX2dldFBhcmVudEZyb21FbGVtZW50ID0gZnVuY3Rpb24gX2dldFBhcmVudEZyb21FbGVtZW50KGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdG9yID0gVXRpbC5nZXRTZWxlY3RvckZyb21FbGVtZW50KGVsZW1lbnQpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50ID0gJCQkMShzZWxlY3RvcilbMF07XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyZW50IHx8IGVsZW1lbnQucGFyZW50Tm9kZTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgRHJvcGRvd24uX2RhdGFBcGlLZXlkb3duSGFuZGxlciA9IGZ1bmN0aW9uIF9kYXRhQXBpS2V5ZG93bkhhbmRsZXIoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFSRUdFWFBfS0VZRE9XTi50ZXN0KGV2ZW50LndoaWNoKSB8fCAvYnV0dG9uL2kudGVzdChldmVudC50YXJnZXQudGFnTmFtZSkgJiYgZXZlbnQud2hpY2ggPT09IFNQQUNFX0tFWUNPREUgfHwgL2lucHV0fHRleHRhcmVhL2kudGVzdChldmVudC50YXJnZXQudGFnTmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRpc2FibGVkIHx8ICQkJDEodGhpcykuaGFzQ2xhc3MoQ2xhc3NOYW1lLkRJU0FCTEVEKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudCA9IERyb3Bkb3duLl9nZXRQYXJlbnRGcm9tRWxlbWVudCh0aGlzKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgaXNBY3RpdmUgPSAkJCQxKHBhcmVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLlNIT1cpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNBY3RpdmUgJiYgKGV2ZW50LndoaWNoICE9PSBFU0NBUEVfS0VZQ09ERSB8fCBldmVudC53aGljaCAhPT0gU1BBQ0VfS0VZQ09ERSkgfHwgaXNBY3RpdmUgJiYgKGV2ZW50LndoaWNoID09PSBFU0NBUEVfS0VZQ09ERSB8fCBldmVudC53aGljaCA9PT0gU1BBQ0VfS0VZQ09ERSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC53aGljaCA9PT0gRVNDQVBFX0tFWUNPREUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG9nZ2xlID0gJCQkMShwYXJlbnQpLmZpbmQoU2VsZWN0b3IuREFUQV9UT0dHTEUpWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQkJDEodG9nZ2xlKS50cmlnZ2VyKCdmb2N1cycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAkJCQxKHRoaXMpLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbXMgPSAkJCQxKHBhcmVudCkuZmluZChTZWxlY3Rvci5WSVNJQkxFX0lURU1TKS5nZXQoKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIWl0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gaXRlbXMuaW5kZXhPZihldmVudC50YXJnZXQpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudC53aGljaCA9PT0gQVJST1dfVVBfS0VZQ09ERSAmJiBpbmRleCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVwXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleC0tO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LndoaWNoID09PSBBUlJPV19ET1dOX0tFWUNPREUgJiYgaW5kZXggPCBpdGVtcy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkb3duXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSAwO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaXRlbXNbaW5kZXhdLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIF9jcmVhdGVDbGFzcyhEcm9wZG93biwgbnVsbCwgW3tcbiAgICAgICAgICAgICAgICAgICAga2V5OiBcIlZFUlNJT05cIixcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gVkVSU0lPTjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiBcIkRlZmF1bHRcIixcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRGVmYXVsdDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiBcIkRlZmF1bHRUeXBlXCIsXG4gICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERlZmF1bHRUeXBlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfV0pO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIERyb3Bkb3duO1xuICAgICAgICAgICAgfSgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqIERhdGEgQXBpIGltcGxlbWVudGF0aW9uXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKi9cblxuXG4gICAgICAgICQkJDEoZG9jdW1lbnQpLm9uKEV2ZW50LktFWURPV05fREFUQV9BUEksIFNlbGVjdG9yLkRBVEFfVE9HR0xFLCBEcm9wZG93bi5fZGF0YUFwaUtleWRvd25IYW5kbGVyKS5vbihFdmVudC5LRVlET1dOX0RBVEFfQVBJLCBTZWxlY3Rvci5NRU5VLCBEcm9wZG93bi5fZGF0YUFwaUtleWRvd25IYW5kbGVyKS5vbihFdmVudC5DTElDS19EQVRBX0FQSSArIFwiIFwiICsgRXZlbnQuS0VZVVBfREFUQV9BUEksIERyb3Bkb3duLl9jbGVhck1lbnVzKS5vbihFdmVudC5DTElDS19EQVRBX0FQSSwgU2VsZWN0b3IuREFUQV9UT0dHTEUsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICAgIERyb3Bkb3duLl9qUXVlcnlJbnRlcmZhY2UuY2FsbCgkJCQxKHRoaXMpLCAndG9nZ2xlJyk7XG4gICAgICAgIH0pLm9uKEV2ZW50LkNMSUNLX0RBVEFfQVBJLCBTZWxlY3Rvci5GT1JNX0NISUxELCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB9KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKiBqUXVlcnlcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqL1xuXG4gICAgICAgICQkJDEuZm5bTkFNRV0gPSBEcm9wZG93bi5falF1ZXJ5SW50ZXJmYWNlO1xuICAgICAgICAkJCQxLmZuW05BTUVdLkNvbnN0cnVjdG9yID0gRHJvcGRvd247XG5cbiAgICAgICAgJCQkMS5mbltOQU1FXS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkJCQxLmZuW05BTUVdID0gSlFVRVJZX05PX0NPTkZMSUNUO1xuICAgICAgICAgICAgcmV0dXJuIERyb3Bkb3duLl9qUXVlcnlJbnRlcmZhY2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIERyb3Bkb3duO1xuICAgIH0oalF1ZXJ5KTtcblxuICAgIHZhciBCYXNlTGF5b3V0ID0gZnVuY3Rpb24oJCQkMSkge1xuICAgICAgICB2YXIgQ2xhc3NOYW1lID0ge1xuICAgICAgICAgICAgQ0FOVkFTOiBcImJtZC1sYXlvdXQtY2FudmFzXCIsXG4gICAgICAgICAgICBDT05UQUlORVI6IFwiYm1kLWxheW91dC1jb250YWluZXJcIixcbiAgICAgICAgICAgIEJBQ0tEUk9QOiBcImJtZC1sYXlvdXQtYmFja2Ryb3BcIlxuICAgICAgICB9O1xuICAgICAgICB2YXIgU2VsZWN0b3IgPSB7XG4gICAgICAgICAgICBDQU5WQVM6IFwiLlwiICsgQ2xhc3NOYW1lLkNBTlZBUyxcbiAgICAgICAgICAgIENPTlRBSU5FUjogXCIuXCIgKyBDbGFzc05hbWUuQ09OVEFJTkVSLFxuICAgICAgICAgICAgQkFDS0RST1A6IFwiLlwiICsgQ2xhc3NOYW1lLkJBQ0tEUk9QXG4gICAgICAgIH07XG4gICAgICAgIHZhciBEZWZhdWx0ID0ge1xuICAgICAgICAgICAgY2FudmFzOiB7XG4gICAgICAgICAgICAgICAgY3JlYXRlOiB0cnVlLFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBcIjxkaXYgY2xhc3M9XFxcIlwiICsgQ2xhc3NOYW1lLkNBTlZBUyArIFwiXFxcIj48L2Rpdj5cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJhY2tkcm9wOiB7XG4gICAgICAgICAgICAgICAgY3JlYXRlOiB0cnVlLFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBcIjxkaXYgY2xhc3M9XFxcIlwiICsgQ2xhc3NOYW1lLkJBQ0tEUk9QICsgXCJcXFwiPjwvZGl2PlwiXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICogQ2xhc3MgRGVmaW5pdGlvblxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICovXG5cbiAgICAgICAgdmFyIEJhc2VMYXlvdXQgPVxuICAgICAgICAgICAgLyojX19QVVJFX18qL1xuICAgICAgICAgICAgZnVuY3Rpb24oX0Jhc2UpIHtcbiAgICAgICAgICAgICAgICBfaW5oZXJpdHNMb29zZShCYXNlTGF5b3V0LCBfQmFzZSk7XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBCYXNlTGF5b3V0KCRlbGVtZW50LCBjb25maWcsIHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF90aGlzO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXMgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIF90aGlzID0gX0Jhc2UuY2FsbCh0aGlzLCAkZWxlbWVudCwgJCQkMS5leHRlbmQodHJ1ZSwge30sIERlZmF1bHQsIGNvbmZpZyksIHByb3BlcnRpZXMpIHx8IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLiRjb250YWluZXIgPSBfdGhpcy5maW5kQ29udGFpbmVyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy4kYmFja2Ryb3AgPSBfdGhpcy5yZXNvbHZlQmFja2Ryb3AoKTtcblxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZXNvbHZlQ2FudmFzKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBfcHJvdG8gPSBCYXNlTGF5b3V0LnByb3RvdHlwZTtcblxuICAgICAgICAgICAgICAgIF9wcm90by5kaXNwb3NlID0gZnVuY3Rpb24gZGlzcG9zZShkYXRhS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIF9CYXNlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcywgZGF0YUtleSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kY29udGFpbmVyID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kYmFja2Ryb3AgPSBudWxsO1xuICAgICAgICAgICAgICAgIH07IC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgICAgIC8vIHByb3RlY3RlZFxuICAgICAgICAgICAgICAgIC8vIFdpbGwgd3JhcCBjb250YWluZXIgaW4gYm1kLWxheW91dC1jYW52YXMgaWYgbmVjZXNzYXJ5XG5cblxuICAgICAgICAgICAgICAgIF9wcm90by5yZXNvbHZlQ2FudmFzID0gZnVuY3Rpb24gcmVzb2x2ZUNhbnZhcygpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJkID0gdGhpcy5maW5kQ2FudmFzKGZhbHNlKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoYmQgPT09IHVuZGVmaW5lZCB8fCBiZC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZy5jYW52YXMuY3JlYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kY29udGFpbmVyLndyYXAodGhpcy5jb25maWcuY2FudmFzLnRlbXBsYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgYmQgPSB0aGlzLmZpbmRDYW52YXModGhpcy5jb25maWcuY2FudmFzLnJlcXVpcmVkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBiZDtcbiAgICAgICAgICAgICAgICB9OyAvLyBGaW5kIGNsb3Nlc3QgYm1kLWxheW91dC1jb250YWluZXIgYmFzZWQgb24gdGhlIGdpdmVuIGNvbnRleHRcblxuXG4gICAgICAgICAgICAgICAgX3Byb3RvLmZpbmRDYW52YXMgPSBmdW5jdGlvbiBmaW5kQ2FudmFzKHJhaXNlRXJyb3IsIGNvbnRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJhaXNlRXJyb3IgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2VFcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoY29udGV4dCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0ID0gdGhpcy4kY29udGFpbmVyO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGNhbnZhcyA9IGNvbnRleHQuY2xvc2VzdChTZWxlY3Rvci5DQU5WQVMpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjYW52YXMubGVuZ3RoID09PSAwICYmIHJhaXNlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQkJDEuZXJyb3IoXCJGYWlsZWQgdG8gZmluZCBcIiArIFNlbGVjdG9yLkNBTlZBUyArIFwiIGZvciBcIiArIFV0aWwkMi5kZXNjcmliZShjb250ZXh0KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FudmFzO1xuICAgICAgICAgICAgICAgIH07IC8vIFdpbGwgYWRkIGJtZC1sYXlvdXQtYmFja2Ryb3AgdG8gYm1kLWxheW91dC1jb250YWluZXIgaWYgbmVjZXNzYXJ5XG5cblxuICAgICAgICAgICAgICAgIF9wcm90by5yZXNvbHZlQmFja2Ryb3AgPSBmdW5jdGlvbiByZXNvbHZlQmFja2Ryb3AoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBiZCA9IHRoaXMuZmluZEJhY2tkcm9wKGZhbHNlKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoYmQgPT09IHVuZGVmaW5lZCB8fCBiZC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZy5iYWNrZHJvcC5jcmVhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRjb250YWluZXIuYXBwZW5kKHRoaXMuY29uZmlnLmJhY2tkcm9wLnRlbXBsYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgYmQgPSB0aGlzLmZpbmRCYWNrZHJvcCh0aGlzLmNvbmZpZy5iYWNrZHJvcC5yZXF1aXJlZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmQ7XG4gICAgICAgICAgICAgICAgfTsgLy8gRmluZCBjbG9zZXN0IGJtZC1sYXlvdXQtY29udGFpbmVyIGJhc2VkIG9uIHRoZSBnaXZlbiBjb250ZXh0XG5cblxuICAgICAgICAgICAgICAgIF9wcm90by5maW5kQmFja2Ryb3AgPSBmdW5jdGlvbiBmaW5kQmFja2Ryb3AocmFpc2VFcnJvciwgY29udGV4dCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmFpc2VFcnJvciA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByYWlzZUVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZXh0ID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQgPSB0aGlzLiRjb250YWluZXI7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgYmFja2Ryb3AgPSBjb250ZXh0LmZpbmQoXCI+IFwiICsgU2VsZWN0b3IuQkFDS0RST1ApO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChiYWNrZHJvcC5sZW5ndGggPT09IDAgJiYgcmFpc2VFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCQkMS5lcnJvcihcIkZhaWxlZCB0byBmaW5kIFwiICsgU2VsZWN0b3IuQkFDS0RST1AgKyBcIiBmb3IgXCIgKyBVdGlsJDIuZGVzY3JpYmUoY29udGV4dCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJhY2tkcm9wO1xuICAgICAgICAgICAgICAgIH07IC8vIEZpbmQgY2xvc2VzdCBibWQtbGF5b3V0LWNvbnRhaW5lciBiYXNlZCBvbiB0aGUgZ2l2ZW4gY29udGV4dFxuXG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uZmluZENvbnRhaW5lciA9IGZ1bmN0aW9uIGZpbmRDb250YWluZXIocmFpc2VFcnJvciwgY29udGV4dCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmFpc2VFcnJvciA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByYWlzZUVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZXh0ID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQgPSB0aGlzLiRlbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IGNvbnRleHQuY2xvc2VzdChTZWxlY3Rvci5DT05UQUlORVIpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250YWluZXIubGVuZ3RoID09PSAwICYmIHJhaXNlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQkJDEuZXJyb3IoXCJGYWlsZWQgdG8gZmluZCBcIiArIFNlbGVjdG9yLkNPTlRBSU5FUiArIFwiIGZvciBcIiArIFV0aWwkMi5kZXNjcmliZShjb250ZXh0KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGFpbmVyO1xuICAgICAgICAgICAgICAgIH07IC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgICAgIC8vIHByaXZhdGVcbiAgICAgICAgICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgICAgICAvLyBzdGF0aWNcblxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIEJhc2VMYXlvdXQ7XG4gICAgICAgICAgICB9KEJhc2UpO1xuXG4gICAgICAgIHJldHVybiBCYXNlTGF5b3V0O1xuICAgIH0oalF1ZXJ5KTtcblxuICAgIHZhciBEcmF3ZXIgPSBmdW5jdGlvbigkJCQxKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICogQ29uc3RhbnRzXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIE5BTUUgPSBcImRyYXdlclwiO1xuICAgICAgICB2YXIgREFUQV9LRVkgPSBcImJtZC5cIiArIE5BTUU7XG4gICAgICAgIHZhciBKUVVFUllfTkFNRSA9IFwiYm1kXCIgKyAoTkFNRS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIE5BTUUuc2xpY2UoMSkpO1xuICAgICAgICB2YXIgSlFVRVJZX05PX0NPTkZMSUNUID0gJCQkMS5mbltKUVVFUllfTkFNRV07XG4gICAgICAgIHZhciBLZXljb2RlcyA9IHtcbiAgICAgICAgICAgIEVTQ0FQRTogMjcgLy9FTlRFUjogMTMsXG4gICAgICAgICAgICAvL1NQQUNFOiAzMlxuXG4gICAgICAgIH07XG4gICAgICAgIHZhciBDbGFzc05hbWUgPSB7XG4gICAgICAgICAgICBJTjogXCJpblwiLFxuICAgICAgICAgICAgRFJBV0VSX0lOOiBcImJtZC1kcmF3ZXItaW5cIixcbiAgICAgICAgICAgIERSQVdFUl9PVVQ6IFwiYm1kLWRyYXdlci1vdXRcIixcbiAgICAgICAgICAgIERSQVdFUjogXCJibWQtbGF5b3V0LWRyYXdlclwiLFxuICAgICAgICAgICAgQ09OVEFJTkVSOiBcImJtZC1sYXlvdXQtY29udGFpbmVyXCJcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIERlZmF1bHQgPSB7XG4gICAgICAgICAgICBmb2N1c1NlbGVjdG9yOiBcImEsIGJ1dHRvbiwgaW5wdXRcIlxuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqIENsYXNzIERlZmluaXRpb25cbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqL1xuXG4gICAgICAgIHZhciBEcmF3ZXIgPVxuICAgICAgICAgICAgLyojX19QVVJFX18qL1xuICAgICAgICAgICAgZnVuY3Rpb24oX0Jhc2VMYXlvdXQpIHtcbiAgICAgICAgICAgICAgICBfaW5oZXJpdHNMb29zZShEcmF3ZXIsIF9CYXNlTGF5b3V0KTtcblxuICAgICAgICAgICAgICAgIC8vICRlbGVtZW50IGlzIGV4cGVjdGVkIHRvIGJlIHRoZSB0cmlnZ2VyXG4gICAgICAgICAgICAgICAgLy8gIGkuZS4gPGJ1dHRvbiBjbGFzcz1cImJ0biBibWQtYnRuLWljb25cIiBmb3I9XCJzZWFyY2hcIiBkYXRhLXRvZ2dsZT1cImRyYXdlclwiIGRhdGEtdGFyZ2V0PVwiI215LXNpZGUtbmF2LWRyYXdlclwiIGFyaWEtZXhwYW5kZWQ9XCJmYWxzZVwiIGFyaWEtY29udHJvbHM9XCJteS1zaWRlLW5hdi1kcmF3ZXJcIj5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBEcmF3ZXIoJGVsZW1lbnQsIGNvbmZpZykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXM7XG5cbiAgICAgICAgICAgICAgICAgICAgX3RoaXMgPSBfQmFzZUxheW91dC5jYWxsKHRoaXMsICRlbGVtZW50LCAkJCQxLmV4dGVuZCh0cnVlLCB7fSwgRGVmYXVsdCwgY29uZmlnKSkgfHwgdGhpcztcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuJHRvZ2dsZXMgPSAkJCQxKFwiW2RhdGEtdG9nZ2xlPVxcXCJkcmF3ZXJcXFwiXVtocmVmPVxcXCIjXCIgKyBfdGhpcy4kZWxlbWVudFswXS5pZCArIFwiXFxcIl0sIFtkYXRhLXRvZ2dsZT1cXFwiZHJhd2VyXFxcIl1bZGF0YS10YXJnZXQ9XFxcIiNcIiArIF90aGlzLiRlbGVtZW50WzBdLmlkICsgXCJcXFwiXVwiKTtcblxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5fYWRkQXJpYSgpOyAvLyBjbGljayBvciBlc2NhcGUgb24gdGhlIGJhY2tkcm9wIGNsb3NlcyB0aGUgZHJhd2VyXG5cblxuICAgICAgICAgICAgICAgICAgICBfdGhpcy4kYmFja2Ryb3Aua2V5ZG93bihmdW5jdGlvbihldikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2LndoaWNoID09PSBLZXljb2Rlcy5FU0NBUEUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICB9KTsgLy8gZXNjYXBlIG9uIHRoZSBkcmF3ZXIgY2xvc2VzIGl0XG5cblxuICAgICAgICAgICAgICAgICAgICBfdGhpcy4kZWxlbWVudC5rZXlkb3duKGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXYud2hpY2ggPT09IEtleWNvZGVzLkVTQ0FQRSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7IC8vIGFueSB0b2dnbGUgYnV0dG9uIGNsaWNrc1xuXG5cbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuJHRvZ2dsZXMuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy50b2dnbGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBfcHJvdG8gPSBEcmF3ZXIucHJvdG90eXBlO1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLmRpc3Bvc2UgPSBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgICAgICAgICAgICAgICAgICBfQmFzZUxheW91dC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMsIERBVEFfS0VZKTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLiR0b2dnbGVzID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLnRvZ2dsZSA9IGZ1bmN0aW9uIHRvZ2dsZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2lzT3BlbigpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIF9wcm90by5zaG93ID0gZnVuY3Rpb24gc2hvdygpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2lzRm9yY2VkQ2xvc2VkKCkgfHwgdGhpcy5faXNPcGVuKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJHRvZ2dsZXMuYXR0cihcImFyaWEtZXhwYW5kZWRcIiwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGVsZW1lbnQuYXR0cihcImFyaWEtZXhwYW5kZWRcIiwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGVsZW1lbnQuYXR0cihcImFyaWEtaGlkZGVuXCIsIGZhbHNlKTsgLy8gZm9jdXMgb24gdGhlIGZpcnN0IGZvY3VzYWJsZSBpdGVtXG5cbiAgICAgICAgICAgICAgICAgICAgdmFyICRmb2N1c09uID0gdGhpcy4kZWxlbWVudC5maW5kKHRoaXMuY29uZmlnLmZvY3VzU2VsZWN0b3IpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICgkZm9jdXNPbi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkZm9jdXNPbi5maXJzdCgpLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB0aGlzLiRjb250YWluZXIuYWRkQ2xhc3MoQ2xhc3NOYW1lLkRSQVdFUl9JTik7IC8vIGJhY2tkcm9wIGlzIHJlc3BvbnNpdmVseSBzdHlsZWQgYmFzZWQgb24gYm1kLWRyYXdlci1vdmVybGF5LCB0aGVyZWZvcmUgc3R5bGUgaXMgbm9uZSBvZiBvdXIgY29uY2Vybiwgc2ltcGx5IGFkZCB0aGUgbWFya2VyIGNsYXNzIGFuZCBsZXQgdGhlIHNjc3MgZGV0ZXJtaW5lIGlmIGl0IHNob3VsZCBiZSBkaXNwbGF5ZWQgb3Igbm90LlxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGJhY2tkcm9wLmFkZENsYXNzKENsYXNzTmFtZS5JTik7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIF9wcm90by5oaWRlID0gZnVuY3Rpb24gaGlkZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9pc09wZW4oKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kdG9nZ2xlcy5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGVsZW1lbnQuYXR0cihcImFyaWEtZXhwYW5kZWRcIiwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbGVtZW50LmF0dHIoXCJhcmlhLWhpZGRlblwiLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kY29udGFpbmVyLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5EUkFXRVJfSU4pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRiYWNrZHJvcC5yZW1vdmVDbGFzcyhDbGFzc05hbWUuSU4pO1xuICAgICAgICAgICAgICAgIH07IC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgICAgIC8vIHByaXZhdGVcblxuXG4gICAgICAgICAgICAgICAgX3Byb3RvLl9pc09wZW4gPSBmdW5jdGlvbiBfaXNPcGVuKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kY29udGFpbmVyLmhhc0NsYXNzKENsYXNzTmFtZS5EUkFXRVJfSU4pO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uX2lzRm9yY2VkQ2xvc2VkID0gZnVuY3Rpb24gX2lzRm9yY2VkQ2xvc2VkKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kY29udGFpbmVyLmhhc0NsYXNzKENsYXNzTmFtZS5EUkFXRVJfT1VUKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLl9hZGRBcmlhID0gZnVuY3Rpb24gX2FkZEFyaWEoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpc09wZW4gPSB0aGlzLl9pc09wZW4oKTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbGVtZW50LmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsIGlzT3Blbik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGVsZW1lbnQuYXR0cihcImFyaWEtaGlkZGVuXCIsIGlzT3Blbik7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuJHRvZ2dsZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiR0b2dnbGVzLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsIGlzT3Blbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9OyAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgICAgICAvLyBzdGF0aWNcblxuXG4gICAgICAgICAgICAgICAgRHJhd2VyLl9qUXVlcnlJbnRlcmZhY2UgPSBmdW5jdGlvbiBfalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRlbGVtZW50ID0gJCQkMSh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gJGVsZW1lbnQuZGF0YShEQVRBX0tFWSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBuZXcgRHJhd2VyKCRlbGVtZW50LCBjb25maWcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRlbGVtZW50LmRhdGEoREFUQV9LRVksIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIERyYXdlcjtcbiAgICAgICAgICAgIH0oQmFzZUxheW91dCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICogalF1ZXJ5XG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKi9cblxuXG4gICAgICAgICQkJDEuZm5bSlFVRVJZX05BTUVdID0gRHJhd2VyLl9qUXVlcnlJbnRlcmZhY2U7XG4gICAgICAgICQkJDEuZm5bSlFVRVJZX05BTUVdLkNvbnN0cnVjdG9yID0gRHJhd2VyO1xuXG4gICAgICAgICQkJDEuZm5bSlFVRVJZX05BTUVdLm5vQ29uZmxpY3QgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQkJDEuZm5bSlFVRVJZX05BTUVdID0gSlFVRVJZX05PX0NPTkZMSUNUO1xuICAgICAgICAgICAgcmV0dXJuIERyYXdlci5falF1ZXJ5SW50ZXJmYWNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBEcmF3ZXI7XG4gICAgfShqUXVlcnkpO1xuXG4gICAgdmFyIFJpcHBsZXMgPSBmdW5jdGlvbigkJCQxKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICogQ29uc3RhbnRzXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIE5BTUUgPSBcInJpcHBsZXNcIjtcbiAgICAgICAgdmFyIERBVEFfS0VZID0gXCJibWQuXCIgKyBOQU1FO1xuICAgICAgICB2YXIgSlFVRVJZX05BTUUgPSBcImJtZFwiICsgKE5BTUUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBOQU1FLnNsaWNlKDEpKTtcbiAgICAgICAgdmFyIEpRVUVSWV9OT19DT05GTElDVCA9ICQkJDEuZm5bSlFVRVJZX05BTUVdO1xuICAgICAgICB2YXIgQ2xhc3NOYW1lID0ge1xuICAgICAgICAgICAgQ09OVEFJTkVSOiBcInJpcHBsZS1jb250YWluZXJcIixcbiAgICAgICAgICAgIERFQ09SQVRPUjogXCJyaXBwbGUtZGVjb3JhdG9yXCJcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIFNlbGVjdG9yID0ge1xuICAgICAgICAgICAgQ09OVEFJTkVSOiBcIi5cIiArIENsYXNzTmFtZS5DT05UQUlORVIsXG4gICAgICAgICAgICBERUNPUkFUT1I6IFwiLlwiICsgQ2xhc3NOYW1lLkRFQ09SQVRPUiAvLyxcblxuICAgICAgICB9O1xuICAgICAgICB2YXIgRGVmYXVsdCA9IHtcbiAgICAgICAgICAgIGNvbnRhaW5lcjoge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBcIjxkaXYgY2xhc3M9J1wiICsgQ2xhc3NOYW1lLkNPTlRBSU5FUiArIFwiJz48L2Rpdj5cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlY29yYXRvcjoge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBcIjxkaXYgY2xhc3M9J1wiICsgQ2xhc3NOYW1lLkRFQ09SQVRPUiArIFwiJz48L2Rpdj5cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRyaWdnZXI6IHtcbiAgICAgICAgICAgICAgICBzdGFydDogXCJtb3VzZWRvd24gdG91Y2hzdGFydFwiLFxuICAgICAgICAgICAgICAgIGVuZDogXCJtb3VzZXVwIG1vdXNlbGVhdmUgdG91Y2hlbmRcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRvdWNoVXNlckFnZW50UmVnZXg6IC9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2ksXG4gICAgICAgICAgICBkdXJhdGlvbjogNTAwXG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICogQ2xhc3MgRGVmaW5pdGlvblxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICovXG5cbiAgICAgICAgdmFyIFJpcHBsZXMgPVxuICAgICAgICAgICAgLyojX19QVVJFX18qL1xuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gUmlwcGxlcygkZWxlbWVudCwgY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kZWxlbWVudCA9ICRlbGVtZW50OyAvLyBjb25zb2xlLmxvZyhgQWRkaW5nIHJpcHBsZXMgdG8gJHtVdGlsLmRlc2NyaWJlKHRoaXMuJGVsZW1lbnQpfWApICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGVcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZyA9ICQkJDEuZXh0ZW5kKHRydWUsIHt9LCBEZWZhdWx0LCBjb25maWcpOyAvLyBhdHRhY2ggaW5pdGlhbCBsaXN0ZW5lclxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGVsZW1lbnQub24odGhpcy5jb25maWcudHJpZ2dlci5zdGFydCwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9vblN0YXJ0UmlwcGxlKGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIF9wcm90byA9IFJpcHBsZXMucHJvdG90eXBlO1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLmRpc3Bvc2UgPSBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbGVtZW50LmRhdGEoREFUQV9LRVksIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbGVtZW50ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kY29udGFpbmVyID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kZGVjb3JhdG9yID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcgPSBudWxsO1xuICAgICAgICAgICAgICAgIH07IC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgICAgIC8vIHByaXZhdGVcblxuXG4gICAgICAgICAgICAgICAgX3Byb3RvLl9vblN0YXJ0UmlwcGxlID0gZnVuY3Rpb24gX29uU3RhcnRSaXBwbGUoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZ5IGlmIHRoZSB1c2VyIGlzIGp1c3QgdG91Y2hpbmcgb24gYSBkZXZpY2UgYW5kIHJldHVybiBpZiBzb1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5faXNUb3VjaCgpICYmIGV2ZW50LnR5cGUgPT09IFwibW91c2Vkb3duXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfSAvLyBGaW5kIG9yIGNyZWF0ZSB0aGUgcmlwcGxlIGNvbnRhaW5lciBlbGVtZW50XG5cblxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9maW5kT3JDcmVhdGVDb250YWluZXIoKTsgLy8gR2V0IHJlbFkgYW5kIHJlbFggcG9zaXRpb25zIG9mIHRoZSBjb250YWluZXIgZWxlbWVudFxuXG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlbFkgPSB0aGlzLl9nZXRSZWxZKGV2ZW50KTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVsWCA9IHRoaXMuX2dldFJlbFgoZXZlbnQpOyAvLyBJZiByZWxZIGFuZC9vciByZWxYIGFyZSBmYWxzZSwgcmV0dXJuIHRoZSBldmVudFxuXG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZWxZICYmICFyZWxYKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH0gLy8gc2V0IHRoZSBsb2NhdGlvbiBhbmQgY29sb3IgZWFjaCB0aW1lIChldmVuIGlmIGVsZW1lbnQgaXMgY2FjaGVkKVxuXG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kZGVjb3JhdG9yLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiByZWxYLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiByZWxZLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJiYWNrZ3JvdW5kLWNvbG9yXCI6IHRoaXMuX2dldFJpcHBsZXNDb2xvcigpXG4gICAgICAgICAgICAgICAgICAgIH0pOyAvLyBNYWtlIHN1cmUgdGhlIHJpcHBsZSBoYXMgdGhlIHN0eWxlcyBhcHBsaWVkICh1Z2x5IGhhY2sgYnV0IGl0IHdvcmtzKVxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2ZvcmNlU3R5bGVBcHBsaWNhdGlvbigpOyAvLyBUdXJuIG9uIHRoZSByaXBwbGUgYW5pbWF0aW9uXG5cblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJpcHBsZU9uKCk7IC8vIENhbGwgdGhlIHJpcHBsZUVuZCBmdW5jdGlvbiB3aGVuIHRoZSB0cmFuc2l0aW9uICdvbicgZW5kc1xuXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczIucmlwcGxlRW5kKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sIHRoaXMuY29uZmlnLmR1cmF0aW9uKTsgLy8gRGV0ZWN0IHdoZW4gdGhlIHVzZXIgbGVhdmVzIHRoZSBlbGVtZW50IHRvIGNsZWFudXAgaWYgbm90IGFscmVhZHkgZG9uZT9cblxuICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbGVtZW50Lm9uKHRoaXMuY29uZmlnLnRyaWdnZXIuZW5kLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczIuJGRlY29yYXRvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGd1YXJkIGFnYWluc3QgcmFjZSBjb25kaXRpb24vbW91c2UgYXR0YWNrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyLiRkZWNvcmF0b3IuZGF0YShcIm1vdXNlZG93blwiLCBcIm9mZlwiKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczIuJGRlY29yYXRvci5kYXRhKFwiYW5pbWF0aW5nXCIpID09PSBcIm9mZlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi5yaXBwbGVPdXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uX2ZpbmRPckNyZWF0ZUNvbnRhaW5lciA9IGZ1bmN0aW9uIF9maW5kT3JDcmVhdGVDb250YWluZXIoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy4kY29udGFpbmVyIHx8ICF0aGlzLiRjb250YWluZXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kZWxlbWVudC5hcHBlbmQodGhpcy5jb25maWcuY29udGFpbmVyLnRlbXBsYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGNvbnRhaW5lciA9IHRoaXMuJGVsZW1lbnQuZmluZChTZWxlY3Rvci5DT05UQUlORVIpO1xuICAgICAgICAgICAgICAgICAgICB9IC8vIGFsd2F5cyBhZGQgdGhlIHJpcHBsZUVsZW1lbnQsIGl0IGlzIGFsd2F5cyByZW1vdmVkXG5cblxuICAgICAgICAgICAgICAgICAgICB0aGlzLiRjb250YWluZXIuYXBwZW5kKHRoaXMuY29uZmlnLmRlY29yYXRvci50ZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGRlY29yYXRvciA9IHRoaXMuJGNvbnRhaW5lci5maW5kKFNlbGVjdG9yLkRFQ09SQVRPUik7XG4gICAgICAgICAgICAgICAgfTsgLy8gTWFrZSBzdXJlIHRoZSByaXBwbGUgaGFzIHRoZSBzdHlsZXMgYXBwbGllZCAodWdseSBoYWNrIGJ1dCBpdCB3b3JrcylcblxuXG4gICAgICAgICAgICAgICAgX3Byb3RvLl9mb3JjZVN0eWxlQXBwbGljYXRpb24gPSBmdW5jdGlvbiBfZm9yY2VTdHlsZUFwcGxpY2F0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy4kZGVjb3JhdG9yWzBdKS5vcGFjaXR5O1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogR2V0IHRoZSByZWxYXG4gICAgICAgICAgICAgICAgICovXG5cblxuICAgICAgICAgICAgICAgIF9wcm90by5fZ2V0UmVsWCA9IGZ1bmN0aW9uIF9nZXRSZWxYKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB3cmFwcGVyT2Zmc2V0ID0gdGhpcy4kY29udGFpbmVyLm9mZnNldCgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gbnVsbDtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2lzVG91Y2goKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gR2V0IHRoZSBtb3VzZSBwb3NpdGlvbiByZWxhdGl2ZSB0byB0aGUgcmlwcGxlIHdyYXBwZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGV2ZW50LnBhZ2VYIC0gd3JhcHBlck9mZnNldC5sZWZ0O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSB1c2VyIGlzIHVzaW5nIG9ubHkgb25lIGZpbmdlciBhbmQgdGhlbiBnZXQgdGhlIHRvdWNoXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgcG9zaXRpb24gcmVsYXRpdmUgdG8gdGhlIHJpcHBsZSB3cmFwcGVyXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudCA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC50b3VjaGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGV2ZW50LnRvdWNoZXNbMF0ucGFnZVggLSB3cmFwcGVyT2Zmc2V0LmxlZnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEdldCB0aGUgcmVsWVxuICAgICAgICAgICAgICAgICAqL1xuXG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uX2dldFJlbFkgPSBmdW5jdGlvbiBfZ2V0UmVsWShldmVudCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29udGFpbmVyT2Zmc2V0ID0gdGhpcy4kY29udGFpbmVyLm9mZnNldCgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gbnVsbDtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2lzVG91Y2goKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBHZXQgdGhlIG1vdXNlIHBvc2l0aW9uIHJlbGF0aXZlIHRvIHRoZSByaXBwbGUgd3JhcHBlclxuICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBldmVudC5wYWdlWSAtIGNvbnRhaW5lck9mZnNldC50b3A7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIE1ha2Ugc3VyZSB0aGUgdXNlciBpcyB1c2luZyBvbmx5IG9uZSBmaW5nZXIgYW5kIHRoZW4gZ2V0IHRoZSB0b3VjaFxuICAgICAgICAgICAgICAgICAgICAgICAgICogcG9zaXRpb24gcmVsYXRpdmUgdG8gdGhlIHJpcHBsZSB3cmFwcGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50ID0gZXZlbnQub3JpZ2luYWxFdmVudDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LnRvdWNoZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZXZlbnQudG91Y2hlc1swXS5wYWdlWSAtIGNvbnRhaW5lck9mZnNldC50b3A7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEdldCB0aGUgcmlwcGxlIGNvbG9yXG4gICAgICAgICAgICAgICAgICovXG5cblxuICAgICAgICAgICAgICAgIF9wcm90by5fZ2V0UmlwcGxlc0NvbG9yID0gZnVuY3Rpb24gX2dldFJpcHBsZXNDb2xvcigpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbG9yID0gdGhpcy4kZWxlbWVudC5kYXRhKFwicmlwcGxlLWNvbG9yXCIpID8gdGhpcy4kZWxlbWVudC5kYXRhKFwicmlwcGxlLWNvbG9yXCIpIDogd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy4kZWxlbWVudFswXSkuY29sb3I7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb2xvcjtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFZlcmlmeSBpZiB0aGUgY2xpZW50IGlzIHVzaW5nIGEgbW9iaWxlIGRldmljZVxuICAgICAgICAgICAgICAgICAqL1xuXG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uX2lzVG91Y2ggPSBmdW5jdGlvbiBfaXNUb3VjaCgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlnLnRvdWNoVXNlckFnZW50UmVnZXgudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEVuZCB0aGUgYW5pbWF0aW9uIG9mIHRoZSByaXBwbGVcbiAgICAgICAgICAgICAgICAgKi9cblxuXG4gICAgICAgICAgICAgICAgX3Byb3RvLnJpcHBsZUVuZCA9IGZ1bmN0aW9uIHJpcHBsZUVuZCgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuJGRlY29yYXRvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ3VhcmQgYWdhaW5zdCByYWNlIGNvbmRpdGlvbi9tb3VzZSBhdHRhY2tcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGRlY29yYXRvci5kYXRhKFwiYW5pbWF0aW5nXCIsIFwib2ZmXCIpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy4kZGVjb3JhdG9yLmRhdGEoXCJtb3VzZWRvd25cIikgPT09IFwib2ZmXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJpcHBsZU91dCh0aGlzLiRkZWNvcmF0b3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBUdXJuIG9mZiB0aGUgcmlwcGxlIGVmZmVjdFxuICAgICAgICAgICAgICAgICAqL1xuXG5cbiAgICAgICAgICAgICAgICBfcHJvdG8ucmlwcGxlT3V0ID0gZnVuY3Rpb24gcmlwcGxlT3V0KCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLiRkZWNvcmF0b3Iub2ZmKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKFV0aWwkMi50cmFuc2l0aW9uRW5kU3VwcG9ydGVkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGRlY29yYXRvci5hZGRDbGFzcyhcInJpcHBsZS1vdXRcIik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRkZWNvcmF0b3IuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTAwLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMuJGRlY29yYXRvci50cmlnZ2VyKFwidHJhbnNpdGlvbmVuZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kZGVjb3JhdG9yLm9uKFV0aWwkMi50cmFuc2l0aW9uRW5kU2VsZWN0b3IoKSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMzLiRkZWNvcmF0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMuJGRlY29yYXRvci5yZW1vdmUoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMy4kZGVjb3JhdG9yID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBUdXJuIG9uIHRoZSByaXBwbGUgZWZmZWN0XG4gICAgICAgICAgICAgICAgICovXG5cblxuICAgICAgICAgICAgICAgIF9wcm90by5yaXBwbGVPbiA9IGZ1bmN0aW9uIHJpcHBsZU9uKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IHRoaXMuX2dldE5ld1NpemUoKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoVXRpbCQyLnRyYW5zaXRpb25FbmRTdXBwb3J0ZWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kZGVjb3JhdG9yLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCItbXMtdHJhbnNmb3JtXCI6IFwic2NhbGUoXCIgKyBzaXplICsgXCIpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCItbW96LXRyYW5zZm9ybVwiOiBcInNjYWxlKFwiICsgc2l6ZSArIFwiKVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiLXdlYmtpdC10cmFuc2Zvcm1cIjogXCJzY2FsZShcIiArIHNpemUgKyBcIilcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IFwic2NhbGUoXCIgKyBzaXplICsgXCIpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmFkZENsYXNzKFwicmlwcGxlLW9uXCIpLmRhdGEoXCJhbmltYXRpbmdcIiwgXCJvblwiKS5kYXRhKFwibW91c2Vkb3duXCIsIFwib25cIik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRkZWNvcmF0b3IuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IE1hdGgubWF4KHRoaXMuJGVsZW1lbnQub3V0ZXJXaWR0aCgpLCB0aGlzLiRlbGVtZW50Lm91dGVySGVpZ2h0KCkpICogMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IE1hdGgubWF4KHRoaXMuJGVsZW1lbnQub3V0ZXJXaWR0aCgpLCB0aGlzLiRlbGVtZW50Lm91dGVySGVpZ2h0KCkpICogMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm1hcmdpbi1sZWZ0XCI6IE1hdGgubWF4KHRoaXMuJGVsZW1lbnQub3V0ZXJXaWR0aCgpLCB0aGlzLiRlbGVtZW50Lm91dGVySGVpZ2h0KCkpICogLTEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJtYXJnaW4tdG9wXCI6IE1hdGgubWF4KHRoaXMuJGVsZW1lbnQub3V0ZXJXaWR0aCgpLCB0aGlzLiRlbGVtZW50Lm91dGVySGVpZ2h0KCkpICogLTEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMC4yXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLmNvbmZpZy5kdXJhdGlvbiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM0LiRkZWNvcmF0b3IudHJpZ2dlcihcInRyYW5zaXRpb25lbmRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogR2V0IHRoZSBuZXcgc2l6ZSBiYXNlZCBvbiB0aGUgZWxlbWVudCBoZWlnaHQvd2lkdGggYW5kIHRoZSByaXBwbGUgd2lkdGhcbiAgICAgICAgICAgICAgICAgKi9cblxuXG4gICAgICAgICAgICAgICAgX3Byb3RvLl9nZXROZXdTaXplID0gZnVuY3Rpb24gX2dldE5ld1NpemUoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLm1heCh0aGlzLiRlbGVtZW50Lm91dGVyV2lkdGgoKSwgdGhpcy4kZWxlbWVudC5vdXRlckhlaWdodCgpKSAvIHRoaXMuJGRlY29yYXRvci5vdXRlcldpZHRoKCkgKiAyLjU7XG4gICAgICAgICAgICAgICAgfTsgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICAgICAgLy8gc3RhdGljXG5cblxuICAgICAgICAgICAgICAgIFJpcHBsZXMuX2pRdWVyeUludGVyZmFjZSA9IGZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGVsZW1lbnQgPSAkJCQxKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSAkZWxlbWVudC5kYXRhKERBVEFfS0VZKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IG5ldyBSaXBwbGVzKCRlbGVtZW50LCBjb25maWcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRlbGVtZW50LmRhdGEoREFUQV9LRVksIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFJpcHBsZXM7XG4gICAgICAgICAgICB9KCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICogalF1ZXJ5XG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKi9cblxuXG4gICAgICAgICQkJDEuZm5bSlFVRVJZX05BTUVdID0gUmlwcGxlcy5falF1ZXJ5SW50ZXJmYWNlO1xuICAgICAgICAkJCQxLmZuW0pRVUVSWV9OQU1FXS5Db25zdHJ1Y3RvciA9IFJpcHBsZXM7XG5cbiAgICAgICAgJCQkMS5mbltKUVVFUllfTkFNRV0ubm9Db25mbGljdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCQkMS5mbltKUVVFUllfTkFNRV0gPSBKUVVFUllfTk9fQ09ORkxJQ1Q7XG4gICAgICAgICAgICByZXR1cm4gUmlwcGxlcy5falF1ZXJ5SW50ZXJmYWNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBSaXBwbGVzO1xuICAgIH0oalF1ZXJ5KTtcblxuICAgIHZhciBBdXRvZmlsbCA9IGZ1bmN0aW9uKCQkJDEpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKiBDb25zdGFudHNcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgTkFNRSA9IFwiYXV0b2ZpbGxcIjtcbiAgICAgICAgdmFyIERBVEFfS0VZID0gXCJibWQuXCIgKyBOQU1FO1xuICAgICAgICB2YXIgSlFVRVJZX05BTUUgPSBcImJtZFwiICsgKE5BTUUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBOQU1FLnNsaWNlKDEpKTtcbiAgICAgICAgdmFyIEpRVUVSWV9OT19DT05GTElDVCA9ICQkJDEuZm5bSlFVRVJZX05BTUVdO1xuICAgICAgICB2YXIgRGVmYXVsdCA9IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqIENsYXNzIERlZmluaXRpb25cbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqL1xuXG4gICAgICAgIHZhciBBdXRvZmlsbCA9XG4gICAgICAgICAgICAvKiNfX1BVUkVfXyovXG4gICAgICAgICAgICBmdW5jdGlvbihfQmFzZSkge1xuICAgICAgICAgICAgICAgIF9pbmhlcml0c0xvb3NlKEF1dG9maWxsLCBfQmFzZSk7XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBBdXRvZmlsbCgkZWxlbWVudCwgY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfdGhpcztcblxuICAgICAgICAgICAgICAgICAgICBfdGhpcyA9IF9CYXNlLmNhbGwodGhpcywgJGVsZW1lbnQsICQkJDEuZXh0ZW5kKHRydWUsIHt9LCBEZWZhdWx0LCBjb25maWcpKSB8fCB0aGlzO1xuXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLl93YXRjaExvYWRpbmcoKTtcblxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5fYXR0YWNoRXZlbnRIYW5kbGVycygpO1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgX3Byb3RvID0gQXV0b2ZpbGwucHJvdG90eXBlO1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLmRpc3Bvc2UgPSBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgICAgICAgICAgICAgICAgICBfQmFzZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMsIERBVEFfS0VZKTtcbiAgICAgICAgICAgICAgICB9OyAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgICAgICAvLyBwcml2YXRlXG5cblxuICAgICAgICAgICAgICAgIF9wcm90by5fd2F0Y2hMb2FkaW5nID0gZnVuY3Rpb24gX3dhdGNoTG9hZGluZygpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQWZ0ZXIgMTAgc2Vjb25kcyB3ZSBhcmUgcXVpdGUgc3VyZSBhbGwgdGhlIG5lZWRlZCBpbnB1dHMgYXJlIGF1dG9maWxsZWQgdGhlbiB3ZSBjYW4gc3RvcCBjaGVja2luZyB0aGVtXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKF90aGlzMi5fb25Mb2FkaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgMTAwMDApO1xuICAgICAgICAgICAgICAgIH07IC8vIFRoaXMgcGFydCBvZiBjb2RlIHdpbGwgZGV0ZWN0IGF1dG9maWxsIHdoZW4gdGhlIHBhZ2UgaXMgbG9hZGluZyAodXNlcm5hbWUgYW5kIHBhc3N3b3JkIGlucHV0cyBmb3IgZXhhbXBsZSlcblxuXG4gICAgICAgICAgICAgICAgX3Byb3RvLl9vbkxvYWRpbmcgPSBmdW5jdGlvbiBfb25Mb2FkaW5nKCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQkJDEoXCJpbnB1dFt0eXBlIT1jaGVja2JveF1cIikuZWFjaChmdW5jdGlvbihpbmRleCwgZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkZWxlbWVudCA9ICQkJDEoZWxlbWVudCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJGVsZW1lbnQudmFsKCkgJiYgJGVsZW1lbnQudmFsKCkgIT09ICRlbGVtZW50LmF0dHIoXCJ2YWx1ZVwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC50cmlnZ2VyKFwiY2hhbmdlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9LCAxMDApO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBfcHJvdG8uX2F0dGFjaEV2ZW50SGFuZGxlcnMgPSBmdW5jdGlvbiBfYXR0YWNoRXZlbnRIYW5kbGVycygpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gTGlzdGVuIG9uIGlucHV0cyBvZiB0aGUgZm9jdXNlZCBmb3JtXG4gICAgICAgICAgICAgICAgICAgIC8vICAoYmVjYXVzZSB1c2VyIGNhbiBzZWxlY3QgZnJvbSB0aGUgYXV0b2ZpbGwgZHJvcGRvd24gb25seSB3aGVuIHRoZSBpbnB1dCBoYXMgZm9jdXMpXG4gICAgICAgICAgICAgICAgICAgIHZhciBmb2N1c2VkID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgJCQkMShkb2N1bWVudCkub24oXCJmb2N1c1wiLCBcImlucHV0XCIsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGlucHV0cyA9ICQkJDEoZXZlbnQuY3VycmVudFRhcmdldCkuY2xvc2VzdChcImZvcm1cIikuZmluZChcImlucHV0XCIpLm5vdChcIlt0eXBlPWZpbGVdXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXNlZCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnB1dHMuZWFjaChmdW5jdGlvbihpbmRleCwgZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGVsZW1lbnQgPSAkJCQxKGVsZW1lbnQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkZWxlbWVudC52YWwoKSAhPT0gJGVsZW1lbnQuYXR0cihcInZhbHVlXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC50cmlnZ2VyKFwiY2hhbmdlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDApO1xuICAgICAgICAgICAgICAgICAgICB9KS5vbihcImJsdXJcIiwgXCIuZm9ybS1ncm91cCBpbnB1dFwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoZm9jdXNlZCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH07IC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgICAgIC8vIHN0YXRpY1xuXG5cbiAgICAgICAgICAgICAgICBBdXRvZmlsbC5falF1ZXJ5SW50ZXJmYWNlID0gZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkZWxlbWVudCA9ICQkJDEodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9ICRlbGVtZW50LmRhdGEoREFUQV9LRVkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gbmV3IEF1dG9maWxsKCRlbGVtZW50LCBjb25maWcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRlbGVtZW50LmRhdGEoREFUQV9LRVksIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIEF1dG9maWxsO1xuICAgICAgICAgICAgfShCYXNlKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKiBqUXVlcnlcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqL1xuXG5cbiAgICAgICAgJCQkMS5mbltKUVVFUllfTkFNRV0gPSBBdXRvZmlsbC5falF1ZXJ5SW50ZXJmYWNlO1xuICAgICAgICAkJCQxLmZuW0pRVUVSWV9OQU1FXS5Db25zdHJ1Y3RvciA9IEF1dG9maWxsO1xuXG4gICAgICAgICQkJDEuZm5bSlFVRVJZX05BTUVdLm5vQ29uZmxpY3QgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQkJDEuZm5bSlFVRVJZX05BTUVdID0gSlFVRVJZX05PX0NPTkZMSUNUO1xuICAgICAgICAgICAgcmV0dXJuIEF1dG9maWxsLl9qUXVlcnlJbnRlcmZhY2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIEF1dG9maWxsO1xuICAgIH0oalF1ZXJ5KTtcblxuICAgIC8qIGdsb2JhbHMgUG9wcGVyICovXG4gICAgUG9wcGVyLkRlZmF1bHRzLm1vZGlmaWVycy5jb21wdXRlU3R5bGUuZ3B1QWNjZWxlcmF0aW9uID0gZmFsc2U7XG4gICAgLyoqXG4gICAgICogJC5ib290c3RyYXBNYXRlcmlhbERlc2lnbihjb25maWcpIGlzIGEgbWFjcm8gY2xhc3MgdG8gY29uZmlndXJlIHRoZSBjb21wb25lbnRzIGdlbmVyYWxseVxuICAgICAqICB1c2VkIGluIE1hdGVyaWFsIERlc2lnbiBmb3IgQm9vdHN0cmFwLiAgWW91IG1heSBwYXNzIG92ZXJyaWRlcyB0byB0aGUgY29uZmlndXJhdGlvbnNcbiAgICAgKiAgd2hpY2ggd2lsbCBiZSBwYXNzZWQgaW50byBlYWNoIGNvbXBvbmVudCwgb3IgeW91IG1heSBvbWl0IHVzZSBvZiB0aGlzIGNsYXNzIGFuZFxuICAgICAqICBjb25maWd1cmUgZWFjaCBjb21wb25lbnQgc2VwYXJhdGVseS5cbiAgICAgKi9cblxuICAgIHZhciBCb290c3RyYXBNYXRlcmlhbERlc2lnbiA9IGZ1bmN0aW9uKCQkJDEpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKiBDb25zdGFudHNcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgTkFNRSA9IFwiYm9vdHN0cmFwTWF0ZXJpYWxEZXNpZ25cIjtcbiAgICAgICAgdmFyIERBVEFfS0VZID0gXCJibWQuXCIgKyBOQU1FO1xuICAgICAgICB2YXIgSlFVRVJZX05BTUUgPSBOQU1FOyAvLyByZXRhaW4gdGhpcyBmdWxsIG5hbWUgc2luY2UgaXQgaXMgbG9uZyBlbm91Z2ggbm90IHRvIGNvbmZsaWN0XG5cbiAgICAgICAgdmFyIEpRVUVSWV9OT19DT05GTElDVCA9ICQkJDEuZm5bSlFVRVJZX05BTUVdO1xuICAgICAgICAvKipcbiAgICAgICAgICogR2xvYmFsIGNvbmZpZ3VyYXRpb246XG4gICAgICAgICAqICBUaGUgZ2xvYmFsIGNvbmZpZ3VyYXRpb24gaGFzaCB3aWxsIGJlIG1peGVkIGluIHRvIGVhY2ggY29tcG9uZW50cycgY29uZmlnLlxuICAgICAgICAgKiAgICBlLmcuIGNhbGxpbmcgJC5ib290c3RyYXBNYXRlcmlhbERlc2lnbih7Z2xvYmFsOiB7IHZhbGlkYXRlOiB0cnVlIH0gfSkgd291bGQgcGFzcyBgdmFsaWRhdGU6dHJ1ZWAgdG8gZXZlcnkgY29tcG9uZW50XG4gICAgICAgICAqXG4gICAgICAgICAqXG4gICAgICAgICAqIENvbXBvbmVudCBjb25maWd1cmF0aW9uOlxuICAgICAgICAgKiAgLSBzZWxlY3RvcjogbWF5IGJlIGEgc3RyaW5nIG9yIGFuIGFycmF5LiAgQW55IGFycmF5IHdpbGwgYmUgam9pbmVkIHdpdGggYSBjb21tYSB0byBnZW5lcmF0ZSB0aGUgc2VsZWN0b3JcbiAgICAgICAgICogIC0gZGlzYWJsZSBhbnkgY29tcG9uZW50IGJ5IGRlZmluaW5nIGl0IGFzIGZhbHNlIHdpdGggYW4gb3ZlcnJpZGUuIGUuZy4gJC5ib290c3RyYXBNYXRlcmlhbERlc2lnbih7IGF1dG9maWxsOiBmYWxzZSB9KVxuICAgICAgICAgKlxuICAgICAgICAgKiAgQHNlZSBlYWNoIGluZGl2aWR1YWwgY29tcG9uZW50IGZvciBtb3JlIGNvbmZpZ3VyYXRpb24gc2V0dGluZ3MuXG4gICAgICAgICAqL1xuXG4gICAgICAgIHZhciBEZWZhdWx0ID0ge1xuICAgICAgICAgICAgZ2xvYmFsOiB7XG4gICAgICAgICAgICAgICAgdmFsaWRhdGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGxhYmVsOiB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJibWQtbGFiZWwtc3RhdGljXCIgLy8gZGVmYXVsdCBzdHlsZSBvZiBsYWJlbCB0byBiZSB1c2VkIGlmIG5vdCBzcGVjaWZpZWQgaW4gdGhlIGh0bWwgbWFya3VwXG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXV0b2ZpbGw6IHtcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogXCJib2R5XCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjaGVja2JveDoge1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiBcIi5jaGVja2JveCA+IGxhYmVsID4gaW5wdXRbdHlwZT1jaGVja2JveF1cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNoZWNrYm94SW5saW5lOiB7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6IFwibGFiZWwuY2hlY2tib3gtaW5saW5lID4gaW5wdXRbdHlwZT1jaGVja2JveF1cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNvbGxhcHNlSW5saW5lOiB7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICcuYm1kLWNvbGxhcHNlLWlubGluZSBbZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiXSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkcmF3ZXI6IHtcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogXCIuYm1kLWxheW91dC1kcmF3ZXJcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZpbGU6IHtcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogXCJpbnB1dFt0eXBlPWZpbGVdXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByYWRpbzoge1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiBcIi5yYWRpbyA+IGxhYmVsID4gaW5wdXRbdHlwZT1yYWRpb11cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJhZGlvSW5saW5lOiB7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6IFwibGFiZWwucmFkaW8taW5saW5lID4gaW5wdXRbdHlwZT1yYWRpb11cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJpcHBsZXM6IHtcbiAgICAgICAgICAgICAgICAvL3NlbGVjdG9yOiBbJy5idG46bm90KC5idG4tbGluayk6bm90KC5yaXBwbGUtbm9uZSknXSAvLyB0ZXN0aW5nIG9ubHlcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogW1wiLmJ0bjpub3QoLnJpcHBsZS1ub25lKVwiLCBcIi5jYXJkLWltYWdlOm5vdCgucmlwcGxlLW5vbmUpXCIsIFwiLm5hdmJhciBhOm5vdCgucmlwcGxlLW5vbmUpXCIsIFwiLmRyb3Bkb3duLW1lbnUgYTpub3QoLnJpcHBsZS1ub25lKVwiLCBcIi5uYXYtdGFicyBhOm5vdCgucmlwcGxlLW5vbmUpXCIsIFwiLnBhZ2luYXRpb24gbGk6bm90KC5hY3RpdmUpOm5vdCguZGlzYWJsZWQpIGE6bm90KC5yaXBwbGUtbm9uZSlcIiwgXCIucmlwcGxlXCIgLy8gZ2VuZXJpYyBtYXJrZXIgY2xhc3MgdG8gYWRkIHJpcHBsZSB0byBlbGVtZW50c1xuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogW1wic2VsZWN0XCJdXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3dpdGNoOiB7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6IFwiLnN3aXRjaCA+IGxhYmVsID4gaW5wdXRbdHlwZT1jaGVja2JveF1cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRleHQ6IHtcbiAgICAgICAgICAgICAgICAvLyBvbWl0IGlucHV0cyB3ZSBoYXZlIHNwZWNpYWxpemVkIGNvbXBvbmVudHMgdG8gaGFuZGxlIC0gd2UgbmVlZCB0byBtYXRjaCB0ZXh0LCBlbWFpbCwgZXRjLiAgVGhlIGVhc2llc3Qgd2F5IHRvIGRvIHRoaXMgYXBwZWFycyB0byBiZSBqdXN0IG9taXQgdGhlIG9uZXMgd2UgZG9uJ3Qgd2FudCB0byBtYXRjaCBhbmQgbGV0IHRoZSByZXN0IGZhbGwgdGhyb3VnaCB0byB0aGlzLlxuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiBbXCJpbnB1dDpub3QoW3R5cGU9aGlkZGVuXSk6bm90KFt0eXBlPWNoZWNrYm94XSk6bm90KFt0eXBlPXJhZGlvXSk6bm90KFt0eXBlPWZpbGVdKTpub3QoW3R5cGU9YnV0dG9uXSk6bm90KFt0eXBlPXN1Ym1pdF0pOm5vdChbdHlwZT1yZXNldF0pXCJdXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGV4dGFyZWE6IHtcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogW1widGV4dGFyZWFcIl1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhcnJpdmU6IHRydWUsXG4gICAgICAgICAgICAvLyBjcmVhdGUgYW4gb3JkZXJlZCBjb21wb25lbnQgbGlzdCBmb3IgaW5zdGFudGlhdGlvblxuICAgICAgICAgICAgaW5zdGFudGlhdGlvbjogW1wicmlwcGxlc1wiLCBcImNoZWNrYm94XCIsIFwiY2hlY2tib3hJbmxpbmVcIiwgXCJjb2xsYXBzZUlubGluZVwiLCBcImRyYXdlclwiLCAvLydmaWxlJyxcbiAgICAgICAgICAgICAgICBcInJhZGlvXCIsIFwicmFkaW9JbmxpbmVcIiwgXCJzd2l0Y2hcIiwgXCJ0ZXh0XCIsIFwidGV4dGFyZWFcIiwgLy8gXCJzZWxlY3RcIixcbiAgICAgICAgICAgICAgICBcImF1dG9maWxsXCJcbiAgICAgICAgICAgIF1cbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKiBDbGFzcyBEZWZpbml0aW9uXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKi9cblxuICAgICAgICB2YXIgQm9vdHN0cmFwTWF0ZXJpYWxEZXNpZ24gPVxuICAgICAgICAgICAgLyojX19QVVJFX18qL1xuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gQm9vdHN0cmFwTWF0ZXJpYWxEZXNpZ24oJGVsZW1lbnQsIGNvbmZpZykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGVsZW1lbnQgPSAkZWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcgPSAkJCQxLmV4dGVuZCh0cnVlLCB7fSwgRGVmYXVsdCwgY29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyICRkb2N1bWVudCA9ICQkJDEoZG9jdW1lbnQpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKGNvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGNvbXBvbmVudCdzIGNvbmZpZyBmcmFnbWVudCBpcyBwYXNzZWQgaW4gZGlyZWN0bHksIGFsbG93aW5nIHVzZXJzIHRvIG92ZXJyaWRlXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29tcG9uZW50Q29uZmlnID0gX3RoaXMuY29uZmlnW2NvbXBvbmVudF07IC8vIGNoZWNrIHRvIG1ha2Ugc3VyZSBjb21wb25lbnQgY29uZmlnIGlzIGVuYWJsZWQgKG5vdCBgZmFsc2VgKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29tcG9uZW50Q29uZmlnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXNzZW1ibGUgdGhlIHNlbGVjdG9yIGFzIGl0IG1heSBiZSBhbiBhcnJheVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RvciA9IF90aGlzLl9yZXNvbHZlU2VsZWN0b3IoY29tcG9uZW50Q29uZmlnKTsgLy8gbWl4IGluIGdsb2JhbCBvcHRpb25zXG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudENvbmZpZyA9ICQkJDEuZXh0ZW5kKHRydWUsIHt9LCBfdGhpcy5jb25maWcuZ2xvYmFsLCBjb21wb25lbnRDb25maWcpOyAvLyBjcmVhdGUgdGhlIGpxdWVyeSBmbiBuYW1lIGUuZy4gJ2JtZFRleHQnIGZvciAndGV4dCdcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb21wb25lbnROYW1lID0gXCJcIiArIChjb21wb25lbnQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjb21wb25lbnQuc2xpY2UoMSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBqcXVlcnlGbiA9IFwiYm1kXCIgKyBjb21wb25lbnROYW1lO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2FmZWx5IGluc3RhbnRpYXRlIGNvbXBvbmVudCBvbiBzZWxlY3RvciBlbGVtZW50cyB3aXRoIGNvbmZpZywgcmVwb3J0IGVycm9ycyBhbmQgbW92ZSBvbi5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5kZWJ1ZyhgaW5zdGFudGlhdGluZzogJCgnJHtzZWxlY3Rvcn0nKVske2pxdWVyeUZufV0oJHtjb21wb25lbnRDb25maWd9KWApIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkJCQxKHNlbGVjdG9yKVtqcXVlcnlGbl0oY29tcG9uZW50Q29uZmlnKTsgLy8gYWRkIHRvIGFycml2ZSBpZiBwcmVzZW50IGFuZCBlbmFibGVkXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LmFycml2ZSAmJiBfdGhpcy5jb25maWcuYXJyaXZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZG9jdW1lbnQuYXJyaXZlKHNlbGVjdG9yLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWxvb3AtZnVuY1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQkJDEodGhpcylbanF1ZXJ5Rm5dKGNvbXBvbmVudENvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBcIkZhaWxlZCB0byBpbnN0YW50aWF0ZSBjb21wb25lbnQ6ICQoJ1wiICsgc2VsZWN0b3IgKyBcIicpW1wiICsganF1ZXJ5Rm4gKyBcIl0oXCIgKyBjb21wb25lbnRDb25maWcgKyBcIilcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihtZXNzYWdlLCBlLCBcIlxcblNlbGVjdGVkIGVsZW1lbnRzOiBcIiwgJCQkMShzZWxlY3RvcikpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGVcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSB0aGlzLmNvbmZpZy5pbnN0YW50aWF0aW9uLCBfaXNBcnJheSA9IEFycmF5LmlzQXJyYXkoX2l0ZXJhdG9yKSwgX2kgPSAwLCBfaXRlcmF0b3IgPSBfaXNBcnJheSA/IF9pdGVyYXRvciA6IF9pdGVyYXRvcltTeW1ib2wuaXRlcmF0b3JdKCk7Oykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9yZWY7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfaXNBcnJheSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfaSA+PSBfaXRlcmF0b3IubGVuZ3RoKSBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVmID0gX2l0ZXJhdG9yW19pKytdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaSA9IF9pdGVyYXRvci5uZXh0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9pLmRvbmUpIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWYgPSBfaS52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbXBvbmVudCA9IF9yZWY7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9sb29wKGNvbXBvbmVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgX3Byb3RvID0gQm9vdHN0cmFwTWF0ZXJpYWxEZXNpZ24ucHJvdG90eXBlO1xuXG4gICAgICAgICAgICAgICAgX3Byb3RvLmRpc3Bvc2UgPSBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbGVtZW50LmRhdGEoREFUQV9LRVksIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbGVtZW50ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcgPSBudWxsO1xuICAgICAgICAgICAgICAgIH07IC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgICAgIC8vIHByaXZhdGVcblxuXG4gICAgICAgICAgICAgICAgX3Byb3RvLl9yZXNvbHZlU2VsZWN0b3IgPSBmdW5jdGlvbiBfcmVzb2x2ZVNlbGVjdG9yKGNvbXBvbmVudENvbmZpZykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSBjb21wb25lbnRDb25maWcuc2VsZWN0b3I7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc2VsZWN0b3IpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RvciA9IHNlbGVjdG9yLmpvaW4oXCIsIFwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxlY3RvcjtcbiAgICAgICAgICAgICAgICB9OyAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgICAgICAvLyBzdGF0aWNcblxuXG4gICAgICAgICAgICAgICAgQm9vdHN0cmFwTWF0ZXJpYWxEZXNpZ24uX2pRdWVyeUludGVyZmFjZSA9IGZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGVsZW1lbnQgPSAkJCQxKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSAkZWxlbWVudC5kYXRhKERBVEFfS0VZKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IG5ldyBCb290c3RyYXBNYXRlcmlhbERlc2lnbigkZWxlbWVudCwgY29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC5kYXRhKERBVEFfS0VZLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBCb290c3RyYXBNYXRlcmlhbERlc2lnbjtcbiAgICAgICAgICAgIH0oKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKiBqUXVlcnlcbiAgICAgICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAqL1xuXG5cbiAgICAgICAgJCQkMS5mbltKUVVFUllfTkFNRV0gPSBCb290c3RyYXBNYXRlcmlhbERlc2lnbi5falF1ZXJ5SW50ZXJmYWNlO1xuICAgICAgICAkJCQxLmZuW0pRVUVSWV9OQU1FXS5Db25zdHJ1Y3RvciA9IEJvb3RzdHJhcE1hdGVyaWFsRGVzaWduO1xuXG4gICAgICAgICQkJDEuZm5bSlFVRVJZX05BTUVdLm5vQ29uZmxpY3QgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQkJDEuZm5bSlFVRVJZX05BTUVdID0gSlFVRVJZX05PX0NPTkZMSUNUO1xuICAgICAgICAgICAgcmV0dXJuIEJvb3RzdHJhcE1hdGVyaWFsRGVzaWduLl9qUXVlcnlJbnRlcmZhY2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIEJvb3RzdHJhcE1hdGVyaWFsRGVzaWduO1xuICAgIH0oalF1ZXJ5KTtcblxuICAgIC8qXG4gICAgICogVGhpcyBpcyB0aGUgbWFpbiBlbnRyeSBwb2ludC5cbiAgICAgKlxuICAgICAqIFlvdSBjYW4gaW1wb3J0IG90aGVyIG1vZHVsZXMgaGVyZSwgaW5jbHVkaW5nIGV4dGVybmFsIHBhY2thZ2VzLiBXaGVuIGJ1bmRsaW5nIHVzaW5nIHJvbGx1cCB5b3UgY2FuIG1hcmsgdGhvc2UgbW9kdWxlcyBhcyBleHRlcm5hbCBhbmQgaGF2ZSB0aGVtIGV4Y2x1ZGVkIG9yLCBpZiB0aGV5IGhhdmUgYSBqc25leHQ6bWFpbiBlbnRyeSBpbiB0aGVpciBwYWNrYWdlLmpzb24gKGxpa2UgdGhpcyBwYWNrYWdlIGRvZXMpLCBsZXQgcm9sbHVwIGJ1bmRsZSB0aGVtIGludG8geW91ciBkaXN0IGZpbGUuXG4gICAgICpcbiAgICAgKiBhdCB5b3VyIGFwcGxpY2F0aW9uIGVudHJ5IHBvaW50LiAgVGhpcyBpcyBuZWNlc3NhcnkgZm9yIGJyb3dzZXJzIHRoYXQgZG8gbm90IHlldCBzdXBwb3J0IHNvbWUgRVMyMDE1IHJ1bnRpbWUgbmVjZXNzaXRpZXMgc3VjaCBhcyBTeW1ib2wuICBXZSBkbyB0aGlzIGluIGBpbmRleC1paWZlLmpzYCBmb3Igb3VyIGlpZmUgcm9sbHVwIGJ1bmRsZS5cbiAgICAgKi9cbiAgICAvLyBCb290c3RyYXAgY29tcG9uZW50c1xuXG59KSkpO1xuIiwiIWZ1bmN0aW9uKHQsZSl7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGU/ZShyZXF1aXJlKFwianF1ZXJ5XCIpLHJlcXVpcmUoXCJwb3BwZXIuanNcIikpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW1wianF1ZXJ5XCIsXCJwb3BwZXIuanNcIl0sZSk6ZSh0LmpRdWVyeSx0LlBvcHBlcil9KHRoaXMsZnVuY3Rpb24odCxoKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1mdW5jdGlvbiBUKHQsZSxuKXtyZXR1cm4gZSYmaSh0LnByb3RvdHlwZSxlKSxuJiZpKHQsbiksdH1mdW5jdGlvbiBzKCl7cmV0dXJuKHM9T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTE7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl7dmFyIG49YXJndW1lbnRzW2VdO2Zvcih2YXIgaSBpbiBuKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuLGkpJiYodFtpXT1uW2ldKX1yZXR1cm4gdH0pLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBhKHQsZSl7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlLnByb3RvdHlwZSksKHQucHJvdG90eXBlLmNvbnN0cnVjdG9yPXQpLl9fcHJvdG9fXz1lfXQ9dCYmdC5oYXNPd25Qcm9wZXJ0eShcImRlZmF1bHRcIik/dC5kZWZhdWx0OnQsaD1oJiZoLmhhc093blByb3BlcnR5KFwiZGVmYXVsdFwiKT9oLmRlZmF1bHQ6aDt2YXIgcixlLG8sbixsLGMsdSxkLGYscCxtLGcsXyx2LHksYixDLEUsSSx3LEEsUyxELGssTixPLCQsaix4LEYsUixQLFEsTSxMLEgsVSxXLEIsRyxLLHEsVixZLHosWCxaLEosdHQsZXQsbnQsaXQscnQsb3Qsc3QsYXQsbHQsY3QsaHQsdXQsZHQsZnQscHQsbXQsZ3QsX3QsdnQseXQsYnQsQ3QsRXQsSXQsVHQsd3QsQXQsU3QsRHQsa3QsTnQsT3QsJHQsanQseHQsRnQsUnQsUHQsUXQsTXQsTHQsSHQsVXQsV3QsQnQsR3QsS3QscXQsVnQsWXQsenQsWHQsWnQsSnQsdGUsZWUsbmUsaWUscmUsb2Usc2UsYWUsbGUsY2UsaGUsdWUsZGUsZmUscGUsbWUsZ2UsX2UsdmUseWUsYmUsQ2UsRWUsSWUsVGUsd2UsQWUsU2UsRGUsa2UsTmUsT2UsJGUsamUseGUsRmUsUmUsUGUsUWUsTWUsTGUsSGUsVWUsV2UsQmUsR2UsS2UscWUsVmUsWWUsemUsWGUsWmUsSmUsdG4sZW4sbm4scm4sb24sc24sYW4sbG4sY24saG4sdW4sZG4sZm4scG4sbW4sZ24sX24sdm4seW4sYm4sQ24sRW4sSW4sVG4sd24sQW4sU24sRG4sa24sTm4sT24sJG4sam4seG4sRm4sUm4sUG4sUW4sTW4sTG4sSG4sVW4sV24sQm4sR24sS24scW4sVm4sWW4sem4sWG4sWm4sSm4sdGksZWksbmksaWkscmksb2ksc2ksYWksbGksY2ksaGksdWksZGksZmkscGksbWksZ2ksX2ksdmkseWksYmksQ2ksRWksSWksVGksd2ksQWksU2ksRGksa2ksTmksT2ksJGksamkseGksRmksUmksUGksUWksTWksTGksSGksVWksV2ksQmksR2ksS2kscWksVmksWWksemksWGksWmksSmksdHIsZXIsbnIsaXIscnIsb3Isc3IsYXIsbHIsY3IsaHIsdXIsZHIsZnIscHIsbXIsZ3IsX3IsdnIseXIsYnIsQ3IsRXIsSXIsVHIsd3IsQXIsU3IsRHIsa3IsTnIsT3IsJHIsanIseHIsRnIsUnI9ZnVuY3Rpb24oaSl7dmFyIGU9ITE7ZnVuY3Rpb24gdCh0KXt2YXIgZT10aGlzLG49ITE7cmV0dXJuIGkodGhpcykub25lKGwuVFJBTlNJVElPTl9FTkQsZnVuY3Rpb24oKXtuPSEwfSksc2V0VGltZW91dChmdW5jdGlvbigpe258fGwudHJpZ2dlclRyYW5zaXRpb25FbmQoZSl9LHQpLHRoaXN9dmFyIGw9e1RSQU5TSVRJT05fRU5EOlwiYnNUcmFuc2l0aW9uRW5kXCIsZ2V0VUlEOmZ1bmN0aW9uKHQpe2Zvcig7dCs9fn4oMWU2Kk1hdGgucmFuZG9tKCkpLGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHQpOyk7cmV0dXJuIHR9LGdldFNlbGVjdG9yRnJvbUVsZW1lbnQ6ZnVuY3Rpb24odCl7dmFyIGU9dC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXRhcmdldFwiKTtlJiZcIiNcIiE9PWV8fChlPXQuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKXx8XCJcIik7dHJ5e3JldHVybiAwPGkoZG9jdW1lbnQpLmZpbmQoZSkubGVuZ3RoP2U6bnVsbH1jYXRjaCh0KXtyZXR1cm4gbnVsbH19LHJlZmxvdzpmdW5jdGlvbih0KXtyZXR1cm4gdC5vZmZzZXRIZWlnaHR9LHRyaWdnZXJUcmFuc2l0aW9uRW5kOmZ1bmN0aW9uKHQpe2kodCkudHJpZ2dlcihlLmVuZCl9LHN1cHBvcnRzVHJhbnNpdGlvbkVuZDpmdW5jdGlvbigpe3JldHVybiBCb29sZWFuKGUpfSxpc0VsZW1lbnQ6ZnVuY3Rpb24odCl7cmV0dXJuKHRbMF18fHQpLm5vZGVUeXBlfSx0eXBlQ2hlY2tDb25maWc6ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgaSBpbiBuKWlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuLGkpKXt2YXIgcj1uW2ldLG89ZVtpXSxzPW8mJmwuaXNFbGVtZW50KG8pP1wiZWxlbWVudFwiOihhPW8se30udG9TdHJpbmcuY2FsbChhKS5tYXRjaCgvXFxzKFthLXpdKykvaSlbMV0udG9Mb3dlckNhc2UoKSk7aWYoIW5ldyBSZWdFeHAocikudGVzdChzKSl0aHJvdyBuZXcgRXJyb3IodC50b1VwcGVyQ2FzZSgpKyc6IE9wdGlvbiBcIicraSsnXCIgcHJvdmlkZWQgdHlwZSBcIicrcysnXCIgYnV0IGV4cGVjdGVkIHR5cGUgXCInK3IrJ1wiLicpfXZhciBhfX07cmV0dXJuIGU9KFwidW5kZWZpbmVkXCI9PXR5cGVvZiB3aW5kb3d8fCF3aW5kb3cuUVVuaXQpJiZ7ZW5kOlwidHJhbnNpdGlvbmVuZFwifSxpLmZuLmVtdWxhdGVUcmFuc2l0aW9uRW5kPXQsbC5zdXBwb3J0c1RyYW5zaXRpb25FbmQoKSYmKGkuZXZlbnQuc3BlY2lhbFtsLlRSQU5TSVRJT05fRU5EXT17YmluZFR5cGU6ZS5lbmQsZGVsZWdhdGVUeXBlOmUuZW5kLGhhbmRsZTpmdW5jdGlvbih0KXtpZihpKHQudGFyZ2V0KS5pcyh0aGlzKSlyZXR1cm4gdC5oYW5kbGVPYmouaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSksbH0odCksUHI9KGU9XCJhbGVydFwiLG49XCIuXCIrKG89XCJicy5hbGVydFwiKSxsPShyPXQpLmZuW2VdLGM9e0NMT1NFOlwiY2xvc2VcIituLENMT1NFRDpcImNsb3NlZFwiK24sQ0xJQ0tfREFUQV9BUEk6XCJjbGlja1wiK24rXCIuZGF0YS1hcGlcIn0sdT1cImFsZXJ0XCIsZD1cImZhZGVcIixmPVwic2hvd1wiLHA9ZnVuY3Rpb24oKXtmdW5jdGlvbiBpKHQpe3RoaXMuX2VsZW1lbnQ9dH12YXIgdD1pLnByb3RvdHlwZTtyZXR1cm4gdC5jbG9zZT1mdW5jdGlvbih0KXt0PXR8fHRoaXMuX2VsZW1lbnQ7dmFyIGU9dGhpcy5fZ2V0Um9vdEVsZW1lbnQodCk7dGhpcy5fdHJpZ2dlckNsb3NlRXZlbnQoZSkuaXNEZWZhdWx0UHJldmVudGVkKCl8fHRoaXMuX3JlbW92ZUVsZW1lbnQoZSl9LHQuZGlzcG9zZT1mdW5jdGlvbigpe3IucmVtb3ZlRGF0YSh0aGlzLl9lbGVtZW50LG8pLHRoaXMuX2VsZW1lbnQ9bnVsbH0sdC5fZ2V0Um9vdEVsZW1lbnQ9ZnVuY3Rpb24odCl7dmFyIGU9UnIuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudCh0KSxuPSExO3JldHVybiBlJiYobj1yKGUpWzBdKSxufHwobj1yKHQpLmNsb3Nlc3QoXCIuXCIrdSlbMF0pLG59LHQuX3RyaWdnZXJDbG9zZUV2ZW50PWZ1bmN0aW9uKHQpe3ZhciBlPXIuRXZlbnQoYy5DTE9TRSk7cmV0dXJuIHIodCkudHJpZ2dlcihlKSxlfSx0Ll9yZW1vdmVFbGVtZW50PWZ1bmN0aW9uKGUpe3ZhciBuPXRoaXM7cihlKS5yZW1vdmVDbGFzcyhmKSxSci5zdXBwb3J0c1RyYW5zaXRpb25FbmQoKSYmcihlKS5oYXNDbGFzcyhkKT9yKGUpLm9uZShSci5UUkFOU0lUSU9OX0VORCxmdW5jdGlvbih0KXtyZXR1cm4gbi5fZGVzdHJveUVsZW1lbnQoZSx0KX0pLmVtdWxhdGVUcmFuc2l0aW9uRW5kKDE1MCk6dGhpcy5fZGVzdHJveUVsZW1lbnQoZSl9LHQuX2Rlc3Ryb3lFbGVtZW50PWZ1bmN0aW9uKHQpe3IodCkuZGV0YWNoKCkudHJpZ2dlcihjLkNMT1NFRCkucmVtb3ZlKCl9LGkuX2pRdWVyeUludGVyZmFjZT1mdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9cih0aGlzKSxlPXQuZGF0YShvKTtlfHwoZT1uZXcgaSh0aGlzKSx0LmRhdGEobyxlKSksXCJjbG9zZVwiPT09biYmZVtuXSh0aGlzKX0pfSxpLl9oYW5kbGVEaXNtaXNzPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXt0JiZ0LnByZXZlbnREZWZhdWx0KCksZS5jbG9zZSh0aGlzKX19LFQoaSxudWxsLFt7a2V5OlwiVkVSU0lPTlwiLGdldDpmdW5jdGlvbigpe3JldHVyblwiNC4wLjBcIn19XSksaX0oKSxyKGRvY3VtZW50KS5vbihjLkNMSUNLX0RBVEFfQVBJLCdbZGF0YS1kaXNtaXNzPVwiYWxlcnRcIl0nLHAuX2hhbmRsZURpc21pc3MobmV3IHApKSxyLmZuW2VdPXAuX2pRdWVyeUludGVyZmFjZSxyLmZuW2VdLkNvbnN0cnVjdG9yPXAsci5mbltlXS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHIuZm5bZV09bCxwLl9qUXVlcnlJbnRlcmZhY2V9LGc9XCJidXR0b25cIix2PVwiLlwiKyhfPVwiYnMuYnV0dG9uXCIpLHk9XCIuZGF0YS1hcGlcIixiPShtPXQpLmZuW2ddLEM9XCJhY3RpdmVcIixFPVwiYnRuXCIsdz0nW2RhdGEtdG9nZ2xlXj1cImJ1dHRvblwiXScsQT0nW2RhdGEtdG9nZ2xlPVwiYnV0dG9uc1wiXScsUz1cImlucHV0XCIsRD1cIi5hY3RpdmVcIixrPVwiLmJ0blwiLE49e0NMSUNLX0RBVEFfQVBJOlwiY2xpY2tcIit2K3ksRk9DVVNfQkxVUl9EQVRBX0FQSTooST1cImZvY3VzXCIpK3YreStcIiBibHVyXCIrdit5fSxPPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbih0KXt0aGlzLl9lbGVtZW50PXR9dmFyIHQ9bi5wcm90b3R5cGU7cmV0dXJuIHQudG9nZ2xlPWZ1bmN0aW9uKCl7dmFyIHQ9ITAsZT0hMCxuPW0odGhpcy5fZWxlbWVudCkuY2xvc2VzdChBKVswXTtpZihuKXt2YXIgaT1tKHRoaXMuX2VsZW1lbnQpLmZpbmQoUylbMF07aWYoaSl7aWYoXCJyYWRpb1wiPT09aS50eXBlKWlmKGkuY2hlY2tlZCYmbSh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDKSl0PSExO2Vsc2V7dmFyIHI9bShuKS5maW5kKEQpWzBdO3ImJm0ocikucmVtb3ZlQ2xhc3MoQyl9aWYodCl7aWYoaS5oYXNBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKXx8bi5oYXNBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKXx8aS5jbGFzc0xpc3QuY29udGFpbnMoXCJkaXNhYmxlZFwiKXx8bi5jbGFzc0xpc3QuY29udGFpbnMoXCJkaXNhYmxlZFwiKSlyZXR1cm47aS5jaGVja2VkPSFtKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKEMpLG0oaSkudHJpZ2dlcihcImNoYW5nZVwiKX1pLmZvY3VzKCksZT0hMX19ZSYmdGhpcy5fZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJhcmlhLXByZXNzZWRcIiwhbSh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDKSksdCYmbSh0aGlzLl9lbGVtZW50KS50b2dnbGVDbGFzcyhDKX0sdC5kaXNwb3NlPWZ1bmN0aW9uKCl7bS5yZW1vdmVEYXRhKHRoaXMuX2VsZW1lbnQsXyksdGhpcy5fZWxlbWVudD1udWxsfSxuLl9qUXVlcnlJbnRlcmZhY2U9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0PW0odGhpcykuZGF0YShfKTt0fHwodD1uZXcgbih0aGlzKSxtKHRoaXMpLmRhdGEoXyx0KSksXCJ0b2dnbGVcIj09PWUmJnRbZV0oKX0pfSxUKG4sbnVsbCxbe2tleTpcIlZFUlNJT05cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cIjQuMC4wXCJ9fV0pLG59KCksbShkb2N1bWVudCkub24oTi5DTElDS19EQVRBX0FQSSx3LGZ1bmN0aW9uKHQpe3QucHJldmVudERlZmF1bHQoKTt2YXIgZT10LnRhcmdldDttKGUpLmhhc0NsYXNzKEUpfHwoZT1tKGUpLmNsb3Nlc3QoaykpLE8uX2pRdWVyeUludGVyZmFjZS5jYWxsKG0oZSksXCJ0b2dnbGVcIil9KS5vbihOLkZPQ1VTX0JMVVJfREFUQV9BUEksdyxmdW5jdGlvbih0KXt2YXIgZT1tKHQudGFyZ2V0KS5jbG9zZXN0KGspWzBdO20oZSkudG9nZ2xlQ2xhc3MoSSwvXmZvY3VzKGluKT8kLy50ZXN0KHQudHlwZSkpfSksbS5mbltnXT1PLl9qUXVlcnlJbnRlcmZhY2UsbS5mbltnXS5Db25zdHJ1Y3Rvcj1PLG0uZm5bZ10ubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBtLmZuW2ddPWIsTy5falF1ZXJ5SW50ZXJmYWNlfSwkPWpRdWVyeSxqPVwiY2Fyb3VzZWxcIixGPVwiLlwiKyh4PVwiYnMuY2Fyb3VzZWxcIiksUj1cIi5kYXRhLWFwaVwiLFA9JC5mbltqXSxRPXtpbnRlcnZhbDo1ZTMsa2V5Ym9hcmQ6ITAsc2xpZGU6ITEscGF1c2U6XCJob3ZlclwiLHdyYXA6ITB9LE09e2ludGVydmFsOlwiKG51bWJlcnxib29sZWFuKVwiLGtleWJvYXJkOlwiYm9vbGVhblwiLHNsaWRlOlwiKGJvb2xlYW58c3RyaW5nKVwiLHBhdXNlOlwiKHN0cmluZ3xib29sZWFuKVwiLHdyYXA6XCJib29sZWFuXCJ9LEw9XCJuZXh0XCIsSD1cInByZXZcIixVPVwibGVmdFwiLFc9XCJyaWdodFwiLEI9e1NMSURFOlwic2xpZGVcIitGLFNMSUQ6XCJzbGlkXCIrRixLRVlET1dOOlwia2V5ZG93blwiK0YsTU9VU0VFTlRFUjpcIm1vdXNlZW50ZXJcIitGLE1PVVNFTEVBVkU6XCJtb3VzZWxlYXZlXCIrRixUT1VDSEVORDpcInRvdWNoZW5kXCIrRixMT0FEX0RBVEFfQVBJOlwibG9hZFwiK0YrUixDTElDS19EQVRBX0FQSTpcImNsaWNrXCIrRitSfSxHPVwiY2Fyb3VzZWxcIixLPVwiYWN0aXZlXCIscT1cInNsaWRlXCIsVj1cImNhcm91c2VsLWl0ZW0tcmlnaHRcIixZPVwiY2Fyb3VzZWwtaXRlbS1sZWZ0XCIsej1cImNhcm91c2VsLWl0ZW0tbmV4dFwiLFg9XCJjYXJvdXNlbC1pdGVtLXByZXZcIixaPVwiLmFjdGl2ZVwiLEo9XCIuYWN0aXZlLmNhcm91c2VsLWl0ZW1cIix0dD1cIi5jYXJvdXNlbC1pdGVtXCIsZXQ9XCIuY2Fyb3VzZWwtaXRlbS1uZXh0LCAuY2Fyb3VzZWwtaXRlbS1wcmV2XCIsbnQ9XCIuY2Fyb3VzZWwtaW5kaWNhdG9yc1wiLGl0PVwiW2RhdGEtc2xpZGVdLCBbZGF0YS1zbGlkZS10b11cIixydD0nW2RhdGEtcmlkZT1cImNhcm91c2VsXCJdJyxvdD1mdW5jdGlvbigpe2Z1bmN0aW9uIG8odCxlKXt0aGlzLl9pdGVtcz1udWxsLHRoaXMuX2ludGVydmFsPW51bGwsdGhpcy5fYWN0aXZlRWxlbWVudD1udWxsLHRoaXMuX2lzUGF1c2VkPSExLHRoaXMuX2lzU2xpZGluZz0hMSx0aGlzLnRvdWNoVGltZW91dD1udWxsLHRoaXMuX2NvbmZpZz10aGlzLl9nZXRDb25maWcoZSksdGhpcy5fZWxlbWVudD0kKHQpWzBdLHRoaXMuX2luZGljYXRvcnNFbGVtZW50PSQodGhpcy5fZWxlbWVudCkuZmluZChudClbMF0sdGhpcy5fYWRkRXZlbnRMaXN0ZW5lcnMoKX12YXIgdD1vLnByb3RvdHlwZTtyZXR1cm4gdC5uZXh0PWZ1bmN0aW9uKCl7dGhpcy5faXNTbGlkaW5nfHx0aGlzLl9zbGlkZShMKX0sdC5uZXh0V2hlblZpc2libGU9ZnVuY3Rpb24oKXtkb2N1bWVudC5oaWRkZW58fHRoaXMubmV4dCgpfSx0LnByZXY9ZnVuY3Rpb24oKXt0aGlzLl9pc1NsaWRpbmd8fHRoaXMuX3NsaWRlKEgpfSx0LnBhdXNlPWZ1bmN0aW9uKHQpe3R8fCh0aGlzLl9pc1BhdXNlZD0hMCksJCh0aGlzLl9lbGVtZW50KS5maW5kKGV0KVswXSYmUnIuc3VwcG9ydHNUcmFuc2l0aW9uRW5kKCkmJihSci50cmlnZ2VyVHJhbnNpdGlvbkVuZCh0aGlzLl9lbGVtZW50KSx0aGlzLmN5Y2xlKCEwKSksY2xlYXJJbnRlcnZhbCh0aGlzLl9pbnRlcnZhbCksdGhpcy5faW50ZXJ2YWw9bnVsbH0sdC5jeWNsZT1mdW5jdGlvbih0KXt0fHwodGhpcy5faXNQYXVzZWQ9ITEpLHRoaXMuX2ludGVydmFsJiYoY2xlYXJJbnRlcnZhbCh0aGlzLl9pbnRlcnZhbCksdGhpcy5faW50ZXJ2YWw9bnVsbCksdGhpcy5fY29uZmlnLmludGVydmFsJiYhdGhpcy5faXNQYXVzZWQmJih0aGlzLl9pbnRlcnZhbD1zZXRJbnRlcnZhbCgoZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlP3RoaXMubmV4dFdoZW5WaXNpYmxlOnRoaXMubmV4dCkuYmluZCh0aGlzKSx0aGlzLl9jb25maWcuaW50ZXJ2YWwpKX0sdC50bz1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMuX2FjdGl2ZUVsZW1lbnQ9JCh0aGlzLl9lbGVtZW50KS5maW5kKEopWzBdO3ZhciBuPXRoaXMuX2dldEl0ZW1JbmRleCh0aGlzLl9hY3RpdmVFbGVtZW50KTtpZighKHQ+dGhpcy5faXRlbXMubGVuZ3RoLTF8fHQ8MCkpaWYodGhpcy5faXNTbGlkaW5nKSQodGhpcy5fZWxlbWVudCkub25lKEIuU0xJRCxmdW5jdGlvbigpe3JldHVybiBlLnRvKHQpfSk7ZWxzZXtpZihuPT09dClyZXR1cm4gdGhpcy5wYXVzZSgpLHZvaWQgdGhpcy5jeWNsZSgpO3ZhciBpPW48dD9MOkg7dGhpcy5fc2xpZGUoaSx0aGlzLl9pdGVtc1t0XSl9fSx0LmRpc3Bvc2U9ZnVuY3Rpb24oKXskKHRoaXMuX2VsZW1lbnQpLm9mZihGKSwkLnJlbW92ZURhdGEodGhpcy5fZWxlbWVudCx4KSx0aGlzLl9pdGVtcz1udWxsLHRoaXMuX2NvbmZpZz1udWxsLHRoaXMuX2VsZW1lbnQ9bnVsbCx0aGlzLl9pbnRlcnZhbD1udWxsLHRoaXMuX2lzUGF1c2VkPW51bGwsdGhpcy5faXNTbGlkaW5nPW51bGwsdGhpcy5fYWN0aXZlRWxlbWVudD1udWxsLHRoaXMuX2luZGljYXRvcnNFbGVtZW50PW51bGx9LHQuX2dldENvbmZpZz1mdW5jdGlvbih0KXtyZXR1cm4gdD0kLmV4dGVuZCh7fSxRLHQpLFJyLnR5cGVDaGVja0NvbmZpZyhqLHQsTSksdH0sdC5fYWRkRXZlbnRMaXN0ZW5lcnM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuX2NvbmZpZy5rZXlib2FyZCYmJCh0aGlzLl9lbGVtZW50KS5vbihCLktFWURPV04sZnVuY3Rpb24odCl7cmV0dXJuIGUuX2tleWRvd24odCl9KSxcImhvdmVyXCI9PT10aGlzLl9jb25maWcucGF1c2UmJigkKHRoaXMuX2VsZW1lbnQpLm9uKEIuTU9VU0VFTlRFUixmdW5jdGlvbih0KXtyZXR1cm4gZS5wYXVzZSh0KX0pLm9uKEIuTU9VU0VMRUFWRSxmdW5jdGlvbih0KXtyZXR1cm4gZS5jeWNsZSh0KX0pLFwib250b3VjaHN0YXJ0XCJpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQmJiQodGhpcy5fZWxlbWVudCkub24oQi5UT1VDSEVORCxmdW5jdGlvbigpe2UucGF1c2UoKSxlLnRvdWNoVGltZW91dCYmY2xlYXJUaW1lb3V0KGUudG91Y2hUaW1lb3V0KSxlLnRvdWNoVGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKHQpe3JldHVybiBlLmN5Y2xlKHQpfSw1MDArZS5fY29uZmlnLmludGVydmFsKX0pKX0sdC5fa2V5ZG93bj1mdW5jdGlvbih0KXtpZighL2lucHV0fHRleHRhcmVhL2kudGVzdCh0LnRhcmdldC50YWdOYW1lKSlzd2l0Y2godC53aGljaCl7Y2FzZSAzNzp0LnByZXZlbnREZWZhdWx0KCksdGhpcy5wcmV2KCk7YnJlYWs7Y2FzZSAzOTp0LnByZXZlbnREZWZhdWx0KCksdGhpcy5uZXh0KCk7YnJlYWs7ZGVmYXVsdDpyZXR1cm59fSx0Ll9nZXRJdGVtSW5kZXg9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2l0ZW1zPSQubWFrZUFycmF5KCQodCkucGFyZW50KCkuZmluZCh0dCkpLHRoaXMuX2l0ZW1zLmluZGV4T2YodCl9LHQuX2dldEl0ZW1CeURpcmVjdGlvbj1mdW5jdGlvbih0LGUpe3ZhciBuPXQ9PT1MLGk9dD09PUgscj10aGlzLl9nZXRJdGVtSW5kZXgoZSksbz10aGlzLl9pdGVtcy5sZW5ndGgtMTtpZigoaSYmMD09PXJ8fG4mJnI9PT1vKSYmIXRoaXMuX2NvbmZpZy53cmFwKXJldHVybiBlO3ZhciBzPShyKyh0PT09SD8tMToxKSkldGhpcy5faXRlbXMubGVuZ3RoO3JldHVybi0xPT09cz90aGlzLl9pdGVtc1t0aGlzLl9pdGVtcy5sZW5ndGgtMV06dGhpcy5faXRlbXNbc119LHQuX3RyaWdnZXJTbGlkZUV2ZW50PWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5fZ2V0SXRlbUluZGV4KHQpLGk9dGhpcy5fZ2V0SXRlbUluZGV4KCQodGhpcy5fZWxlbWVudCkuZmluZChKKVswXSkscj0kLkV2ZW50KEIuU0xJREUse3JlbGF0ZWRUYXJnZXQ6dCxkaXJlY3Rpb246ZSxmcm9tOmksdG86bn0pO3JldHVybiAkKHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIocikscn0sdC5fc2V0QWN0aXZlSW5kaWNhdG9yRWxlbWVudD1mdW5jdGlvbih0KXtpZih0aGlzLl9pbmRpY2F0b3JzRWxlbWVudCl7JCh0aGlzLl9pbmRpY2F0b3JzRWxlbWVudCkuZmluZChaKS5yZW1vdmVDbGFzcyhLKTt2YXIgZT10aGlzLl9pbmRpY2F0b3JzRWxlbWVudC5jaGlsZHJlblt0aGlzLl9nZXRJdGVtSW5kZXgodCldO2UmJiQoZSkuYWRkQ2xhc3MoSyl9fSx0Ll9zbGlkZT1mdW5jdGlvbih0LGUpe3ZhciBuLGkscixvPXRoaXMscz0kKHRoaXMuX2VsZW1lbnQpLmZpbmQoSilbMF0sYT10aGlzLl9nZXRJdGVtSW5kZXgocyksbD1lfHxzJiZ0aGlzLl9nZXRJdGVtQnlEaXJlY3Rpb24odCxzKSxjPXRoaXMuX2dldEl0ZW1JbmRleChsKSxoPUJvb2xlYW4odGhpcy5faW50ZXJ2YWwpO2lmKHQ9PT1MPyhuPVksaT16LHI9VSk6KG49VixpPVgscj1XKSxsJiYkKGwpLmhhc0NsYXNzKEspKXRoaXMuX2lzU2xpZGluZz0hMTtlbHNlIGlmKCF0aGlzLl90cmlnZ2VyU2xpZGVFdmVudChsLHIpLmlzRGVmYXVsdFByZXZlbnRlZCgpJiZzJiZsKXt0aGlzLl9pc1NsaWRpbmc9ITAsaCYmdGhpcy5wYXVzZSgpLHRoaXMuX3NldEFjdGl2ZUluZGljYXRvckVsZW1lbnQobCk7dmFyIHU9JC5FdmVudChCLlNMSUQse3JlbGF0ZWRUYXJnZXQ6bCxkaXJlY3Rpb246cixmcm9tOmEsdG86Y30pO1JyLnN1cHBvcnRzVHJhbnNpdGlvbkVuZCgpJiYkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKHEpPygkKGwpLmFkZENsYXNzKGkpLFJyLnJlZmxvdyhsKSwkKHMpLmFkZENsYXNzKG4pLCQobCkuYWRkQ2xhc3MobiksJChzKS5vbmUoUnIuVFJBTlNJVElPTl9FTkQsZnVuY3Rpb24oKXskKGwpLnJlbW92ZUNsYXNzKG4rXCIgXCIraSkuYWRkQ2xhc3MoSyksJChzKS5yZW1vdmVDbGFzcyhLK1wiIFwiK2krXCIgXCIrbiksby5faXNTbGlkaW5nPSExLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtyZXR1cm4gJChvLl9lbGVtZW50KS50cmlnZ2VyKHUpfSwwKX0pLmVtdWxhdGVUcmFuc2l0aW9uRW5kKDYwMCkpOigkKHMpLnJlbW92ZUNsYXNzKEspLCQobCkuYWRkQ2xhc3MoSyksdGhpcy5faXNTbGlkaW5nPSExLCQodGhpcy5fZWxlbWVudCkudHJpZ2dlcih1KSksaCYmdGhpcy5jeWNsZSgpfX0sby5falF1ZXJ5SW50ZXJmYWNlPWZ1bmN0aW9uKGkpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdD0kKHRoaXMpLmRhdGEoeCksZT0kLmV4dGVuZCh7fSxRLCQodGhpcykuZGF0YSgpKTtcIm9iamVjdFwiPT10eXBlb2YgaSYmJC5leHRlbmQoZSxpKTt2YXIgbj1cInN0cmluZ1wiPT10eXBlb2YgaT9pOmUuc2xpZGU7aWYodHx8KHQ9bmV3IG8odGhpcyxlKSwkKHRoaXMpLmRhdGEoeCx0KSksXCJudW1iZXJcIj09dHlwZW9mIGkpdC50byhpKTtlbHNlIGlmKFwic3RyaW5nXCI9PXR5cGVvZiBuKXtpZih2b2lkIDA9PT10W25dKXRocm93IG5ldyBFcnJvcignTm8gbWV0aG9kIG5hbWVkIFwiJytuKydcIicpO3Rbbl0oKX1lbHNlIGUuaW50ZXJ2YWwmJih0LnBhdXNlKCksdC5jeWNsZSgpKX0pfSxvLl9kYXRhQXBpQ2xpY2tIYW5kbGVyPWZ1bmN0aW9uKHQpe3ZhciBlPVJyLmdldFNlbGVjdG9yRnJvbUVsZW1lbnQodGhpcyk7aWYoZSl7dmFyIG49JChlKVswXTtpZihuJiYkKG4pLmhhc0NsYXNzKEcpKXt2YXIgaT0kLmV4dGVuZCh7fSwkKG4pLmRhdGEoKSwkKHRoaXMpLmRhdGEoKSkscj10aGlzLmdldEF0dHJpYnV0ZShcImRhdGEtc2xpZGUtdG9cIik7ciYmKGkuaW50ZXJ2YWw9ITEpLG8uX2pRdWVyeUludGVyZmFjZS5jYWxsKCQobiksaSksciYmJChuKS5kYXRhKHgpLnRvKHIpLHQucHJldmVudERlZmF1bHQoKX19fSxUKG8sbnVsbCxbe2tleTpcIlZFUlNJT05cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cIjQuMC4wLWJldGFcIn19LHtrZXk6XCJEZWZhdWx0XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFF9fV0pLG99KCksJChkb2N1bWVudCkub24oQi5DTElDS19EQVRBX0FQSSxpdCxvdC5fZGF0YUFwaUNsaWNrSGFuZGxlciksJCh3aW5kb3cpLm9uKEIuTE9BRF9EQVRBX0FQSSxmdW5jdGlvbigpeyQocnQpLmVhY2goZnVuY3Rpb24oKXt2YXIgdD0kKHRoaXMpO290Ll9qUXVlcnlJbnRlcmZhY2UuY2FsbCh0LHQuZGF0YSgpKX0pfSksJC5mbltqXT1vdC5falF1ZXJ5SW50ZXJmYWNlLCQuZm5bal0uQ29uc3RydWN0b3I9b3QsJC5mbltqXS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuICQuZm5bal09UCxvdC5falF1ZXJ5SW50ZXJmYWNlfSxhdD1cImNvbGxhcHNlXCIsY3Q9XCIuXCIrKGx0PVwiYnMuY29sbGFwc2VcIiksaHQ9KHN0PXQpLmZuW2F0XSx1dD17dG9nZ2xlOiEwLHBhcmVudDpcIlwifSxkdD17dG9nZ2xlOlwiYm9vbGVhblwiLHBhcmVudDpcIihzdHJpbmd8ZWxlbWVudClcIn0sZnQ9e1NIT1c6XCJzaG93XCIrY3QsU0hPV046XCJzaG93blwiK2N0LEhJREU6XCJoaWRlXCIrY3QsSElEREVOOlwiaGlkZGVuXCIrY3QsQ0xJQ0tfREFUQV9BUEk6XCJjbGlja1wiK2N0K1wiLmRhdGEtYXBpXCJ9LHB0PVwic2hvd1wiLG10PVwiY29sbGFwc2VcIixndD1cImNvbGxhcHNpbmdcIixfdD1cImNvbGxhcHNlZFwiLHZ0PVwid2lkdGhcIix5dD1cImhlaWdodFwiLGJ0PVwiLnNob3csIC5jb2xsYXBzaW5nXCIsQ3Q9J1tkYXRhLXRvZ2dsZT1cImNvbGxhcHNlXCJdJyxFdD1mdW5jdGlvbigpe2Z1bmN0aW9uIGEodCxlKXt0aGlzLl9pc1RyYW5zaXRpb25pbmc9ITEsdGhpcy5fZWxlbWVudD10LHRoaXMuX2NvbmZpZz10aGlzLl9nZXRDb25maWcoZSksdGhpcy5fdHJpZ2dlckFycmF5PXN0Lm1ha2VBcnJheShzdCgnW2RhdGEtdG9nZ2xlPVwiY29sbGFwc2VcIl1baHJlZj1cIiMnK3QuaWQrJ1wiXSxbZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiXVtkYXRhLXRhcmdldD1cIiMnK3QuaWQrJ1wiXScpKTtmb3IodmFyIG49c3QoQ3QpLGk9MDtpPG4ubGVuZ3RoO2krKyl7dmFyIHI9bltpXSxvPVJyLmdldFNlbGVjdG9yRnJvbUVsZW1lbnQocik7bnVsbCE9PW8mJjA8c3QobykuZmlsdGVyKHQpLmxlbmd0aCYmKHRoaXMuX3NlbGVjdG9yPW8sdGhpcy5fdHJpZ2dlckFycmF5LnB1c2gocikpfXRoaXMuX3BhcmVudD10aGlzLl9jb25maWcucGFyZW50P3RoaXMuX2dldFBhcmVudCgpOm51bGwsdGhpcy5fY29uZmlnLnBhcmVudHx8dGhpcy5fYWRkQXJpYUFuZENvbGxhcHNlZENsYXNzKHRoaXMuX2VsZW1lbnQsdGhpcy5fdHJpZ2dlckFycmF5KSx0aGlzLl9jb25maWcudG9nZ2xlJiZ0aGlzLnRvZ2dsZSgpfXZhciB0PWEucHJvdG90eXBlO3JldHVybiB0LnRvZ2dsZT1mdW5jdGlvbigpe3N0KHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKHB0KT90aGlzLmhpZGUoKTp0aGlzLnNob3coKX0sdC5zaG93PWZ1bmN0aW9uKCl7dmFyIHQsZSxuPXRoaXM7aWYoIXRoaXMuX2lzVHJhbnNpdGlvbmluZyYmIXN0KHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKHB0KSYmKHRoaXMuX3BhcmVudCYmMD09PSh0PXN0Lm1ha2VBcnJheShzdCh0aGlzLl9wYXJlbnQpLmZpbmQoYnQpLmZpbHRlcignW2RhdGEtcGFyZW50PVwiJyt0aGlzLl9jb25maWcucGFyZW50KydcIl0nKSkpLmxlbmd0aCYmKHQ9bnVsbCksISh0JiYoZT1zdCh0KS5ub3QodGhpcy5fc2VsZWN0b3IpLmRhdGEobHQpKSYmZS5faXNUcmFuc2l0aW9uaW5nKSkpe3ZhciBpPXN0LkV2ZW50KGZ0LlNIT1cpO2lmKHN0KHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIoaSksIWkuaXNEZWZhdWx0UHJldmVudGVkKCkpe3QmJihhLl9qUXVlcnlJbnRlcmZhY2UuY2FsbChzdCh0KS5ub3QodGhpcy5fc2VsZWN0b3IpLFwiaGlkZVwiKSxlfHxzdCh0KS5kYXRhKGx0LG51bGwpKTt2YXIgcj10aGlzLl9nZXREaW1lbnNpb24oKTtzdCh0aGlzLl9lbGVtZW50KS5yZW1vdmVDbGFzcyhtdCkuYWRkQ2xhc3MoZ3QpLCh0aGlzLl9lbGVtZW50LnN0eWxlW3JdPTApPHRoaXMuX3RyaWdnZXJBcnJheS5sZW5ndGgmJnN0KHRoaXMuX3RyaWdnZXJBcnJheSkucmVtb3ZlQ2xhc3MoX3QpLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITApLHRoaXMuc2V0VHJhbnNpdGlvbmluZyghMCk7dmFyIG89ZnVuY3Rpb24oKXtzdChuLl9lbGVtZW50KS5yZW1vdmVDbGFzcyhndCkuYWRkQ2xhc3MobXQpLmFkZENsYXNzKHB0KSxuLl9lbGVtZW50LnN0eWxlW3JdPVwiXCIsbi5zZXRUcmFuc2l0aW9uaW5nKCExKSxzdChuLl9lbGVtZW50KS50cmlnZ2VyKGZ0LlNIT1dOKX07aWYoUnIuc3VwcG9ydHNUcmFuc2l0aW9uRW5kKCkpe3ZhciBzPVwic2Nyb2xsXCIrKHJbMF0udG9VcHBlckNhc2UoKStyLnNsaWNlKDEpKTtzdCh0aGlzLl9lbGVtZW50KS5vbmUoUnIuVFJBTlNJVElPTl9FTkQsbykuZW11bGF0ZVRyYW5zaXRpb25FbmQoNjAwKSx0aGlzLl9lbGVtZW50LnN0eWxlW3JdPXRoaXMuX2VsZW1lbnRbc10rXCJweFwifWVsc2UgbygpfX19LHQuaGlkZT1mdW5jdGlvbigpe3ZhciB0PXRoaXM7aWYoIXRoaXMuX2lzVHJhbnNpdGlvbmluZyYmc3QodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MocHQpKXt2YXIgZT1zdC5FdmVudChmdC5ISURFKTtpZihzdCh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKGUpLCFlLmlzRGVmYXVsdFByZXZlbnRlZCgpKXt2YXIgbj10aGlzLl9nZXREaW1lbnNpb24oKTtpZih0aGlzLl9lbGVtZW50LnN0eWxlW25dPXRoaXMuX2VsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClbbl0rXCJweFwiLFJyLnJlZmxvdyh0aGlzLl9lbGVtZW50KSxzdCh0aGlzLl9lbGVtZW50KS5hZGRDbGFzcyhndCkucmVtb3ZlQ2xhc3MobXQpLnJlbW92ZUNsYXNzKHB0KSwwPHRoaXMuX3RyaWdnZXJBcnJheS5sZW5ndGgpZm9yKHZhciBpPTA7aTx0aGlzLl90cmlnZ2VyQXJyYXkubGVuZ3RoO2krKyl7dmFyIHI9dGhpcy5fdHJpZ2dlckFycmF5W2ldLG89UnIuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudChyKTtpZihudWxsIT09bylzdChvKS5oYXNDbGFzcyhwdCl8fHN0KHIpLmFkZENsYXNzKF90KS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCExKX10aGlzLnNldFRyYW5zaXRpb25pbmcoITApO3ZhciBzPWZ1bmN0aW9uKCl7dC5zZXRUcmFuc2l0aW9uaW5nKCExKSxzdCh0Ll9lbGVtZW50KS5yZW1vdmVDbGFzcyhndCkuYWRkQ2xhc3MobXQpLnRyaWdnZXIoZnQuSElEREVOKX07dGhpcy5fZWxlbWVudC5zdHlsZVtuXT1cIlwiLFJyLnN1cHBvcnRzVHJhbnNpdGlvbkVuZCgpP3N0KHRoaXMuX2VsZW1lbnQpLm9uZShSci5UUkFOU0lUSU9OX0VORCxzKS5lbXVsYXRlVHJhbnNpdGlvbkVuZCg2MDApOnMoKX19fSx0LnNldFRyYW5zaXRpb25pbmc9ZnVuY3Rpb24odCl7dGhpcy5faXNUcmFuc2l0aW9uaW5nPXR9LHQuZGlzcG9zZT1mdW5jdGlvbigpe3N0LnJlbW92ZURhdGEodGhpcy5fZWxlbWVudCxsdCksdGhpcy5fY29uZmlnPW51bGwsdGhpcy5fcGFyZW50PW51bGwsdGhpcy5fZWxlbWVudD1udWxsLHRoaXMuX3RyaWdnZXJBcnJheT1udWxsLHRoaXMuX2lzVHJhbnNpdGlvbmluZz1udWxsfSx0Ll9nZXRDb25maWc9ZnVuY3Rpb24odCl7cmV0dXJuKHQ9cyh7fSx1dCx0KSkudG9nZ2xlPUJvb2xlYW4odC50b2dnbGUpLFJyLnR5cGVDaGVja0NvbmZpZyhhdCx0LGR0KSx0fSx0Ll9nZXREaW1lbnNpb249ZnVuY3Rpb24oKXtyZXR1cm4gc3QodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3ModnQpP3Z0Onl0fSx0Ll9nZXRQYXJlbnQ9ZnVuY3Rpb24oKXt2YXIgbj10aGlzLHQ9bnVsbDtSci5pc0VsZW1lbnQodGhpcy5fY29uZmlnLnBhcmVudCk/KHQ9dGhpcy5fY29uZmlnLnBhcmVudCx2b2lkIDAhPT10aGlzLl9jb25maWcucGFyZW50LmpxdWVyeSYmKHQ9dGhpcy5fY29uZmlnLnBhcmVudFswXSkpOnQ9c3QodGhpcy5fY29uZmlnLnBhcmVudClbMF07dmFyIGU9J1tkYXRhLXRvZ2dsZT1cImNvbGxhcHNlXCJdW2RhdGEtcGFyZW50PVwiJyt0aGlzLl9jb25maWcucGFyZW50KydcIl0nO3JldHVybiBzdCh0KS5maW5kKGUpLmVhY2goZnVuY3Rpb24odCxlKXtuLl9hZGRBcmlhQW5kQ29sbGFwc2VkQ2xhc3MoYS5fZ2V0VGFyZ2V0RnJvbUVsZW1lbnQoZSksW2VdKX0pLHR9LHQuX2FkZEFyaWFBbmRDb2xsYXBzZWRDbGFzcz1mdW5jdGlvbih0LGUpe2lmKHQpe3ZhciBuPXN0KHQpLmhhc0NsYXNzKHB0KTswPGUubGVuZ3RoJiZzdChlKS50b2dnbGVDbGFzcyhfdCwhbikuYXR0cihcImFyaWEtZXhwYW5kZWRcIixuKX19LGEuX2dldFRhcmdldEZyb21FbGVtZW50PWZ1bmN0aW9uKHQpe3ZhciBlPVJyLmdldFNlbGVjdG9yRnJvbUVsZW1lbnQodCk7cmV0dXJuIGU/c3QoZSlbMF06bnVsbH0sYS5falF1ZXJ5SW50ZXJmYWNlPWZ1bmN0aW9uKGkpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1zdCh0aGlzKSxlPXQuZGF0YShsdCksbj1zKHt9LHV0LHQuZGF0YSgpLFwib2JqZWN0XCI9PXR5cGVvZiBpJiZpKTtpZighZSYmbi50b2dnbGUmJi9zaG93fGhpZGUvLnRlc3QoaSkmJihuLnRvZ2dsZT0hMSksZXx8KGU9bmV3IGEodGhpcyxuKSx0LmRhdGEobHQsZSkpLFwic3RyaW5nXCI9PXR5cGVvZiBpKXtpZih2b2lkIDA9PT1lW2ldKXRocm93IG5ldyBUeXBlRXJyb3IoJ05vIG1ldGhvZCBuYW1lZCBcIicraSsnXCInKTtlW2ldKCl9fSl9LFQoYSxudWxsLFt7a2V5OlwiVkVSU0lPTlwiLGdldDpmdW5jdGlvbigpe3JldHVyblwiNC4wLjBcIn19LHtrZXk6XCJEZWZhdWx0XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHV0fX1dKSxhfSgpLHN0KGRvY3VtZW50KS5vbihmdC5DTElDS19EQVRBX0FQSSxDdCxmdW5jdGlvbih0KXtcIkFcIj09PXQuY3VycmVudFRhcmdldC50YWdOYW1lJiZ0LnByZXZlbnREZWZhdWx0KCk7dmFyIG49c3QodGhpcyksZT1Sci5nZXRTZWxlY3RvckZyb21FbGVtZW50KHRoaXMpO3N0KGUpLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1zdCh0aGlzKSxlPXQuZGF0YShsdCk/XCJ0b2dnbGVcIjpuLmRhdGEoKTtFdC5falF1ZXJ5SW50ZXJmYWNlLmNhbGwodCxlKX0pfSksc3QuZm5bYXRdPUV0Ll9qUXVlcnlJbnRlcmZhY2Usc3QuZm5bYXRdLkNvbnN0cnVjdG9yPUV0LHN0LmZuW2F0XS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHN0LmZuW2F0XT1odCxFdC5falF1ZXJ5SW50ZXJmYWNlfSxUdD1cIm1vZGFsXCIsQXQ9XCIuXCIrKHd0PVwiYnMubW9kYWxcIiksU3Q9KEl0PXQpLmZuW1R0XSxEdD17YmFja2Ryb3A6ITAsa2V5Ym9hcmQ6ITAsZm9jdXM6ITAsc2hvdzohMH0sa3Q9e2JhY2tkcm9wOlwiKGJvb2xlYW58c3RyaW5nKVwiLGtleWJvYXJkOlwiYm9vbGVhblwiLGZvY3VzOlwiYm9vbGVhblwiLHNob3c6XCJib29sZWFuXCJ9LE50PXtISURFOlwiaGlkZVwiK0F0LEhJRERFTjpcImhpZGRlblwiK0F0LFNIT1c6XCJzaG93XCIrQXQsU0hPV046XCJzaG93blwiK0F0LEZPQ1VTSU46XCJmb2N1c2luXCIrQXQsUkVTSVpFOlwicmVzaXplXCIrQXQsQ0xJQ0tfRElTTUlTUzpcImNsaWNrLmRpc21pc3NcIitBdCxLRVlET1dOX0RJU01JU1M6XCJrZXlkb3duLmRpc21pc3NcIitBdCxNT1VTRVVQX0RJU01JU1M6XCJtb3VzZXVwLmRpc21pc3NcIitBdCxNT1VTRURPV05fRElTTUlTUzpcIm1vdXNlZG93bi5kaXNtaXNzXCIrQXQsQ0xJQ0tfREFUQV9BUEk6XCJjbGlja1wiK0F0K1wiLmRhdGEtYXBpXCJ9LE90PVwibW9kYWwtc2Nyb2xsYmFyLW1lYXN1cmVcIiwkdD1cIm1vZGFsLWJhY2tkcm9wXCIsanQ9XCJtb2RhbC1vcGVuXCIseHQ9XCJmYWRlXCIsRnQ9XCJzaG93XCIsUnQ9XCIubW9kYWwtZGlhbG9nXCIsUHQ9J1tkYXRhLXRvZ2dsZT1cIm1vZGFsXCJdJyxRdD0nW2RhdGEtZGlzbWlzcz1cIm1vZGFsXCJdJyxNdD1cIi5maXhlZC10b3AsIC5maXhlZC1ib3R0b20sIC5pcy1maXhlZCwgLnN0aWNreS10b3BcIixMdD1cIi5zdGlja3ktdG9wXCIsSHQ9XCIubmF2YmFyLXRvZ2dsZXJcIixVdD1mdW5jdGlvbigpe2Z1bmN0aW9uIHIodCxlKXt0aGlzLl9jb25maWc9dGhpcy5fZ2V0Q29uZmlnKGUpLHRoaXMuX2VsZW1lbnQ9dCx0aGlzLl9kaWFsb2c9SXQodCkuZmluZChSdClbMF0sdGhpcy5fYmFja2Ryb3A9bnVsbCx0aGlzLl9pc1Nob3duPSExLHRoaXMuX2lzQm9keU92ZXJmbG93aW5nPSExLHRoaXMuX2lnbm9yZUJhY2tkcm9wQ2xpY2s9ITEsdGhpcy5fb3JpZ2luYWxCb2R5UGFkZGluZz0wLHRoaXMuX3Njcm9sbGJhcldpZHRoPTB9dmFyIHQ9ci5wcm90b3R5cGU7cmV0dXJuIHQudG9nZ2xlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9pc1Nob3duP3RoaXMuaGlkZSgpOnRoaXMuc2hvdyh0KX0sdC5zaG93PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYoIXRoaXMuX2lzVHJhbnNpdGlvbmluZyYmIXRoaXMuX2lzU2hvd24pe1JyLnN1cHBvcnRzVHJhbnNpdGlvbkVuZCgpJiZJdCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyh4dCkmJih0aGlzLl9pc1RyYW5zaXRpb25pbmc9ITApO3ZhciBuPUl0LkV2ZW50KE50LlNIT1cse3JlbGF0ZWRUYXJnZXQ6dH0pO0l0KHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIobiksdGhpcy5faXNTaG93bnx8bi5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8KHRoaXMuX2lzU2hvd249ITAsdGhpcy5fY2hlY2tTY3JvbGxiYXIoKSx0aGlzLl9zZXRTY3JvbGxiYXIoKSx0aGlzLl9hZGp1c3REaWFsb2coKSxJdChkb2N1bWVudC5ib2R5KS5hZGRDbGFzcyhqdCksdGhpcy5fc2V0RXNjYXBlRXZlbnQoKSx0aGlzLl9zZXRSZXNpemVFdmVudCgpLEl0KHRoaXMuX2VsZW1lbnQpLm9uKE50LkNMSUNLX0RJU01JU1MsUXQsZnVuY3Rpb24odCl7cmV0dXJuIGUuaGlkZSh0KX0pLEl0KHRoaXMuX2RpYWxvZykub24oTnQuTU9VU0VET1dOX0RJU01JU1MsZnVuY3Rpb24oKXtJdChlLl9lbGVtZW50KS5vbmUoTnQuTU9VU0VVUF9ESVNNSVNTLGZ1bmN0aW9uKHQpe0l0KHQudGFyZ2V0KS5pcyhlLl9lbGVtZW50KSYmKGUuX2lnbm9yZUJhY2tkcm9wQ2xpY2s9ITApfSl9KSx0aGlzLl9zaG93QmFja2Ryb3AoZnVuY3Rpb24oKXtyZXR1cm4gZS5fc2hvd0VsZW1lbnQodCl9KSl9fSx0LmhpZGU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZih0JiZ0LnByZXZlbnREZWZhdWx0KCksIXRoaXMuX2lzVHJhbnNpdGlvbmluZyYmdGhpcy5faXNTaG93bil7dmFyIG49SXQuRXZlbnQoTnQuSElERSk7aWYoSXQodGhpcy5fZWxlbWVudCkudHJpZ2dlcihuKSx0aGlzLl9pc1Nob3duJiYhbi5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7dGhpcy5faXNTaG93bj0hMTt2YXIgaT1Sci5zdXBwb3J0c1RyYW5zaXRpb25FbmQoKSYmSXQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoeHQpO2kmJih0aGlzLl9pc1RyYW5zaXRpb25pbmc9ITApLHRoaXMuX3NldEVzY2FwZUV2ZW50KCksdGhpcy5fc2V0UmVzaXplRXZlbnQoKSxJdChkb2N1bWVudCkub2ZmKE50LkZPQ1VTSU4pLEl0KHRoaXMuX2VsZW1lbnQpLnJlbW92ZUNsYXNzKEZ0KSxJdCh0aGlzLl9lbGVtZW50KS5vZmYoTnQuQ0xJQ0tfRElTTUlTUyksSXQodGhpcy5fZGlhbG9nKS5vZmYoTnQuTU9VU0VET1dOX0RJU01JU1MpLGk/SXQodGhpcy5fZWxlbWVudCkub25lKFJyLlRSQU5TSVRJT05fRU5ELGZ1bmN0aW9uKHQpe3JldHVybiBlLl9oaWRlTW9kYWwodCl9KS5lbXVsYXRlVHJhbnNpdGlvbkVuZCgzMDApOnRoaXMuX2hpZGVNb2RhbCgpfX19LHQuZGlzcG9zZT1mdW5jdGlvbigpe0l0LnJlbW92ZURhdGEodGhpcy5fZWxlbWVudCx3dCksSXQod2luZG93LGRvY3VtZW50LHRoaXMuX2VsZW1lbnQsdGhpcy5fYmFja2Ryb3ApLm9mZihBdCksdGhpcy5fY29uZmlnPW51bGwsdGhpcy5fZWxlbWVudD1udWxsLHRoaXMuX2RpYWxvZz1udWxsLHRoaXMuX2JhY2tkcm9wPW51bGwsdGhpcy5faXNTaG93bj1udWxsLHRoaXMuX2lzQm9keU92ZXJmbG93aW5nPW51bGwsdGhpcy5faWdub3JlQmFja2Ryb3BDbGljaz1udWxsLHRoaXMuX3Njcm9sbGJhcldpZHRoPW51bGx9LHQuaGFuZGxlVXBkYXRlPWZ1bmN0aW9uKCl7dGhpcy5fYWRqdXN0RGlhbG9nKCl9LHQuX2dldENvbmZpZz1mdW5jdGlvbih0KXtyZXR1cm4gdD1zKHt9LER0LHQpLFJyLnR5cGVDaGVja0NvbmZpZyhUdCx0LGt0KSx0fSx0Ll9zaG93RWxlbWVudD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLG49UnIuc3VwcG9ydHNUcmFuc2l0aW9uRW5kKCkmJkl0KHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKHh0KTt0aGlzLl9lbGVtZW50LnBhcmVudE5vZGUmJnRoaXMuX2VsZW1lbnQucGFyZW50Tm9kZS5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFfHxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuX2VsZW1lbnQpLHRoaXMuX2VsZW1lbnQuc3R5bGUuZGlzcGxheT1cImJsb2NrXCIsdGhpcy5fZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiKSx0aGlzLl9lbGVtZW50LnNjcm9sbFRvcD0wLG4mJlJyLnJlZmxvdyh0aGlzLl9lbGVtZW50KSxJdCh0aGlzLl9lbGVtZW50KS5hZGRDbGFzcyhGdCksdGhpcy5fY29uZmlnLmZvY3VzJiZ0aGlzLl9lbmZvcmNlRm9jdXMoKTt2YXIgaT1JdC5FdmVudChOdC5TSE9XTix7cmVsYXRlZFRhcmdldDp0fSkscj1mdW5jdGlvbigpe2UuX2NvbmZpZy5mb2N1cyYmZS5fZWxlbWVudC5mb2N1cygpLGUuX2lzVHJhbnNpdGlvbmluZz0hMSxJdChlLl9lbGVtZW50KS50cmlnZ2VyKGkpfTtuP0l0KHRoaXMuX2RpYWxvZykub25lKFJyLlRSQU5TSVRJT05fRU5ELHIpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKDMwMCk6cigpfSx0Ll9lbmZvcmNlRm9jdXM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO0l0KGRvY3VtZW50KS5vZmYoTnQuRk9DVVNJTikub24oTnQuRk9DVVNJTixmdW5jdGlvbih0KXtkb2N1bWVudCE9PXQudGFyZ2V0JiZlLl9lbGVtZW50IT09dC50YXJnZXQmJjA9PT1JdChlLl9lbGVtZW50KS5oYXModC50YXJnZXQpLmxlbmd0aCYmZS5fZWxlbWVudC5mb2N1cygpfSl9LHQuX3NldEVzY2FwZUV2ZW50PWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLl9pc1Nob3duJiZ0aGlzLl9jb25maWcua2V5Ym9hcmQ/SXQodGhpcy5fZWxlbWVudCkub24oTnQuS0VZRE9XTl9ESVNNSVNTLGZ1bmN0aW9uKHQpezI3PT09dC53aGljaCYmKHQucHJldmVudERlZmF1bHQoKSxlLmhpZGUoKSl9KTp0aGlzLl9pc1Nob3dufHxJdCh0aGlzLl9lbGVtZW50KS5vZmYoTnQuS0VZRE9XTl9ESVNNSVNTKX0sdC5fc2V0UmVzaXplRXZlbnQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuX2lzU2hvd24/SXQod2luZG93KS5vbihOdC5SRVNJWkUsZnVuY3Rpb24odCl7cmV0dXJuIGUuaGFuZGxlVXBkYXRlKHQpfSk6SXQod2luZG93KS5vZmYoTnQuUkVTSVpFKX0sdC5faGlkZU1vZGFsPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLl9lbGVtZW50LnN0eWxlLmRpc3BsYXk9XCJub25lXCIsdGhpcy5fZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiLCEwKSx0aGlzLl9pc1RyYW5zaXRpb25pbmc9ITEsdGhpcy5fc2hvd0JhY2tkcm9wKGZ1bmN0aW9uKCl7SXQoZG9jdW1lbnQuYm9keSkucmVtb3ZlQ2xhc3MoanQpLHQuX3Jlc2V0QWRqdXN0bWVudHMoKSx0Ll9yZXNldFNjcm9sbGJhcigpLEl0KHQuX2VsZW1lbnQpLnRyaWdnZXIoTnQuSElEREVOKX0pfSx0Ll9yZW1vdmVCYWNrZHJvcD1mdW5jdGlvbigpe3RoaXMuX2JhY2tkcm9wJiYoSXQodGhpcy5fYmFja2Ryb3ApLnJlbW92ZSgpLHRoaXMuX2JhY2tkcm9wPW51bGwpfSx0Ll9zaG93QmFja2Ryb3A9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPUl0KHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKHh0KT94dDpcIlwiO2lmKHRoaXMuX2lzU2hvd24mJnRoaXMuX2NvbmZpZy5iYWNrZHJvcCl7dmFyIGk9UnIuc3VwcG9ydHNUcmFuc2l0aW9uRW5kKCkmJm47aWYodGhpcy5fYmFja2Ryb3A9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0aGlzLl9iYWNrZHJvcC5jbGFzc05hbWU9JHQsbiYmSXQodGhpcy5fYmFja2Ryb3ApLmFkZENsYXNzKG4pLEl0KHRoaXMuX2JhY2tkcm9wKS5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KSxJdCh0aGlzLl9lbGVtZW50KS5vbihOdC5DTElDS19ESVNNSVNTLGZ1bmN0aW9uKHQpe2UuX2lnbm9yZUJhY2tkcm9wQ2xpY2s/ZS5faWdub3JlQmFja2Ryb3BDbGljaz0hMTp0LnRhcmdldD09PXQuY3VycmVudFRhcmdldCYmKFwic3RhdGljXCI9PT1lLl9jb25maWcuYmFja2Ryb3A/ZS5fZWxlbWVudC5mb2N1cygpOmUuaGlkZSgpKX0pLGkmJlJyLnJlZmxvdyh0aGlzLl9iYWNrZHJvcCksSXQodGhpcy5fYmFja2Ryb3ApLmFkZENsYXNzKEZ0KSwhdClyZXR1cm47aWYoIWkpcmV0dXJuIHZvaWQgdCgpO0l0KHRoaXMuX2JhY2tkcm9wKS5vbmUoUnIuVFJBTlNJVElPTl9FTkQsdCkuZW11bGF0ZVRyYW5zaXRpb25FbmQoMTUwKX1lbHNlIGlmKCF0aGlzLl9pc1Nob3duJiZ0aGlzLl9iYWNrZHJvcCl7SXQodGhpcy5fYmFja2Ryb3ApLnJlbW92ZUNsYXNzKEZ0KTt2YXIgcj1mdW5jdGlvbigpe2UuX3JlbW92ZUJhY2tkcm9wKCksdCYmdCgpfTtSci5zdXBwb3J0c1RyYW5zaXRpb25FbmQoKSYmSXQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoeHQpP0l0KHRoaXMuX2JhY2tkcm9wKS5vbmUoUnIuVFJBTlNJVElPTl9FTkQscikuZW11bGF0ZVRyYW5zaXRpb25FbmQoMTUwKTpyKCl9ZWxzZSB0JiZ0KCl9LHQuX2FkanVzdERpYWxvZz1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX2VsZW1lbnQuc2Nyb2xsSGVpZ2h0PmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7IXRoaXMuX2lzQm9keU92ZXJmbG93aW5nJiZ0JiYodGhpcy5fZWxlbWVudC5zdHlsZS5wYWRkaW5nTGVmdD10aGlzLl9zY3JvbGxiYXJXaWR0aCtcInB4XCIpLHRoaXMuX2lzQm9keU92ZXJmbG93aW5nJiYhdCYmKHRoaXMuX2VsZW1lbnQuc3R5bGUucGFkZGluZ1JpZ2h0PXRoaXMuX3Njcm9sbGJhcldpZHRoK1wicHhcIil9LHQuX3Jlc2V0QWRqdXN0bWVudHM9ZnVuY3Rpb24oKXt0aGlzLl9lbGVtZW50LnN0eWxlLnBhZGRpbmdMZWZ0PVwiXCIsdGhpcy5fZWxlbWVudC5zdHlsZS5wYWRkaW5nUmlnaHQ9XCJcIn0sdC5fY2hlY2tTY3JvbGxiYXI9ZnVuY3Rpb24oKXt2YXIgdD1kb2N1bWVudC5ib2R5LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3RoaXMuX2lzQm9keU92ZXJmbG93aW5nPXQubGVmdCt0LnJpZ2h0PHdpbmRvdy5pbm5lcldpZHRoLHRoaXMuX3Njcm9sbGJhcldpZHRoPXRoaXMuX2dldFNjcm9sbGJhcldpZHRoKCl9LHQuX3NldFNjcm9sbGJhcj1mdW5jdGlvbigpe3ZhciByPXRoaXM7aWYodGhpcy5faXNCb2R5T3ZlcmZsb3dpbmcpe0l0KE10KS5lYWNoKGZ1bmN0aW9uKHQsZSl7dmFyIG49SXQoZSlbMF0uc3R5bGUucGFkZGluZ1JpZ2h0LGk9SXQoZSkuY3NzKFwicGFkZGluZy1yaWdodFwiKTtJdChlKS5kYXRhKFwicGFkZGluZy1yaWdodFwiLG4pLmNzcyhcInBhZGRpbmctcmlnaHRcIixwYXJzZUZsb2F0KGkpK3IuX3Njcm9sbGJhcldpZHRoK1wicHhcIil9KSxJdChMdCkuZWFjaChmdW5jdGlvbih0LGUpe3ZhciBuPUl0KGUpWzBdLnN0eWxlLm1hcmdpblJpZ2h0LGk9SXQoZSkuY3NzKFwibWFyZ2luLXJpZ2h0XCIpO0l0KGUpLmRhdGEoXCJtYXJnaW4tcmlnaHRcIixuKS5jc3MoXCJtYXJnaW4tcmlnaHRcIixwYXJzZUZsb2F0KGkpLXIuX3Njcm9sbGJhcldpZHRoK1wicHhcIil9KSxJdChIdCkuZWFjaChmdW5jdGlvbih0LGUpe3ZhciBuPUl0KGUpWzBdLnN0eWxlLm1hcmdpblJpZ2h0LGk9SXQoZSkuY3NzKFwibWFyZ2luLXJpZ2h0XCIpO0l0KGUpLmRhdGEoXCJtYXJnaW4tcmlnaHRcIixuKS5jc3MoXCJtYXJnaW4tcmlnaHRcIixwYXJzZUZsb2F0KGkpK3IuX3Njcm9sbGJhcldpZHRoK1wicHhcIil9KTt2YXIgdD1kb2N1bWVudC5ib2R5LnN0eWxlLnBhZGRpbmdSaWdodCxlPUl0KFwiYm9keVwiKS5jc3MoXCJwYWRkaW5nLXJpZ2h0XCIpO0l0KFwiYm9keVwiKS5kYXRhKFwicGFkZGluZy1yaWdodFwiLHQpLmNzcyhcInBhZGRpbmctcmlnaHRcIixwYXJzZUZsb2F0KGUpK3RoaXMuX3Njcm9sbGJhcldpZHRoK1wicHhcIil9fSx0Ll9yZXNldFNjcm9sbGJhcj1mdW5jdGlvbigpe0l0KE10KS5lYWNoKGZ1bmN0aW9uKHQsZSl7dmFyIG49SXQoZSkuZGF0YShcInBhZGRpbmctcmlnaHRcIik7dm9pZCAwIT09biYmSXQoZSkuY3NzKFwicGFkZGluZy1yaWdodFwiLG4pLnJlbW92ZURhdGEoXCJwYWRkaW5nLXJpZ2h0XCIpfSksSXQoTHQrXCIsIFwiK0h0KS5lYWNoKGZ1bmN0aW9uKHQsZSl7dmFyIG49SXQoZSkuZGF0YShcIm1hcmdpbi1yaWdodFwiKTt2b2lkIDAhPT1uJiZJdChlKS5jc3MoXCJtYXJnaW4tcmlnaHRcIixuKS5yZW1vdmVEYXRhKFwibWFyZ2luLXJpZ2h0XCIpfSk7dmFyIHQ9SXQoXCJib2R5XCIpLmRhdGEoXCJwYWRkaW5nLXJpZ2h0XCIpO3ZvaWQgMCE9PXQmJkl0KFwiYm9keVwiKS5jc3MoXCJwYWRkaW5nLXJpZ2h0XCIsdCkucmVtb3ZlRGF0YShcInBhZGRpbmctcmlnaHRcIil9LHQuX2dldFNjcm9sbGJhcldpZHRoPWZ1bmN0aW9uKCl7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTt0LmNsYXNzTmFtZT1PdCxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHQpO3ZhciBlPXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGgtdC5jbGllbnRXaWR0aDtyZXR1cm4gZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0KSxlfSxyLl9qUXVlcnlJbnRlcmZhY2U9ZnVuY3Rpb24obixpKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9SXQodGhpcykuZGF0YSh3dCksZT1zKHt9LHIuRGVmYXVsdCxJdCh0aGlzKS5kYXRhKCksXCJvYmplY3RcIj09dHlwZW9mIG4mJm4pO2lmKHR8fCh0PW5ldyByKHRoaXMsZSksSXQodGhpcykuZGF0YSh3dCx0KSksXCJzdHJpbmdcIj09dHlwZW9mIG4pe2lmKHZvaWQgMD09PXRbbl0pdGhyb3cgbmV3IFR5cGVFcnJvcignTm8gbWV0aG9kIG5hbWVkIFwiJytuKydcIicpO3Rbbl0oaSl9ZWxzZSBlLnNob3cmJnQuc2hvdyhpKX0pfSxUKHIsbnVsbCxbe2tleTpcIlZFUlNJT05cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cIjQuMC4wXCJ9fSx7a2V5OlwiRGVmYXVsdFwiLGdldDpmdW5jdGlvbigpe3JldHVybiBEdH19XSkscn0oKSxJdChkb2N1bWVudCkub24oTnQuQ0xJQ0tfREFUQV9BUEksUHQsZnVuY3Rpb24odCl7dmFyIGUsbj10aGlzLGk9UnIuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudCh0aGlzKTtpJiYoZT1JdChpKVswXSk7dmFyIHI9SXQoZSkuZGF0YSh3dCk/XCJ0b2dnbGVcIjpzKHt9LEl0KGUpLmRhdGEoKSxJdCh0aGlzKS5kYXRhKCkpO1wiQVwiIT09dGhpcy50YWdOYW1lJiZcIkFSRUFcIiE9PXRoaXMudGFnTmFtZXx8dC5wcmV2ZW50RGVmYXVsdCgpO3ZhciBvPUl0KGUpLm9uZShOdC5TSE9XLGZ1bmN0aW9uKHQpe3QuaXNEZWZhdWx0UHJldmVudGVkKCl8fG8ub25lKE50LkhJRERFTixmdW5jdGlvbigpe0l0KG4pLmlzKFwiOnZpc2libGVcIikmJm4uZm9jdXMoKX0pfSk7VXQuX2pRdWVyeUludGVyZmFjZS5jYWxsKEl0KGUpLHIsdGhpcyl9KSxJdC5mbltUdF09VXQuX2pRdWVyeUludGVyZmFjZSxJdC5mbltUdF0uQ29uc3RydWN0b3I9VXQsSXQuZm5bVHRdLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gSXQuZm5bVHRdPVN0LFV0Ll9qUXVlcnlJbnRlcmZhY2V9LEJ0PVwidG9vbHRpcFwiLEt0PVwiLlwiKyhHdD1cImJzLnRvb2x0aXBcIikscXQ9KFd0PXQpLmZuW0J0XSxWdD1cImJzLXRvb2x0aXBcIixZdD1uZXcgUmVnRXhwKFwiKF58XFxcXHMpXCIrVnQrXCJcXFxcUytcIixcImdcIiksWnQ9e2FuaW1hdGlvbjohMCx0ZW1wbGF0ZTonPGRpdiBjbGFzcz1cInRvb2x0aXBcIiByb2xlPVwidG9vbHRpcFwiPjxkaXYgY2xhc3M9XCJhcnJvd1wiPjwvZGl2PjxkaXYgY2xhc3M9XCJ0b29sdGlwLWlubmVyXCI+PC9kaXY+PC9kaXY+Jyx0cmlnZ2VyOlwiaG92ZXIgZm9jdXNcIix0aXRsZTpcIlwiLGRlbGF5OjAsaHRtbDohKFh0PXtBVVRPOlwiYXV0b1wiLFRPUDpcInRvcFwiLFJJR0hUOlwicmlnaHRcIixCT1RUT006XCJib3R0b21cIixMRUZUOlwibGVmdFwifSksc2VsZWN0b3I6ISh6dD17YW5pbWF0aW9uOlwiYm9vbGVhblwiLHRlbXBsYXRlOlwic3RyaW5nXCIsdGl0bGU6XCIoc3RyaW5nfGVsZW1lbnR8ZnVuY3Rpb24pXCIsdHJpZ2dlcjpcInN0cmluZ1wiLGRlbGF5OlwiKG51bWJlcnxvYmplY3QpXCIsaHRtbDpcImJvb2xlYW5cIixzZWxlY3RvcjpcIihzdHJpbmd8Ym9vbGVhbilcIixwbGFjZW1lbnQ6XCIoc3RyaW5nfGZ1bmN0aW9uKVwiLG9mZnNldDpcIihudW1iZXJ8c3RyaW5nKVwiLGNvbnRhaW5lcjpcIihzdHJpbmd8ZWxlbWVudHxib29sZWFuKVwiLGZhbGxiYWNrUGxhY2VtZW50OlwiKHN0cmluZ3xhcnJheSlcIixib3VuZGFyeTpcIihzdHJpbmd8ZWxlbWVudClcIn0pLHBsYWNlbWVudDpcInRvcFwiLG9mZnNldDowLGNvbnRhaW5lcjohMSxmYWxsYmFja1BsYWNlbWVudDpcImZsaXBcIixib3VuZGFyeTpcInNjcm9sbFBhcmVudFwifSx0ZT1cIm91dFwiLGVlPXtISURFOlwiaGlkZVwiK0t0LEhJRERFTjpcImhpZGRlblwiK0t0LFNIT1c6KEp0PVwic2hvd1wiKStLdCxTSE9XTjpcInNob3duXCIrS3QsSU5TRVJURUQ6XCJpbnNlcnRlZFwiK0t0LENMSUNLOlwiY2xpY2tcIitLdCxGT0NVU0lOOlwiZm9jdXNpblwiK0t0LEZPQ1VTT1VUOlwiZm9jdXNvdXRcIitLdCxNT1VTRUVOVEVSOlwibW91c2VlbnRlclwiK0t0LE1PVVNFTEVBVkU6XCJtb3VzZWxlYXZlXCIrS3R9LG5lPVwiZmFkZVwiLGllPVwic2hvd1wiLHJlPVwiLnRvb2x0aXAtaW5uZXJcIixvZT1cIi5hcnJvd1wiLHNlPVwiaG92ZXJcIixhZT1cImZvY3VzXCIsbGU9XCJjbGlja1wiLGNlPVwibWFudWFsXCIsaGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBjKHQsZSl7aWYodm9pZCAwPT09aCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQm9vdHN0cmFwIHRvb2x0aXBzIHJlcXVpcmUgUG9wcGVyLmpzIChodHRwczovL3BvcHBlci5qcy5vcmcpXCIpO3RoaXMuX2lzRW5hYmxlZD0hMCx0aGlzLl90aW1lb3V0PTAsdGhpcy5faG92ZXJTdGF0ZT1cIlwiLHRoaXMuX2FjdGl2ZVRyaWdnZXI9e30sdGhpcy5fcG9wcGVyPW51bGwsdGhpcy5lbGVtZW50PXQsdGhpcy5jb25maWc9dGhpcy5fZ2V0Q29uZmlnKGUpLHRoaXMudGlwPW51bGwsdGhpcy5fc2V0TGlzdGVuZXJzKCl9dmFyIHQ9Yy5wcm90b3R5cGU7cmV0dXJuIHQuZW5hYmxlPWZ1bmN0aW9uKCl7dGhpcy5faXNFbmFibGVkPSEwfSx0LmRpc2FibGU9ZnVuY3Rpb24oKXt0aGlzLl9pc0VuYWJsZWQ9ITF9LHQudG9nZ2xlRW5hYmxlZD1mdW5jdGlvbigpe3RoaXMuX2lzRW5hYmxlZD0hdGhpcy5faXNFbmFibGVkfSx0LnRvZ2dsZT1mdW5jdGlvbih0KXtpZih0aGlzLl9pc0VuYWJsZWQpaWYodCl7dmFyIGU9dGhpcy5jb25zdHJ1Y3Rvci5EQVRBX0tFWSxuPVd0KHQuY3VycmVudFRhcmdldCkuZGF0YShlKTtufHwobj1uZXcgdGhpcy5jb25zdHJ1Y3Rvcih0LmN1cnJlbnRUYXJnZXQsdGhpcy5fZ2V0RGVsZWdhdGVDb25maWcoKSksV3QodC5jdXJyZW50VGFyZ2V0KS5kYXRhKGUsbikpLG4uX2FjdGl2ZVRyaWdnZXIuY2xpY2s9IW4uX2FjdGl2ZVRyaWdnZXIuY2xpY2ssbi5faXNXaXRoQWN0aXZlVHJpZ2dlcigpP24uX2VudGVyKG51bGwsbik6bi5fbGVhdmUobnVsbCxuKX1lbHNle2lmKFd0KHRoaXMuZ2V0VGlwRWxlbWVudCgpKS5oYXNDbGFzcyhpZSkpcmV0dXJuIHZvaWQgdGhpcy5fbGVhdmUobnVsbCx0aGlzKTt0aGlzLl9lbnRlcihudWxsLHRoaXMpfX0sdC5kaXNwb3NlPWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVvdXQpLFd0LnJlbW92ZURhdGEodGhpcy5lbGVtZW50LHRoaXMuY29uc3RydWN0b3IuREFUQV9LRVkpLFd0KHRoaXMuZWxlbWVudCkub2ZmKHRoaXMuY29uc3RydWN0b3IuRVZFTlRfS0VZKSxXdCh0aGlzLmVsZW1lbnQpLmNsb3Nlc3QoXCIubW9kYWxcIikub2ZmKFwiaGlkZS5icy5tb2RhbFwiKSx0aGlzLnRpcCYmV3QodGhpcy50aXApLnJlbW92ZSgpLHRoaXMuX2lzRW5hYmxlZD1udWxsLHRoaXMuX3RpbWVvdXQ9bnVsbCx0aGlzLl9ob3ZlclN0YXRlPW51bGwsKHRoaXMuX2FjdGl2ZVRyaWdnZXI9bnVsbCkhPT10aGlzLl9wb3BwZXImJnRoaXMuX3BvcHBlci5kZXN0cm95KCksdGhpcy5fcG9wcGVyPW51bGwsdGhpcy5lbGVtZW50PW51bGwsdGhpcy5jb25maWc9bnVsbCx0aGlzLnRpcD1udWxsfSx0LnNob3c9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKFwibm9uZVwiPT09V3QodGhpcy5lbGVtZW50KS5jc3MoXCJkaXNwbGF5XCIpKXRocm93IG5ldyBFcnJvcihcIlBsZWFzZSB1c2Ugc2hvdyBvbiB2aXNpYmxlIGVsZW1lbnRzXCIpO3ZhciB0PVd0LkV2ZW50KHRoaXMuY29uc3RydWN0b3IuRXZlbnQuU0hPVyk7aWYodGhpcy5pc1dpdGhDb250ZW50KCkmJnRoaXMuX2lzRW5hYmxlZCl7V3QodGhpcy5lbGVtZW50KS50cmlnZ2VyKHQpO3ZhciBuPVd0LmNvbnRhaW5zKHRoaXMuZWxlbWVudC5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudCx0aGlzLmVsZW1lbnQpO2lmKHQuaXNEZWZhdWx0UHJldmVudGVkKCl8fCFuKXJldHVybjt2YXIgaT10aGlzLmdldFRpcEVsZW1lbnQoKSxyPVJyLmdldFVJRCh0aGlzLmNvbnN0cnVjdG9yLk5BTUUpO2kuc2V0QXR0cmlidXRlKFwiaWRcIixyKSx0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1kZXNjcmliZWRieVwiLHIpLHRoaXMuc2V0Q29udGVudCgpLHRoaXMuY29uZmlnLmFuaW1hdGlvbiYmV3QoaSkuYWRkQ2xhc3MobmUpO3ZhciBvPVwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMuY29uZmlnLnBsYWNlbWVudD90aGlzLmNvbmZpZy5wbGFjZW1lbnQuY2FsbCh0aGlzLGksdGhpcy5lbGVtZW50KTp0aGlzLmNvbmZpZy5wbGFjZW1lbnQscz10aGlzLl9nZXRBdHRhY2htZW50KG8pO3RoaXMuYWRkQXR0YWNobWVudENsYXNzKHMpO3ZhciBhPSExPT09dGhpcy5jb25maWcuY29udGFpbmVyP2RvY3VtZW50LmJvZHk6V3QodGhpcy5jb25maWcuY29udGFpbmVyKTtXdChpKS5kYXRhKHRoaXMuY29uc3RydWN0b3IuREFUQV9LRVksdGhpcyksV3QuY29udGFpbnModGhpcy5lbGVtZW50Lm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LHRoaXMudGlwKXx8V3QoaSkuYXBwZW5kVG8oYSksV3QodGhpcy5lbGVtZW50KS50cmlnZ2VyKHRoaXMuY29uc3RydWN0b3IuRXZlbnQuSU5TRVJURUQpLHRoaXMuX3BvcHBlcj1uZXcgaCh0aGlzLmVsZW1lbnQsaSx7cGxhY2VtZW50OnMsbW9kaWZpZXJzOntvZmZzZXQ6e29mZnNldDp0aGlzLmNvbmZpZy5vZmZzZXR9LGZsaXA6e2JlaGF2aW9yOnRoaXMuY29uZmlnLmZhbGxiYWNrUGxhY2VtZW50fSxhcnJvdzp7ZWxlbWVudDpvZX0scHJldmVudE92ZXJmbG93Ontib3VuZGFyaWVzRWxlbWVudDp0aGlzLmNvbmZpZy5ib3VuZGFyeX19LG9uQ3JlYXRlOmZ1bmN0aW9uKHQpe3Qub3JpZ2luYWxQbGFjZW1lbnQhPT10LnBsYWNlbWVudCYmZS5faGFuZGxlUG9wcGVyUGxhY2VtZW50Q2hhbmdlKHQpfSxvblVwZGF0ZTpmdW5jdGlvbih0KXtlLl9oYW5kbGVQb3BwZXJQbGFjZW1lbnRDaGFuZ2UodCl9fSksV3QoaSkuYWRkQ2xhc3MoaWUpLFwib250b3VjaHN0YXJ0XCJpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQmJld0KFwiYm9keVwiKS5jaGlsZHJlbigpLm9uKFwibW91c2VvdmVyXCIsbnVsbCxXdC5ub29wKTt2YXIgbD1mdW5jdGlvbigpe2UuY29uZmlnLmFuaW1hdGlvbiYmZS5fZml4VHJhbnNpdGlvbigpO3ZhciB0PWUuX2hvdmVyU3RhdGU7ZS5faG92ZXJTdGF0ZT1udWxsLFd0KGUuZWxlbWVudCkudHJpZ2dlcihlLmNvbnN0cnVjdG9yLkV2ZW50LlNIT1dOKSx0PT09dGUmJmUuX2xlYXZlKG51bGwsZSl9O1JyLnN1cHBvcnRzVHJhbnNpdGlvbkVuZCgpJiZXdCh0aGlzLnRpcCkuaGFzQ2xhc3MobmUpP1d0KHRoaXMudGlwKS5vbmUoUnIuVFJBTlNJVElPTl9FTkQsbCkuZW11bGF0ZVRyYW5zaXRpb25FbmQoYy5fVFJBTlNJVElPTl9EVVJBVElPTik6bCgpfX0sdC5oaWRlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj10aGlzLmdldFRpcEVsZW1lbnQoKSxpPVd0LkV2ZW50KHRoaXMuY29uc3RydWN0b3IuRXZlbnQuSElERSkscj1mdW5jdGlvbigpe2UuX2hvdmVyU3RhdGUhPT1KdCYmbi5wYXJlbnROb2RlJiZuLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobiksZS5fY2xlYW5UaXBDbGFzcygpLGUuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJhcmlhLWRlc2NyaWJlZGJ5XCIpLFd0KGUuZWxlbWVudCkudHJpZ2dlcihlLmNvbnN0cnVjdG9yLkV2ZW50LkhJRERFTiksbnVsbCE9PWUuX3BvcHBlciYmZS5fcG9wcGVyLmRlc3Ryb3koKSx0JiZ0KCl9O1d0KHRoaXMuZWxlbWVudCkudHJpZ2dlcihpKSxpLmlzRGVmYXVsdFByZXZlbnRlZCgpfHwoV3QobikucmVtb3ZlQ2xhc3MoaWUpLFwib250b3VjaHN0YXJ0XCJpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQmJld0KFwiYm9keVwiKS5jaGlsZHJlbigpLm9mZihcIm1vdXNlb3ZlclwiLG51bGwsV3Qubm9vcCksdGhpcy5fYWN0aXZlVHJpZ2dlcltsZV09ITEsdGhpcy5fYWN0aXZlVHJpZ2dlclthZV09ITEsdGhpcy5fYWN0aXZlVHJpZ2dlcltzZV09ITEsUnIuc3VwcG9ydHNUcmFuc2l0aW9uRW5kKCkmJld0KHRoaXMudGlwKS5oYXNDbGFzcyhuZSk/V3Qobikub25lKFJyLlRSQU5TSVRJT05fRU5ELHIpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKDE1MCk6cigpLHRoaXMuX2hvdmVyU3RhdGU9XCJcIil9LHQudXBkYXRlPWZ1bmN0aW9uKCl7bnVsbCE9PXRoaXMuX3BvcHBlciYmdGhpcy5fcG9wcGVyLnNjaGVkdWxlVXBkYXRlKCl9LHQuaXNXaXRoQ29udGVudD1mdW5jdGlvbigpe3JldHVybiBCb29sZWFuKHRoaXMuZ2V0VGl0bGUoKSl9LHQuYWRkQXR0YWNobWVudENsYXNzPWZ1bmN0aW9uKHQpe1d0KHRoaXMuZ2V0VGlwRWxlbWVudCgpKS5hZGRDbGFzcyhWdCtcIi1cIit0KX0sdC5nZXRUaXBFbGVtZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGlwPXRoaXMudGlwfHxXdCh0aGlzLmNvbmZpZy50ZW1wbGF0ZSlbMF0sdGhpcy50aXB9LHQuc2V0Q29udGVudD1mdW5jdGlvbigpe3ZhciB0PVd0KHRoaXMuZ2V0VGlwRWxlbWVudCgpKTt0aGlzLnNldEVsZW1lbnRDb250ZW50KHQuZmluZChyZSksdGhpcy5nZXRUaXRsZSgpKSx0LnJlbW92ZUNsYXNzKG5lK1wiIFwiK2llKX0sdC5zZXRFbGVtZW50Q29udGVudD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuY29uZmlnLmh0bWw7XCJvYmplY3RcIj09dHlwZW9mIGUmJihlLm5vZGVUeXBlfHxlLmpxdWVyeSk/bj9XdChlKS5wYXJlbnQoKS5pcyh0KXx8dC5lbXB0eSgpLmFwcGVuZChlKTp0LnRleHQoV3QoZSkudGV4dCgpKTp0W24/XCJodG1sXCI6XCJ0ZXh0XCJdKGUpfSx0LmdldFRpdGxlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtb3JpZ2luYWwtdGl0bGVcIik7cmV0dXJuIHR8fCh0PVwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMuY29uZmlnLnRpdGxlP3RoaXMuY29uZmlnLnRpdGxlLmNhbGwodGhpcy5lbGVtZW50KTp0aGlzLmNvbmZpZy50aXRsZSksdH0sdC5fZ2V0QXR0YWNobWVudD1mdW5jdGlvbih0KXtyZXR1cm4gWHRbdC50b1VwcGVyQ2FzZSgpXX0sdC5fc2V0TGlzdGVuZXJzPWZ1bmN0aW9uKCl7dmFyIGk9dGhpczt0aGlzLmNvbmZpZy50cmlnZ2VyLnNwbGl0KFwiIFwiKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2lmKFwiY2xpY2tcIj09PXQpV3QoaS5lbGVtZW50KS5vbihpLmNvbnN0cnVjdG9yLkV2ZW50LkNMSUNLLGkuY29uZmlnLnNlbGVjdG9yLGZ1bmN0aW9uKHQpe3JldHVybiBpLnRvZ2dsZSh0KX0pO2Vsc2UgaWYodCE9PWNlKXt2YXIgZT10PT09c2U/aS5jb25zdHJ1Y3Rvci5FdmVudC5NT1VTRUVOVEVSOmkuY29uc3RydWN0b3IuRXZlbnQuRk9DVVNJTixuPXQ9PT1zZT9pLmNvbnN0cnVjdG9yLkV2ZW50Lk1PVVNFTEVBVkU6aS5jb25zdHJ1Y3Rvci5FdmVudC5GT0NVU09VVDtXdChpLmVsZW1lbnQpLm9uKGUsaS5jb25maWcuc2VsZWN0b3IsZnVuY3Rpb24odCl7cmV0dXJuIGkuX2VudGVyKHQpfSkub24obixpLmNvbmZpZy5zZWxlY3RvcixmdW5jdGlvbih0KXtyZXR1cm4gaS5fbGVhdmUodCl9KX1XdChpLmVsZW1lbnQpLmNsb3Nlc3QoXCIubW9kYWxcIikub24oXCJoaWRlLmJzLm1vZGFsXCIsZnVuY3Rpb24oKXtyZXR1cm4gaS5oaWRlKCl9KX0pLHRoaXMuY29uZmlnLnNlbGVjdG9yP3RoaXMuY29uZmlnPXMoe30sdGhpcy5jb25maWcse3RyaWdnZXI6XCJtYW51YWxcIixzZWxlY3RvcjpcIlwifSk6dGhpcy5fZml4VGl0bGUoKX0sdC5fZml4VGl0bGU9ZnVuY3Rpb24oKXt2YXIgdD10eXBlb2YgdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtb3JpZ2luYWwtdGl0bGVcIik7KHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiKXx8XCJzdHJpbmdcIiE9PXQpJiYodGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtb3JpZ2luYWwtdGl0bGVcIix0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKFwidGl0bGVcIil8fFwiXCIpLHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLFwiXCIpKX0sdC5fZW50ZXI9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmNvbnN0cnVjdG9yLkRBVEFfS0VZOyhlPWV8fFd0KHQuY3VycmVudFRhcmdldCkuZGF0YShuKSl8fChlPW5ldyB0aGlzLmNvbnN0cnVjdG9yKHQuY3VycmVudFRhcmdldCx0aGlzLl9nZXREZWxlZ2F0ZUNvbmZpZygpKSxXdCh0LmN1cnJlbnRUYXJnZXQpLmRhdGEobixlKSksdCYmKGUuX2FjdGl2ZVRyaWdnZXJbXCJmb2N1c2luXCI9PT10LnR5cGU/YWU6c2VdPSEwKSxXdChlLmdldFRpcEVsZW1lbnQoKSkuaGFzQ2xhc3MoaWUpfHxlLl9ob3ZlclN0YXRlPT09SnQ/ZS5faG92ZXJTdGF0ZT1KdDooY2xlYXJUaW1lb3V0KGUuX3RpbWVvdXQpLGUuX2hvdmVyU3RhdGU9SnQsZS5jb25maWcuZGVsYXkmJmUuY29uZmlnLmRlbGF5LnNob3c/ZS5fdGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5faG92ZXJTdGF0ZT09PUp0JiZlLnNob3coKX0sZS5jb25maWcuZGVsYXkuc2hvdyk6ZS5zaG93KCkpfSx0Ll9sZWF2ZT1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuY29uc3RydWN0b3IuREFUQV9LRVk7KGU9ZXx8V3QodC5jdXJyZW50VGFyZ2V0KS5kYXRhKG4pKXx8KGU9bmV3IHRoaXMuY29uc3RydWN0b3IodC5jdXJyZW50VGFyZ2V0LHRoaXMuX2dldERlbGVnYXRlQ29uZmlnKCkpLFd0KHQuY3VycmVudFRhcmdldCkuZGF0YShuLGUpKSx0JiYoZS5fYWN0aXZlVHJpZ2dlcltcImZvY3Vzb3V0XCI9PT10LnR5cGU/YWU6c2VdPSExKSxlLl9pc1dpdGhBY3RpdmVUcmlnZ2VyKCl8fChjbGVhclRpbWVvdXQoZS5fdGltZW91dCksZS5faG92ZXJTdGF0ZT10ZSxlLmNvbmZpZy5kZWxheSYmZS5jb25maWcuZGVsYXkuaGlkZT9lLl90aW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLl9ob3ZlclN0YXRlPT09dGUmJmUuaGlkZSgpfSxlLmNvbmZpZy5kZWxheS5oaWRlKTplLmhpZGUoKSl9LHQuX2lzV2l0aEFjdGl2ZVRyaWdnZXI9ZnVuY3Rpb24oKXtmb3IodmFyIHQgaW4gdGhpcy5fYWN0aXZlVHJpZ2dlcilpZih0aGlzLl9hY3RpdmVUcmlnZ2VyW3RdKXJldHVybiEwO3JldHVybiExfSx0Ll9nZXRDb25maWc9ZnVuY3Rpb24odCl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mKHQ9cyh7fSx0aGlzLmNvbnN0cnVjdG9yLkRlZmF1bHQsV3QodGhpcy5lbGVtZW50KS5kYXRhKCksdCkpLmRlbGF5JiYodC5kZWxheT17c2hvdzp0LmRlbGF5LGhpZGU6dC5kZWxheX0pLFwibnVtYmVyXCI9PXR5cGVvZiB0LnRpdGxlJiYodC50aXRsZT10LnRpdGxlLnRvU3RyaW5nKCkpLFwibnVtYmVyXCI9PXR5cGVvZiB0LmNvbnRlbnQmJih0LmNvbnRlbnQ9dC5jb250ZW50LnRvU3RyaW5nKCkpLFJyLnR5cGVDaGVja0NvbmZpZyhCdCx0LHRoaXMuY29uc3RydWN0b3IuRGVmYXVsdFR5cGUpLHR9LHQuX2dldERlbGVnYXRlQ29uZmlnPWZ1bmN0aW9uKCl7dmFyIHQ9e307aWYodGhpcy5jb25maWcpZm9yKHZhciBlIGluIHRoaXMuY29uZmlnKXRoaXMuY29uc3RydWN0b3IuRGVmYXVsdFtlXSE9PXRoaXMuY29uZmlnW2VdJiYodFtlXT10aGlzLmNvbmZpZ1tlXSk7cmV0dXJuIHR9LHQuX2NsZWFuVGlwQ2xhc3M9ZnVuY3Rpb24oKXt2YXIgdD1XdCh0aGlzLmdldFRpcEVsZW1lbnQoKSksZT10LmF0dHIoXCJjbGFzc1wiKS5tYXRjaChZdCk7bnVsbCE9PWUmJjA8ZS5sZW5ndGgmJnQucmVtb3ZlQ2xhc3MoZS5qb2luKFwiXCIpKX0sdC5faGFuZGxlUG9wcGVyUGxhY2VtZW50Q2hhbmdlPWZ1bmN0aW9uKHQpe3RoaXMuX2NsZWFuVGlwQ2xhc3MoKSx0aGlzLmFkZEF0dGFjaG1lbnRDbGFzcyh0aGlzLl9nZXRBdHRhY2htZW50KHQucGxhY2VtZW50KSl9LHQuX2ZpeFRyYW5zaXRpb249ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldFRpcEVsZW1lbnQoKSxlPXRoaXMuY29uZmlnLmFuaW1hdGlvbjtudWxsPT09dC5nZXRBdHRyaWJ1dGUoXCJ4LXBsYWNlbWVudFwiKSYmKFd0KHQpLnJlbW92ZUNsYXNzKG5lKSx0aGlzLmNvbmZpZy5hbmltYXRpb249ITEsdGhpcy5oaWRlKCksdGhpcy5zaG93KCksdGhpcy5jb25maWcuYW5pbWF0aW9uPWUpfSxjLl9qUXVlcnlJbnRlcmZhY2U9ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0PVd0KHRoaXMpLmRhdGEoR3QpLGU9XCJvYmplY3RcIj09dHlwZW9mIG4mJm47aWYoKHR8fCEvZGlzcG9zZXxoaWRlLy50ZXN0KG4pKSYmKHR8fCh0PW5ldyBjKHRoaXMsZSksV3QodGhpcykuZGF0YShHdCx0KSksXCJzdHJpbmdcIj09dHlwZW9mIG4pKXtpZih2b2lkIDA9PT10W25dKXRocm93IG5ldyBUeXBlRXJyb3IoJ05vIG1ldGhvZCBuYW1lZCBcIicrbisnXCInKTt0W25dKCl9fSl9LFQoYyxudWxsLFt7a2V5OlwiVkVSU0lPTlwiLGdldDpmdW5jdGlvbigpe3JldHVyblwiNC4wLjBcIn19LHtrZXk6XCJEZWZhdWx0XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFp0fX0se2tleTpcIk5BTUVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gQnR9fSx7a2V5OlwiREFUQV9LRVlcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gR3R9fSx7a2V5OlwiRXZlbnRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZWV9fSx7a2V5OlwiRVZFTlRfS0VZXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEt0fX0se2tleTpcIkRlZmF1bHRUeXBlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHp0fX1dKSxjfSgpLFd0LmZuW0J0XT1oZS5falF1ZXJ5SW50ZXJmYWNlLFd0LmZuW0J0XS5Db25zdHJ1Y3Rvcj1oZSxXdC5mbltCdF0ubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBXdC5mbltCdF09cXQsaGUuX2pRdWVyeUludGVyZmFjZX0saGUpLFFyPShkZT1cInBvcG92ZXJcIixwZT1cIi5cIisoZmU9XCJicy5wb3BvdmVyXCIpLG1lPSh1ZT10KS5mbltkZV0sZ2U9XCJicy1wb3BvdmVyXCIsX2U9bmV3IFJlZ0V4cChcIihefFxcXFxzKVwiK2dlK1wiXFxcXFMrXCIsXCJnXCIpLHZlPXMoe30sUHIuRGVmYXVsdCx7cGxhY2VtZW50OlwicmlnaHRcIix0cmlnZ2VyOlwiY2xpY2tcIixjb250ZW50OlwiXCIsdGVtcGxhdGU6JzxkaXYgY2xhc3M9XCJwb3BvdmVyXCIgcm9sZT1cInRvb2x0aXBcIj48ZGl2IGNsYXNzPVwiYXJyb3dcIj48L2Rpdj48aDMgY2xhc3M9XCJwb3BvdmVyLWhlYWRlclwiPjwvaDM+PGRpdiBjbGFzcz1cInBvcG92ZXItYm9keVwiPjwvZGl2PjwvZGl2Pid9KSx5ZT1zKHt9LFByLkRlZmF1bHRUeXBlLHtjb250ZW50OlwiKHN0cmluZ3xlbGVtZW50fGZ1bmN0aW9uKVwifSksYmU9XCJmYWRlXCIsRWU9XCIucG9wb3Zlci1oZWFkZXJcIixJZT1cIi5wb3BvdmVyLWJvZHlcIixUZT17SElERTpcImhpZGVcIitwZSxISURERU46XCJoaWRkZW5cIitwZSxTSE9XOihDZT1cInNob3dcIikrcGUsU0hPV046XCJzaG93blwiK3BlLElOU0VSVEVEOlwiaW5zZXJ0ZWRcIitwZSxDTElDSzpcImNsaWNrXCIrcGUsRk9DVVNJTjpcImZvY3VzaW5cIitwZSxGT0NVU09VVDpcImZvY3Vzb3V0XCIrcGUsTU9VU0VFTlRFUjpcIm1vdXNlZW50ZXJcIitwZSxNT1VTRUxFQVZFOlwibW91c2VsZWF2ZVwiK3BlfSx3ZT1mdW5jdGlvbih0KXtmdW5jdGlvbiBpKCl7cmV0dXJuIHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfWEoaSx0KTt2YXIgZT1pLnByb3RvdHlwZTtyZXR1cm4gZS5pc1dpdGhDb250ZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0VGl0bGUoKXx8dGhpcy5fZ2V0Q29udGVudCgpfSxlLmFkZEF0dGFjaG1lbnRDbGFzcz1mdW5jdGlvbih0KXt1ZSh0aGlzLmdldFRpcEVsZW1lbnQoKSkuYWRkQ2xhc3MoZ2UrXCItXCIrdCl9LGUuZ2V0VGlwRWxlbWVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRpcD10aGlzLnRpcHx8dWUodGhpcy5jb25maWcudGVtcGxhdGUpWzBdLHRoaXMudGlwfSxlLnNldENvbnRlbnQ9ZnVuY3Rpb24oKXt2YXIgdD11ZSh0aGlzLmdldFRpcEVsZW1lbnQoKSk7dGhpcy5zZXRFbGVtZW50Q29udGVudCh0LmZpbmQoRWUpLHRoaXMuZ2V0VGl0bGUoKSk7dmFyIGU9dGhpcy5fZ2V0Q29udGVudCgpO1wiZnVuY3Rpb25cIj09dHlwZW9mIGUmJihlPWUuY2FsbCh0aGlzLmVsZW1lbnQpKSx0aGlzLnNldEVsZW1lbnRDb250ZW50KHQuZmluZChJZSksZSksdC5yZW1vdmVDbGFzcyhiZStcIiBcIitDZSl9LGUuX2dldENvbnRlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtY29udGVudFwiKXx8dGhpcy5jb25maWcuY29udGVudH0sZS5fY2xlYW5UaXBDbGFzcz1mdW5jdGlvbigpe3ZhciB0PXVlKHRoaXMuZ2V0VGlwRWxlbWVudCgpKSxlPXQuYXR0cihcImNsYXNzXCIpLm1hdGNoKF9lKTtudWxsIT09ZSYmMDxlLmxlbmd0aCYmdC5yZW1vdmVDbGFzcyhlLmpvaW4oXCJcIikpfSxpLl9qUXVlcnlJbnRlcmZhY2U9ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0PXVlKHRoaXMpLmRhdGEoZmUpLGU9XCJvYmplY3RcIj09dHlwZW9mIG4/bjpudWxsO2lmKCh0fHwhL2Rlc3Ryb3l8aGlkZS8udGVzdChuKSkmJih0fHwodD1uZXcgaSh0aGlzLGUpLHVlKHRoaXMpLmRhdGEoZmUsdCkpLFwic3RyaW5nXCI9PXR5cGVvZiBuKSl7aWYodm9pZCAwPT09dFtuXSl0aHJvdyBuZXcgVHlwZUVycm9yKCdObyBtZXRob2QgbmFtZWQgXCInK24rJ1wiJyk7dFtuXSgpfX0pfSxUKGksbnVsbCxbe2tleTpcIlZFUlNJT05cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cIjQuMC4wXCJ9fSx7a2V5OlwiRGVmYXVsdFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB2ZX19LHtrZXk6XCJOQU1FXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGRlfX0se2tleTpcIkRBVEFfS0VZXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGZlfX0se2tleTpcIkV2ZW50XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFRlfX0se2tleTpcIkVWRU5UX0tFWVwiLGdldDpmdW5jdGlvbigpe3JldHVybiBwZX19LHtrZXk6XCJEZWZhdWx0VHlwZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB5ZX19XSksaX0oUHIpLHVlLmZuW2RlXT13ZS5falF1ZXJ5SW50ZXJmYWNlLHVlLmZuW2RlXS5Db25zdHJ1Y3Rvcj13ZSx1ZS5mbltkZV0ubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiB1ZS5mbltkZV09bWUsd2UuX2pRdWVyeUludGVyZmFjZX0sU2U9XCJzY3JvbGxzcHlcIixrZT1cIi5cIisoRGU9XCJicy5zY3JvbGxzcHlcIiksTmU9KEFlPXQpLmZuW1NlXSxPZT17b2Zmc2V0OjEwLG1ldGhvZDpcImF1dG9cIix0YXJnZXQ6XCJcIn0sJGU9e29mZnNldDpcIm51bWJlclwiLG1ldGhvZDpcInN0cmluZ1wiLHRhcmdldDpcIihzdHJpbmd8ZWxlbWVudClcIn0samU9e0FDVElWQVRFOlwiYWN0aXZhdGVcIitrZSxTQ1JPTEw6XCJzY3JvbGxcIitrZSxMT0FEX0RBVEFfQVBJOlwibG9hZFwiK2tlK1wiLmRhdGEtYXBpXCJ9LHhlPVwiZHJvcGRvd24taXRlbVwiLEZlPVwiYWN0aXZlXCIsUmU9J1tkYXRhLXNweT1cInNjcm9sbFwiXScsUGU9XCIuYWN0aXZlXCIsUWU9XCIubmF2LCAubGlzdC1ncm91cFwiLE1lPVwiLm5hdi1saW5rXCIsTGU9XCIubmF2LWl0ZW1cIixIZT1cIi5saXN0LWdyb3VwLWl0ZW1cIixVZT1cIi5kcm9wZG93blwiLFdlPVwiLmRyb3Bkb3duLWl0ZW1cIixCZT1cIi5kcm9wZG93bi10b2dnbGVcIixHZT1cIm9mZnNldFwiLEtlPVwicG9zaXRpb25cIixxZT1mdW5jdGlvbigpe2Z1bmN0aW9uIG4odCxlKXt2YXIgbj10aGlzO3RoaXMuX2VsZW1lbnQ9dCx0aGlzLl9zY3JvbGxFbGVtZW50PVwiQk9EWVwiPT09dC50YWdOYW1lP3dpbmRvdzp0LHRoaXMuX2NvbmZpZz10aGlzLl9nZXRDb25maWcoZSksdGhpcy5fc2VsZWN0b3I9dGhpcy5fY29uZmlnLnRhcmdldCtcIiBcIitNZStcIixcIit0aGlzLl9jb25maWcudGFyZ2V0K1wiIFwiK0hlK1wiLFwiK3RoaXMuX2NvbmZpZy50YXJnZXQrXCIgXCIrV2UsdGhpcy5fb2Zmc2V0cz1bXSx0aGlzLl90YXJnZXRzPVtdLHRoaXMuX2FjdGl2ZVRhcmdldD1udWxsLHRoaXMuX3Njcm9sbEhlaWdodD0wLEFlKHRoaXMuX3Njcm9sbEVsZW1lbnQpLm9uKGplLlNDUk9MTCxmdW5jdGlvbih0KXtyZXR1cm4gbi5fcHJvY2Vzcyh0KX0pLHRoaXMucmVmcmVzaCgpLHRoaXMuX3Byb2Nlc3MoKX12YXIgdD1uLnByb3RvdHlwZTtyZXR1cm4gdC5yZWZyZXNoPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMuX3Njcm9sbEVsZW1lbnQ9PT10aGlzLl9zY3JvbGxFbGVtZW50LndpbmRvdz9HZTpLZSxyPVwiYXV0b1wiPT09dGhpcy5fY29uZmlnLm1ldGhvZD90OnRoaXMuX2NvbmZpZy5tZXRob2Qsbz1yPT09S2U/dGhpcy5fZ2V0U2Nyb2xsVG9wKCk6MDt0aGlzLl9vZmZzZXRzPVtdLHRoaXMuX3RhcmdldHM9W10sdGhpcy5fc2Nyb2xsSGVpZ2h0PXRoaXMuX2dldFNjcm9sbEhlaWdodCgpLEFlLm1ha2VBcnJheShBZSh0aGlzLl9zZWxlY3RvcikpLm1hcChmdW5jdGlvbih0KXt2YXIgZSxuPVJyLmdldFNlbGVjdG9yRnJvbUVsZW1lbnQodCk7aWYobiYmKGU9QWUobilbMF0pLGUpe3ZhciBpPWUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7aWYoaS53aWR0aHx8aS5oZWlnaHQpcmV0dXJuW0FlKGUpW3JdKCkudG9wK28sbl19cmV0dXJuIG51bGx9KS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIHR9KS5zb3J0KGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRbMF0tZVswXX0pLmZvckVhY2goZnVuY3Rpb24odCl7ZS5fb2Zmc2V0cy5wdXNoKHRbMF0pLGUuX3RhcmdldHMucHVzaCh0WzFdKX0pfSx0LmRpc3Bvc2U9ZnVuY3Rpb24oKXtBZS5yZW1vdmVEYXRhKHRoaXMuX2VsZW1lbnQsRGUpLEFlKHRoaXMuX3Njcm9sbEVsZW1lbnQpLm9mZihrZSksdGhpcy5fZWxlbWVudD1udWxsLHRoaXMuX3Njcm9sbEVsZW1lbnQ9bnVsbCx0aGlzLl9jb25maWc9bnVsbCx0aGlzLl9zZWxlY3Rvcj1udWxsLHRoaXMuX29mZnNldHM9bnVsbCx0aGlzLl90YXJnZXRzPW51bGwsdGhpcy5fYWN0aXZlVGFyZ2V0PW51bGwsdGhpcy5fc2Nyb2xsSGVpZ2h0PW51bGx9LHQuX2dldENvbmZpZz1mdW5jdGlvbih0KXtpZihcInN0cmluZ1wiIT10eXBlb2YodD1zKHt9LE9lLHQpKS50YXJnZXQpe3ZhciBlPUFlKHQudGFyZ2V0KS5hdHRyKFwiaWRcIik7ZXx8KGU9UnIuZ2V0VUlEKFNlKSxBZSh0LnRhcmdldCkuYXR0cihcImlkXCIsZSkpLHQudGFyZ2V0PVwiI1wiK2V9cmV0dXJuIFJyLnR5cGVDaGVja0NvbmZpZyhTZSx0LCRlKSx0fSx0Ll9nZXRTY3JvbGxUb3A9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2Nyb2xsRWxlbWVudD09PXdpbmRvdz90aGlzLl9zY3JvbGxFbGVtZW50LnBhZ2VZT2Zmc2V0OnRoaXMuX3Njcm9sbEVsZW1lbnQuc2Nyb2xsVG9wfSx0Ll9nZXRTY3JvbGxIZWlnaHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2Nyb2xsRWxlbWVudC5zY3JvbGxIZWlnaHR8fE1hdGgubWF4KGRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0LGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQpfSx0Ll9nZXRPZmZzZXRIZWlnaHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2Nyb2xsRWxlbWVudD09PXdpbmRvdz93aW5kb3cuaW5uZXJIZWlnaHQ6dGhpcy5fc2Nyb2xsRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHR9LHQuX3Byb2Nlc3M9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9nZXRTY3JvbGxUb3AoKSt0aGlzLl9jb25maWcub2Zmc2V0LGU9dGhpcy5fZ2V0U2Nyb2xsSGVpZ2h0KCksbj10aGlzLl9jb25maWcub2Zmc2V0K2UtdGhpcy5fZ2V0T2Zmc2V0SGVpZ2h0KCk7aWYodGhpcy5fc2Nyb2xsSGVpZ2h0IT09ZSYmdGhpcy5yZWZyZXNoKCksbjw9dCl7dmFyIGk9dGhpcy5fdGFyZ2V0c1t0aGlzLl90YXJnZXRzLmxlbmd0aC0xXTt0aGlzLl9hY3RpdmVUYXJnZXQhPT1pJiZ0aGlzLl9hY3RpdmF0ZShpKX1lbHNle2lmKHRoaXMuX2FjdGl2ZVRhcmdldCYmdDx0aGlzLl9vZmZzZXRzWzBdJiYwPHRoaXMuX29mZnNldHNbMF0pcmV0dXJuIHRoaXMuX2FjdGl2ZVRhcmdldD1udWxsLHZvaWQgdGhpcy5fY2xlYXIoKTtmb3IodmFyIHI9dGhpcy5fb2Zmc2V0cy5sZW5ndGg7ci0tOyl7dGhpcy5fYWN0aXZlVGFyZ2V0IT09dGhpcy5fdGFyZ2V0c1tyXSYmdD49dGhpcy5fb2Zmc2V0c1tyXSYmKHZvaWQgMD09PXRoaXMuX29mZnNldHNbcisxXXx8dDx0aGlzLl9vZmZzZXRzW3IrMV0pJiZ0aGlzLl9hY3RpdmF0ZSh0aGlzLl90YXJnZXRzW3JdKX19fSx0Ll9hY3RpdmF0ZT1mdW5jdGlvbihlKXt0aGlzLl9hY3RpdmVUYXJnZXQ9ZSx0aGlzLl9jbGVhcigpO3ZhciB0PXRoaXMuX3NlbGVjdG9yLnNwbGl0KFwiLFwiKTt0PXQubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0KydbZGF0YS10YXJnZXQ9XCInK2UrJ1wiXSwnK3QrJ1tocmVmPVwiJytlKydcIl0nfSk7dmFyIG49QWUodC5qb2luKFwiLFwiKSk7bi5oYXNDbGFzcyh4ZSk/KG4uY2xvc2VzdChVZSkuZmluZChCZSkuYWRkQ2xhc3MoRmUpLG4uYWRkQ2xhc3MoRmUpKToobi5hZGRDbGFzcyhGZSksbi5wYXJlbnRzKFFlKS5wcmV2KE1lK1wiLCBcIitIZSkuYWRkQ2xhc3MoRmUpLG4ucGFyZW50cyhRZSkucHJldihMZSkuY2hpbGRyZW4oTWUpLmFkZENsYXNzKEZlKSksQWUodGhpcy5fc2Nyb2xsRWxlbWVudCkudHJpZ2dlcihqZS5BQ1RJVkFURSx7cmVsYXRlZFRhcmdldDplfSl9LHQuX2NsZWFyPWZ1bmN0aW9uKCl7QWUodGhpcy5fc2VsZWN0b3IpLmZpbHRlcihQZSkucmVtb3ZlQ2xhc3MoRmUpfSxuLl9qUXVlcnlJbnRlcmZhY2U9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0PUFlKHRoaXMpLmRhdGEoRGUpO2lmKHR8fCh0PW5ldyBuKHRoaXMsXCJvYmplY3RcIj09dHlwZW9mIGUmJmUpLEFlKHRoaXMpLmRhdGEoRGUsdCkpLFwic3RyaW5nXCI9PXR5cGVvZiBlKXtpZih2b2lkIDA9PT10W2VdKXRocm93IG5ldyBUeXBlRXJyb3IoJ05vIG1ldGhvZCBuYW1lZCBcIicrZSsnXCInKTt0W2VdKCl9fSl9LFQobixudWxsLFt7a2V5OlwiVkVSU0lPTlwiLGdldDpmdW5jdGlvbigpe3JldHVyblwiNC4wLjBcIn19LHtrZXk6XCJEZWZhdWx0XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIE9lfX1dKSxufSgpLEFlKHdpbmRvdykub24oamUuTE9BRF9EQVRBX0FQSSxmdW5jdGlvbigpe2Zvcih2YXIgdD1BZS5tYWtlQXJyYXkoQWUoUmUpKSxlPXQubGVuZ3RoO2UtLTspe3ZhciBuPUFlKHRbZV0pO3FlLl9qUXVlcnlJbnRlcmZhY2UuY2FsbChuLG4uZGF0YSgpKX19KSxBZS5mbltTZV09cWUuX2pRdWVyeUludGVyZmFjZSxBZS5mbltTZV0uQ29uc3RydWN0b3I9cWUsQWUuZm5bU2VdLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gQWUuZm5bU2VdPU5lLHFlLl9qUXVlcnlJbnRlcmZhY2V9LHplPVwiLlwiKyhZZT1cImJzLnRhYlwiKSxYZT0oVmU9dCkuZm4udGFiLFplPXtISURFOlwiaGlkZVwiK3plLEhJRERFTjpcImhpZGRlblwiK3plLFNIT1c6XCJzaG93XCIremUsU0hPV046XCJzaG93blwiK3plLENMSUNLX0RBVEFfQVBJOlwiY2xpY2tcIit6ZStcIi5kYXRhLWFwaVwifSxKZT1cImRyb3Bkb3duLW1lbnVcIix0bj1cImFjdGl2ZVwiLGVuPVwiZGlzYWJsZWRcIixubj1cImZhZGVcIixybj1cInNob3dcIixvbj1cIi5kcm9wZG93blwiLHNuPVwiLm5hdiwgLmxpc3QtZ3JvdXBcIixhbj1cIi5hY3RpdmVcIixsbj1cIj4gbGkgPiAuYWN0aXZlXCIsY249J1tkYXRhLXRvZ2dsZT1cInRhYlwiXSwgW2RhdGEtdG9nZ2xlPVwicGlsbFwiXSwgW2RhdGEtdG9nZ2xlPVwibGlzdFwiXScsaG49XCIuZHJvcGRvd24tdG9nZ2xlXCIsdW49XCI+IC5kcm9wZG93bi1tZW51IC5hY3RpdmVcIixkbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGkodCl7dGhpcy5fZWxlbWVudD10fXZhciB0PWkucHJvdG90eXBlO3JldHVybiB0LnNob3c9ZnVuY3Rpb24oKXt2YXIgbj10aGlzO2lmKCEodGhpcy5fZWxlbWVudC5wYXJlbnROb2RlJiZ0aGlzLl9lbGVtZW50LnBhcmVudE5vZGUubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERSYmVmUodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3ModG4pfHxWZSh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhlbikpKXt2YXIgdCxpLGU9VmUodGhpcy5fZWxlbWVudCkuY2xvc2VzdChzbilbMF0scj1Sci5nZXRTZWxlY3RvckZyb21FbGVtZW50KHRoaXMuX2VsZW1lbnQpO2lmKGUpe3ZhciBvPVwiVUxcIj09PWUubm9kZU5hbWU/bG46YW47aT0oaT1WZS5tYWtlQXJyYXkoVmUoZSkuZmluZChvKSkpW2kubGVuZ3RoLTFdfXZhciBzPVZlLkV2ZW50KFplLkhJREUse3JlbGF0ZWRUYXJnZXQ6dGhpcy5fZWxlbWVudH0pLGE9VmUuRXZlbnQoWmUuU0hPVyx7cmVsYXRlZFRhcmdldDppfSk7aWYoaSYmVmUoaSkudHJpZ2dlcihzKSxWZSh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKGEpLCFhLmlzRGVmYXVsdFByZXZlbnRlZCgpJiYhcy5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7ciYmKHQ9VmUocilbMF0pLHRoaXMuX2FjdGl2YXRlKHRoaXMuX2VsZW1lbnQsZSk7dmFyIGw9ZnVuY3Rpb24oKXt2YXIgdD1WZS5FdmVudChaZS5ISURERU4se3JlbGF0ZWRUYXJnZXQ6bi5fZWxlbWVudH0pLGU9VmUuRXZlbnQoWmUuU0hPV04se3JlbGF0ZWRUYXJnZXQ6aX0pO1ZlKGkpLnRyaWdnZXIodCksVmUobi5fZWxlbWVudCkudHJpZ2dlcihlKX07dD90aGlzLl9hY3RpdmF0ZSh0LHQucGFyZW50Tm9kZSxsKTpsKCl9fX0sdC5kaXNwb3NlPWZ1bmN0aW9uKCl7VmUucmVtb3ZlRGF0YSh0aGlzLl9lbGVtZW50LFllKSx0aGlzLl9lbGVtZW50PW51bGx9LHQuX2FjdGl2YXRlPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10aGlzLHI9KFwiVUxcIj09PWUubm9kZU5hbWU/VmUoZSkuZmluZChsbik6VmUoZSkuY2hpbGRyZW4oYW4pKVswXSxvPW4mJlJyLnN1cHBvcnRzVHJhbnNpdGlvbkVuZCgpJiZyJiZWZShyKS5oYXNDbGFzcyhubikscz1mdW5jdGlvbigpe3JldHVybiBpLl90cmFuc2l0aW9uQ29tcGxldGUodCxyLG4pfTtyJiZvP1ZlKHIpLm9uZShSci5UUkFOU0lUSU9OX0VORCxzKS5lbXVsYXRlVHJhbnNpdGlvbkVuZCgxNTApOnMoKX0sdC5fdHJhbnNpdGlvbkNvbXBsZXRlPWZ1bmN0aW9uKHQsZSxuKXtpZihlKXtWZShlKS5yZW1vdmVDbGFzcyhybitcIiBcIit0bik7dmFyIGk9VmUoZS5wYXJlbnROb2RlKS5maW5kKHVuKVswXTtpJiZWZShpKS5yZW1vdmVDbGFzcyh0biksXCJ0YWJcIj09PWUuZ2V0QXR0cmlidXRlKFwicm9sZVwiKSYmZS5zZXRBdHRyaWJ1dGUoXCJhcmlhLXNlbGVjdGVkXCIsITEpfWlmKFZlKHQpLmFkZENsYXNzKHRuKSxcInRhYlwiPT09dC5nZXRBdHRyaWJ1dGUoXCJyb2xlXCIpJiZ0LnNldEF0dHJpYnV0ZShcImFyaWEtc2VsZWN0ZWRcIiwhMCksUnIucmVmbG93KHQpLFZlKHQpLmFkZENsYXNzKHJuKSx0LnBhcmVudE5vZGUmJlZlKHQucGFyZW50Tm9kZSkuaGFzQ2xhc3MoSmUpKXt2YXIgcj1WZSh0KS5jbG9zZXN0KG9uKVswXTtyJiZWZShyKS5maW5kKGhuKS5hZGRDbGFzcyh0biksdC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWV4cGFuZGVkXCIsITApfW4mJm4oKX0saS5falF1ZXJ5SW50ZXJmYWNlPWZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1WZSh0aGlzKSxlPXQuZGF0YShZZSk7aWYoZXx8KGU9bmV3IGkodGhpcyksdC5kYXRhKFllLGUpKSxcInN0cmluZ1wiPT10eXBlb2Ygbil7aWYodm9pZCAwPT09ZVtuXSl0aHJvdyBuZXcgVHlwZUVycm9yKCdObyBtZXRob2QgbmFtZWQgXCInK24rJ1wiJyk7ZVtuXSgpfX0pfSxUKGksbnVsbCxbe2tleTpcIlZFUlNJT05cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cIjQuMC4wXCJ9fV0pLGl9KCksVmUoZG9jdW1lbnQpLm9uKFplLkNMSUNLX0RBVEFfQVBJLGNuLGZ1bmN0aW9uKHQpe3QucHJldmVudERlZmF1bHQoKSxkbi5falF1ZXJ5SW50ZXJmYWNlLmNhbGwoVmUodGhpcyksXCJzaG93XCIpfSksVmUuZm4udGFiPWRuLl9qUXVlcnlJbnRlcmZhY2UsVmUuZm4udGFiLkNvbnN0cnVjdG9yPWRuLFZlLmZuLnRhYi5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIFZlLmZuLnRhYj1YZSxkbi5falF1ZXJ5SW50ZXJmYWNlfSxqUXVlcnksZm49ITEscG49XCJcIixtbj17V2Via2l0VHJhbnNpdGlvbjpcIndlYmtpdFRyYW5zaXRpb25FbmRcIixNb3pUcmFuc2l0aW9uOlwidHJhbnNpdGlvbmVuZFwiLE9UcmFuc2l0aW9uOlwib1RyYW5zaXRpb25FbmQgb3RyYW5zaXRpb25lbmRcIix0cmFuc2l0aW9uOlwidHJhbnNpdGlvbmVuZFwifSxnbj17dHJhbnNpdGlvbkVuZFN1cHBvcnRlZDpmdW5jdGlvbigpe3JldHVybiBmbn0sdHJhbnNpdGlvbkVuZFNlbGVjdG9yOmZ1bmN0aW9uKCl7cmV0dXJuIHBufSxpc0NoYXI6ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMD09PXQud2hpY2h8fFwibnVtYmVyXCI9PXR5cGVvZiB0LndoaWNoJiYwPHQud2hpY2gmJighdC5jdHJsS2V5JiYhdC5tZXRhS2V5JiYhdC5hbHRLZXkmJjghPT10LndoaWNoJiY5IT09dC53aGljaCYmMTMhPT10LndoaWNoJiYxNiE9PXQud2hpY2gmJjE3IT09dC53aGljaCYmMjAhPT10LndoaWNoJiYyNyE9PXQud2hpY2gpfSxhc3NlcnQ6ZnVuY3Rpb24odCxlLG4pe2lmKGUpdGhyb3cgdm9pZCAwPT09IXQmJnQuY3NzKFwiYm9yZGVyXCIsXCIxcHggc29saWQgcmVkXCIpLGNvbnNvbGUuZXJyb3Iobix0KSxufSxkZXNjcmliZTpmdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09dD9cInVuZGVmaW5lZFwiOjA9PT10Lmxlbmd0aD9cIihubyBtYXRjaGluZyBlbGVtZW50cylcIjp0WzBdLm91dGVySFRNTC5zcGxpdChcIj5cIilbMF0rXCI+XCJ9fSxmdW5jdGlvbigpe2Zvcih2YXIgdCBpbiBmbj1mdW5jdGlvbigpe2lmKHdpbmRvdy5RVW5pdClyZXR1cm4hMTt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYm1kXCIpO2Zvcih2YXIgZSBpbiBtbilpZih2b2lkIDAhPT10LnN0eWxlW2VdKXJldHVybiBtbltlXTtyZXR1cm4hMX0oKSxtbilwbis9XCIgXCIrbW5bdF19KCksZ24pLE1yPShfbj1qUXVlcnksdm49XCJpcy1maWxsZWRcIix5bj1cImlzLWZvY3VzZWRcIixibj17Qk1EX0ZPUk1fR1JPVVA6XCIuXCIrXCJibWQtZm9ybS1ncm91cFwifSxDbj17fSxmdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLG4pe2Zvcih2YXIgaSBpbiB2b2lkIDA9PT1uJiYobj17fSksdGhpcy4kZWxlbWVudD10LHRoaXMuY29uZmlnPV9uLmV4dGVuZCghMCx7fSxDbixlKSxuKXRoaXNbaV09bltpXX12YXIgZT10LnByb3RvdHlwZTtyZXR1cm4gZS5kaXNwb3NlPWZ1bmN0aW9uKHQpe3RoaXMuJGVsZW1lbnQuZGF0YSh0LG51bGwpLHRoaXMuJGVsZW1lbnQ9bnVsbCx0aGlzLmNvbmZpZz1udWxsfSxlLmFkZEZvcm1Hcm91cEZvY3VzPWZ1bmN0aW9uKCl7dGhpcy4kZWxlbWVudC5wcm9wKFwiZGlzYWJsZWRcIil8fHRoaXMuJGJtZEZvcm1Hcm91cC5hZGRDbGFzcyh5bil9LGUucmVtb3ZlRm9ybUdyb3VwRm9jdXM9ZnVuY3Rpb24oKXt0aGlzLiRibWRGb3JtR3JvdXAucmVtb3ZlQ2xhc3MoeW4pfSxlLnJlbW92ZUlzRmlsbGVkPWZ1bmN0aW9uKCl7dGhpcy4kYm1kRm9ybUdyb3VwLnJlbW92ZUNsYXNzKHZuKX0sZS5hZGRJc0ZpbGxlZD1mdW5jdGlvbigpe3RoaXMuJGJtZEZvcm1Hcm91cC5hZGRDbGFzcyh2bil9LGUuZmluZE1kYkZvcm1Hcm91cD1mdW5jdGlvbih0KXt2b2lkIDA9PT10JiYodD0hMCk7dmFyIGU9dGhpcy4kZWxlbWVudC5jbG9zZXN0KGJuLkJNRF9GT1JNX0dST1VQKTtyZXR1cm4gMD09PWUubGVuZ3RoJiZ0JiZfbi5lcnJvcihcIkZhaWxlZCB0byBmaW5kIFwiK2JuLkJNRF9GT1JNX0dST1VQK1wiIGZvciBcIitRci5kZXNjcmliZSh0aGlzLiRlbGVtZW50KSksZX0sdH0oKSksTHI9KEVuPWpRdWVyeSxEbj17dmFsaWRhdGU6IShTbj17Rk9STV9HUk9VUDpcIi5cIitcImZvcm0tZ3JvdXBcIixCTURfRk9STV9HUk9VUDpcIi5cIisoSW49XCJibWQtZm9ybS1ncm91cFwiKSxCTURfTEFCRUxfV0lMRENBUkQ6XCJsYWJlbFtjbGFzc149J1wiKyhUbj1cImJtZC1sYWJlbFwiKStcIiddLCBsYWJlbFtjbGFzcyo9JyBcIitUbitcIiddXCJ9KSxmb3JtR3JvdXA6e3JlcXVpcmVkOiEoQW49XCJpbnB1dC1ncm91cFwiKX0sYm1kRm9ybUdyb3VwOnt0ZW1wbGF0ZTpcIjxzcGFuIGNsYXNzPSdcIitJbitcIic+PC9zcGFuPlwiLGNyZWF0ZTohMCxyZXF1aXJlZDohMH0sbGFiZWw6e3JlcXVpcmVkOiEod249XCJoYXMtZGFuZ2VyXCIpLHNlbGVjdG9yczpbXCIuZm9ybS1jb250cm9sLWxhYmVsXCIsXCI+IGxhYmVsXCJdLGNsYXNzTmFtZTpcImJtZC1sYWJlbC1zdGF0aWNcIn0scmVxdWlyZWRDbGFzc2VzOltdLGludmFsaWRDb21wb25lbnRNYXRjaGVzOltdLGNvbnZlcnRJbnB1dFNpemVWYXJpYXRpb25zOiEwfSxrbj17XCJmb3JtLWNvbnRyb2wtbGdcIjpcImJtZC1mb3JtLWdyb3VwLWxnXCIsXCJmb3JtLWNvbnRyb2wtc21cIjpcImJtZC1mb3JtLWdyb3VwLXNtXCJ9LGZ1bmN0aW9uKHIpe2Z1bmN0aW9uIHQodCxlLG4pe3ZhciBpO3JldHVybiB2b2lkIDA9PT1uJiYobj17fSksKGk9ci5jYWxsKHRoaXMsdCxFbi5leHRlbmQoITAse30sRG4sZSksbil8fHRoaXMpLl9yZWplY3RJbnZhbGlkQ29tcG9uZW50TWF0Y2hlcygpLGkucmVqZWN0V2l0aG91dFJlcXVpcmVkU3RydWN0dXJlKCksaS5fcmVqZWN0V2l0aG91dFJlcXVpcmVkQ2xhc3NlcygpLGkuJGZvcm1Hcm91cD1pLmZpbmRGb3JtR3JvdXAoaS5jb25maWcuZm9ybUdyb3VwLnJlcXVpcmVkKSxpLiRibWRGb3JtR3JvdXA9aS5yZXNvbHZlTWRiRm9ybUdyb3VwKCksaS4kYm1kTGFiZWw9aS5yZXNvbHZlTWRiTGFiZWwoKSxpLnJlc29sdmVNZGJGb3JtR3JvdXBTaXppbmcoKSxpLmFkZEZvY3VzTGlzdGVuZXIoKSxpLmFkZENoYW5nZUxpc3RlbmVyKCksXCJcIiE9aS4kZWxlbWVudC52YWwoKSYmaS5hZGRJc0ZpbGxlZCgpLGl9YSh0LHIpO3ZhciBlPXQucHJvdG90eXBlO3JldHVybiBlLmRpc3Bvc2U9ZnVuY3Rpb24odCl7ci5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMsdCksdGhpcy4kYm1kRm9ybUdyb3VwPW51bGwsdGhpcy4kZm9ybUdyb3VwPW51bGx9LGUucmVqZWN0V2l0aG91dFJlcXVpcmVkU3RydWN0dXJlPWZ1bmN0aW9uKCl7fSxlLmFkZEZvY3VzTGlzdGVuZXI9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuJGVsZW1lbnQub24oXCJmb2N1c1wiLGZ1bmN0aW9uKCl7dC5hZGRGb3JtR3JvdXBGb2N1cygpfSkub24oXCJibHVyXCIsZnVuY3Rpb24oKXt0LnJlbW92ZUZvcm1Hcm91cEZvY3VzKCl9KX0sZS5hZGRDaGFuZ2VMaXN0ZW5lcj1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy4kZWxlbWVudC5vbihcImtleWRvd24gcGFzdGVcIixmdW5jdGlvbih0KXtRci5pc0NoYXIodCkmJmUuYWRkSXNGaWxsZWQoKX0pLm9uKFwia2V5dXAgY2hhbmdlXCIsZnVuY3Rpb24oKXtlLmlzRW1wdHkoKT9lLnJlbW92ZUlzRmlsbGVkKCk6ZS5hZGRJc0ZpbGxlZCgpLGUuY29uZmlnLnZhbGlkYXRlJiYodm9pZCAwPT09ZS4kZWxlbWVudFswXS5jaGVja1ZhbGlkaXR5fHxlLiRlbGVtZW50WzBdLmNoZWNrVmFsaWRpdHkoKT9lLnJlbW92ZUhhc0RhbmdlcigpOmUuYWRkSGFzRGFuZ2VyKCkpfSl9LGUuYWRkSGFzRGFuZ2VyPWZ1bmN0aW9uKCl7dGhpcy4kYm1kRm9ybUdyb3VwLmFkZENsYXNzKHduKX0sZS5yZW1vdmVIYXNEYW5nZXI9ZnVuY3Rpb24oKXt0aGlzLiRibWRGb3JtR3JvdXAucmVtb3ZlQ2xhc3Mod24pfSxlLmlzRW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09PXRoaXMuJGVsZW1lbnQudmFsKCl8fHZvaWQgMD09PXRoaXMuJGVsZW1lbnQudmFsKCl8fFwiXCI9PT10aGlzLiRlbGVtZW50LnZhbCgpfSxlLnJlc29sdmVNZGJGb3JtR3JvdXA9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmZpbmRNZGJGb3JtR3JvdXAoITEpO3JldHVybiB2b2lkIDAhPT10JiYwIT09dC5sZW5ndGh8fCghdGhpcy5jb25maWcuYm1kRm9ybUdyb3VwLmNyZWF0ZXx8dm9pZCAwIT09dGhpcy4kZm9ybUdyb3VwJiYwIT09dGhpcy4kZm9ybUdyb3VwLmxlbmd0aD90aGlzLiRmb3JtR3JvdXAuYWRkQ2xhc3MoSW4pOnRoaXMub3V0ZXJFbGVtZW50KCkucGFyZW50KCkuaGFzQ2xhc3MoQW4pP3RoaXMub3V0ZXJFbGVtZW50KCkucGFyZW50KCkud3JhcCh0aGlzLmNvbmZpZy5ibWRGb3JtR3JvdXAudGVtcGxhdGUpOnRoaXMub3V0ZXJFbGVtZW50KCkud3JhcCh0aGlzLmNvbmZpZy5ibWRGb3JtR3JvdXAudGVtcGxhdGUpLHQ9dGhpcy5maW5kTWRiRm9ybUdyb3VwKHRoaXMuY29uZmlnLmJtZEZvcm1Hcm91cC5yZXF1aXJlZCkpLHR9LGUub3V0ZXJFbGVtZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVsZW1lbnR9LGUucmVzb2x2ZU1kYkxhYmVsPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy4kYm1kRm9ybUdyb3VwLmZpbmQoU24uQk1EX0xBQkVMX1dJTERDQVJEKTtyZXR1cm4gdm9pZCAwIT09dCYmMCE9PXQubGVuZ3RofHx2b2lkIDA9PT0odD10aGlzLmZpbmRNZGJMYWJlbCh0aGlzLmNvbmZpZy5sYWJlbC5yZXF1aXJlZCkpfHwwPT09dC5sZW5ndGh8fHQuYWRkQ2xhc3ModGhpcy5jb25maWcubGFiZWwuY2xhc3NOYW1lKSx0fSxlLmZpbmRNZGJMYWJlbD1mdW5jdGlvbih0KXt2b2lkIDA9PT10JiYodD0hMCk7dmFyIGU9bnVsbCxuPXRoaXMuY29uZmlnLmxhYmVsLnNlbGVjdG9ycyxpPUFycmF5LmlzQXJyYXkobikscj0wO2ZvcihuPWk/bjpuW1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgbztpZihpKXtpZihyPj1uLmxlbmd0aClicmVhaztvPW5bcisrXX1lbHNle2lmKChyPW4ubmV4dCgpKS5kb25lKWJyZWFrO289ci52YWx1ZX12YXIgcz1vO2lmKHZvaWQgMCE9PShlPUVuLmlzRnVuY3Rpb24ocyk/cyh0aGlzKTp0aGlzLiRibWRGb3JtR3JvdXAuZmluZChzKSkmJjA8ZS5sZW5ndGgpYnJlYWt9cmV0dXJuIDA9PT1lLmxlbmd0aCYmdCYmRW4uZXJyb3IoXCJGYWlsZWQgdG8gZmluZCBcIitTbi5CTURfTEFCRUxfV0lMRENBUkQrXCIgd2l0aGluIGZvcm0tZ3JvdXAgZm9yIFwiK1FyLmRlc2NyaWJlKHRoaXMuJGVsZW1lbnQpKSxlfSxlLmZpbmRGb3JtR3JvdXA9ZnVuY3Rpb24odCl7dm9pZCAwPT09dCYmKHQ9ITApO3ZhciBlPXRoaXMuJGVsZW1lbnQuY2xvc2VzdChTbi5GT1JNX0dST1VQKTtyZXR1cm4gMD09PWUubGVuZ3RoJiZ0JiZFbi5lcnJvcihcIkZhaWxlZCB0byBmaW5kIFwiK1NuLkZPUk1fR1JPVVArXCIgZm9yIFwiK1FyLmRlc2NyaWJlKHRoaXMuJGVsZW1lbnQpKSxlfSxlLnJlc29sdmVNZGJGb3JtR3JvdXBTaXppbmc9ZnVuY3Rpb24oKXtpZih0aGlzLmNvbmZpZy5jb252ZXJ0SW5wdXRTaXplVmFyaWF0aW9ucylmb3IodmFyIHQgaW4ga24pdGhpcy4kZWxlbWVudC5oYXNDbGFzcyh0KSYmdGhpcy4kYm1kRm9ybUdyb3VwLmFkZENsYXNzKGtuW3RdKX0sZS5fcmVqZWN0SW52YWxpZENvbXBvbmVudE1hdGNoZXM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmNvbmZpZy5pbnZhbGlkQ29tcG9uZW50TWF0Y2hlcyxlPUFycmF5LmlzQXJyYXkodCksbj0wO2Zvcih0PWU/dDp0W1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgaTtpZihlKXtpZihuPj10Lmxlbmd0aClicmVhaztpPXRbbisrXX1lbHNle2lmKChuPXQubmV4dCgpKS5kb25lKWJyZWFrO2k9bi52YWx1ZX1pLnJlamVjdE1hdGNoKHRoaXMuY29uc3RydWN0b3IubmFtZSx0aGlzLiRlbGVtZW50KX19LGUuX3JlamVjdFdpdGhvdXRSZXF1aXJlZENsYXNzZXM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmNvbmZpZy5yZXF1aXJlZENsYXNzZXMsZT1BcnJheS5pc0FycmF5KHQpLG49MDtmb3IodD1lP3Q6dFtTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIGk7aWYoZSl7aWYobj49dC5sZW5ndGgpYnJlYWs7aT10W24rK119ZWxzZXtpZigobj10Lm5leHQoKSkuZG9uZSlicmVhaztpPW4udmFsdWV9dmFyIHI9aSxvPSExO2lmKC0xIT09ci5pbmRleE9mKFwifHxcIikpe3ZhciBzPXIuc3BsaXQoXCJ8fFwiKSxhPUFycmF5LmlzQXJyYXkocyksbD0wO2ZvcihzPWE/czpzW1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgYztpZihhKXtpZihsPj1zLmxlbmd0aClicmVhaztjPXNbbCsrXX1lbHNle2lmKChsPXMubmV4dCgpKS5kb25lKWJyZWFrO2M9bC52YWx1ZX12YXIgaD1jO2lmKHRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoaCkpe289ITA7YnJlYWt9fX1lbHNlIHRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MocikmJihvPSEwKTtvfHxFbi5lcnJvcih0aGlzLmNvbnN0cnVjdG9yLm5hbWUrXCIgZWxlbWVudDogXCIrUXIuZGVzY3JpYmUodGhpcy4kZWxlbWVudCkrXCIgcmVxdWlyZXMgY2xhc3M6IFwiK3IpfX0sdH0oTXIpKSxIcj0oTm49alF1ZXJ5LE9uPXtsYWJlbDp7cmVxdWlyZWQ6ITF9fSwkbj1cImxhYmVsXCIsZnVuY3Rpb24ocil7ZnVuY3Rpb24gdCh0LGUsbil7dmFyIGk7cmV0dXJuKGk9ci5jYWxsKHRoaXMsdCxObi5leHRlbmQoITAse30sT24sZSksbil8fHRoaXMpLmRlY29yYXRlTWFya3VwKCksaX1hKHQscik7dmFyIGU9dC5wcm90b3R5cGU7cmV0dXJuIGUuZGVjb3JhdGVNYXJrdXA9ZnVuY3Rpb24oKXt2YXIgdD1Obih0aGlzLmNvbmZpZy50ZW1wbGF0ZSk7dGhpcy4kZWxlbWVudC5hZnRlcih0KSwhMSE9PXRoaXMuY29uZmlnLnJpcHBsZXMmJnQuYm1kUmlwcGxlcygpfSxlLm91dGVyRWxlbWVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRlbGVtZW50LnBhcmVudCgpLmNsb3Nlc3QoXCIuXCIrdGhpcy5vdXRlckNsYXNzKX0sZS5yZWplY3RXaXRob3V0UmVxdWlyZWRTdHJ1Y3R1cmU9ZnVuY3Rpb24oKXtRci5hc3NlcnQodGhpcy4kZWxlbWVudCxcImxhYmVsXCI9PT0hdGhpcy4kZWxlbWVudC5wYXJlbnQoKS5wcm9wKFwidGFnTmFtZVwiKSx0aGlzLmNvbnN0cnVjdG9yLm5hbWUrXCIncyBcIitRci5kZXNjcmliZSh0aGlzLiRlbGVtZW50KStcIiBwYXJlbnQgZWxlbWVudCBzaG91bGQgYmUgPGxhYmVsPi5cIiksUXIuYXNzZXJ0KHRoaXMuJGVsZW1lbnQsIXRoaXMub3V0ZXJFbGVtZW50KCkuaGFzQ2xhc3ModGhpcy5vdXRlckNsYXNzKSx0aGlzLmNvbnN0cnVjdG9yLm5hbWUrXCIncyBcIitRci5kZXNjcmliZSh0aGlzLiRlbGVtZW50KStcIiBvdXRlciBlbGVtZW50IHNob3VsZCBoYXZlIGNsYXNzIFwiK3RoaXMub3V0ZXJDbGFzcytcIi5cIil9LGUuYWRkRm9jdXNMaXN0ZW5lcj1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy4kZWxlbWVudC5jbG9zZXN0KCRuKS5ob3ZlcihmdW5jdGlvbigpe3QuYWRkRm9ybUdyb3VwRm9jdXMoKX0sZnVuY3Rpb24oKXt0LnJlbW92ZUZvcm1Hcm91cEZvY3VzKCl9KX0sZS5hZGRDaGFuZ2VMaXN0ZW5lcj1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy4kZWxlbWVudC5jaGFuZ2UoZnVuY3Rpb24oKXt0LiRlbGVtZW50LmJsdXIoKX0pfSx0fShMcikpLFVyPShqbj1qUXVlcnksRm49XCJibWQuXCIrKHhuPVwiY2hlY2tib3hcIiksUm49XCJibWRcIisoeG4uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkreG4uc2xpY2UoMSkpLFBuPWpuLmZuW1JuXSxRbj17dGVtcGxhdGU6XCI8c3BhbiBjbGFzcz0nY2hlY2tib3gtZGVjb3JhdG9yJz48c3BhbiBjbGFzcz0nY2hlY2snPjwvc3Bhbj48L3NwYW4+XCJ9LE1uPWZ1bmN0aW9uKGkpe2Z1bmN0aW9uIHIodCxlLG4pe3JldHVybiB2b2lkIDA9PT1uJiYobj17aW5wdXRUeXBlOnhuLG91dGVyQ2xhc3M6eG59KSxpLmNhbGwodGhpcyx0LGpuLmV4dGVuZCghMCxRbixlKSxuKXx8dGhpc31yZXR1cm4gYShyLGkpLHIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24odCl7dm9pZCAwPT09dCYmKHQ9Rm4pLGkucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzLHQpfSxyLm1hdGNoZXM9ZnVuY3Rpb24odCl7cmV0dXJuXCJjaGVja2JveFwiPT09dC5hdHRyKFwidHlwZVwiKX0sci5yZWplY3RNYXRjaD1mdW5jdGlvbih0LGUpe1FyLmFzc2VydCh0aGlzLiRlbGVtZW50LHRoaXMubWF0Y2hlcyhlKSx0K1wiIGNvbXBvbmVudCBlbGVtZW50IFwiK1FyLmRlc2NyaWJlKGUpK1wiIGlzIGludmFsaWQgZm9yIHR5cGU9J2NoZWNrYm94Jy5cIil9LHIuX2pRdWVyeUludGVyZmFjZT1mdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9am4odGhpcyksZT10LmRhdGEoRm4pO2V8fChlPW5ldyByKHQsbiksdC5kYXRhKEZuLGUpKX0pfSxyfShIciksam4uZm5bUm5dPU1uLl9qUXVlcnlJbnRlcmZhY2Usam4uZm5bUm5dLkNvbnN0cnVjdG9yPU1uLGpuLmZuW1JuXS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGpuLmZuW1JuXT1QbixNbi5falF1ZXJ5SW50ZXJmYWNlfSxNbiksV3I9KExuPWpRdWVyeSxVbj1cImJtZC5cIisoSG49XCJjaGVja2JveElubGluZVwiKSxXbj1cImJtZFwiKyhIbi5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStIbi5zbGljZSgxKSksQm49TG4uZm5bV25dLEduPXtibWRGb3JtR3JvdXA6e2NyZWF0ZTohMSxyZXF1aXJlZDohMX19LEtuPWZ1bmN0aW9uKGkpe2Z1bmN0aW9uIHIodCxlLG4pe3JldHVybiB2b2lkIDA9PT1uJiYobj17aW5wdXRUeXBlOlwiY2hlY2tib3hcIixvdXRlckNsYXNzOlwiY2hlY2tib3gtaW5saW5lXCJ9KSxpLmNhbGwodGhpcyx0LExuLmV4dGVuZCghMCx7fSxHbixlKSxuKXx8dGhpc31yZXR1cm4gYShyLGkpLHIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtpLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyxVbil9LHIuX2pRdWVyeUludGVyZmFjZT1mdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9TG4odGhpcyksZT10LmRhdGEoVW4pO2V8fChlPW5ldyByKHQsbiksdC5kYXRhKFVuLGUpKX0pfSxyfShVciksTG4uZm5bV25dPUtuLl9qUXVlcnlJbnRlcmZhY2UsTG4uZm5bV25dLkNvbnN0cnVjdG9yPUtuLExuLmZuW1duXS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIExuLmZuW1duXT1CbixLbi5falF1ZXJ5SW50ZXJmYWNlfSxxbj1qUXVlcnksWW49XCJibWQuXCIrKFZuPVwiY29sbGFwc2VJbmxpbmVcIiksem49XCJibWRcIisoVm4uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrVm4uc2xpY2UoMSkpLFhuPXFuLmZuW3puXSxabj1cImlucHV0LCBzZWxlY3QsIHRleHRhcmVhXCIsSm49XCJjb2xsYXBzZVwiLHRpPVwid2lkdGhcIixlaT17fSxuaT1mdW5jdGlvbihvKXtmdW5jdGlvbiBpKHQsZSl7dmFyIG47KG49by5jYWxsKHRoaXMsdCxxbi5leHRlbmQoITAse30sZWksZSkpfHx0aGlzKS4kYm1kRm9ybUdyb3VwPW4uZmluZE1kYkZvcm1Hcm91cCghMCk7dmFyIGk9dC5kYXRhKFwidGFyZ2V0XCIpO24uJGNvbGxhcHNlPXFuKGkpLFFyLmFzc2VydCh0LDA9PT1uLiRjb2xsYXBzZS5sZW5ndGgsXCJDYW5ub3QgZmluZCBjb2xsYXBzZSB0YXJnZXQgZm9yIFwiK1FyLmRlc2NyaWJlKHQpKSxRci5hc3NlcnQobi4kY29sbGFwc2UsIW4uJGNvbGxhcHNlLmhhc0NsYXNzKEpuKSxRci5kZXNjcmliZShuLiRjb2xsYXBzZSkrXCIgaXMgZXhwZWN0ZWQgdG8gaGF2ZSB0aGUgJ1wiK0puK1wiJyBjbGFzcy4gIEl0IGlzIGJlaW5nIHRhcmdldGVkIGJ5IFwiK1FyLmRlc2NyaWJlKHQpKTt2YXIgcj1uLiRibWRGb3JtR3JvdXAuZmluZChabik7cmV0dXJuIDA8ci5sZW5ndGgmJihuLiRpbnB1dD1yLmZpcnN0KCkpLG4uJGNvbGxhcHNlLmhhc0NsYXNzKHRpKXx8bi4kY29sbGFwc2UuYWRkQ2xhc3ModGkpLG4uJGlucHV0JiYobi4kY29sbGFwc2Uub24oXCJzaG93bi5icy5jb2xsYXBzZVwiLGZ1bmN0aW9uKCl7bi4kaW5wdXQuZm9jdXMoKX0pLG4uJGlucHV0LmJsdXIoZnVuY3Rpb24oKXtuLiRjb2xsYXBzZS5jb2xsYXBzZShcImhpZGVcIil9KSksbn1yZXR1cm4gYShpLG8pLGkucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtvLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyxZbiksdGhpcy4kYm1kRm9ybUdyb3VwPW51bGwsdGhpcy4kY29sbGFwc2U9bnVsbCx0aGlzLiRpbnB1dD1udWxsfSxpLl9qUXVlcnlJbnRlcmZhY2U9ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0PXFuKHRoaXMpLGU9dC5kYXRhKFluKTtlfHwoZT1uZXcgaSh0LG4pLHQuZGF0YShZbixlKSl9KX0saX0oTXIpLHFuLmZuW3puXT1uaS5falF1ZXJ5SW50ZXJmYWNlLHFuLmZuW3puXS5Db25zdHJ1Y3Rvcj1uaSxxbi5mblt6bl0ubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBxbi5mblt6bl09WG4sbmkuX2pRdWVyeUludGVyZmFjZX0saWk9alF1ZXJ5LG9pPVwiYm1kLlwiKyhyaT1cImZpbGVcIiksc2k9XCJibWRcIisocmkuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrcmkuc2xpY2UoMSkpLGFpPWlpLmZuW3NpXSxsaT17fSxjaT1yaSxoaT1cImlzLWZpbGVcIix1aT1cImlucHV0LmZvcm0tY29udHJvbFtyZWFkb25seV1cIixkaT1mdW5jdGlvbihpKXtmdW5jdGlvbiByKHQsZSl7dmFyIG47cmV0dXJuKG49aS5jYWxsKHRoaXMsdCxpaS5leHRlbmQoITAsbGksZSkpfHx0aGlzKS4kYm1kRm9ybUdyb3VwLmFkZENsYXNzKGhpKSxufWEocixpKTt2YXIgdD1yLnByb3RvdHlwZTtyZXR1cm4gdC5kaXNwb3NlPWZ1bmN0aW9uKCl7aS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMsb2kpfSxyLm1hdGNoZXM9ZnVuY3Rpb24odCl7cmV0dXJuXCJmaWxlXCI9PT10LmF0dHIoXCJ0eXBlXCIpfSxyLnJlamVjdE1hdGNoPWZ1bmN0aW9uKHQsZSl7UXIuYXNzZXJ0KHRoaXMuJGVsZW1lbnQsdGhpcy5tYXRjaGVzKGUpLHQrXCIgY29tcG9uZW50IGVsZW1lbnQgXCIrUXIuZGVzY3JpYmUoZSkrXCIgaXMgaW52YWxpZCBmb3IgdHlwZT0nZmlsZScuXCIpfSx0Lm91dGVyRWxlbWVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRlbGVtZW50LnBhcmVudCgpLmNsb3Nlc3QoXCIuXCIrY2kpfSx0LnJlamVjdFdpdGhvdXRSZXF1aXJlZFN0cnVjdHVyZT1mdW5jdGlvbigpe1FyLmFzc2VydCh0aGlzLiRlbGVtZW50LFwibGFiZWxcIj09PSF0aGlzLm91dGVyRWxlbWVudCgpLnByb3AoXCJ0YWdOYW1lXCIpLHRoaXMuY29uc3RydWN0b3IubmFtZStcIidzIFwiK1FyLmRlc2NyaWJlKHRoaXMuJGVsZW1lbnQpK1wiIHBhcmVudCBlbGVtZW50IFwiK1FyLmRlc2NyaWJlKHRoaXMub3V0ZXJFbGVtZW50KCkpK1wiIHNob3VsZCBiZSA8bGFiZWw+LlwiKSxRci5hc3NlcnQodGhpcy4kZWxlbWVudCwhdGhpcy5vdXRlckVsZW1lbnQoKS5oYXNDbGFzcyhjaSksdGhpcy5jb25zdHJ1Y3Rvci5uYW1lK1wiJ3MgXCIrUXIuZGVzY3JpYmUodGhpcy4kZWxlbWVudCkrXCIgcGFyZW50IGVsZW1lbnQgXCIrUXIuZGVzY3JpYmUodGhpcy5vdXRlckVsZW1lbnQoKSkrXCIgc2hvdWxkIGhhdmUgY2xhc3MgLlwiK2NpK1wiLlwiKX0sdC5hZGRGb2N1c0xpc3RlbmVyPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLiRibWRGb3JtR3JvdXAub24oXCJmb2N1c1wiLGZ1bmN0aW9uKCl7dC5hZGRGb3JtR3JvdXBGb2N1cygpfSkub24oXCJibHVyXCIsZnVuY3Rpb24oKXt0LnJlbW92ZUZvcm1Hcm91cEZvY3VzKCl9KX0sdC5hZGRDaGFuZ2VMaXN0ZW5lcj1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy4kZWxlbWVudC5vbihcImNoYW5nZVwiLGZ1bmN0aW9uKCl7dmFyIG49XCJcIjtpaS5lYWNoKHQuJGVsZW1lbnQuZmlsZXMsZnVuY3Rpb24odCxlKXtuKz1lLm5hbWUrXCIgICwgXCJ9KSwobj1uLnN1YnN0cmluZygwLG4ubGVuZ3RoLTIpKT90LmFkZElzRmlsbGVkKCk6dC5yZW1vdmVJc0ZpbGxlZCgpLHQuJGJtZEZvcm1Hcm91cC5maW5kKHVpKS52YWwobil9KX0sci5falF1ZXJ5SW50ZXJmYWNlPWZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1paSh0aGlzKSxlPXQuZGF0YShvaSk7ZXx8KGU9bmV3IHIodCxuKSx0LmRhdGEob2ksZSkpfSl9LHJ9KExyKSxpaS5mbltzaV09ZGkuX2pRdWVyeUludGVyZmFjZSxpaS5mbltzaV0uQ29uc3RydWN0b3I9ZGksaWkuZm5bc2ldLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gaWkuZm5bc2ldPWFpLGRpLl9qUXVlcnlJbnRlcmZhY2V9LGZpPWpRdWVyeSxtaT1cImJtZC5cIisocGk9XCJyYWRpb1wiKSxnaT1cImJtZFwiKyhwaS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStwaS5zbGljZSgxKSksX2k9ZmkuZm5bZ2ldLHZpPXt0ZW1wbGF0ZTpcIjxzcGFuIGNsYXNzPSdibWQtcmFkaW8nPjwvc3Bhbj5cIn0seWk9ZnVuY3Rpb24oaSl7ZnVuY3Rpb24gcih0LGUsbil7cmV0dXJuIHZvaWQgMD09PW4mJihuPXtpbnB1dFR5cGU6cGksb3V0ZXJDbGFzczpwaX0pLGkuY2FsbCh0aGlzLHQsZmkuZXh0ZW5kKCEwLHZpLGUpLG4pfHx0aGlzfXJldHVybiBhKHIsaSksci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbih0KXt2b2lkIDA9PT10JiYodD1taSksaS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMsdCl9LHIubWF0Y2hlcz1mdW5jdGlvbih0KXtyZXR1cm5cInJhZGlvXCI9PT10LmF0dHIoXCJ0eXBlXCIpfSxyLnJlamVjdE1hdGNoPWZ1bmN0aW9uKHQsZSl7UXIuYXNzZXJ0KHRoaXMuJGVsZW1lbnQsdGhpcy5tYXRjaGVzKGUpLHQrXCIgY29tcG9uZW50IGVsZW1lbnQgXCIrUXIuZGVzY3JpYmUoZSkrXCIgaXMgaW52YWxpZCBmb3IgdHlwZT0ncmFkaW8nLlwiKX0sci5falF1ZXJ5SW50ZXJmYWNlPWZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1maSh0aGlzKSxlPXQuZGF0YShtaSk7ZXx8KGU9bmV3IHIodCxuKSx0LmRhdGEobWksZSkpfSl9LHJ9KEhyKSxmaS5mbltnaV09eWkuX2pRdWVyeUludGVyZmFjZSxmaS5mbltnaV0uQ29uc3RydWN0b3I9eWksZmkuZm5bZ2ldLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gZmkuZm5bZ2ldPV9pLHlpLl9qUXVlcnlJbnRlcmZhY2V9LHlpKSxCcj0oYmk9alF1ZXJ5LEVpPVwiYm1kLlwiKyhDaT1cInJhZGlvSW5saW5lXCIpLElpPVwiYm1kXCIrKENpLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK0NpLnNsaWNlKDEpKSxUaT1iaS5mbltJaV0sd2k9e2JtZEZvcm1Hcm91cDp7Y3JlYXRlOiExLHJlcXVpcmVkOiExfX0sQWk9ZnVuY3Rpb24oaSl7ZnVuY3Rpb24gcih0LGUsbil7cmV0dXJuIHZvaWQgMD09PW4mJihuPXtpbnB1dFR5cGU6XCJyYWRpb1wiLG91dGVyQ2xhc3M6XCJyYWRpby1pbmxpbmVcIn0pLGkuY2FsbCh0aGlzLHQsYmkuZXh0ZW5kKCEwLHt9LHdpLGUpLG4pfHx0aGlzfXJldHVybiBhKHIsaSksci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe2kucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzLEVpKX0sci5falF1ZXJ5SW50ZXJmYWNlPWZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1iaSh0aGlzKSxlPXQuZGF0YShFaSk7ZXx8KGU9bmV3IHIodCxuKSx0LmRhdGEoRWksZSkpfSl9LHJ9KFdyKSxiaS5mbltJaV09QWkuX2pRdWVyeUludGVyZmFjZSxiaS5mbltJaV0uQ29uc3RydWN0b3I9QWksYmkuZm5bSWldLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gYmkuZm5bSWldPVRpLEFpLl9qUXVlcnlJbnRlcmZhY2V9LFNpPWpRdWVyeSxEaT17cmVxdWlyZWRDbGFzc2VzOltcImZvcm0tY29udHJvbFwiXX0sZnVuY3Rpb24oaSl7ZnVuY3Rpb24gdCh0LGUpe3ZhciBuO3JldHVybihuPWkuY2FsbCh0aGlzLHQsU2kuZXh0ZW5kKCEwLERpLGUpKXx8dGhpcykuaXNFbXB0eSgpJiZuLnJlbW92ZUlzRmlsbGVkKCksbn1yZXR1cm4gYSh0LGkpLHR9KExyKSksR3I9KGtpPWpRdWVyeSxPaT1cImJtZC5cIisoTmk9XCJzZWxlY3RcIiksJGk9XCJibWRcIisoTmkuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrTmkuc2xpY2UoMSkpLGppPWtpLmZuWyRpXSx4aT17cmVxdWlyZWRDbGFzc2VzOltcImZvcm0tY29udHJvbHx8Y3VzdG9tLXNlbGVjdFwiXX0sRmk9ZnVuY3Rpb24oaSl7ZnVuY3Rpb24gcih0LGUpe3ZhciBuO3JldHVybihuPWkuY2FsbCh0aGlzLHQsa2kuZXh0ZW5kKCEwLHhpLGUpKXx8dGhpcykuYWRkSXNGaWxsZWQoKSxufXJldHVybiBhKHIsaSksci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe2kucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzLE9pKX0sci5tYXRjaGVzPWZ1bmN0aW9uKHQpe3JldHVyblwic2VsZWN0XCI9PT10LnByb3AoXCJ0YWdOYW1lXCIpfSxyLnJlamVjdE1hdGNoPWZ1bmN0aW9uKHQsZSl7UXIuYXNzZXJ0KHRoaXMuJGVsZW1lbnQsdGhpcy5tYXRjaGVzKGUpLHQrXCIgY29tcG9uZW50IGVsZW1lbnQgXCIrUXIuZGVzY3JpYmUoZSkrXCIgaXMgaW52YWxpZCBmb3IgPHNlbGVjdD4uXCIpfSxyLl9qUXVlcnlJbnRlcmZhY2U9ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0PWtpKHRoaXMpLGU9dC5kYXRhKE9pKTtlfHwoZT1uZXcgcih0LG4pLHQuZGF0YShPaSxlKSl9KX0scn0oQnIpLGtpLmZuWyRpXT1GaS5falF1ZXJ5SW50ZXJmYWNlLGtpLmZuWyRpXS5Db25zdHJ1Y3Rvcj1GaSxraS5mblskaV0ubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBraS5mblskaV09amksRmkuX2pRdWVyeUludGVyZmFjZX0sUmk9alF1ZXJ5LFFpPVwiYm1kLlwiKyhQaT1cInN3aXRjaFwiKSxNaT1cImJtZFwiKyhQaS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStQaS5zbGljZSgxKSksTGk9UmkuZm5bTWldLEhpPXt0ZW1wbGF0ZTpcIjxzcGFuIGNsYXNzPSdibWQtc3dpdGNoLXRyYWNrJz48L3NwYW4+XCJ9LFVpPWZ1bmN0aW9uKGkpe2Z1bmN0aW9uIHIodCxlLG4pe3JldHVybiB2b2lkIDA9PT1uJiYobj17aW5wdXRUeXBlOlwiY2hlY2tib3hcIixvdXRlckNsYXNzOlwic3dpdGNoXCJ9KSxpLmNhbGwodGhpcyx0LFJpLmV4dGVuZCghMCx7fSxIaSxlKSxuKXx8dGhpc31yZXR1cm4gYShyLGkpLHIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtpLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyxRaSl9LHIuX2pRdWVyeUludGVyZmFjZT1mdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9UmkodGhpcyksZT10LmRhdGEoUWkpO2V8fChlPW5ldyByKHQsbiksdC5kYXRhKFFpLGUpKX0pfSxyfShVciksUmkuZm5bTWldPVVpLl9qUXVlcnlJbnRlcmZhY2UsUmkuZm5bTWldLkNvbnN0cnVjdG9yPVVpLFJpLmZuW01pXS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIFJpLmZuW01pXT1MaSxVaS5falF1ZXJ5SW50ZXJmYWNlfSxXaT1qUXVlcnksR2k9XCJibWQuXCIrKEJpPVwidGV4dFwiKSxLaT1cImJtZFwiKyhCaS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStCaS5zbGljZSgxKSkscWk9V2kuZm5bS2ldLFZpPXt9LFlpPWZ1bmN0aW9uKG4pe2Z1bmN0aW9uIGkodCxlKXtyZXR1cm4gbi5jYWxsKHRoaXMsdCxXaS5leHRlbmQoITAsVmksZSkpfHx0aGlzfXJldHVybiBhKGksbiksaS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbih0KXt2b2lkIDA9PT10JiYodD1HaSksbi5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMsdCl9LGkubWF0Y2hlcz1mdW5jdGlvbih0KXtyZXR1cm5cInRleHRcIj09PXQuYXR0cihcInR5cGVcIil9LGkucmVqZWN0TWF0Y2g9ZnVuY3Rpb24odCxlKXtRci5hc3NlcnQodGhpcy4kZWxlbWVudCx0aGlzLm1hdGNoZXMoZSksdCtcIiBjb21wb25lbnQgZWxlbWVudCBcIitRci5kZXNjcmliZShlKStcIiBpcyBpbnZhbGlkIGZvciB0eXBlPSd0ZXh0Jy5cIil9LGkuX2pRdWVyeUludGVyZmFjZT1mdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9V2kodGhpcyksZT10LmRhdGEoR2kpO2V8fChlPW5ldyBpKHQsbiksdC5kYXRhKEdpLGUpKX0pfSxpfShCciksV2kuZm5bS2ldPVlpLl9qUXVlcnlJbnRlcmZhY2UsV2kuZm5bS2ldLkNvbnN0cnVjdG9yPVlpLFdpLmZuW0tpXS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIFdpLmZuW0tpXT1xaSxZaS5falF1ZXJ5SW50ZXJmYWNlfSx6aT1qUXVlcnksWmk9XCJibWQuXCIrKFhpPVwidGV4dGFyZWFcIiksSmk9XCJibWRcIisoWGkuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrWGkuc2xpY2UoMSkpLHRyPXppLmZuW0ppXSxlcj17fSxucj1mdW5jdGlvbihuKXtmdW5jdGlvbiBpKHQsZSl7cmV0dXJuIG4uY2FsbCh0aGlzLHQsemkuZXh0ZW5kKCEwLGVyLGUpKXx8dGhpc31yZXR1cm4gYShpLG4pLGkucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtuLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyxaaSl9LGkubWF0Y2hlcz1mdW5jdGlvbih0KXtyZXR1cm5cInRleHRhcmVhXCI9PT10LnByb3AoXCJ0YWdOYW1lXCIpfSxpLnJlamVjdE1hdGNoPWZ1bmN0aW9uKHQsZSl7UXIuYXNzZXJ0KHRoaXMuJGVsZW1lbnQsdGhpcy5tYXRjaGVzKGUpLHQrXCIgY29tcG9uZW50IGVsZW1lbnQgXCIrUXIuZGVzY3JpYmUoZSkrXCIgaXMgaW52YWxpZCBmb3IgPHRleHRhcmVhPi5cIil9LGkuX2pRdWVyeUludGVyZmFjZT1mdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9emkodGhpcyksZT10LmRhdGEoWmkpO2V8fChlPW5ldyBpKHQsbiksdC5kYXRhKFppLGUpKX0pfSxpfShCciksemkuZm5bSmldPW5yLl9qUXVlcnlJbnRlcmZhY2UsemkuZm5bSmldLkNvbnN0cnVjdG9yPW5yLHppLmZuW0ppXS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHppLmZuW0ppXT10cixuci5falF1ZXJ5SW50ZXJmYWNlfSxmdW5jdGlvbihjKXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgUG9wcGVyKXRocm93IG5ldyBFcnJvcihcIkJvb3RzdHJhcCBkcm9wZG93biByZXF1aXJlIFBvcHBlci5qcyAoaHR0cHM6Ly9wb3BwZXIuanMub3JnKVwiKTt2YXIgbj1cImRyb3Bkb3duXCIsaD1cImJzLmRyb3Bkb3duXCIsZT1cIi5cIitoLHQ9XCIuZGF0YS1hcGlcIixpPWMuZm5bbl0scz1uZXcgUmVnRXhwKFwiMzh8NDB8MjdcIiksdT17SElERTpcImhpZGVcIitlLEhJRERFTjpcImhpZGRlblwiK2UsU0hPVzpcInNob3dcIitlLFNIT1dOOlwic2hvd25cIitlLENMSUNLOlwiY2xpY2tcIitlLENMSUNLX0RBVEFfQVBJOlwiY2xpY2tcIitlK3QsS0VZRE9XTl9EQVRBX0FQSTpcImtleWRvd25cIitlK3QsS0VZVVBfREFUQV9BUEk6XCJrZXl1cFwiK2UrdCxUUkFOU0lUSU9OX0VORDpcInRyYW5zaXRpb25lbmQgd2Via2l0VHJhbnNpdGlvbkVuZCBvVHJhbnNpdGlvbkVuZCBhbmltYXRpb25lbmQgd2Via2l0QW5pbWF0aW9uRW5kIG9BbmltYXRpb25FbmRcIn0sYT1cImRpc2FibGVkXCIsZD1cInNob3dcIixmPVwic2hvd2luZ1wiLHA9XCJoaWRpbmdcIixtPVwiZHJvcHVwXCIsZz1cImRyb3Bkb3duLW1lbnUtcmlnaHRcIixfPVwiZHJvcGRvd24tbWVudS1sZWZ0XCIsdj0nW2RhdGEtdG9nZ2xlPVwiZHJvcGRvd25cIl0nLHI9XCIuZHJvcGRvd24gZm9ybVwiLG89XCIuZHJvcGRvd24tbWVudVwiLHk9XCIubmF2YmFyLW5hdlwiLGI9XCIuZHJvcGRvd24tbWVudSAuZHJvcGRvd24taXRlbTpub3QoLmRpc2FibGVkKVwiLEM9e1RPUDpcInRvcC1zdGFydFwiLFRPUEVORDpcInRvcC1lbmRcIixCT1RUT006XCJib3R0b20tc3RhcnRcIixCT1RUT01FTkQ6XCJib3R0b20tZW5kXCJ9LEU9e3BsYWNlbWVudDpDLkJPVFRPTSxvZmZzZXQ6MCxmbGlwOiEwfSxJPXtwbGFjZW1lbnQ6XCJzdHJpbmdcIixvZmZzZXQ6XCIobnVtYmVyfHN0cmluZylcIixmbGlwOlwiYm9vbGVhblwifSxsPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbCh0LGUpe3RoaXMuX2VsZW1lbnQ9dCx0aGlzLl9wb3BwZXI9bnVsbCx0aGlzLl9jb25maWc9dGhpcy5fZ2V0Q29uZmlnKGUpLHRoaXMuX21lbnU9dGhpcy5fZ2V0TWVudUVsZW1lbnQoKSx0aGlzLl9pbk5hdmJhcj10aGlzLl9kZXRlY3ROYXZiYXIoKSx0aGlzLl9hZGRFdmVudExpc3RlbmVycygpfXZhciB0PWwucHJvdG90eXBlO3JldHVybiB0LnRvZ2dsZT1mdW5jdGlvbigpe3ZhciB0PXRoaXM7aWYoIXRoaXMuX2VsZW1lbnQuZGlzYWJsZWQmJiFjKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKGEpKXt2YXIgZT1sLl9nZXRQYXJlbnRGcm9tRWxlbWVudCh0aGlzLl9lbGVtZW50KSxuPWModGhpcy5fbWVudSkuaGFzQ2xhc3MoZCk7aWYobC5fY2xlYXJNZW51cygpLCFuKXt2YXIgaT17cmVsYXRlZFRhcmdldDp0aGlzLl9lbGVtZW50fSxyPWMuRXZlbnQodS5TSE9XLGkpO2lmKGMoZSkudHJpZ2dlcihyKSwhci5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7dmFyIG89dGhpcy5fZWxlbWVudDtjKGUpLmhhc0NsYXNzKG0pJiYoYyh0aGlzLl9tZW51KS5oYXNDbGFzcyhfKXx8Yyh0aGlzLl9tZW51KS5oYXNDbGFzcyhnKSkmJihvPWUpLHRoaXMuX3BvcHBlcj1uZXcgUG9wcGVyKG8sdGhpcy5fbWVudSx0aGlzLl9nZXRQb3BwZXJDb25maWcoKSksXCJvbnRvdWNoc3RhcnRcImluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCYmIWMoZSkuY2xvc2VzdCh5KS5sZW5ndGgmJmMoXCJib2R5XCIpLmNoaWxkcmVuKCkub24oXCJtb3VzZW92ZXJcIixudWxsLGMubm9vcCksdGhpcy5fZWxlbWVudC5mb2N1cygpLHRoaXMuX2VsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1leHBhbmRlZFwiLCEwKSxjKHRoaXMuX21lbnUpLm9uZSh1LlRSQU5TSVRJT05fRU5ELGZ1bmN0aW9uKCl7YyhlKS50cmlnZ2VyKGMuRXZlbnQodS5TSE9XTixpKSksYyh0Ll9tZW51KS5yZW1vdmVDbGFzcyhmKX0pLGModGhpcy5fbWVudSkuYWRkQ2xhc3MoZCtcIiBcIitmKSxjKGUpLmFkZENsYXNzKGQpfX19fSx0LmRpc3Bvc2U9ZnVuY3Rpb24oKXtjLnJlbW92ZURhdGEodGhpcy5fZWxlbWVudCxoKSxjKHRoaXMuX2VsZW1lbnQpLm9mZihlKSx0aGlzLl9lbGVtZW50PW51bGwsKHRoaXMuX21lbnU9bnVsbCkhPT10aGlzLl9wb3BwZXImJnRoaXMuX3BvcHBlci5kZXN0cm95KCksdGhpcy5fcG9wcGVyPW51bGx9LHQudXBkYXRlPWZ1bmN0aW9uKCl7dGhpcy5faW5OYXZiYXI9dGhpcy5fZGV0ZWN0TmF2YmFyKCksbnVsbCE9PXRoaXMuX3BvcHBlciYmdGhpcy5fcG9wcGVyLnNjaGVkdWxlVXBkYXRlKCl9LHQuX2FkZEV2ZW50TGlzdGVuZXJzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztjKHRoaXMuX2VsZW1lbnQpLm9uKHUuQ0xJQ0ssZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpLHQuc3RvcFByb3BhZ2F0aW9uKCksZS50b2dnbGUoKX0pfSx0Ll9nZXRDb25maWc9ZnVuY3Rpb24odCl7dmFyIGU9Yyh0aGlzLl9lbGVtZW50KS5kYXRhKCk7cmV0dXJuIHZvaWQgMCE9PWUucGxhY2VtZW50JiYoZS5wbGFjZW1lbnQ9Q1tlLnBsYWNlbWVudC50b1VwcGVyQ2FzZSgpXSksdD1jLmV4dGVuZCh7fSx0aGlzLmNvbnN0cnVjdG9yLkRlZmF1bHQsYyh0aGlzLl9lbGVtZW50KS5kYXRhKCksdCksUnIudHlwZUNoZWNrQ29uZmlnKG4sdCx0aGlzLmNvbnN0cnVjdG9yLkRlZmF1bHRUeXBlKSx0fSx0Ll9nZXRNZW51RWxlbWVudD1mdW5jdGlvbigpe2lmKCF0aGlzLl9tZW51KXt2YXIgdD1sLl9nZXRQYXJlbnRGcm9tRWxlbWVudCh0aGlzLl9lbGVtZW50KTt0aGlzLl9tZW51PWModCkuZmluZChvKVswXX1yZXR1cm4gdGhpcy5fbWVudX0sdC5fZ2V0UGxhY2VtZW50PWZ1bmN0aW9uKCl7dmFyIHQ9Yyh0aGlzLl9lbGVtZW50KS5wYXJlbnQoKSxlPXRoaXMuX2NvbmZpZy5wbGFjZW1lbnQ7cmV0dXJuIHQuaGFzQ2xhc3MobSl8fHRoaXMuX2NvbmZpZy5wbGFjZW1lbnQ9PT1DLlRPUD8oZT1DLlRPUCxjKHRoaXMuX21lbnUpLmhhc0NsYXNzKGcpJiYoZT1DLlRPUEVORCkpOmModGhpcy5fbWVudSkuaGFzQ2xhc3MoZykmJihlPUMuQk9UVE9NRU5EKSxlfSx0Ll9kZXRlY3ROYXZiYXI9ZnVuY3Rpb24oKXtyZXR1cm4gMDxjKHRoaXMuX2VsZW1lbnQpLmNsb3Nlc3QoXCIubmF2YmFyXCIpLmxlbmd0aH0sdC5fZ2V0UG9wcGVyQ29uZmlnPWZ1bmN0aW9uKCl7dmFyIHQ9e3BsYWNlbWVudDp0aGlzLl9nZXRQbGFjZW1lbnQoKSxtb2RpZmllcnM6e29mZnNldDp7b2Zmc2V0OnRoaXMuX2NvbmZpZy5vZmZzZXR9LGZsaXA6e2VuYWJsZWQ6dGhpcy5fY29uZmlnLmZsaXB9fX07cmV0dXJuIHRoaXMuX2luTmF2YmFyJiYodC5tb2RpZmllcnMuYXBwbHlTdHlsZT17ZW5hYmxlZDohdGhpcy5faW5OYXZiYXJ9KSx0fSxsLl9qUXVlcnlJbnRlcmZhY2U9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0PWModGhpcykuZGF0YShoKTtpZih0fHwodD1uZXcgbCh0aGlzLFwib2JqZWN0XCI9PXR5cGVvZiBlP2U6bnVsbCksYyh0aGlzKS5kYXRhKGgsdCkpLFwic3RyaW5nXCI9PXR5cGVvZiBlKXtpZih2b2lkIDA9PT10W2VdKXRocm93IG5ldyBFcnJvcignTm8gbWV0aG9kIG5hbWVkIFwiJytlKydcIicpO3RbZV0oKX19KX0sbC5fY2xlYXJNZW51cz1mdW5jdGlvbihzKXtpZighc3x8MyE9PXMud2hpY2gmJihcImtleXVwXCIhPT1zLnR5cGV8fDk9PT1zLndoaWNoKSlmb3IodmFyIGE9Yy5tYWtlQXJyYXkoYyh2KSksdD1mdW5jdGlvbih0KXt2YXIgZT1sLl9nZXRQYXJlbnRGcm9tRWxlbWVudChhW3RdKSxuPWMoYVt0XSkuZGF0YShoKSxpPXtyZWxhdGVkVGFyZ2V0OmFbdF19O2lmKCFuKXJldHVyblwiY29udGludWVcIjt2YXIgcj1uLl9tZW51O2lmKCFjKGUpLmhhc0NsYXNzKGQpKXJldHVyblwiY29udGludWVcIjtpZihzJiYoXCJjbGlja1wiPT09cy50eXBlJiYvaW5wdXR8dGV4dGFyZWEvaS50ZXN0KHMudGFyZ2V0LnRhZ05hbWUpfHxcImtleXVwXCI9PT1zLnR5cGUmJjk9PT1zLndoaWNoKSYmYy5jb250YWlucyhlLHMudGFyZ2V0KSlyZXR1cm5cImNvbnRpbnVlXCI7dmFyIG89Yy5FdmVudCh1LkhJREUsaSk7aWYoYyhlKS50cmlnZ2VyKG8pLG8uaXNEZWZhdWx0UHJldmVudGVkKCkpcmV0dXJuXCJjb250aW51ZVwiO1wib250b3VjaHN0YXJ0XCJpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQmJmMoXCJib2R5XCIpLmNoaWxkcmVuKCkub2ZmKFwibW91c2VvdmVyXCIsbnVsbCxjLm5vb3ApLGFbdF0uc2V0QXR0cmlidXRlKFwiYXJpYS1leHBhbmRlZFwiLFwiZmFsc2VcIiksYyhyKS5hZGRDbGFzcyhwKS5yZW1vdmVDbGFzcyhkKSxjKGUpLnJlbW92ZUNsYXNzKGQpLGMocikub25lKHUuVFJBTlNJVElPTl9FTkQsZnVuY3Rpb24oKXtjKGUpLnRyaWdnZXIoYy5FdmVudCh1LkhJRERFTixpKSksYyhyKS5yZW1vdmVDbGFzcyhwKX0pfSxlPTA7ZTxhLmxlbmd0aDtlKyspdChlKX0sbC5fZ2V0UGFyZW50RnJvbUVsZW1lbnQ9ZnVuY3Rpb24odCl7dmFyIGUsbj1Sci5nZXRTZWxlY3RvckZyb21FbGVtZW50KHQpO3JldHVybiBuJiYoZT1jKG4pWzBdKSxlfHx0LnBhcmVudE5vZGV9LGwuX2RhdGFBcGlLZXlkb3duSGFuZGxlcj1mdW5jdGlvbih0KXtpZighKCFzLnRlc3QodC53aGljaCl8fC9idXR0b24vaS50ZXN0KHQudGFyZ2V0LnRhZ05hbWUpJiYzMj09PXQud2hpY2h8fC9pbnB1dHx0ZXh0YXJlYS9pLnRlc3QodC50YXJnZXQudGFnTmFtZSl8fCh0LnByZXZlbnREZWZhdWx0KCksdC5zdG9wUHJvcGFnYXRpb24oKSx0aGlzLmRpc2FibGVkfHxjKHRoaXMpLmhhc0NsYXNzKGEpKSkpe3ZhciBlPWwuX2dldFBhcmVudEZyb21FbGVtZW50KHRoaXMpLG49YyhlKS5oYXNDbGFzcyhkKTtpZigobnx8Mjc9PT10LndoaWNoJiYzMj09PXQud2hpY2gpJiYoIW58fDI3IT09dC53aGljaCYmMzIhPT10LndoaWNoKSl7dmFyIGk9YyhlKS5maW5kKGIpLmdldCgpO2lmKGkubGVuZ3RoKXt2YXIgcj1pLmluZGV4T2YodC50YXJnZXQpOzM4PT09dC53aGljaCYmMDxyJiZyLS0sNDA9PT10LndoaWNoJiZyPGkubGVuZ3RoLTEmJnIrKyxyPDAmJihyPTApLGlbcl0uZm9jdXMoKX19ZWxzZXtpZigyNz09PXQud2hpY2gpe3ZhciBvPWMoZSkuZmluZCh2KVswXTtjKG8pLnRyaWdnZXIoXCJmb2N1c1wiKX1jKHRoaXMpLnRyaWdnZXIoXCJjbGlja1wiKX19fSxUKGwsbnVsbCxbe2tleTpcIlZFUlNJT05cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cIjQuMC4wLWJldGFcIn19LHtrZXk6XCJEZWZhdWx0XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEV9fSx7a2V5OlwiRGVmYXVsdFR5cGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gSX19XSksbH0oKTtjKGRvY3VtZW50KS5vbih1LktFWURPV05fREFUQV9BUEksdixsLl9kYXRhQXBpS2V5ZG93bkhhbmRsZXIpLm9uKHUuS0VZRE9XTl9EQVRBX0FQSSxvLGwuX2RhdGFBcGlLZXlkb3duSGFuZGxlcikub24odS5DTElDS19EQVRBX0FQSStcIiBcIit1LktFWVVQX0RBVEFfQVBJLGwuX2NsZWFyTWVudXMpLm9uKHUuQ0xJQ0tfREFUQV9BUEksdixmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCksdC5zdG9wUHJvcGFnYXRpb24oKSxsLl9qUXVlcnlJbnRlcmZhY2UuY2FsbChjKHRoaXMpLFwidG9nZ2xlXCIpfSkub24odS5DTElDS19EQVRBX0FQSSxyLGZ1bmN0aW9uKHQpe3Quc3RvcFByb3BhZ2F0aW9uKCl9KSxjLmZuW25dPWwuX2pRdWVyeUludGVyZmFjZSxjLmZuW25dLkNvbnN0cnVjdG9yPWwsYy5mbltuXS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGMuZm5bbl09aSxsLl9qUXVlcnlJbnRlcmZhY2V9fShqUXVlcnkpLGlyPWpRdWVyeSxzcj17Q0FOVkFTOlwiLlwiKyhycj1cImJtZC1sYXlvdXQtY2FudmFzXCIpLENPTlRBSU5FUjpcIi5cIitcImJtZC1sYXlvdXQtY29udGFpbmVyXCIsQkFDS0RST1A6XCIuXCIrKG9yPVwiYm1kLWxheW91dC1iYWNrZHJvcFwiKX0sYXI9e2NhbnZhczp7Y3JlYXRlOiEwLHJlcXVpcmVkOiEwLHRlbXBsYXRlOic8ZGl2IGNsYXNzPVwiJytycisnXCI+PC9kaXY+J30sYmFja2Ryb3A6e2NyZWF0ZTohMCxyZXF1aXJlZDohMCx0ZW1wbGF0ZTonPGRpdiBjbGFzcz1cIicrb3IrJ1wiPjwvZGl2Pid9fSxmdW5jdGlvbihyKXtmdW5jdGlvbiB0KHQsZSxuKXt2YXIgaTtyZXR1cm4gdm9pZCAwPT09biYmKG49e30pLChpPXIuY2FsbCh0aGlzLHQsaXIuZXh0ZW5kKCEwLHt9LGFyLGUpLG4pfHx0aGlzKS4kY29udGFpbmVyPWkuZmluZENvbnRhaW5lcighMCksaS4kYmFja2Ryb3A9aS5yZXNvbHZlQmFja2Ryb3AoKSxpLnJlc29sdmVDYW52YXMoKSxpfWEodCxyKTt2YXIgZT10LnByb3RvdHlwZTtyZXR1cm4gZS5kaXNwb3NlPWZ1bmN0aW9uKHQpe3IucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzLHQpLHRoaXMuJGNvbnRhaW5lcj1udWxsLHRoaXMuJGJhY2tkcm9wPW51bGx9LGUucmVzb2x2ZUNhbnZhcz1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZmluZENhbnZhcyghMSk7cmV0dXJuIHZvaWQgMCE9PXQmJjAhPT10Lmxlbmd0aHx8KHRoaXMuY29uZmlnLmNhbnZhcy5jcmVhdGUmJnRoaXMuJGNvbnRhaW5lci53cmFwKHRoaXMuY29uZmlnLmNhbnZhcy50ZW1wbGF0ZSksdD10aGlzLmZpbmRDYW52YXModGhpcy5jb25maWcuY2FudmFzLnJlcXVpcmVkKSksdH0sZS5maW5kQ2FudmFzPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09dCYmKHQ9ITApLHZvaWQgMD09PWUmJihlPXRoaXMuJGNvbnRhaW5lcik7dmFyIG49ZS5jbG9zZXN0KHNyLkNBTlZBUyk7cmV0dXJuIDA9PT1uLmxlbmd0aCYmdCYmaXIuZXJyb3IoXCJGYWlsZWQgdG8gZmluZCBcIitzci5DQU5WQVMrXCIgZm9yIFwiK1FyLmRlc2NyaWJlKGUpKSxufSxlLnJlc29sdmVCYWNrZHJvcD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZmluZEJhY2tkcm9wKCExKTtyZXR1cm4gdm9pZCAwIT09dCYmMCE9PXQubGVuZ3RofHwodGhpcy5jb25maWcuYmFja2Ryb3AuY3JlYXRlJiZ0aGlzLiRjb250YWluZXIuYXBwZW5kKHRoaXMuY29uZmlnLmJhY2tkcm9wLnRlbXBsYXRlKSx0PXRoaXMuZmluZEJhY2tkcm9wKHRoaXMuY29uZmlnLmJhY2tkcm9wLnJlcXVpcmVkKSksdH0sZS5maW5kQmFja2Ryb3A9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT10JiYodD0hMCksdm9pZCAwPT09ZSYmKGU9dGhpcy4kY29udGFpbmVyKTt2YXIgbj1lLmZpbmQoXCI+IFwiK3NyLkJBQ0tEUk9QKTtyZXR1cm4gMD09PW4ubGVuZ3RoJiZ0JiZpci5lcnJvcihcIkZhaWxlZCB0byBmaW5kIFwiK3NyLkJBQ0tEUk9QK1wiIGZvciBcIitRci5kZXNjcmliZShlKSksbn0sZS5maW5kQ29udGFpbmVyPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09dCYmKHQ9ITApLHZvaWQgMD09PWUmJihlPXRoaXMuJGVsZW1lbnQpO3ZhciBuPWUuY2xvc2VzdChzci5DT05UQUlORVIpO3JldHVybiAwPT09bi5sZW5ndGgmJnQmJmlyLmVycm9yKFwiRmFpbGVkIHRvIGZpbmQgXCIrc3IuQ09OVEFJTkVSK1wiIGZvciBcIitRci5kZXNjcmliZShlKSksbn0sdH0oTXIpKTtscj1qUXVlcnksaHI9XCJibWQuXCIrKGNyPVwiZHJhd2VyXCIpLHVyPVwiYm1kXCIrKGNyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2NyLnNsaWNlKDEpKSxkcj1sci5mblt1cl0sZnI9MjcscHI9XCJpblwiLG1yPVwiYm1kLWRyYXdlci1pblwiLGdyPVwiYm1kLWRyYXdlci1vdXRcIixfcj17Zm9jdXNTZWxlY3RvcjpcImEsIGJ1dHRvbiwgaW5wdXRcIn0sdnI9ZnVuY3Rpb24oaSl7ZnVuY3Rpb24gcih0LGUpe3ZhciBuO3JldHVybihuPWkuY2FsbCh0aGlzLHQsbHIuZXh0ZW5kKCEwLHt9LF9yLGUpKXx8dGhpcykuJHRvZ2dsZXM9bHIoJ1tkYXRhLXRvZ2dsZT1cImRyYXdlclwiXVtocmVmPVwiIycrbi4kZWxlbWVudFswXS5pZCsnXCJdLCBbZGF0YS10b2dnbGU9XCJkcmF3ZXJcIl1bZGF0YS10YXJnZXQ9XCIjJytuLiRlbGVtZW50WzBdLmlkKydcIl0nKSxuLl9hZGRBcmlhKCksbi4kYmFja2Ryb3Aua2V5ZG93bihmdW5jdGlvbih0KXt0LndoaWNoPT09ZnImJm4uaGlkZSgpfSkuY2xpY2soZnVuY3Rpb24oKXtuLmhpZGUoKX0pLG4uJGVsZW1lbnQua2V5ZG93bihmdW5jdGlvbih0KXt0LndoaWNoPT09ZnImJm4uaGlkZSgpfSksbi4kdG9nZ2xlcy5jbGljayhmdW5jdGlvbigpe24udG9nZ2xlKCl9KSxufWEocixpKTt2YXIgdD1yLnByb3RvdHlwZTtyZXR1cm4gdC5kaXNwb3NlPWZ1bmN0aW9uKCl7aS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMsaHIpLHRoaXMuJHRvZ2dsZXM9bnVsbH0sdC50b2dnbGU9ZnVuY3Rpb24oKXt0aGlzLl9pc09wZW4oKT90aGlzLmhpZGUoKTp0aGlzLnNob3coKX0sdC5zaG93PWZ1bmN0aW9uKCl7aWYoIXRoaXMuX2lzRm9yY2VkQ2xvc2VkKCkmJiF0aGlzLl9pc09wZW4oKSl7dGhpcy4kdG9nZ2xlcy5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCEwKSx0aGlzLiRlbGVtZW50LmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITApLHRoaXMuJGVsZW1lbnQuYXR0cihcImFyaWEtaGlkZGVuXCIsITEpO3ZhciB0PXRoaXMuJGVsZW1lbnQuZmluZCh0aGlzLmNvbmZpZy5mb2N1c1NlbGVjdG9yKTswPHQubGVuZ3RoJiZ0LmZpcnN0KCkuZm9jdXMoKSx0aGlzLiRjb250YWluZXIuYWRkQ2xhc3MobXIpLHRoaXMuJGJhY2tkcm9wLmFkZENsYXNzKHByKX19LHQuaGlkZT1mdW5jdGlvbigpe3RoaXMuX2lzT3BlbigpJiYodGhpcy4kdG9nZ2xlcy5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCExKSx0aGlzLiRlbGVtZW50LmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITEpLHRoaXMuJGVsZW1lbnQuYXR0cihcImFyaWEtaGlkZGVuXCIsITApLHRoaXMuJGNvbnRhaW5lci5yZW1vdmVDbGFzcyhtciksdGhpcy4kYmFja2Ryb3AucmVtb3ZlQ2xhc3MocHIpKX0sdC5faXNPcGVuPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGNvbnRhaW5lci5oYXNDbGFzcyhtcil9LHQuX2lzRm9yY2VkQ2xvc2VkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGNvbnRhaW5lci5oYXNDbGFzcyhncil9LHQuX2FkZEFyaWE9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9pc09wZW4oKTt0aGlzLiRlbGVtZW50LmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsdCksdGhpcy4kZWxlbWVudC5hdHRyKFwiYXJpYS1oaWRkZW5cIix0KSx0aGlzLiR0b2dnbGVzLmxlbmd0aCYmdGhpcy4kdG9nZ2xlcy5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLHQpfSxyLl9qUXVlcnlJbnRlcmZhY2U9ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0PWxyKHRoaXMpLGU9dC5kYXRhKGhyKTtlfHwoZT1uZXcgcih0LG4pLHQuZGF0YShocixlKSl9KX0scn0oR3IpLGxyLmZuW3VyXT12ci5falF1ZXJ5SW50ZXJmYWNlLGxyLmZuW3VyXS5Db25zdHJ1Y3Rvcj12cixsci5mblt1cl0ubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBsci5mblt1cl09ZHIsdnIuX2pRdWVyeUludGVyZmFjZX0seXI9alF1ZXJ5LENyPVwiYm1kLlwiKyhicj1cInJpcHBsZXNcIiksRXI9XCJibWRcIisoYnIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrYnIuc2xpY2UoMSkpLElyPXlyLmZuW0VyXSxBcj17Q09OVEFJTkVSOlwiLlwiKyhUcj1cInJpcHBsZS1jb250YWluZXJcIiksREVDT1JBVE9SOlwiLlwiKyh3cj1cInJpcHBsZS1kZWNvcmF0b3JcIil9LFNyPXtjb250YWluZXI6e3RlbXBsYXRlOlwiPGRpdiBjbGFzcz0nXCIrVHIrXCInPjwvZGl2PlwifSxkZWNvcmF0b3I6e3RlbXBsYXRlOlwiPGRpdiBjbGFzcz0nXCIrd3IrXCInPjwvZGl2PlwifSx0cmlnZ2VyOntzdGFydDpcIm1vdXNlZG93biB0b3VjaHN0YXJ0XCIsZW5kOlwibW91c2V1cCBtb3VzZWxlYXZlIHRvdWNoZW5kXCJ9LHRvdWNoVXNlckFnZW50UmVnZXg6L0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaSxkdXJhdGlvbjo1MDB9LERyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gaSh0LGUpe3ZhciBuPXRoaXM7dGhpcy4kZWxlbWVudD10LHRoaXMuY29uZmlnPXlyLmV4dGVuZCghMCx7fSxTcixlKSx0aGlzLiRlbGVtZW50Lm9uKHRoaXMuY29uZmlnLnRyaWdnZXIuc3RhcnQsZnVuY3Rpb24odCl7bi5fb25TdGFydFJpcHBsZSh0KX0pfXZhciB0PWkucHJvdG90eXBlO3JldHVybiB0LmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLiRlbGVtZW50LmRhdGEoQ3IsbnVsbCksdGhpcy4kZWxlbWVudD1udWxsLHRoaXMuJGNvbnRhaW5lcj1udWxsLHRoaXMuJGRlY29yYXRvcj1udWxsLHRoaXMuY29uZmlnPW51bGx9LHQuX29uU3RhcnRSaXBwbGU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZighdGhpcy5faXNUb3VjaCgpfHxcIm1vdXNlZG93blwiIT09dC50eXBlKXt0aGlzLl9maW5kT3JDcmVhdGVDb250YWluZXIoKTt2YXIgbj10aGlzLl9nZXRSZWxZKHQpLGk9dGhpcy5fZ2V0UmVsWCh0KTsobnx8aSkmJih0aGlzLiRkZWNvcmF0b3IuY3NzKHtsZWZ0OmksdG9wOm4sXCJiYWNrZ3JvdW5kLWNvbG9yXCI6dGhpcy5fZ2V0UmlwcGxlc0NvbG9yKCl9KSx0aGlzLl9mb3JjZVN0eWxlQXBwbGljYXRpb24oKSx0aGlzLnJpcHBsZU9uKCksc2V0VGltZW91dChmdW5jdGlvbigpe2UucmlwcGxlRW5kKCl9LHRoaXMuY29uZmlnLmR1cmF0aW9uKSx0aGlzLiRlbGVtZW50Lm9uKHRoaXMuY29uZmlnLnRyaWdnZXIuZW5kLGZ1bmN0aW9uKCl7ZS4kZGVjb3JhdG9yJiYoZS4kZGVjb3JhdG9yLmRhdGEoXCJtb3VzZWRvd25cIixcIm9mZlwiKSxcIm9mZlwiPT09ZS4kZGVjb3JhdG9yLmRhdGEoXCJhbmltYXRpbmdcIikmJmUucmlwcGxlT3V0KCkpfSkpfX0sdC5fZmluZE9yQ3JlYXRlQ29udGFpbmVyPWZ1bmN0aW9uKCl7KCF0aGlzLiRjb250YWluZXJ8fDA8IXRoaXMuJGNvbnRhaW5lci5sZW5ndGgpJiYodGhpcy4kZWxlbWVudC5hcHBlbmQodGhpcy5jb25maWcuY29udGFpbmVyLnRlbXBsYXRlKSx0aGlzLiRjb250YWluZXI9dGhpcy4kZWxlbWVudC5maW5kKEFyLkNPTlRBSU5FUikpLHRoaXMuJGNvbnRhaW5lci5hcHBlbmQodGhpcy5jb25maWcuZGVjb3JhdG9yLnRlbXBsYXRlKSx0aGlzLiRkZWNvcmF0b3I9dGhpcy4kY29udGFpbmVyLmZpbmQoQXIuREVDT1JBVE9SKX0sdC5fZm9yY2VTdHlsZUFwcGxpY2F0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuJGRlY29yYXRvclswXSkub3BhY2l0eX0sdC5fZ2V0UmVsWD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLiRjb250YWluZXIub2Zmc2V0KCk7cmV0dXJuIHRoaXMuX2lzVG91Y2goKT8xPT09KHQ9dC5vcmlnaW5hbEV2ZW50KS50b3VjaGVzLmxlbmd0aCYmdC50b3VjaGVzWzBdLnBhZ2VYLWUubGVmdDp0LnBhZ2VYLWUubGVmdH0sdC5fZ2V0UmVsWT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLiRjb250YWluZXIub2Zmc2V0KCk7cmV0dXJuIHRoaXMuX2lzVG91Y2goKT8xPT09KHQ9dC5vcmlnaW5hbEV2ZW50KS50b3VjaGVzLmxlbmd0aCYmdC50b3VjaGVzWzBdLnBhZ2VZLWUudG9wOnQucGFnZVktZS50b3B9LHQuX2dldFJpcHBsZXNDb2xvcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRlbGVtZW50LmRhdGEoXCJyaXBwbGUtY29sb3JcIik/dGhpcy4kZWxlbWVudC5kYXRhKFwicmlwcGxlLWNvbG9yXCIpOndpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuJGVsZW1lbnRbMF0pLmNvbG9yfSx0Ll9pc1RvdWNoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uZmlnLnRvdWNoVXNlckFnZW50UmVnZXgudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KX0sdC5yaXBwbGVFbmQ9ZnVuY3Rpb24oKXt0aGlzLiRkZWNvcmF0b3ImJih0aGlzLiRkZWNvcmF0b3IuZGF0YShcImFuaW1hdGluZ1wiLFwib2ZmXCIpLFwib2ZmXCI9PT10aGlzLiRkZWNvcmF0b3IuZGF0YShcIm1vdXNlZG93blwiKSYmdGhpcy5yaXBwbGVPdXQodGhpcy4kZGVjb3JhdG9yKSl9LHQucmlwcGxlT3V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLiRkZWNvcmF0b3Iub2ZmKCksUXIudHJhbnNpdGlvbkVuZFN1cHBvcnRlZCgpP3RoaXMuJGRlY29yYXRvci5hZGRDbGFzcyhcInJpcHBsZS1vdXRcIik6dGhpcy4kZGVjb3JhdG9yLmFuaW1hdGUoe29wYWNpdHk6MH0sMTAwLGZ1bmN0aW9uKCl7dC4kZGVjb3JhdG9yLnRyaWdnZXIoXCJ0cmFuc2l0aW9uZW5kXCIpfSksdGhpcy4kZGVjb3JhdG9yLm9uKFFyLnRyYW5zaXRpb25FbmRTZWxlY3RvcigpLGZ1bmN0aW9uKCl7dC4kZGVjb3JhdG9yJiYodC4kZGVjb3JhdG9yLnJlbW92ZSgpLHQuJGRlY29yYXRvcj1udWxsKX0pfSx0LnJpcHBsZU9uPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPXRoaXMuX2dldE5ld1NpemUoKTtRci50cmFuc2l0aW9uRW5kU3VwcG9ydGVkKCk/dGhpcy4kZGVjb3JhdG9yLmNzcyh7XCItbXMtdHJhbnNmb3JtXCI6XCJzY2FsZShcIitlK1wiKVwiLFwiLW1vei10cmFuc2Zvcm1cIjpcInNjYWxlKFwiK2UrXCIpXCIsXCItd2Via2l0LXRyYW5zZm9ybVwiOlwic2NhbGUoXCIrZStcIilcIix0cmFuc2Zvcm06XCJzY2FsZShcIitlK1wiKVwifSkuYWRkQ2xhc3MoXCJyaXBwbGUtb25cIikuZGF0YShcImFuaW1hdGluZ1wiLFwib25cIikuZGF0YShcIm1vdXNlZG93blwiLFwib25cIik6dGhpcy4kZGVjb3JhdG9yLmFuaW1hdGUoe3dpZHRoOjIqTWF0aC5tYXgodGhpcy4kZWxlbWVudC5vdXRlcldpZHRoKCksdGhpcy4kZWxlbWVudC5vdXRlckhlaWdodCgpKSxoZWlnaHQ6MipNYXRoLm1heCh0aGlzLiRlbGVtZW50Lm91dGVyV2lkdGgoKSx0aGlzLiRlbGVtZW50Lm91dGVySGVpZ2h0KCkpLFwibWFyZ2luLWxlZnRcIjotMSpNYXRoLm1heCh0aGlzLiRlbGVtZW50Lm91dGVyV2lkdGgoKSx0aGlzLiRlbGVtZW50Lm91dGVySGVpZ2h0KCkpLFwibWFyZ2luLXRvcFwiOi0xKk1hdGgubWF4KHRoaXMuJGVsZW1lbnQub3V0ZXJXaWR0aCgpLHRoaXMuJGVsZW1lbnQub3V0ZXJIZWlnaHQoKSksb3BhY2l0eTouMn0sdGhpcy5jb25maWcuZHVyYXRpb24sZnVuY3Rpb24oKXt0LiRkZWNvcmF0b3IudHJpZ2dlcihcInRyYW5zaXRpb25lbmRcIil9KX0sdC5fZ2V0TmV3U2l6ZT1mdW5jdGlvbigpe3JldHVybiBNYXRoLm1heCh0aGlzLiRlbGVtZW50Lm91dGVyV2lkdGgoKSx0aGlzLiRlbGVtZW50Lm91dGVySGVpZ2h0KCkpL3RoaXMuJGRlY29yYXRvci5vdXRlcldpZHRoKCkqMi41fSxpLl9qUXVlcnlJbnRlcmZhY2U9ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0PXlyKHRoaXMpLGU9dC5kYXRhKENyKTtlfHwoZT1uZXcgaSh0LG4pLHQuZGF0YShDcixlKSl9KX0saX0oKSx5ci5mbltFcl09RHIuX2pRdWVyeUludGVyZmFjZSx5ci5mbltFcl0uQ29uc3RydWN0b3I9RHIseXIuZm5bRXJdLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4geXIuZm5bRXJdPUlyLERyLl9qUXVlcnlJbnRlcmZhY2V9LGtyPWpRdWVyeSxPcj1cImJtZC5cIisoTnI9XCJhdXRvZmlsbFwiKSwkcj1cImJtZFwiKyhOci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStOci5zbGljZSgxKSksanI9a3IuZm5bJHJdLHhyPXt9LEZyPWZ1bmN0aW9uKGkpe2Z1bmN0aW9uIHIodCxlKXt2YXIgbjtyZXR1cm4obj1pLmNhbGwodGhpcyx0LGtyLmV4dGVuZCghMCx7fSx4cixlKSl8fHRoaXMpLl93YXRjaExvYWRpbmcoKSxuLl9hdHRhY2hFdmVudEhhbmRsZXJzKCksbn1hKHIsaSk7dmFyIHQ9ci5wcm90b3R5cGU7cmV0dXJuIHQuZGlzcG9zZT1mdW5jdGlvbigpe2kucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzLE9yKX0sdC5fd2F0Y2hMb2FkaW5nPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Y2xlYXJJbnRlcnZhbCh0Ll9vbkxvYWRpbmcpfSwxZTQpfSx0Ll9vbkxvYWRpbmc9ZnVuY3Rpb24oKXtzZXRJbnRlcnZhbChmdW5jdGlvbigpe2tyKFwiaW5wdXRbdHlwZSE9Y2hlY2tib3hdXCIpLmVhY2goZnVuY3Rpb24odCxlKXt2YXIgbj1rcihlKTtuLnZhbCgpJiZuLnZhbCgpIT09bi5hdHRyKFwidmFsdWVcIikmJm4udHJpZ2dlcihcImNoYW5nZVwiKX0pfSwxMDApfSx0Ll9hdHRhY2hFdmVudEhhbmRsZXJzPWZ1bmN0aW9uKCl7dmFyIG49bnVsbDtrcihkb2N1bWVudCkub24oXCJmb2N1c1wiLFwiaW5wdXRcIixmdW5jdGlvbih0KXt2YXIgZT1rcih0LmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoXCJmb3JtXCIpLmZpbmQoXCJpbnB1dFwiKS5ub3QoXCJbdHlwZT1maWxlXVwiKTtuPXNldEludGVydmFsKGZ1bmN0aW9uKCl7ZS5lYWNoKGZ1bmN0aW9uKHQsZSl7dmFyIG49a3IoZSk7bi52YWwoKSE9PW4uYXR0cihcInZhbHVlXCIpJiZuLnRyaWdnZXIoXCJjaGFuZ2VcIil9KX0sMTAwKX0pLm9uKFwiYmx1clwiLFwiLmZvcm0tZ3JvdXAgaW5wdXRcIixmdW5jdGlvbigpe2NsZWFySW50ZXJ2YWwobil9KX0sci5falF1ZXJ5SW50ZXJmYWNlPWZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1rcih0aGlzKSxlPXQuZGF0YShPcik7ZXx8KGU9bmV3IHIodCxuKSx0LmRhdGEoT3IsZSkpfSl9LHJ9KE1yKSxrci5mblskcl09RnIuX2pRdWVyeUludGVyZmFjZSxrci5mblskcl0uQ29uc3RydWN0b3I9RnIsa3IuZm5bJHJdLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4ga3IuZm5bJHJdPWpyLEZyLl9qUXVlcnlJbnRlcmZhY2V9O1BvcHBlci5EZWZhdWx0cy5tb2RpZmllcnMuY29tcHV0ZVN0eWxlLmdwdUFjY2VsZXJhdGlvbj0hMTt2YXIgS3IscXIsVnIsWXIsenIsWHIsWnI7S3I9alF1ZXJ5LFZyPVwiYm1kLlwiKyhxcj1cImJvb3RzdHJhcE1hdGVyaWFsRGVzaWduXCIpLFlyPXFyLHpyPUtyLmZuW1lyXSxYcj17Z2xvYmFsOnt2YWxpZGF0ZTohMSxsYWJlbDp7Y2xhc3NOYW1lOlwiYm1kLWxhYmVsLXN0YXRpY1wifX0sYXV0b2ZpbGw6e3NlbGVjdG9yOlwiYm9keVwifSxjaGVja2JveDp7c2VsZWN0b3I6XCIuY2hlY2tib3ggPiBsYWJlbCA+IGlucHV0W3R5cGU9Y2hlY2tib3hdXCJ9LGNoZWNrYm94SW5saW5lOntzZWxlY3RvcjpcImxhYmVsLmNoZWNrYm94LWlubGluZSA+IGlucHV0W3R5cGU9Y2hlY2tib3hdXCJ9LGNvbGxhcHNlSW5saW5lOntzZWxlY3RvcjonLmJtZC1jb2xsYXBzZS1pbmxpbmUgW2RhdGEtdG9nZ2xlPVwiY29sbGFwc2VcIl0nfSxkcmF3ZXI6e3NlbGVjdG9yOlwiLmJtZC1sYXlvdXQtZHJhd2VyXCJ9LGZpbGU6e3NlbGVjdG9yOlwiaW5wdXRbdHlwZT1maWxlXVwifSxyYWRpbzp7c2VsZWN0b3I6XCIucmFkaW8gPiBsYWJlbCA+IGlucHV0W3R5cGU9cmFkaW9dXCJ9LHJhZGlvSW5saW5lOntzZWxlY3RvcjpcImxhYmVsLnJhZGlvLWlubGluZSA+IGlucHV0W3R5cGU9cmFkaW9dXCJ9LHJpcHBsZXM6e3NlbGVjdG9yOltcIi5idG46bm90KC5yaXBwbGUtbm9uZSlcIixcIi5jYXJkLWltYWdlOm5vdCgucmlwcGxlLW5vbmUpXCIsXCIubmF2YmFyIGE6bm90KC5yaXBwbGUtbm9uZSlcIixcIi5kcm9wZG93bi1tZW51IGE6bm90KC5yaXBwbGUtbm9uZSlcIixcIi5uYXYtdGFicyBhOm5vdCgucmlwcGxlLW5vbmUpXCIsXCIucGFnaW5hdGlvbiBsaTpub3QoLmFjdGl2ZSk6bm90KC5kaXNhYmxlZCkgYTpub3QoLnJpcHBsZS1ub25lKVwiLFwiLnJpcHBsZVwiXX0sc2VsZWN0OntzZWxlY3RvcjpbXCJzZWxlY3RcIl19LHN3aXRjaDp7c2VsZWN0b3I6XCIuc3dpdGNoID4gbGFiZWwgPiBpbnB1dFt0eXBlPWNoZWNrYm94XVwifSx0ZXh0OntzZWxlY3RvcjpbXCJpbnB1dDpub3QoW3R5cGU9aGlkZGVuXSk6bm90KFt0eXBlPWNoZWNrYm94XSk6bm90KFt0eXBlPXJhZGlvXSk6bm90KFt0eXBlPWZpbGVdKTpub3QoW3R5cGU9YnV0dG9uXSk6bm90KFt0eXBlPXN1Ym1pdF0pOm5vdChbdHlwZT1yZXNldF0pXCJdfSx0ZXh0YXJlYTp7c2VsZWN0b3I6W1widGV4dGFyZWFcIl19LGFycml2ZTohMCxpbnN0YW50aWF0aW9uOltcInJpcHBsZXNcIixcImNoZWNrYm94XCIsXCJjaGVja2JveElubGluZVwiLFwiY29sbGFwc2VJbmxpbmVcIixcImRyYXdlclwiLFwicmFkaW9cIixcInJhZGlvSW5saW5lXCIsXCJzd2l0Y2hcIixcInRleHRcIixcInRleHRhcmVhXCIsXCJhdXRvZmlsbFwiXX0sWnI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBpKHQsZSl7dmFyIG89dGhpczt0aGlzLiRlbGVtZW50PXQsdGhpcy5jb25maWc9S3IuZXh0ZW5kKCEwLHt9LFhyLGUpO3ZhciBzPUtyKGRvY3VtZW50KSxuPWZ1bmN0aW9uKHQpe3ZhciBlPW8uY29uZmlnW3RdO2lmKGUpe3ZhciBuPW8uX3Jlc29sdmVTZWxlY3RvcihlKTtlPUtyLmV4dGVuZCghMCx7fSxvLmNvbmZpZy5nbG9iYWwsZSk7dmFyIGk9XCJibWRcIisoXCJcIisodC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpKSk7dHJ5e0tyKG4pW2ldKGUpLGRvY3VtZW50LmFycml2ZSYmby5jb25maWcuYXJyaXZlJiZzLmFycml2ZShuLGZ1bmN0aW9uKCl7S3IodGhpcylbaV0oZSl9KX1jYXRjaCh0KXt2YXIgcj1cIkZhaWxlZCB0byBpbnN0YW50aWF0ZSBjb21wb25lbnQ6ICQoJ1wiK24rXCInKVtcIitpK1wiXShcIitlK1wiKVwiO3Rocm93IGNvbnNvbGUuZXJyb3Iocix0LFwiXFxuU2VsZWN0ZWQgZWxlbWVudHM6IFwiLEtyKG4pKSx0fX19LGk9dGhpcy5jb25maWcuaW5zdGFudGlhdGlvbixyPUFycmF5LmlzQXJyYXkoaSksYT0wO2ZvcihpPXI/aTppW1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgbDtpZihyKXtpZihhPj1pLmxlbmd0aClicmVhaztsPWlbYSsrXX1lbHNle2lmKChhPWkubmV4dCgpKS5kb25lKWJyZWFrO2w9YS52YWx1ZX1uKGwpfX12YXIgdD1pLnByb3RvdHlwZTtyZXR1cm4gdC5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy4kZWxlbWVudC5kYXRhKFZyLG51bGwpLHRoaXMuJGVsZW1lbnQ9bnVsbCx0aGlzLmNvbmZpZz1udWxsfSx0Ll9yZXNvbHZlU2VsZWN0b3I9ZnVuY3Rpb24odCl7dmFyIGU9dC5zZWxlY3RvcjtyZXR1cm4gQXJyYXkuaXNBcnJheShlKSYmKGU9ZS5qb2luKFwiLCBcIikpLGV9LGkuX2pRdWVyeUludGVyZmFjZT1mdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9S3IodGhpcyksZT10LmRhdGEoVnIpO2V8fChlPW5ldyBpKHQsbiksdC5kYXRhKFZyLGUpKX0pfSxpfSgpLEtyLmZuW1lyXT1aci5falF1ZXJ5SW50ZXJmYWNlLEtyLmZuW1lyXS5Db25zdHJ1Y3Rvcj1acixLci5mbltZcl0ubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBLci5mbltZcl09enIsWnIuX2pRdWVyeUludGVyZmFjZX19KTsiLCIvKiEgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKlxuICogTWF0ZXJpYWwgS2l0IFBSTyAtIHYyLjAuMiAoQm9vdHN0cmFwIDQuMC4wIEZpbmFsIEVkaXRpb24pXG4gKlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKlxuICogUHJvZHVjdCBQYWdlOiBodHRwczovL3d3dy5jcmVhdGl2ZS10aW0uY29tL3Byb2R1Y3QvbWF0ZXJpYWwta2l0LXByb1xuICogQXZhaWxhYmxlIHdpdGggcHVyY2hhc2Ugb2YgbGljZW5zZSBmcm9tIGh0dHA6Ly93d3cuY3JlYXRpdmUtdGltLmNvbS9wcm9kdWN0L21hdGVyaWFsLWtpdC1wcm9cbiAqIENvcHlyaWdodCAyMDE3IENyZWF0aXZlIFRpbSAoaHR0cHM6Ly93d3cuY3JlYXRpdmUtdGltLmNvbSlcbiAqIExpY2Vuc2UgQ3JlYXRpdmUgVGltIChodHRwczovL3d3dy5jcmVhdGl2ZS10aW0uY29tL2xpY2Vuc2UpXG4gKlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cbnZhciBiaWdfaW1hZ2U7XG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgIEJyb3dzZXJEZXRlY3QuaW5pdCgpO1xuXG4gICAgLy8gSW5pdCBNYXRlcmlhbCBzY3JpcHRzIGZvciBidXR0b25zIHJpcHBsZXMsIGlucHV0cyBhbmltYXRpb25zIGV0YywgbW9yZSBpbmZvIG9uIHRoZSBuZXh0IGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL0ZlelZyYXN0YS9ib290c3RyYXAtbWF0ZXJpYWwtZGVzaWduI21hdGVyaWFsanNcbiAgICAkKCdib2R5JykuYm9vdHN0cmFwTWF0ZXJpYWxEZXNpZ24oKTtcblxuICAgIHdpbmRvd193aWR0aCA9ICQod2luZG93KS53aWR0aCgpO1xuXG4gICAgJG5hdmJhciA9ICQoJy5uYXZiYXJbY29sb3Itb24tc2Nyb2xsXScpO1xuICAgIHNjcm9sbF9kaXN0YW5jZSA9ICRuYXZiYXIuYXR0cignY29sb3Itb24tc2Nyb2xsJykgfHwgNTAwO1xuXG4gICAgJG5hdmJhcl9jb2xsYXBzZSA9ICQoJy5uYXZiYXInKS5maW5kKCcubmF2YmFyLWNvbGxhcHNlJyk7XG5cbiAgICAvLyAgQWN0aXZhdGUgdGhlIFRvb2x0aXBzXG4gICAgJCgnW2RhdGEtdG9nZ2xlPVwidG9vbHRpcFwiXSwgW3JlbD1cInRvb2x0aXBcIl0nKS50b29sdGlwKCk7XG5cblxuICAgIC8vIEZpbGVJbnB1dFxuICAgICQoJy5mb3JtLWZpbGUtc2ltcGxlIC5pbnB1dEZpbGVWaXNpYmxlJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgICQodGhpcykuc2libGluZ3MoJy5pbnB1dEZpbGVIaWRkZW4nKS50cmlnZ2VyKCdjbGljaycpO1xuICAgIH0pO1xuXG4gICAgJCgnLmZvcm0tZmlsZS1zaW1wbGUgLmlucHV0RmlsZUhpZGRlbicpLmNoYW5nZShmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGZpbGVuYW1lID0gJCh0aGlzKS52YWwoKS5yZXBsYWNlKC9DOlxcXFxmYWtlcGF0aFxcXFwvaSwgJycpO1xuICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCcuaW5wdXRGaWxlVmlzaWJsZScpLnZhbChmaWxlbmFtZSk7XG4gICAgfSk7XG5cbiAgICAkKCcuZm9ybS1maWxlLW11bHRpcGxlIC5pbnB1dEZpbGVWaXNpYmxlLCAuZm9ybS1maWxlLW11bHRpcGxlIC5pbnB1dC1ncm91cC1idG4nKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5maW5kKCcuaW5wdXRGaWxlSGlkZGVuJykudHJpZ2dlcignY2xpY2snKTtcbiAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5hZGRDbGFzcygnaXMtZm9jdXNlZCcpO1xuICAgIH0pO1xuXG4gICAgJCgnLmZvcm0tZmlsZS1tdWx0aXBsZSAuaW5wdXRGaWxlSGlkZGVuJykuY2hhbmdlKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbmFtZXMgPSAnJztcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkKHRoaXMpLmdldCgwKS5maWxlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgaWYgKGkgPCAkKHRoaXMpLmdldCgwKS5maWxlcy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgbmFtZXMgKz0gJCh0aGlzKS5nZXQoMCkuZmlsZXMuaXRlbShpKS5uYW1lICsgJywnO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBuYW1lcyArPSAkKHRoaXMpLmdldCgwKS5maWxlcy5pdGVtKGkpLm5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnLmlucHV0LWdyb3VwJykuZmluZCgnLmlucHV0RmlsZVZpc2libGUnKS52YWwobmFtZXMpO1xuICAgIH0pO1xuXG4gICAgJCgnLmZvcm0tZmlsZS1tdWx0aXBsZSAuYnRuJykub24oJ2ZvY3VzJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICQodGhpcykucGFyZW50KCkuc2libGluZ3MoKS50cmlnZ2VyKCdmb2N1cycpO1xuICAgIH0pO1xuXG4gICAgJCgnLmZvcm0tZmlsZS1tdWx0aXBsZSAuYnRuJykub24oJ2ZvY3Vzb3V0JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICQodGhpcykucGFyZW50KCkuc2libGluZ3MoKS50cmlnZ2VyKCdmb2N1c291dCcpO1xuICAgIH0pO1xuXG4gICAgLy8gICAgQWN0aXZhdGUgYm9vdHN0cmFwLXNlbGVjdFxuICAgIGlmICgkKFwiLnNlbGVjdHBpY2tlclwiKS5sZW5ndGggIT0gMCkge1xuICAgICAgICAkKFwiLnNlbGVjdHBpY2tlclwiKS5zZWxlY3RwaWNrZXIoKTtcbiAgICB9XG5cbiAgICAvLyBBY3RpdmF0ZSBQb3BvdmVyc1xuICAgICQoJ1tkYXRhLXRvZ2dsZT1cInBvcG92ZXJcIl0nKS5wb3BvdmVyKCk7XG5cbiAgICAvLyBBY3RpdmUgQ2Fyb3VzZWxcbiAgICAkKCcuY2Fyb3VzZWwnKS5jYXJvdXNlbCh7XG4gICAgICAgIGludGVydmFsOiAzMDAwXG4gICAgfSk7XG5cbiAgICAvL0FjdGl2YXRlIHRhZ3NcbiAgICAvLyB3ZSBzdHlsZSB0aGUgYmFkZ2VzIHdpdGggb3VyIGNvbG9yc1xuICAgIHZhciB0YWdDbGFzcyA9ICQoJy50YWdzaW5wdXQnKS5kYXRhKCdjb2xvcicpO1xuXG4gICAgaWYgKCQoXCIudGFnc2lucHV0XCIpLmxlbmd0aCAhPSAwKSB7XG4gICAgICAgICQoJy50YWdzaW5wdXQnKS50YWdzaW5wdXQoKTtcbiAgICB9XG5cbiAgICAkKCcuYm9vdHN0cmFwLXRhZ3NpbnB1dCcpLmFkZENsYXNzKCcnICsgdGFnQ2xhc3MgKyAnLWJhZGdlJyk7XG5cbiAgICBpZiAoJCgnLm5hdmJhci1jb2xvci1vbi1zY3JvbGwnKS5sZW5ndGggIT0gMCkge1xuICAgICAgICAkKHdpbmRvdykub24oJ3Njcm9sbCcsIG1hdGVyaWFsS2l0LmNoZWNrU2Nyb2xsRm9yVHJhbnNwYXJlbnROYXZiYXIpO1xuICAgIH1cblxuICAgIG1hdGVyaWFsS2l0LmNoZWNrU2Nyb2xsRm9yVHJhbnNwYXJlbnROYXZiYXIoKTtcblxuICAgIGlmICh3aW5kb3dfd2lkdGggPj0gNzY4KSB7XG4gICAgICAgIGJpZ19pbWFnZSA9ICQoJy5wYWdlLWhlYWRlcltkYXRhLXBhcmFsbGF4PVwidHJ1ZVwiXScpO1xuICAgICAgICBpZiAoYmlnX2ltYWdlLmxlbmd0aCAhPSAwKSB7XG4gICAgICAgICAgICAkKHdpbmRvdykub24oJ3Njcm9sbCcsIG1hdGVyaWFsS2l0LmNoZWNrU2Nyb2xsRm9yUGFyYWxsYXgpO1xuICAgICAgICB9XG5cbiAgICB9XG59KTtcblxuJCh3aW5kb3cpLm9uKFwibG9hZFwiLCBmdW5jdGlvbigpIHtcbiAgICAvL2luaXRpYWxpc2Ugcm90YXRpbmcgY2FyZHNcbiAgICBtYXRlcmlhbEtpdC5pbml0Um90YXRlQ2FyZCgpO1xuXG4gICAgLy9pbml0aWFsaXNlIGNvbG9yZWQgc2hhZG93XG4gICAgbWF0ZXJpYWxLaXQuaW5pdENvbG9yZWRTaGFkb3dzKCk7XG59KTtcblxuJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5jYXJkLXJvdGF0ZSAuYnRuLXJvdGF0ZScsIGZ1bmN0aW9uKCkge1xuICAgIHZhciAkcm90YXRpbmdfY2FyZF9jb250YWluZXIgPSAkKHRoaXMpLmNsb3Nlc3QoJy5yb3RhdGluZy1jYXJkLWNvbnRhaW5lcicpO1xuXG4gICAgaWYgKCRyb3RhdGluZ19jYXJkX2NvbnRhaW5lci5oYXNDbGFzcygnaG92ZXInKSkge1xuICAgICAgICAkcm90YXRpbmdfY2FyZF9jb250YWluZXIucmVtb3ZlQ2xhc3MoJ2hvdmVyJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgJHJvdGF0aW5nX2NhcmRfY29udGFpbmVyLmFkZENsYXNzKCdob3ZlcicpO1xuICAgIH1cbn0pO1xuXG4kKGRvY3VtZW50KS5vbignY2xpY2snLCAnLm5hdmJhci10b2dnbGVyJywgZnVuY3Rpb24oKSB7XG4gICAgJHRvZ2dsZSA9ICQodGhpcyk7XG5cbiAgICBpZiAobWF0ZXJpYWxLaXQubWlzYy5uYXZiYXJfbWVudV92aXNpYmxlID09IDEpIHtcbiAgICAgICAgJCgnaHRtbCcpLnJlbW92ZUNsYXNzKCduYXYtb3BlbicpO1xuICAgICAgICBtYXRlcmlhbEtpdC5taXNjLm5hdmJhcl9tZW51X3Zpc2libGUgPSAwO1xuICAgICAgICAkKCcjYm9keUNsaWNrJykucmVtb3ZlKCk7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkdG9nZ2xlLnJlbW92ZUNsYXNzKCd0b2dnbGVkJyk7XG4gICAgICAgIH0sIDU1MCk7XG5cbiAgICAgICAgJCgnaHRtbCcpLnJlbW92ZUNsYXNzKCduYXYtb3Blbi1hYnNvbHV0ZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkdG9nZ2xlLmFkZENsYXNzKCd0b2dnbGVkJyk7XG4gICAgICAgIH0sIDU4MCk7XG5cblxuICAgICAgICBkaXYgPSAnPGRpdiBpZD1cImJvZHlDbGlja1wiPjwvZGl2Pic7XG4gICAgICAgICQoZGl2KS5hcHBlbmRUbyhcImJvZHlcIikuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKCdodG1sJykucmVtb3ZlQ2xhc3MoJ25hdi1vcGVuJyk7XG5cbiAgICAgICAgICAgIGlmICgkKCduYXYnKS5oYXNDbGFzcygnbmF2YmFyLWFic29sdXRlJykpIHtcbiAgICAgICAgICAgICAgICAkKCdodG1sJykucmVtb3ZlQ2xhc3MoJ25hdi1vcGVuLWFic29sdXRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtYXRlcmlhbEtpdC5taXNjLm5hdmJhcl9tZW51X3Zpc2libGUgPSAwO1xuICAgICAgICAgICAgJCgnI2JvZHlDbGljaycpLnJlbW92ZSgpO1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkdG9nZ2xlLnJlbW92ZUNsYXNzKCd0b2dnbGVkJyk7XG4gICAgICAgICAgICB9LCA1NTApO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoJCgnbmF2JykuaGFzQ2xhc3MoJ25hdmJhci1hYnNvbHV0ZScpKSB7XG4gICAgICAgICAgICAkKCdodG1sJykuYWRkQ2xhc3MoJ25hdi1vcGVuLWFic29sdXRlJyk7XG4gICAgICAgIH1cblxuICAgICAgICAkKCdodG1sJykuYWRkQ2xhc3MoJ25hdi1vcGVuJyk7XG4gICAgICAgIG1hdGVyaWFsS2l0Lm1pc2MubmF2YmFyX21lbnVfdmlzaWJsZSA9IDE7XG4gICAgfVxufSk7XG5cbiQod2luZG93KS5vbigncmVzaXplJywgZnVuY3Rpb24oKSB7XG4gICAgbWF0ZXJpYWxLaXQuaW5pdFJvdGF0ZUNhcmQoKTtcbn0pO1xuXG5tYXRlcmlhbEtpdCA9IHtcbiAgICBtaXNjOiB7XG4gICAgICAgIG5hdmJhcl9tZW51X3Zpc2libGU6IDAsXG4gICAgICAgIHdpbmRvd193aWR0aDogMCxcbiAgICAgICAgdHJhbnNwYXJlbnQ6IHRydWUsXG4gICAgICAgIGNvbG9yZWRfc2hhZG93czogdHJ1ZSxcbiAgICAgICAgZml4ZWRUb3A6IGZhbHNlLFxuICAgICAgICBuYXZiYXJfaW5pdGlhbGl6ZWQ6IGZhbHNlLFxuICAgICAgICBpc1dpbmRvdzogZG9jdW1lbnQuZG9jdW1lbnRNb2RlIHx8IC9FZGdlLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpXG4gICAgfSxcblxuICAgIGNoZWNrU2Nyb2xsRm9yUGFyYWxsYXg6IGZ1bmN0aW9uKCkge1xuICAgICAgICBvVmFsID0gKCQod2luZG93KS5zY3JvbGxUb3AoKSAvIDMpO1xuICAgICAgICBiaWdfaW1hZ2UuY3NzKHtcbiAgICAgICAgICAgICd0cmFuc2Zvcm0nOiAndHJhbnNsYXRlM2QoMCwnICsgb1ZhbCArICdweCwwKScsXG4gICAgICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiAndHJhbnNsYXRlM2QoMCwnICsgb1ZhbCArICdweCwwKScsXG4gICAgICAgICAgICAnLW1zLXRyYW5zZm9ybSc6ICd0cmFuc2xhdGUzZCgwLCcgKyBvVmFsICsgJ3B4LDApJyxcbiAgICAgICAgICAgICctby10cmFuc2Zvcm0nOiAndHJhbnNsYXRlM2QoMCwnICsgb1ZhbCArICdweCwwKSdcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIGluaXRGb3JtRXh0ZW5kZWREYXRldGltZXBpY2tlcnM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAkKCcuZGF0ZXRpbWVwaWNrZXInKS5kYXRldGltZXBpY2tlcih7XG4gICAgICAgICAgICBpY29uczoge1xuICAgICAgICAgICAgICAgIHRpbWU6IFwiZmEgZmEtY2xvY2stb1wiLFxuICAgICAgICAgICAgICAgIGRhdGU6IFwiZmEgZmEtY2FsZW5kYXJcIixcbiAgICAgICAgICAgICAgICB1cDogXCJmYSBmYS1jaGV2cm9uLXVwXCIsXG4gICAgICAgICAgICAgICAgZG93bjogXCJmYSBmYS1jaGV2cm9uLWRvd25cIixcbiAgICAgICAgICAgICAgICBwcmV2aW91czogJ2ZhIGZhLWNoZXZyb24tbGVmdCcsXG4gICAgICAgICAgICAgICAgbmV4dDogJ2ZhIGZhLWNoZXZyb24tcmlnaHQnLFxuICAgICAgICAgICAgICAgIHRvZGF5OiAnZmEgZmEtc2NyZWVuc2hvdCcsXG4gICAgICAgICAgICAgICAgY2xlYXI6ICdmYSBmYS10cmFzaCcsXG4gICAgICAgICAgICAgICAgY2xvc2U6ICdmYSBmYS1yZW1vdmUnXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoJy5kYXRlcGlja2VyJykuZGF0ZXRpbWVwaWNrZXIoe1xuICAgICAgICAgICAgZm9ybWF0OiAnTU0vREQvWVlZWScsXG4gICAgICAgICAgICBpY29uczoge1xuICAgICAgICAgICAgICAgIHRpbWU6IFwiZmEgZmEtY2xvY2stb1wiLFxuICAgICAgICAgICAgICAgIGRhdGU6IFwiZmEgZmEtY2FsZW5kYXJcIixcbiAgICAgICAgICAgICAgICB1cDogXCJmYSBmYS1jaGV2cm9uLXVwXCIsXG4gICAgICAgICAgICAgICAgZG93bjogXCJmYSBmYS1jaGV2cm9uLWRvd25cIixcbiAgICAgICAgICAgICAgICBwcmV2aW91czogJ2ZhIGZhLWNoZXZyb24tbGVmdCcsXG4gICAgICAgICAgICAgICAgbmV4dDogJ2ZhIGZhLWNoZXZyb24tcmlnaHQnLFxuICAgICAgICAgICAgICAgIHRvZGF5OiAnZmEgZmEtc2NyZWVuc2hvdCcsXG4gICAgICAgICAgICAgICAgY2xlYXI6ICdmYSBmYS10cmFzaCcsXG4gICAgICAgICAgICAgICAgY2xvc2U6ICdmYSBmYS1yZW1vdmUnXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoJy50aW1lcGlja2VyJykuZGF0ZXRpbWVwaWNrZXIoe1xuICAgICAgICAgICAgLy8gICAgICAgICAgZm9ybWF0OiAnSDptbScsICAgIC8vIHVzZSB0aGlzIGZvcm1hdCBpZiB5b3Ugd2FudCB0aGUgMjRob3VycyB0aW1lcGlja2VyXG4gICAgICAgICAgICBmb3JtYXQ6ICdoOm1tIEEnLCAvL3VzZSB0aGlzIGZvcm1hdCBpZiB5b3Ugd2FudCB0aGUgMTJob3VycyB0aW1waWVja2VyIHdpdGggQU0vUE0gdG9nZ2xlXG4gICAgICAgICAgICBpY29uczoge1xuICAgICAgICAgICAgICAgIHRpbWU6IFwiZmEgZmEtY2xvY2stb1wiLFxuICAgICAgICAgICAgICAgIGRhdGU6IFwiZmEgZmEtY2FsZW5kYXJcIixcbiAgICAgICAgICAgICAgICB1cDogXCJmYSBmYS1jaGV2cm9uLXVwXCIsXG4gICAgICAgICAgICAgICAgZG93bjogXCJmYSBmYS1jaGV2cm9uLWRvd25cIixcbiAgICAgICAgICAgICAgICBwcmV2aW91czogJ2ZhIGZhLWNoZXZyb24tbGVmdCcsXG4gICAgICAgICAgICAgICAgbmV4dDogJ2ZhIGZhLWNoZXZyb24tcmlnaHQnLFxuICAgICAgICAgICAgICAgIHRvZGF5OiAnZmEgZmEtc2NyZWVuc2hvdCcsXG4gICAgICAgICAgICAgICAgY2xlYXI6ICdmYSBmYS10cmFzaCcsXG4gICAgICAgICAgICAgICAgY2xvc2U6ICdmYSBmYS1yZW1vdmUnXG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcblxuXG4gICAgaW5pdFNsaWRlcnM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBTbGlkZXJzIGZvciBkZW1vIHB1cnBvc2VcbiAgICAgICAgdmFyIHNsaWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzbGlkZXJSZWd1bGFyJyk7XG5cbiAgICAgICAgbm9VaVNsaWRlci5jcmVhdGUoc2xpZGVyLCB7XG4gICAgICAgICAgICBzdGFydDogNDAsXG4gICAgICAgICAgICBjb25uZWN0OiBbdHJ1ZSwgZmFsc2VdLFxuICAgICAgICAgICAgcmFuZ2U6IHtcbiAgICAgICAgICAgICAgICBtaW46IDAsXG4gICAgICAgICAgICAgICAgbWF4OiAxMDBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIHNsaWRlcjIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2xpZGVyRG91YmxlJyk7XG5cbiAgICAgICAgbm9VaVNsaWRlci5jcmVhdGUoc2xpZGVyMiwge1xuICAgICAgICAgICAgc3RhcnQ6IFsyMCwgNjBdLFxuICAgICAgICAgICAgY29ubmVjdDogdHJ1ZSxcbiAgICAgICAgICAgIHJhbmdlOiB7XG4gICAgICAgICAgICAgICAgbWluOiAwLFxuICAgICAgICAgICAgICAgIG1heDogMTAwXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sXG5cblxuICAgIGluaXRDb2xvcmVkU2hhZG93czogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChtYXRlcmlhbEtpdC5taXNjLmNvbG9yZWRfc2hhZG93cyA9PSB0cnVlKSB7XG4gICAgICAgICAgICBpZiAoIShCcm93c2VyRGV0ZWN0LmJyb3dzZXIgPT0gJ0V4cGxvcmVyJyAmJiBCcm93c2VyRGV0ZWN0LnZlcnNpb24gPD0gMTIpKSB7XG4gICAgICAgICAgICAgICAgJCgnLmNhcmQ6bm90KFtkYXRhLWNvbG9yZWQtc2hhZG93PVwiZmFsc2VcIl0pIC5jYXJkLWhlYWRlci1pbWFnZScpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICRjYXJkX2ltZyA9ICQodGhpcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaXNfb25fZGFya19zY3JlZW4gPSAkKHRoaXMpLmNsb3Nlc3QoJy5zZWN0aW9uLWRhcmssIC5zZWN0aW9uLWltYWdlJykubGVuZ3RoO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIHdlIGJsb2NrIHRoZSBnZW5lcmF0b3Igb2YgdGhlIGNvbG9yZWQgc2hhZG93cyBvbiBkYXJrIHNlY3Rpb25zLCBiZWNhdXNlIHRoZXkgYXJlIG5vdCBuYXR1cmFsXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc19vbl9kYXJrX3NjcmVlbiA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW1nX3NvdXJjZSA9ICRjYXJkX2ltZy5maW5kKCdpbWcnKS5hdHRyKCdzcmMnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc19yb3RhdGluZyA9ICRjYXJkX2ltZy5jbG9zZXN0KCcuY2FyZC1yb3RhdGUnKS5sZW5ndGggPT0gMSA/IHRydWUgOiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkYXBwZW5kX2RpdiA9ICRjYXJkX2ltZztcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbG9yZWRfc2hhZG93X2RpdiA9ICQoJzxkaXYgY2xhc3M9XCJjb2xvcmVkLXNoYWRvd1wiLz4nKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzX3JvdGF0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhcmRfaW1hZ2VfaGVpZ2h0ID0gJGNhcmRfaW1nLmhlaWdodCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYXJkX2ltYWdlX3dpZHRoID0gJGNhcmRfaW1nLndpZHRoKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5iYWNrJykuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2hlaWdodCc6IGNhcmRfaW1hZ2VfaGVpZ2h0ICsgJ3B4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3dpZHRoJzogY2FyZF9pbWFnZV93aWR0aCArICdweCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkYXBwZW5kX2RpdiA9ICRjYXJkX2ltZy5maW5kKCcuZnJvbnQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3JlZF9zaGFkb3dfZGl2LmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2JhY2tncm91bmQtaW1hZ2UnOiAndXJsKCcgKyBpbWdfc291cmNlICsgJyknXG4gICAgICAgICAgICAgICAgICAgICAgICB9KS5hcHBlbmRUbygkYXBwZW5kX2Rpdik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkY2FyZF9pbWcud2lkdGgoKSA+IDcwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yZWRfc2hhZG93X2Rpdi5hZGRDbGFzcygnY29sb3JlZC1zaGFkb3ctYmlnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3JlZF9zaGFkb3dfZGl2LmNzcygnb3BhY2l0eScsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMjAwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgaW5pdFJvdGF0ZUNhcmQ6IGRlYm91bmNlKGZ1bmN0aW9uKCkge1xuICAgICAgICAkKCcucm90YXRpbmctY2FyZC1jb250YWluZXIgLmNhcmQtcm90YXRlJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG5cbiAgICAgICAgICAgIHZhciBjYXJkX3dpZHRoID0gJCh0aGlzKS5wYXJlbnQoKS53aWR0aCgpO1xuICAgICAgICAgICAgdmFyIGNhcmRfaGVpZ2h0ID0gJCh0aGlzKS5maW5kKCcuZnJvbnQgLmNhcmQtYm9keScpLm91dGVySGVpZ2h0KCk7XG5cbiAgICAgICAgICAgICR0aGlzLnBhcmVudCgpLmNzcyh7XG4gICAgICAgICAgICAgICAgJ2hlaWdodCc6IGNhcmRfaGVpZ2h0ICsgJ3B4JyxcbiAgICAgICAgICAgICAgICAnbWFyZ2luLWJvdHRvbSc6IDMwICsgJ3B4J1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICR0aGlzLmZpbmQoJy5mcm9udCcpLmNzcyh7XG4gICAgICAgICAgICAgICAgJ2hlaWdodCc6IGNhcmRfaGVpZ2h0ICsgMzUgKyAncHgnLFxuICAgICAgICAgICAgICAgICd3aWR0aCc6IGNhcmRfd2lkdGggKyAncHgnLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICR0aGlzLmZpbmQoJy5iYWNrJykuY3NzKHtcbiAgICAgICAgICAgICAgICAnaGVpZ2h0JzogY2FyZF9oZWlnaHQgKyAzNSArICdweCcsXG4gICAgICAgICAgICAgICAgJ3dpZHRoJzogY2FyZF93aWR0aCArICdweCcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSwgNTApLFxuXG4gICAgY2hlY2tTY3JvbGxGb3JUcmFuc3BhcmVudE5hdmJhcjogZGVib3VuY2UoZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgkKGRvY3VtZW50KS5zY3JvbGxUb3AoKSA+IHNjcm9sbF9kaXN0YW5jZSkge1xuICAgICAgICAgICAgaWYgKG1hdGVyaWFsS2l0Lm1pc2MudHJhbnNwYXJlbnQpIHtcbiAgICAgICAgICAgICAgICBtYXRlcmlhbEtpdC5taXNjLnRyYW5zcGFyZW50ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgJCgnLm5hdmJhci1jb2xvci1vbi1zY3JvbGwnKS5yZW1vdmVDbGFzcygnbmF2YmFyLXRyYW5zcGFyZW50Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoIW1hdGVyaWFsS2l0Lm1pc2MudHJhbnNwYXJlbnQpIHtcbiAgICAgICAgICAgICAgICBtYXRlcmlhbEtpdC5taXNjLnRyYW5zcGFyZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAkKCcubmF2YmFyLWNvbG9yLW9uLXNjcm9sbCcpLmFkZENsYXNzKCduYXZiYXItdHJhbnNwYXJlbnQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIDE3KVxufTtcbi8vIFJldHVybnMgYSBmdW5jdGlvbiwgdGhhdCwgYXMgbG9uZyBhcyBpdCBjb250aW51ZXMgdG8gYmUgaW52b2tlZCwgd2lsbCBub3Rcbi8vIGJlIHRyaWdnZXJlZC4gVGhlIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIGFmdGVyIGl0IHN0b3BzIGJlaW5nIGNhbGxlZCBmb3Jcbi8vIE4gbWlsbGlzZWNvbmRzLiBJZiBgaW1tZWRpYXRlYCBpcyBwYXNzZWQsIHRyaWdnZXIgdGhlIGZ1bmN0aW9uIG9uIHRoZVxuLy8gbGVhZGluZyBlZGdlLCBpbnN0ZWFkIG9mIHRoZSB0cmFpbGluZy5cblxuZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCwgaW1tZWRpYXRlKSB7XG4gICAgdmFyIHRpbWVvdXQ7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY29udGV4dCA9IHRoaXMsXG4gICAgICAgICAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICAgICAgICBpZiAoIWltbWVkaWF0ZSkgZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgfSwgd2FpdCk7XG4gICAgICAgIGlmIChpbW1lZGlhdGUgJiYgIXRpbWVvdXQpIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgfTtcbn1cblxudmFyIEJyb3dzZXJEZXRlY3QgPSB7XG4gICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuYnJvd3NlciA9IHRoaXMuc2VhcmNoU3RyaW5nKHRoaXMuZGF0YUJyb3dzZXIpIHx8IFwiT3RoZXJcIjtcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gdGhpcy5zZWFyY2hWZXJzaW9uKG5hdmlnYXRvci51c2VyQWdlbnQpIHx8IHRoaXMuc2VhcmNoVmVyc2lvbihuYXZpZ2F0b3IuYXBwVmVyc2lvbikgfHwgXCJVbmtub3duXCI7XG4gICAgfSxcbiAgICBzZWFyY2hTdHJpbmc6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgZGF0YVN0cmluZyA9IGRhdGFbaV0uc3RyaW5nO1xuICAgICAgICAgICAgdGhpcy52ZXJzaW9uU2VhcmNoU3RyaW5nID0gZGF0YVtpXS5zdWJTdHJpbmc7XG5cbiAgICAgICAgICAgIGlmIChkYXRhU3RyaW5nLmluZGV4T2YoZGF0YVtpXS5zdWJTdHJpbmcpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhW2ldLmlkZW50aXR5O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICBzZWFyY2hWZXJzaW9uOiBmdW5jdGlvbihkYXRhU3RyaW5nKSB7XG4gICAgICAgIHZhciBpbmRleCA9IGRhdGFTdHJpbmcuaW5kZXhPZih0aGlzLnZlcnNpb25TZWFyY2hTdHJpbmcpO1xuICAgICAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcnYgPSBkYXRhU3RyaW5nLmluZGV4T2YoXCJydjpcIik7XG4gICAgICAgIGlmICh0aGlzLnZlcnNpb25TZWFyY2hTdHJpbmcgPT09IFwiVHJpZGVudFwiICYmIHJ2ICE9PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoZGF0YVN0cmluZy5zdWJzdHJpbmcocnYgKyAzKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VGbG9hdChkYXRhU3RyaW5nLnN1YnN0cmluZyhpbmRleCArIHRoaXMudmVyc2lvblNlYXJjaFN0cmluZy5sZW5ndGggKyAxKSk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgZGF0YUJyb3dzZXI6IFt7XG4gICAgICAgICAgICBzdHJpbmc6IG5hdmlnYXRvci51c2VyQWdlbnQsXG4gICAgICAgICAgICBzdWJTdHJpbmc6IFwiQ2hyb21lXCIsXG4gICAgICAgICAgICBpZGVudGl0eTogXCJDaHJvbWVcIlxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBzdHJpbmc6IG5hdmlnYXRvci51c2VyQWdlbnQsXG4gICAgICAgICAgICBzdWJTdHJpbmc6IFwiTVNJRVwiLFxuICAgICAgICAgICAgaWRlbnRpdHk6IFwiRXhwbG9yZXJcIlxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBzdHJpbmc6IG5hdmlnYXRvci51c2VyQWdlbnQsXG4gICAgICAgICAgICBzdWJTdHJpbmc6IFwiVHJpZGVudFwiLFxuICAgICAgICAgICAgaWRlbnRpdHk6IFwiRXhwbG9yZXJcIlxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBzdHJpbmc6IG5hdmlnYXRvci51c2VyQWdlbnQsXG4gICAgICAgICAgICBzdWJTdHJpbmc6IFwiRmlyZWZveFwiLFxuICAgICAgICAgICAgaWRlbnRpdHk6IFwiRmlyZWZveFwiXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIHN0cmluZzogbmF2aWdhdG9yLnVzZXJBZ2VudCxcbiAgICAgICAgICAgIHN1YlN0cmluZzogXCJTYWZhcmlcIixcbiAgICAgICAgICAgIGlkZW50aXR5OiBcIlNhZmFyaVwiXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIHN0cmluZzogbmF2aWdhdG9yLnVzZXJBZ2VudCxcbiAgICAgICAgICAgIHN1YlN0cmluZzogXCJPcGVyYVwiLFxuICAgICAgICAgICAgaWRlbnRpdHk6IFwiT3BlcmFcIlxuICAgICAgICB9XG4gICAgXVxuXG59O1xuXG52YXIgYmV0dGVyX2Jyb3dzZXIgPSAnPGRpdiBjbGFzcz1cImNvbnRhaW5lclwiPjxkaXYgY2xhc3M9XCJiZXR0ZXItYnJvd3NlciByb3dcIj48ZGl2IGNsYXNzPVwiY29sLW1kLTJcIj48L2Rpdj48ZGl2IGNsYXNzPVwiY29sLW1kLThcIj48aDM+V2UgYXJlIHNvcnJ5IGJ1dCBpdCBsb29rcyBsaWtlIHlvdXIgQnJvd3NlciBkb2VzblxcJ3Qgc3VwcG9ydCBvdXIgd2Vic2l0ZSBGZWF0dXJlcy4gSW4gb3JkZXIgdG8gZ2V0IHRoZSBmdWxsIGV4cGVyaWVuY2UgcGxlYXNlIGRvd25sb2FkIGEgbmV3IHZlcnNpb24gb2YgeW91ciBmYXZvdXJpdGUgYnJvd3Nlci48L2gzPjwvZGl2PjxkaXYgY2xhc3M9XCJjb2wtbWQtMlwiPjwvZGl2Pjxicj48ZGl2IGNsYXNzPVwiY29sLW1kLTRcIj48YSBocmVmPVwiaHR0cHM6Ly93d3cubW96aWxsYS5vcmcvcm8vZmlyZWZveC9uZXcvXCIgY2xhc3M9XCJidG4gYnRuLXdhcm5pbmdcIj5Nb3ppbGxhPC9hPjxicj48L2Rpdj48ZGl2IGNsYXNzPVwiY29sLW1kLTRcIj48YSBocmVmPVwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9jaHJvbWUvYnJvd3Nlci9kZXNrdG9wL2luZGV4Lmh0bWxcIiBjbGFzcz1cImJ0biBcIj5DaHJvbWU8L2E+PGJyPjwvZGl2PjxkaXYgY2xhc3M9XCJjb2wtbWQtNFwiPjxhIGhyZWY9XCJodHRwOi8vd2luZG93cy5taWNyb3NvZnQuY29tL2VuLXVzL2ludGVybmV0LWV4cGxvcmVyL2llLTExLXdvcmxkd2lkZS1sYW5ndWFnZXNcIiBjbGFzcz1cImJ0blwiPkludGVybmV0IEV4cGxvcmVyPC9hPjxicj48L2Rpdj48YnI+PGJyPjxoND5UaGFuayB5b3UhPC9oND48L2Rpdj48L2Rpdj4nOyIsInZhciBiaWdfaW1hZ2U7ZnVuY3Rpb24gZGVib3VuY2UoYSxpLHIpe3ZhciBuO3JldHVybiBmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1hcmd1bWVudHM7Y2xlYXJUaW1lb3V0KG4pLG49c2V0VGltZW91dChmdW5jdGlvbigpe249bnVsbCxyfHxhLmFwcGx5KGUsdCl9LGkpLHImJiFuJiZhLmFwcGx5KGUsdCl9fSQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7QnJvd3NlckRldGVjdC5pbml0KCksJChcImJvZHlcIikuYm9vdHN0cmFwTWF0ZXJpYWxEZXNpZ24oKSx3aW5kb3dfd2lkdGg9JCh3aW5kb3cpLndpZHRoKCksJG5hdmJhcj0kKFwiLm5hdmJhcltjb2xvci1vbi1zY3JvbGxdXCIpLHNjcm9sbF9kaXN0YW5jZT0kbmF2YmFyLmF0dHIoXCJjb2xvci1vbi1zY3JvbGxcIil8fDUwMCwkbmF2YmFyX2NvbGxhcHNlPSQoXCIubmF2YmFyXCIpLmZpbmQoXCIubmF2YmFyLWNvbGxhcHNlXCIpLCQoJ1tkYXRhLXRvZ2dsZT1cInRvb2x0aXBcIl0sIFtyZWw9XCJ0b29sdGlwXCJdJykudG9vbHRpcCgpLCQoXCIuZm9ybS1maWxlLXNpbXBsZSAuaW5wdXRGaWxlVmlzaWJsZVwiKS5jbGljayhmdW5jdGlvbigpeyQodGhpcykuc2libGluZ3MoXCIuaW5wdXRGaWxlSGlkZGVuXCIpLnRyaWdnZXIoXCJjbGlja1wiKX0pLCQoXCIuZm9ybS1maWxlLXNpbXBsZSAuaW5wdXRGaWxlSGlkZGVuXCIpLmNoYW5nZShmdW5jdGlvbigpe3ZhciBlPSQodGhpcykudmFsKCkucmVwbGFjZSgvQzpcXFxcZmFrZXBhdGhcXFxcL2ksXCJcIik7JCh0aGlzKS5zaWJsaW5ncyhcIi5pbnB1dEZpbGVWaXNpYmxlXCIpLnZhbChlKX0pLCQoXCIuZm9ybS1maWxlLW11bHRpcGxlIC5pbnB1dEZpbGVWaXNpYmxlLCAuZm9ybS1maWxlLW11bHRpcGxlIC5pbnB1dC1ncm91cC1idG5cIikuY2xpY2soZnVuY3Rpb24oKXskKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmZpbmQoXCIuaW5wdXRGaWxlSGlkZGVuXCIpLnRyaWdnZXIoXCJjbGlja1wiKSwkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmFkZENsYXNzKFwiaXMtZm9jdXNlZFwiKX0pLCQoXCIuZm9ybS1maWxlLW11bHRpcGxlIC5pbnB1dEZpbGVIaWRkZW5cIikuY2hhbmdlKGZ1bmN0aW9uKCl7Zm9yKHZhciBlPVwiXCIsdD0wO3Q8JCh0aGlzKS5nZXQoMCkuZmlsZXMubGVuZ3RoOysrdCl0PCQodGhpcykuZ2V0KDApLmZpbGVzLmxlbmd0aC0xP2UrPSQodGhpcykuZ2V0KDApLmZpbGVzLml0ZW0odCkubmFtZStcIixcIjplKz0kKHRoaXMpLmdldCgwKS5maWxlcy5pdGVtKHQpLm5hbWU7JCh0aGlzKS5zaWJsaW5ncyhcIi5pbnB1dC1ncm91cFwiKS5maW5kKFwiLmlucHV0RmlsZVZpc2libGVcIikudmFsKGUpfSksJChcIi5mb3JtLWZpbGUtbXVsdGlwbGUgLmJ0blwiKS5vbihcImZvY3VzXCIsZnVuY3Rpb24oKXskKHRoaXMpLnBhcmVudCgpLnNpYmxpbmdzKCkudHJpZ2dlcihcImZvY3VzXCIpfSksJChcIi5mb3JtLWZpbGUtbXVsdGlwbGUgLmJ0blwiKS5vbihcImZvY3Vzb3V0XCIsZnVuY3Rpb24oKXskKHRoaXMpLnBhcmVudCgpLnNpYmxpbmdzKCkudHJpZ2dlcihcImZvY3Vzb3V0XCIpfSksMCE9JChcIi5zZWxlY3RwaWNrZXJcIikubGVuZ3RoJiYkKFwiLnNlbGVjdHBpY2tlclwiKS5zZWxlY3RwaWNrZXIoKSwkKCdbZGF0YS10b2dnbGU9XCJwb3BvdmVyXCJdJykucG9wb3ZlcigpLCQoXCIuY2Fyb3VzZWxcIikuY2Fyb3VzZWwoe2ludGVydmFsOjNlM30pO3ZhciBlPSQoXCIudGFnc2lucHV0XCIpLmRhdGEoXCJjb2xvclwiKTswIT0kKFwiLnRhZ3NpbnB1dFwiKS5sZW5ndGgmJiQoXCIudGFnc2lucHV0XCIpLnRhZ3NpbnB1dCgpLCQoXCIuYm9vdHN0cmFwLXRhZ3NpbnB1dFwiKS5hZGRDbGFzcyhlK1wiLWJhZGdlXCIpLDAhPSQoXCIubmF2YmFyLWNvbG9yLW9uLXNjcm9sbFwiKS5sZW5ndGgmJiQod2luZG93KS5vbihcInNjcm9sbFwiLG1hdGVyaWFsS2l0LmNoZWNrU2Nyb2xsRm9yVHJhbnNwYXJlbnROYXZiYXIpLG1hdGVyaWFsS2l0LmNoZWNrU2Nyb2xsRm9yVHJhbnNwYXJlbnROYXZiYXIoKSw3Njg8PXdpbmRvd193aWR0aCYmMCE9KGJpZ19pbWFnZT0kKCcucGFnZS1oZWFkZXJbZGF0YS1wYXJhbGxheD1cInRydWVcIl0nKSkubGVuZ3RoJiYkKHdpbmRvdykub24oXCJzY3JvbGxcIixtYXRlcmlhbEtpdC5jaGVja1Njcm9sbEZvclBhcmFsbGF4KX0pLCQod2luZG93KS5vbihcImxvYWRcIixmdW5jdGlvbigpe21hdGVyaWFsS2l0LmluaXRSb3RhdGVDYXJkKCksbWF0ZXJpYWxLaXQuaW5pdENvbG9yZWRTaGFkb3dzKCl9KSwkKGRvY3VtZW50KS5vbihcImNsaWNrXCIsXCIuY2FyZC1yb3RhdGUgLmJ0bi1yb3RhdGVcIixmdW5jdGlvbigpe3ZhciBlPSQodGhpcykuY2xvc2VzdChcIi5yb3RhdGluZy1jYXJkLWNvbnRhaW5lclwiKTtlLmhhc0NsYXNzKFwiaG92ZXJcIik/ZS5yZW1vdmVDbGFzcyhcImhvdmVyXCIpOmUuYWRkQ2xhc3MoXCJob3ZlclwiKX0pLCQoZG9jdW1lbnQpLm9uKFwiY2xpY2tcIixcIi5uYXZiYXItdG9nZ2xlclwiLGZ1bmN0aW9uKCl7JHRvZ2dsZT0kKHRoaXMpLDE9PW1hdGVyaWFsS2l0Lm1pc2MubmF2YmFyX21lbnVfdmlzaWJsZT8oJChcImh0bWxcIikucmVtb3ZlQ2xhc3MoXCJuYXYtb3BlblwiKSxtYXRlcmlhbEtpdC5taXNjLm5hdmJhcl9tZW51X3Zpc2libGU9MCwkKFwiI2JvZHlDbGlja1wiKS5yZW1vdmUoKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7JHRvZ2dsZS5yZW1vdmVDbGFzcyhcInRvZ2dsZWRcIil9LDU1MCksJChcImh0bWxcIikucmVtb3ZlQ2xhc3MoXCJuYXYtb3Blbi1hYnNvbHV0ZVwiKSk6KHNldFRpbWVvdXQoZnVuY3Rpb24oKXskdG9nZ2xlLmFkZENsYXNzKFwidG9nZ2xlZFwiKX0sNTgwKSxkaXY9JzxkaXYgaWQ9XCJib2R5Q2xpY2tcIj48L2Rpdj4nLCQoZGl2KS5hcHBlbmRUbyhcImJvZHlcIikuY2xpY2soZnVuY3Rpb24oKXskKFwiaHRtbFwiKS5yZW1vdmVDbGFzcyhcIm5hdi1vcGVuXCIpLCQoXCJuYXZcIikuaGFzQ2xhc3MoXCJuYXZiYXItYWJzb2x1dGVcIikmJiQoXCJodG1sXCIpLnJlbW92ZUNsYXNzKFwibmF2LW9wZW4tYWJzb2x1dGVcIiksbWF0ZXJpYWxLaXQubWlzYy5uYXZiYXJfbWVudV92aXNpYmxlPTAsJChcIiNib2R5Q2xpY2tcIikucmVtb3ZlKCksc2V0VGltZW91dChmdW5jdGlvbigpeyR0b2dnbGUucmVtb3ZlQ2xhc3MoXCJ0b2dnbGVkXCIpfSw1NTApfSksJChcIm5hdlwiKS5oYXNDbGFzcyhcIm5hdmJhci1hYnNvbHV0ZVwiKSYmJChcImh0bWxcIikuYWRkQ2xhc3MoXCJuYXYtb3Blbi1hYnNvbHV0ZVwiKSwkKFwiaHRtbFwiKS5hZGRDbGFzcyhcIm5hdi1vcGVuXCIpLG1hdGVyaWFsS2l0Lm1pc2MubmF2YmFyX21lbnVfdmlzaWJsZT0xKX0pLCQod2luZG93KS5vbihcInJlc2l6ZVwiLGZ1bmN0aW9uKCl7bWF0ZXJpYWxLaXQuaW5pdFJvdGF0ZUNhcmQoKX0pLG1hdGVyaWFsS2l0PXttaXNjOntuYXZiYXJfbWVudV92aXNpYmxlOjAsd2luZG93X3dpZHRoOjAsdHJhbnNwYXJlbnQ6ITAsY29sb3JlZF9zaGFkb3dzOiEwLGZpeGVkVG9wOiExLG5hdmJhcl9pbml0aWFsaXplZDohMSxpc1dpbmRvdzpkb2N1bWVudC5kb2N1bWVudE1vZGV8fC9FZGdlLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpfSxjaGVja1Njcm9sbEZvclBhcmFsbGF4OmZ1bmN0aW9uKCl7b1ZhbD0kKHdpbmRvdykuc2Nyb2xsVG9wKCkvMyxiaWdfaW1hZ2UuY3NzKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLFwiK29WYWwrXCJweCwwKVwiLFwiLXdlYmtpdC10cmFuc2Zvcm1cIjpcInRyYW5zbGF0ZTNkKDAsXCIrb1ZhbCtcInB4LDApXCIsXCItbXMtdHJhbnNmb3JtXCI6XCJ0cmFuc2xhdGUzZCgwLFwiK29WYWwrXCJweCwwKVwiLFwiLW8tdHJhbnNmb3JtXCI6XCJ0cmFuc2xhdGUzZCgwLFwiK29WYWwrXCJweCwwKVwifSl9LGluaXRGb3JtRXh0ZW5kZWREYXRldGltZXBpY2tlcnM6ZnVuY3Rpb24oKXskKFwiLmRhdGV0aW1lcGlja2VyXCIpLmRhdGV0aW1lcGlja2VyKHtpY29uczp7dGltZTpcImZhIGZhLWNsb2NrLW9cIixkYXRlOlwiZmEgZmEtY2FsZW5kYXJcIix1cDpcImZhIGZhLWNoZXZyb24tdXBcIixkb3duOlwiZmEgZmEtY2hldnJvbi1kb3duXCIscHJldmlvdXM6XCJmYSBmYS1jaGV2cm9uLWxlZnRcIixuZXh0OlwiZmEgZmEtY2hldnJvbi1yaWdodFwiLHRvZGF5OlwiZmEgZmEtc2NyZWVuc2hvdFwiLGNsZWFyOlwiZmEgZmEtdHJhc2hcIixjbG9zZTpcImZhIGZhLXJlbW92ZVwifX0pLCQoXCIuZGF0ZXBpY2tlclwiKS5kYXRldGltZXBpY2tlcih7Zm9ybWF0OlwiTU0vREQvWVlZWVwiLGljb25zOnt0aW1lOlwiZmEgZmEtY2xvY2stb1wiLGRhdGU6XCJmYSBmYS1jYWxlbmRhclwiLHVwOlwiZmEgZmEtY2hldnJvbi11cFwiLGRvd246XCJmYSBmYS1jaGV2cm9uLWRvd25cIixwcmV2aW91czpcImZhIGZhLWNoZXZyb24tbGVmdFwiLG5leHQ6XCJmYSBmYS1jaGV2cm9uLXJpZ2h0XCIsdG9kYXk6XCJmYSBmYS1zY3JlZW5zaG90XCIsY2xlYXI6XCJmYSBmYS10cmFzaFwiLGNsb3NlOlwiZmEgZmEtcmVtb3ZlXCJ9fSksJChcIi50aW1lcGlja2VyXCIpLmRhdGV0aW1lcGlja2VyKHtmb3JtYXQ6XCJoOm1tIEFcIixpY29uczp7dGltZTpcImZhIGZhLWNsb2NrLW9cIixkYXRlOlwiZmEgZmEtY2FsZW5kYXJcIix1cDpcImZhIGZhLWNoZXZyb24tdXBcIixkb3duOlwiZmEgZmEtY2hldnJvbi1kb3duXCIscHJldmlvdXM6XCJmYSBmYS1jaGV2cm9uLWxlZnRcIixuZXh0OlwiZmEgZmEtY2hldnJvbi1yaWdodFwiLHRvZGF5OlwiZmEgZmEtc2NyZWVuc2hvdFwiLGNsZWFyOlwiZmEgZmEtdHJhc2hcIixjbG9zZTpcImZhIGZhLXJlbW92ZVwifX0pfSxpbml0U2xpZGVyczpmdW5jdGlvbigpe3ZhciBlPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2xpZGVyUmVndWxhclwiKTtub1VpU2xpZGVyLmNyZWF0ZShlLHtzdGFydDo0MCxjb25uZWN0OlshMCwhMV0scmFuZ2U6e21pbjowLG1heDoxMDB9fSk7dmFyIHQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzbGlkZXJEb3VibGVcIik7bm9VaVNsaWRlci5jcmVhdGUodCx7c3RhcnQ6WzIwLDYwXSxjb25uZWN0OiEwLHJhbmdlOnttaW46MCxtYXg6MTAwfX0pfSxpbml0Q29sb3JlZFNoYWRvd3M6ZnVuY3Rpb24oKXsxPT1tYXRlcmlhbEtpdC5taXNjLmNvbG9yZWRfc2hhZG93cyYmKFwiRXhwbG9yZXJcIj09QnJvd3NlckRldGVjdC5icm93c2VyJiZCcm93c2VyRGV0ZWN0LnZlcnNpb248PTEyfHwkKCcuY2FyZDpub3QoW2RhdGEtY29sb3JlZC1zaGFkb3c9XCJmYWxzZVwiXSkgLmNhcmQtaGVhZGVyLWltYWdlJykuZWFjaChmdW5jdGlvbigpe2lmKCRjYXJkX2ltZz0kKHRoaXMpLGlzX29uX2Rhcmtfc2NyZWVuPSQodGhpcykuY2xvc2VzdChcIi5zZWN0aW9uLWRhcmssIC5zZWN0aW9uLWltYWdlXCIpLmxlbmd0aCwwPT1pc19vbl9kYXJrX3NjcmVlbil7dmFyIGU9JGNhcmRfaW1nLmZpbmQoXCJpbWdcIikuYXR0cihcInNyY1wiKSx0PTE9PSRjYXJkX2ltZy5jbG9zZXN0KFwiLmNhcmQtcm90YXRlXCIpLmxlbmd0aCxhPSRjYXJkX2ltZyxpPSQoJzxkaXYgY2xhc3M9XCJjb2xvcmVkLXNoYWRvd1wiLz4nKTtpZih0KXt2YXIgcj0kY2FyZF9pbWcuaGVpZ2h0KCksbj0kY2FyZF9pbWcud2lkdGgoKTskKHRoaXMpLmZpbmQoXCIuYmFja1wiKS5jc3Moe2hlaWdodDpyK1wicHhcIix3aWR0aDpuK1wicHhcIn0pLGE9JGNhcmRfaW1nLmZpbmQoXCIuZnJvbnRcIil9aS5jc3Moe1wiYmFja2dyb3VuZC1pbWFnZVwiOlwidXJsKFwiK2UrXCIpXCJ9KS5hcHBlbmRUbyhhKSw3MDA8JGNhcmRfaW1nLndpZHRoKCkmJmkuYWRkQ2xhc3MoXCJjb2xvcmVkLXNoYWRvdy1iaWdcIiksc2V0VGltZW91dChmdW5jdGlvbigpe2kuY3NzKFwib3BhY2l0eVwiLDEpfSwyMDApfX0pKX0saW5pdFJvdGF0ZUNhcmQ6ZGVib3VuY2UoZnVuY3Rpb24oKXskKFwiLnJvdGF0aW5nLWNhcmQtY29udGFpbmVyIC5jYXJkLXJvdGF0ZVwiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGU9JCh0aGlzKSx0PSQodGhpcykucGFyZW50KCkud2lkdGgoKSxhPSQodGhpcykuZmluZChcIi5mcm9udCAuY2FyZC1ib2R5XCIpLm91dGVySGVpZ2h0KCk7ZS5wYXJlbnQoKS5jc3Moe2hlaWdodDphK1wicHhcIixcIm1hcmdpbi1ib3R0b21cIjpcIjMwcHhcIn0pLGUuZmluZChcIi5mcm9udFwiKS5jc3Moe2hlaWdodDphKzM1K1wicHhcIix3aWR0aDp0K1wicHhcIn0pLGUuZmluZChcIi5iYWNrXCIpLmNzcyh7aGVpZ2h0OmErMzUrXCJweFwiLHdpZHRoOnQrXCJweFwifSl9KX0sNTApLGNoZWNrU2Nyb2xsRm9yVHJhbnNwYXJlbnROYXZiYXI6ZGVib3VuY2UoZnVuY3Rpb24oKXskKGRvY3VtZW50KS5zY3JvbGxUb3AoKT5zY3JvbGxfZGlzdGFuY2U/bWF0ZXJpYWxLaXQubWlzYy50cmFuc3BhcmVudCYmKG1hdGVyaWFsS2l0Lm1pc2MudHJhbnNwYXJlbnQ9ITEsJChcIi5uYXZiYXItY29sb3Itb24tc2Nyb2xsXCIpLnJlbW92ZUNsYXNzKFwibmF2YmFyLXRyYW5zcGFyZW50XCIpKTptYXRlcmlhbEtpdC5taXNjLnRyYW5zcGFyZW50fHwobWF0ZXJpYWxLaXQubWlzYy50cmFuc3BhcmVudD0hMCwkKFwiLm5hdmJhci1jb2xvci1vbi1zY3JvbGxcIikuYWRkQ2xhc3MoXCJuYXZiYXItdHJhbnNwYXJlbnRcIikpfSwxNyl9O3ZhciBCcm93c2VyRGV0ZWN0PXtpbml0OmZ1bmN0aW9uKCl7dGhpcy5icm93c2VyPXRoaXMuc2VhcmNoU3RyaW5nKHRoaXMuZGF0YUJyb3dzZXIpfHxcIk90aGVyXCIsdGhpcy52ZXJzaW9uPXRoaXMuc2VhcmNoVmVyc2lvbihuYXZpZ2F0b3IudXNlckFnZW50KXx8dGhpcy5zZWFyY2hWZXJzaW9uKG5hdmlnYXRvci5hcHBWZXJzaW9uKXx8XCJVbmtub3duXCJ9LHNlYXJjaFN0cmluZzpmdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrKyl7dmFyIGE9ZVt0XS5zdHJpbmc7aWYodGhpcy52ZXJzaW9uU2VhcmNoU3RyaW5nPWVbdF0uc3ViU3RyaW5nLC0xIT09YS5pbmRleE9mKGVbdF0uc3ViU3RyaW5nKSlyZXR1cm4gZVt0XS5pZGVudGl0eX19LHNlYXJjaFZlcnNpb246ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5pbmRleE9mKHRoaXMudmVyc2lvblNlYXJjaFN0cmluZyk7aWYoLTEhPT10KXt2YXIgYT1lLmluZGV4T2YoXCJydjpcIik7cmV0dXJuXCJUcmlkZW50XCI9PT10aGlzLnZlcnNpb25TZWFyY2hTdHJpbmcmJi0xIT09YT9wYXJzZUZsb2F0KGUuc3Vic3RyaW5nKGErMykpOnBhcnNlRmxvYXQoZS5zdWJzdHJpbmcodCt0aGlzLnZlcnNpb25TZWFyY2hTdHJpbmcubGVuZ3RoKzEpKX19LGRhdGFCcm93c2VyOlt7c3RyaW5nOm5hdmlnYXRvci51c2VyQWdlbnQsc3ViU3RyaW5nOlwiQ2hyb21lXCIsaWRlbnRpdHk6XCJDaHJvbWVcIn0se3N0cmluZzpuYXZpZ2F0b3IudXNlckFnZW50LHN1YlN0cmluZzpcIk1TSUVcIixpZGVudGl0eTpcIkV4cGxvcmVyXCJ9LHtzdHJpbmc6bmF2aWdhdG9yLnVzZXJBZ2VudCxzdWJTdHJpbmc6XCJUcmlkZW50XCIsaWRlbnRpdHk6XCJFeHBsb3JlclwifSx7c3RyaW5nOm5hdmlnYXRvci51c2VyQWdlbnQsc3ViU3RyaW5nOlwiRmlyZWZveFwiLGlkZW50aXR5OlwiRmlyZWZveFwifSx7c3RyaW5nOm5hdmlnYXRvci51c2VyQWdlbnQsc3ViU3RyaW5nOlwiU2FmYXJpXCIsaWRlbnRpdHk6XCJTYWZhcmlcIn0se3N0cmluZzpuYXZpZ2F0b3IudXNlckFnZW50LHN1YlN0cmluZzpcIk9wZXJhXCIsaWRlbnRpdHk6XCJPcGVyYVwifV19LGJldHRlcl9icm93c2VyPSc8ZGl2IGNsYXNzPVwiY29udGFpbmVyXCI+PGRpdiBjbGFzcz1cImJldHRlci1icm93c2VyIHJvd1wiPjxkaXYgY2xhc3M9XCJjb2wtbWQtMlwiPjwvZGl2PjxkaXYgY2xhc3M9XCJjb2wtbWQtOFwiPjxoMz5XZSBhcmUgc29ycnkgYnV0IGl0IGxvb2tzIGxpa2UgeW91ciBCcm93c2VyIGRvZXNuXFwndCBzdXBwb3J0IG91ciB3ZWJzaXRlIEZlYXR1cmVzLiBJbiBvcmRlciB0byBnZXQgdGhlIGZ1bGwgZXhwZXJpZW5jZSBwbGVhc2UgZG93bmxvYWQgYSBuZXcgdmVyc2lvbiBvZiB5b3VyIGZhdm91cml0ZSBicm93c2VyLjwvaDM+PC9kaXY+PGRpdiBjbGFzcz1cImNvbC1tZC0yXCI+PC9kaXY+PGJyPjxkaXYgY2xhc3M9XCJjb2wtbWQtNFwiPjxhIGhyZWY9XCJodHRwczovL3d3dy5tb3ppbGxhLm9yZy9yby9maXJlZm94L25ldy9cIiBjbGFzcz1cImJ0biBidG4td2FybmluZ1wiPk1vemlsbGE8L2E+PGJyPjwvZGl2PjxkaXYgY2xhc3M9XCJjb2wtbWQtNFwiPjxhIGhyZWY9XCJodHRwczovL3d3dy5nb29nbGUuY29tL2Nocm9tZS9icm93c2VyL2Rlc2t0b3AvaW5kZXguaHRtbFwiIGNsYXNzPVwiYnRuIFwiPkNocm9tZTwvYT48YnI+PC9kaXY+PGRpdiBjbGFzcz1cImNvbC1tZC00XCI+PGEgaHJlZj1cImh0dHA6Ly93aW5kb3dzLm1pY3Jvc29mdC5jb20vZW4tdXMvaW50ZXJuZXQtZXhwbG9yZXIvaWUtMTEtd29ybGR3aWRlLWxhbmd1YWdlc1wiIGNsYXNzPVwiYnRuXCI+SW50ZXJuZXQgRXhwbG9yZXI8L2E+PGJyPjwvZGl2Pjxicj48YnI+PGg0PlRoYW5rIHlvdSE8L2g0PjwvZGl2PjwvZGl2Pic7Iiwid2luZG93Lm9ucmVzaXplPSgpPT57XG4gICAgcmVzcG9uc2l2ZUZvb3RlcigpO1xufTtcblxuJCggZG9jdW1lbnQgKS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICByZXNwb25zaXZlRm9vdGVyKCk7XG59KTtcblxuLypcbnJlc3BvbnNpdmUgZm9vdGVyXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5mdW5jdGlvbiByZXNwb25zaXZlRm9vdGVyKCkge1xuICAgIGlmKHdpbmRvdy5pbm5lcldpZHRoPDc4MCkge1xuICAgICAgICAkKFwiI2Zvb3Rlci1tYWluLWNvbnRlbnRcIikuYWRkQ2xhc3MoXCJyZXNwb25zaXZlLWNsYXNzXCIpO1xuICAgICAgICAkKCcjY29weXJpZ2h0JykuYWRkQ2xhc3MoJ3Jlc3BvbnNpdmUtY29weXJpZ2h0Jyk7XG4gICAgfVxuICAgIGVsc2V7XG4gICAgICAgICQoXCIjZm9vdGVyLW1haW4tY29udGVudFwiKS5yZW1vdmVDbGFzcyhcInJlc3BvbnNpdmUtY2xhc3NcIik7XG4gICAgICAgICQoJyNjb3B5cmlnaHQnKS5yZW1vdmVDbGFzcygncmVzcG9uc2l2ZS1jb3B5cmlnaHQnKTtcbiAgICB9XG59XG5cblxuLy9hY29yZGlhblxuXG5sZXQgY3JlYXRlQWNjb3JkaWFuID0gKGFjY29yZGlhbkVsZW0pPT57XG4gICAgaWYoYWNjb3JkaWFuRWxlbS5pcyggXCI6aGlkZGVuXCIgKSlcbiAgICAgICAgYWNjb3JkaWFuRWxlbS5zbGlkZURvd24oKTtcbiAgICBlbHNlXG4gICAgICAgIGFjY29yZGlhbkVsZW0uaGlkZShcInNsb3dcIik7XG59O1xuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xuICAgICQoXCIuYWNjb3JkaWFuLWVsZW1lbnRcIikuaGlkZSgpO1xuICAgICQoXCIuYWNjb3JkaWFuLXRpdGxlXCIpLmNsaWNrKGZ1bmN0aW9uKCl7XG4gICAgICAgIGNyZWF0ZUFjY29yZGlhbigkKHRoaXMpLm5leHQoKSk7XG4gICAgfSk7XG59KTtcblxuXG5cbmZ1bmN0aW9uIHJlc3BvbnNpdmVDbGFzcyh0YXJnZXQsIGNzc0NsYXNzLCBmbGFnKSB7XG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPCA3ODAgPT09IGZsYWcpXG4gICAgICAgICAgICAkKHRhcmdldCkuYWRkQ2xhc3MoY3NzQ2xhc3MpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICAkKHRhcmdldCkucmVtb3ZlQ2xhc3MoY3NzQ2xhc3MpO1xuICAgIH0pO1xuXG4gICAgd2luZG93Lm9ucmVzaXplID0gKCkgPT4ge1xuICAgICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPCA3ODAgPT09IGZsYWcpXG4gICAgICAgICAgICAkKHRhcmdldCkuYWRkQ2xhc3MoY3NzQ2xhc3MpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICAkKHRhcmdldCkucmVtb3ZlQ2xhc3MoY3NzQ2xhc3MpO1xuICAgIH1cbn1cblxuXG5cbi8vc2hhcmVcblNvY2lhbFNoYXJlS2l0LmluaXQoe1xuICAgIHR3aXR0ZXI6IHtcbiAgICAgICAgdGl0bGU6ICdGSU5BIExMQycsXG4gICAgICAgIHZpYTogJ2ZpbmEyLm5ldCdcbiAgICB9LFxuICAgIG9uQmVmb3JlT3BlbjogZnVuY3Rpb24gKHRhcmdldEVsZW1lbnQsIG5ldHdvcmssIHBhcmFtc09iaikge1xuICAgICAgICBjb25zb2xlLmxvZyhhcmd1bWVudHMpO1xuICAgIH0sXG4gICAgb25PcGVuOiBmdW5jdGlvbiAodGFyZ2V0RWxlbWVudCwgbmV0d29yaywgdXJsLCBwb3B1cFdpbmRvdykge1xuICAgICAgICBjb25zb2xlLmxvZyhhcmd1bWVudHMpO1xuICAgIH0sXG4gICAgb25DbG9zZTogZnVuY3Rpb24gKHRhcmdldEVsZW1lbnQsIG5ldHdvcmssIHVybCwgcG9wdXBXaW5kb3cpIHtcbiAgICAgICAgY29uc29sZS5sb2coYXJndW1lbnRzKTtcbiAgICB9XG59KTtcblxuXG4iLCJmdW5jdGlvbiBteUZ1bmN0aW9uKCl7dmFyIG49ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzb2NpYWwtbGlua3MtY29udGFpbmVyXCIpO1wic29jaWFsLWxpbmtzLWNsYXNzXCI9PT1uLmNsYXNzTmFtZT9uLmNsYXNzTmFtZT1cInNvY2lhbC1saW5rcy1jbGFzcy1yZXNwb25zZVwiOm4uY2xhc3NOYW1lPVwic29jaWFsLWxpbmtzLWNsYXNzXCJ9dmFyIGNyZWF0ZUFjY29yZGlhbj1mdW5jdGlvbihuKXtuLmlzKFwiOmhpZGRlblwiKT9uLnNsaWRlRG93bigpOm4uaGlkZShcInNsb3dcIil9OyQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7JChcIi5hY2NvcmRpYW4tZWxlbWVudFwiKS5oaWRlKCksJChcIi5hY2NvcmRpYW4tdGl0bGVcIikuY2xpY2soZnVuY3Rpb24oKXtjcmVhdGVBY2NvcmRpYW4oJCh0aGlzKS5uZXh0KCkpfSl9KSwkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpeyQoXCIjbGFuZ19lblwiKS5jbGljayhmdW5jdGlvbigpeyQodGhpcykuYWRkQ2xhc3MoXCJsYW5nLWJ0blwiKSwkKFwiI2xhbmdfa2FcIikucmVtb3ZlQ2xhc3MoXCJsYW5nLWJ0blwiKX0pLCQoXCIjbGFuZ19rYVwiKS5jbGljayhmdW5jdGlvbigpeyQodGhpcykuYWRkQ2xhc3MoXCJsYW5nLWJ0blwiKSwkKFwiI2xhbmdfZW5cIikucmVtb3ZlQ2xhc3MoXCJsYW5nLWJ0blwiKX0pfSk7IiwiLy8gQ2hhcnQuanMgc2NyaXB0c1xuLy8gLS0gU2V0IG5ldyBkZWZhdWx0IGZvbnQgZmFtaWx5IGFuZCBmb250IGNvbG9yIHRvIG1pbWljIEJvb3RzdHJhcCdzIGRlZmF1bHQgc3R5bGluZ1xuQ2hhcnQuZGVmYXVsdHMuZ2xvYmFsLmRlZmF1bHRGb250RmFtaWx5ID0gJy1hcHBsZS1zeXN0ZW0sc3lzdGVtLXVpLEJsaW5rTWFjU3lzdGVtRm9udCxcIlNlZ29lIFVJXCIsUm9ib3RvLFwiSGVsdmV0aWNhIE5ldWVcIixBcmlhbCxzYW5zLXNlcmlmJztcbkNoYXJ0LmRlZmF1bHRzLmdsb2JhbC5kZWZhdWx0Rm9udENvbG9yID0gJyMyOTJiMmMnO1xuLy8gLS0gQXJlYSBDaGFydCBFeGFtcGxlXG52YXIgY3R4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJteUFyZWFDaGFydFwiKTtcbnZhciBteUxpbmVDaGFydCA9IG5ldyBDaGFydChjdHgsIHtcbiAgdHlwZTogJ2xpbmUnLFxuICBkYXRhOiB7XG4gICAgbGFiZWxzOiBbXCJNYXIgMVwiLCBcIk1hciAyXCIsIFwiTWFyIDNcIiwgXCJNYXIgNFwiLCBcIk1hciA1XCIsIFwiTWFyIDZcIiwgXCJNYXIgN1wiLCBcIk1hciA4XCIsIFwiTWFyIDlcIiwgXCJNYXIgMTBcIiwgXCJNYXIgMTFcIiwgXCJNYXIgMTJcIiwgXCJNYXIgMTNcIl0sXG4gICAgZGF0YXNldHM6IFt7XG4gICAgICBsYWJlbDogXCJTZXNzaW9uc1wiLFxuICAgICAgbGluZVRlbnNpb246IDAuMyxcbiAgICAgIGJhY2tncm91bmRDb2xvcjogXCJyZ2JhKDIsMTE3LDIxNiwwLjIpXCIsXG4gICAgICBib3JkZXJDb2xvcjogXCJyZ2JhKDIsMTE3LDIxNiwxKVwiLFxuICAgICAgcG9pbnRSYWRpdXM6IDUsXG4gICAgICBwb2ludEJhY2tncm91bmRDb2xvcjogXCJyZ2JhKDIsMTE3LDIxNiwxKVwiLFxuICAgICAgcG9pbnRCb3JkZXJDb2xvcjogXCJyZ2JhKDI1NSwyNTUsMjU1LDAuOClcIixcbiAgICAgIHBvaW50SG92ZXJSYWRpdXM6IDUsXG4gICAgICBwb2ludEhvdmVyQmFja2dyb3VuZENvbG9yOiBcInJnYmEoMiwxMTcsMjE2LDEpXCIsXG4gICAgICBwb2ludEhpdFJhZGl1czogMjAsXG4gICAgICBwb2ludEJvcmRlcldpZHRoOiAyLFxuICAgICAgZGF0YTogWzEwMDAwLCAzMDE2MiwgMjYyNjMsIDE4Mzk0LCAxODI4NywgMjg2ODIsIDMxMjc0LCAzMzI1OSwgMjU4NDksIDI0MTU5LCAzMjY1MSwgMzE5ODQsIDM4NDUxXSxcbiAgICB9XSxcbiAgfSxcbiAgb3B0aW9uczoge1xuICAgIHNjYWxlczoge1xuICAgICAgeEF4ZXM6IFt7XG4gICAgICAgIHRpbWU6IHtcbiAgICAgICAgICB1bml0OiAnZGF0ZSdcbiAgICAgICAgfSxcbiAgICAgICAgZ3JpZExpbmVzOiB7XG4gICAgICAgICAgZGlzcGxheTogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgdGlja3M6IHtcbiAgICAgICAgICBtYXhUaWNrc0xpbWl0OiA3XG4gICAgICAgIH1cbiAgICAgIH1dLFxuICAgICAgeUF4ZXM6IFt7XG4gICAgICAgIHRpY2tzOiB7XG4gICAgICAgICAgbWluOiAwLFxuICAgICAgICAgIG1heDogNDAwMDAsXG4gICAgICAgICAgbWF4VGlja3NMaW1pdDogNVxuICAgICAgICB9LFxuICAgICAgICBncmlkTGluZXM6IHtcbiAgICAgICAgICBjb2xvcjogXCJyZ2JhKDAsIDAsIDAsIC4xMjUpXCIsXG4gICAgICAgIH1cbiAgICAgIH1dLFxuICAgIH0sXG4gICAgbGVnZW5kOiB7XG4gICAgICBkaXNwbGF5OiBmYWxzZVxuICAgIH1cbiAgfVxufSk7XG4vLyAtLSBCYXIgQ2hhcnQgRXhhbXBsZVxudmFyIGN0eCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibXlCYXJDaGFydFwiKTtcbnZhciBteUxpbmVDaGFydCA9IG5ldyBDaGFydChjdHgsIHtcbiAgdHlwZTogJ2JhcicsXG4gIGRhdGE6IHtcbiAgICBsYWJlbHM6IFtcIkphbnVhcnlcIiwgXCJGZWJydWFyeVwiLCBcIk1hcmNoXCIsIFwiQXByaWxcIiwgXCJNYXlcIiwgXCJKdW5lXCJdLFxuICAgIGRhdGFzZXRzOiBbe1xuICAgICAgbGFiZWw6IFwiUmV2ZW51ZVwiLFxuICAgICAgYmFja2dyb3VuZENvbG9yOiBcInJnYmEoMiwxMTcsMjE2LDEpXCIsXG4gICAgICBib3JkZXJDb2xvcjogXCJyZ2JhKDIsMTE3LDIxNiwxKVwiLFxuICAgICAgZGF0YTogWzQyMTUsIDUzMTIsIDYyNTEsIDc4NDEsIDk4MjEsIDE0OTg0XSxcbiAgICB9XSxcbiAgfSxcbiAgb3B0aW9uczoge1xuICAgIHNjYWxlczoge1xuICAgICAgeEF4ZXM6IFt7XG4gICAgICAgIHRpbWU6IHtcbiAgICAgICAgICB1bml0OiAnbW9udGgnXG4gICAgICAgIH0sXG4gICAgICAgIGdyaWRMaW5lczoge1xuICAgICAgICAgIGRpc3BsYXk6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIHRpY2tzOiB7XG4gICAgICAgICAgbWF4VGlja3NMaW1pdDogNlxuICAgICAgICB9XG4gICAgICB9XSxcbiAgICAgIHlBeGVzOiBbe1xuICAgICAgICB0aWNrczoge1xuICAgICAgICAgIG1pbjogMCxcbiAgICAgICAgICBtYXg6IDE1MDAwLFxuICAgICAgICAgIG1heFRpY2tzTGltaXQ6IDVcbiAgICAgICAgfSxcbiAgICAgICAgZ3JpZExpbmVzOiB7XG4gICAgICAgICAgZGlzcGxheTogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XSxcbiAgICB9LFxuICAgIGxlZ2VuZDoge1xuICAgICAgZGlzcGxheTogZmFsc2VcbiAgICB9XG4gIH1cbn0pO1xuLy8gLS0gUGllIENoYXJ0IEV4YW1wbGVcbnZhciBjdHggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm15UGllQ2hhcnRcIik7XG52YXIgbXlQaWVDaGFydCA9IG5ldyBDaGFydChjdHgsIHtcbiAgdHlwZTogJ3BpZScsXG4gIGRhdGE6IHtcbiAgICBsYWJlbHM6IFtcIkJsdWVcIiwgXCJSZWRcIiwgXCJZZWxsb3dcIiwgXCJHcmVlblwiXSxcbiAgICBkYXRhc2V0czogW3tcbiAgICAgIGRhdGE6IFsxMi4yMSwgMTUuNTgsIDExLjI1LCA4LjMyXSxcbiAgICAgIGJhY2tncm91bmRDb2xvcjogWycjMDA3YmZmJywgJyNkYzM1NDUnLCAnI2ZmYzEwNycsICcjMjhhNzQ1J10sXG4gICAgfV0sXG4gIH0sXG59KTtcbiIsIkNoYXJ0LmRlZmF1bHRzLmdsb2JhbC5kZWZhdWx0Rm9udEZhbWlseT0nLWFwcGxlLXN5c3RlbSxzeXN0ZW0tdWksQmxpbmtNYWNTeXN0ZW1Gb250LFwiU2Vnb2UgVUlcIixSb2JvdG8sXCJIZWx2ZXRpY2EgTmV1ZVwiLEFyaWFsLHNhbnMtc2VyaWYnLENoYXJ0LmRlZmF1bHRzLmdsb2JhbC5kZWZhdWx0Rm9udENvbG9yPVwiIzI5MmIyY1wiO3ZhciBjdHg9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJteUFyZWFDaGFydFwiKSxteUxpbmVDaGFydD1uZXcgQ2hhcnQoY3R4LHt0eXBlOlwibGluZVwiLGRhdGE6e2xhYmVsczpbXCJNYXIgMVwiLFwiTWFyIDJcIixcIk1hciAzXCIsXCJNYXIgNFwiLFwiTWFyIDVcIixcIk1hciA2XCIsXCJNYXIgN1wiLFwiTWFyIDhcIixcIk1hciA5XCIsXCJNYXIgMTBcIixcIk1hciAxMVwiLFwiTWFyIDEyXCIsXCJNYXIgMTNcIl0sZGF0YXNldHM6W3tsYWJlbDpcIlNlc3Npb25zXCIsbGluZVRlbnNpb246LjMsYmFja2dyb3VuZENvbG9yOlwicmdiYSgyLDExNywyMTYsMC4yKVwiLGJvcmRlckNvbG9yOlwicmdiYSgyLDExNywyMTYsMSlcIixwb2ludFJhZGl1czo1LHBvaW50QmFja2dyb3VuZENvbG9yOlwicmdiYSgyLDExNywyMTYsMSlcIixwb2ludEJvcmRlckNvbG9yOlwicmdiYSgyNTUsMjU1LDI1NSwwLjgpXCIscG9pbnRIb3ZlclJhZGl1czo1LHBvaW50SG92ZXJCYWNrZ3JvdW5kQ29sb3I6XCJyZ2JhKDIsMTE3LDIxNiwxKVwiLHBvaW50SGl0UmFkaXVzOjIwLHBvaW50Qm9yZGVyV2lkdGg6MixkYXRhOlsxZTQsMzAxNjIsMjYyNjMsMTgzOTQsMTgyODcsMjg2ODIsMzEyNzQsMzMyNTksMjU4NDksMjQxNTksMzI2NTEsMzE5ODQsMzg0NTFdfV19LG9wdGlvbnM6e3NjYWxlczp7eEF4ZXM6W3t0aW1lOnt1bml0OlwiZGF0ZVwifSxncmlkTGluZXM6e2Rpc3BsYXk6ITF9LHRpY2tzOnttYXhUaWNrc0xpbWl0Ojd9fV0seUF4ZXM6W3t0aWNrczp7bWluOjAsbWF4OjRlNCxtYXhUaWNrc0xpbWl0OjV9LGdyaWRMaW5lczp7Y29sb3I6XCJyZ2JhKDAsIDAsIDAsIC4xMjUpXCJ9fV19LGxlZ2VuZDp7ZGlzcGxheTohMX19fSksbXlQaWVDaGFydD0oY3R4PWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibXlCYXJDaGFydFwiKSxteUxpbmVDaGFydD1uZXcgQ2hhcnQoY3R4LHt0eXBlOlwiYmFyXCIsZGF0YTp7bGFiZWxzOltcIkphbnVhcnlcIixcIkZlYnJ1YXJ5XCIsXCJNYXJjaFwiLFwiQXByaWxcIixcIk1heVwiLFwiSnVuZVwiXSxkYXRhc2V0czpbe2xhYmVsOlwiUmV2ZW51ZVwiLGJhY2tncm91bmRDb2xvcjpcInJnYmEoMiwxMTcsMjE2LDEpXCIsYm9yZGVyQ29sb3I6XCJyZ2JhKDIsMTE3LDIxNiwxKVwiLGRhdGE6WzQyMTUsNTMxMiw2MjUxLDc4NDEsOTgyMSwxNDk4NF19XX0sb3B0aW9uczp7c2NhbGVzOnt4QXhlczpbe3RpbWU6e3VuaXQ6XCJtb250aFwifSxncmlkTGluZXM6e2Rpc3BsYXk6ITF9LHRpY2tzOnttYXhUaWNrc0xpbWl0OjZ9fV0seUF4ZXM6W3t0aWNrczp7bWluOjAsbWF4OjE1ZTMsbWF4VGlja3NMaW1pdDo1fSxncmlkTGluZXM6e2Rpc3BsYXk6ITB9fV19LGxlZ2VuZDp7ZGlzcGxheTohMX19fSksY3R4PWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibXlQaWVDaGFydFwiKSxuZXcgQ2hhcnQoY3R4LHt0eXBlOlwicGllXCIsZGF0YTp7bGFiZWxzOltcIkJsdWVcIixcIlJlZFwiLFwiWWVsbG93XCIsXCJHcmVlblwiXSxkYXRhc2V0czpbe2RhdGE6WzEyLjIxLDE1LjU4LDExLjI1LDguMzJdLGJhY2tncm91bmRDb2xvcjpbXCIjMDA3YmZmXCIsXCIjZGMzNTQ1XCIsXCIjZmZjMTA3XCIsXCIjMjhhNzQ1XCJdfV19fSkpOyIsIi8vIENhbGwgdGhlIGRhdGFUYWJsZXMgalF1ZXJ5IHBsdWdpblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICQoJyNkYXRhVGFibGUnKS5EYXRhVGFibGUoKTtcbn0pO1xuIiwiJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXskKFwiI2RhdGFUYWJsZVwiKS5EYXRhVGFibGUoKX0pOyIsIihmdW5jdGlvbigkKSB7XG4gIFwidXNlIHN0cmljdFwiOyAvLyBTdGFydCBvZiB1c2Ugc3RyaWN0XG4gIC8vIENvbmZpZ3VyZSB0b29sdGlwcyBmb3IgY29sbGFwc2VkIHNpZGUgbmF2aWdhdGlvblxuICAkKCcubmF2YmFyLXNpZGVuYXYgW2RhdGEtdG9nZ2xlPVwidG9vbHRpcFwiXScpLnRvb2x0aXAoe1xuICAgIHRlbXBsYXRlOiAnPGRpdiBjbGFzcz1cInRvb2x0aXAgbmF2YmFyLXNpZGVuYXYtdG9vbHRpcFwiIHJvbGU9XCJ0b29sdGlwXCIgc3R5bGU9XCJwb2ludGVyLWV2ZW50czogbm9uZTtcIj48ZGl2IGNsYXNzPVwiYXJyb3dcIj48L2Rpdj48ZGl2IGNsYXNzPVwidG9vbHRpcC1pbm5lclwiPjwvZGl2PjwvZGl2PidcbiAgfSlcbiAgLy8gVG9nZ2xlIHRoZSBzaWRlIG5hdmlnYXRpb25cbiAgJChcIiNzaWRlbmF2VG9nZ2xlclwiKS5jbGljayhmdW5jdGlvbihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICQoXCJib2R5XCIpLnRvZ2dsZUNsYXNzKFwic2lkZW5hdi10b2dnbGVkXCIpO1xuICAgICQoXCIubmF2YmFyLXNpZGVuYXYgLm5hdi1saW5rLWNvbGxhcHNlXCIpLmFkZENsYXNzKFwiY29sbGFwc2VkXCIpO1xuICAgICQoXCIubmF2YmFyLXNpZGVuYXYgLnNpZGVuYXYtc2Vjb25kLWxldmVsLCAubmF2YmFyLXNpZGVuYXYgLnNpZGVuYXYtdGhpcmQtbGV2ZWxcIikucmVtb3ZlQ2xhc3MoXCJzaG93XCIpO1xuICB9KTtcbiAgLy8gRm9yY2UgdGhlIHRvZ2dsZWQgY2xhc3MgdG8gYmUgcmVtb3ZlZCB3aGVuIGEgY29sbGFwc2libGUgbmF2IGxpbmsgaXMgY2xpY2tlZFxuICAkKFwiLm5hdmJhci1zaWRlbmF2IC5uYXYtbGluay1jb2xsYXBzZVwiKS5jbGljayhmdW5jdGlvbihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICQoXCJib2R5XCIpLnJlbW92ZUNsYXNzKFwic2lkZW5hdi10b2dnbGVkXCIpO1xuICB9KTtcbiAgLy8gUHJldmVudCB0aGUgY29udGVudCB3cmFwcGVyIGZyb20gc2Nyb2xsaW5nIHdoZW4gdGhlIGZpeGVkIHNpZGUgbmF2aWdhdGlvbiBob3ZlcmVkIG92ZXJcbiAgJCgnYm9keS5maXhlZC1uYXYgLm5hdmJhci1zaWRlbmF2LCBib2R5LmZpeGVkLW5hdiAuc2lkZW5hdi10b2dnbGVyLCBib2R5LmZpeGVkLW5hdiAubmF2YmFyLWNvbGxhcHNlJykub24oJ21vdXNld2hlZWwgRE9NTW91c2VTY3JvbGwnLCBmdW5jdGlvbihlKSB7XG4gICAgdmFyIGUwID0gZS5vcmlnaW5hbEV2ZW50LFxuICAgICAgZGVsdGEgPSBlMC53aGVlbERlbHRhIHx8IC1lMC5kZXRhaWw7XG4gICAgdGhpcy5zY3JvbGxUb3AgKz0gKGRlbHRhIDwgMCA/IDEgOiAtMSkgKiAzMDtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIH0pO1xuICAvLyBTY3JvbGwgdG8gdG9wIGJ1dHRvbiBhcHBlYXJcbiAgJChkb2N1bWVudCkuc2Nyb2xsKGZ1bmN0aW9uKCkge1xuICAgIHZhciBzY3JvbGxEaXN0YW5jZSA9ICQodGhpcykuc2Nyb2xsVG9wKCk7XG4gICAgaWYgKHNjcm9sbERpc3RhbmNlID4gMTAwKSB7XG4gICAgICAkKCcuc2Nyb2xsLXRvLXRvcCcpLmZhZGVJbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkKCcuc2Nyb2xsLXRvLXRvcCcpLmZhZGVPdXQoKTtcbiAgICB9XG4gIH0pO1xuICAvLyBDb25maWd1cmUgdG9vbHRpcHMgZ2xvYmFsbHlcbiAgJCgnW2RhdGEtdG9nZ2xlPVwidG9vbHRpcFwiXScpLnRvb2x0aXAoKVxuICAvLyBTbW9vdGggc2Nyb2xsaW5nIHVzaW5nIGpRdWVyeSBlYXNpbmdcbiAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJ2Euc2Nyb2xsLXRvLXRvcCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgdmFyICRhbmNob3IgPSAkKHRoaXMpO1xuICAgICQoJ2h0bWwsIGJvZHknKS5zdG9wKCkuYW5pbWF0ZSh7XG4gICAgICBzY3JvbGxUb3A6ICgkKCRhbmNob3IuYXR0cignaHJlZicpKS5vZmZzZXQoKS50b3ApXG4gICAgfSwgMTAwMCwgJ2Vhc2VJbk91dEV4cG8nKTtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICB9KTtcbn0pKGpRdWVyeSk7IC8vIEVuZCBvZiB1c2Ugc3RyaWN0XG4iLCIhZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7dCgnLm5hdmJhci1zaWRlbmF2IFtkYXRhLXRvZ2dsZT1cInRvb2x0aXBcIl0nKS50b29sdGlwKHt0ZW1wbGF0ZTonPGRpdiBjbGFzcz1cInRvb2x0aXAgbmF2YmFyLXNpZGVuYXYtdG9vbHRpcFwiIHJvbGU9XCJ0b29sdGlwXCIgc3R5bGU9XCJwb2ludGVyLWV2ZW50czogbm9uZTtcIj48ZGl2IGNsYXNzPVwiYXJyb3dcIj48L2Rpdj48ZGl2IGNsYXNzPVwidG9vbHRpcC1pbm5lclwiPjwvZGl2PjwvZGl2Pid9KSx0KFwiI3NpZGVuYXZUb2dnbGVyXCIpLmNsaWNrKGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSx0KFwiYm9keVwiKS50b2dnbGVDbGFzcyhcInNpZGVuYXYtdG9nZ2xlZFwiKSx0KFwiLm5hdmJhci1zaWRlbmF2IC5uYXYtbGluay1jb2xsYXBzZVwiKS5hZGRDbGFzcyhcImNvbGxhcHNlZFwiKSx0KFwiLm5hdmJhci1zaWRlbmF2IC5zaWRlbmF2LXNlY29uZC1sZXZlbCwgLm5hdmJhci1zaWRlbmF2IC5zaWRlbmF2LXRoaXJkLWxldmVsXCIpLnJlbW92ZUNsYXNzKFwic2hvd1wiKX0pLHQoXCIubmF2YmFyLXNpZGVuYXYgLm5hdi1saW5rLWNvbGxhcHNlXCIpLmNsaWNrKGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSx0KFwiYm9keVwiKS5yZW1vdmVDbGFzcyhcInNpZGVuYXYtdG9nZ2xlZFwiKX0pLHQoXCJib2R5LmZpeGVkLW5hdiAubmF2YmFyLXNpZGVuYXYsIGJvZHkuZml4ZWQtbmF2IC5zaWRlbmF2LXRvZ2dsZXIsIGJvZHkuZml4ZWQtbmF2IC5uYXZiYXItY29sbGFwc2VcIikub24oXCJtb3VzZXdoZWVsIERPTU1vdXNlU2Nyb2xsXCIsZnVuY3Rpb24oZSl7dmFyIG89ZS5vcmlnaW5hbEV2ZW50LHQ9by53aGVlbERlbHRhfHwtby5kZXRhaWw7dGhpcy5zY3JvbGxUb3ArPTMwKih0PDA/MTotMSksZS5wcmV2ZW50RGVmYXVsdCgpfSksdChkb2N1bWVudCkuc2Nyb2xsKGZ1bmN0aW9uKCl7MTAwPHQodGhpcykuc2Nyb2xsVG9wKCk/dChcIi5zY3JvbGwtdG8tdG9wXCIpLmZhZGVJbigpOnQoXCIuc2Nyb2xsLXRvLXRvcFwiKS5mYWRlT3V0KCl9KSx0KCdbZGF0YS10b2dnbGU9XCJ0b29sdGlwXCJdJykudG9vbHRpcCgpLHQoZG9jdW1lbnQpLm9uKFwiY2xpY2tcIixcImEuc2Nyb2xsLXRvLXRvcFwiLGZ1bmN0aW9uKGUpe3ZhciBvPXQodGhpcyk7dChcImh0bWwsIGJvZHlcIikuc3RvcCgpLmFuaW1hdGUoe3Njcm9sbFRvcDp0KG8uYXR0cihcImhyZWZcIikpLm9mZnNldCgpLnRvcH0sMWUzLFwiZWFzZUluT3V0RXhwb1wiKSxlLnByZXZlbnREZWZhdWx0KCl9KX0oalF1ZXJ5KTsiLCJ2YXIgU29jaWFsU2hhcmVLaXQ9KGZ1bmN0aW9uKCl7dmFyIHN1cHBvcnRzU2hhcmU9Lyh0d2l0dGVyfGZhY2Vib29rfGdvb2dsZS1wbHVzfHBpbnRlcmVzdHx0dW1ibHJ8dmt8bGlua2VkaW58YnVmZmVyfGVtYWlsKS8sc2VwPScqfConLHdyYXAsX3dyYXA7X3dyYXA9ZnVuY3Rpb24ob3B0cyl7dmFyIG9wdGlvbnM9b3B0c3x8e30sc2VsZWN0b3I9b3B0aW9ucy5zZWxlY3Rvcnx8Jy5zc2stc2hhcmUnO3RoaXMubm9kZXM9JChzZWxlY3Rvcik7dGhpcy5vcHRpb25zPW9wdGlvbnM7fTtfd3JhcC5wcm90b3R5cGU9e3NoYXJlOmZ1bmN0aW9uKCl7dmFyIGVscz10aGlzLm5vZGVzLG9wdGlvbnM9dGhpcy5vcHRpb25zLHVybHNUb0NvdW50PXt9O3ZhciBfaW5pdD1mdW5jdGlvbigpe2lmKCFlbHMubGVuZ3RoKXJldHVybjtlYWNoKGVscyxmdW5jdGlvbihlbCl7dmFyIG5ldHdvcms9ZWxTdXBwb3J0c1NoYXJlKGVsKSx1bmlxdWVLZXk7aWYoIW5ldHdvcmspe3JldHVybjt9aWYoZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXNzay1yZWFkeScpKXJldHVybjtlbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtc3NrLXJlYWR5Jyx0cnVlKTthZGRFdmVudExpc3RlbmVyKGVsLCdjbGljaycsb25DbGljayk7aWYoZWwucGFyZW50Tm9kZS5jbGFzc05hbWUuaW5kZXhPZignc3NrLWNvdW50JykhPT0tMSl7bmV0d29yaz1uZXR3b3JrWzBdO3VuaXF1ZUtleT1uZXR3b3JrK3NlcCtnZXRTaGFyZVVybChvcHRpb25zLG5ldHdvcmssZWwpO2lmKCEodW5pcXVlS2V5IGluIHVybHNUb0NvdW50KSl7dXJsc1RvQ291bnRbdW5pcXVlS2V5XT1bXTt9dXJsc1RvQ291bnRbdW5pcXVlS2V5XS5wdXNoKGVsKTt9fSk7cHJvY2Vzc1NoYXJlQ291bnQoKTt9O2lmKG9wdGlvbnMuZm9yY2VJbml0PT09dHJ1ZSlfaW5pdCgpO2Vsc2VcbnJlYWR5KF9pbml0KTtmdW5jdGlvbiBvbkNsaWNrKGUpe3ZhciB0YXJnZXQ9cHJldmVudERlZmF1bHQoZSksbWF0Y2g9ZWxTdXBwb3J0c1NoYXJlKHRhcmdldCksbmV0d29yaz1tYXRjaFswXSx1cmw7aWYoIW1hdGNoKXJldHVybjt1cmw9Z2V0VXJsKG9wdGlvbnMsbmV0d29yayx0YXJnZXQpO2lmKCF1cmwpcmV0dXJuO2lmKHdpbmRvdy50d3R0ciYmdGFyZ2V0LmdldEF0dHJpYnV0ZSgnaHJlZicpLmluZGV4T2YoJ3R3aXR0ZXIuY29tL2ludGVudC8nKSE9PS0xKXt0YXJnZXQuc2V0QXR0cmlidXRlKCdocmVmJyx1cmwpO3JldHVybjt9aWYobmV0d29yayE9PSdlbWFpbCcpe3ZhciB3aWR0aCxoZWlnaHQ7aWYobmV0d29yaz09PSdidWZmZXInKXt3aWR0aD04MDA7aGVpZ2h0PTY4MDt9ZWxzZXt3aWR0aD01NzU7aGVpZ2h0PTQwMDt9dmFyIHdpbj13aW5PcGVuKHVybCx3aWR0aCxoZWlnaHQpO2lmKG9wdGlvbnMub25PcGVuKXtvcHRpb25zLm9uT3Blbih0YXJnZXQsbmV0d29yayx1cmwsd2luKTt9aWYob3B0aW9ucy5vbkNsb3NlKXt2YXIgY2xvc2VJbnQ9d2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uKCl7aWYod2luLmNsb3NlZCE9PWZhbHNlKXt3aW5kb3cuY2xlYXJJbnRlcnZhbChjbG9zZUludCk7b3B0aW9ucy5vbkNsb3NlKHRhcmdldCxuZXR3b3JrLHVybCx3aW4pO319LDI1MCk7fX1lbHNle2RvY3VtZW50LmxvY2F0aW9uPXVybDt9fWZ1bmN0aW9uIHByb2Nlc3NTaGFyZUNvdW50KCl7dmFyIGEscmVmO2ZvcihhIGluIHVybHNUb0NvdW50KXtyZWY9YS5zcGxpdChzZXApOyhmdW5jdGlvbihlbHMpe2dldENvdW50KHJlZlswXSxyZWZbMV0sb3B0aW9ucyxmdW5jdGlvbihjbnQpe2Zvcih2YXIgYyBpbiBlbHMpYWRkQ291bnQoZWxzW2NdLGNudCk7fSk7fSkodXJsc1RvQ291bnRbYV0pO319cmV0dXJuIHRoaXMubm9kZXM7fX07d3JhcD1mdW5jdGlvbihzZWxlY3Rvcil7cmV0dXJuIG5ldyBfd3JhcChzZWxlY3Rvcik7fTtmdW5jdGlvbiBpbml0KG9wdHMpe3JldHVybiB3cmFwKG9wdHMpLnNoYXJlKCk7fWZ1bmN0aW9uIHJlYWR5KGZuKXtpZihkb2N1bWVudC5yZWFkeVN0YXRlIT0nbG9hZGluZycpe2ZuKCk7fWVsc2UgaWYoZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcil7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsZm4pO31lbHNle2RvY3VtZW50LmF0dGFjaEV2ZW50KCdvbnJlYWR5c3RhdGVjaGFuZ2UnLGZ1bmN0aW9uKCl7aWYoZG9jdW1lbnQucmVhZHlTdGF0ZSE9J2xvYWRpbmcnKWZuKCk7fSk7fX1mdW5jdGlvbiAkKHNlbGVjdG9yKXtyZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7fWZ1bmN0aW9uIGVhY2goZWxlbWVudHMsZm4pe2Zvcih2YXIgaT0wO2k8ZWxlbWVudHMubGVuZ3RoO2krKylmbihlbGVtZW50c1tpXSxpKTt9ZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcihlbCxldmVudE5hbWUsaGFuZGxlcil7aWYoZWwuYWRkRXZlbnRMaXN0ZW5lcil7ZWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsaGFuZGxlcik7fWVsc2V7ZWwuYXR0YWNoRXZlbnQoJ29uJytldmVudE5hbWUsZnVuY3Rpb24oKXtoYW5kbGVyLmNhbGwoZWwpO30pO319ZnVuY3Rpb24gZWxTdXBwb3J0c1NoYXJlKGVsKXtyZXR1cm4gZWwuY2xhc3NOYW1lLm1hdGNoKHN1cHBvcnRzU2hhcmUpO31mdW5jdGlvbiBwcmV2ZW50RGVmYXVsdChlKXt2YXIgZXZ0PWV8fHdpbmRvdy5ldmVudDtpZihldnQucHJldmVudERlZmF1bHQpe2V2dC5wcmV2ZW50RGVmYXVsdCgpO31lbHNle2V2dC5yZXR1cm5WYWx1ZT1mYWxzZTtldnQuY2FuY2VsQnViYmxlPXRydWU7fXJldHVybiBldnQuY3VycmVudFRhcmdldHx8ZXZ0LnNyY0VsZW1lbnQ7fWZ1bmN0aW9uIHdpbk9wZW4odXJsLHdpZHRoLGhlaWdodCl7dmFyIHdpbixsZWZ0LHRvcCxvcHRzO2lmKHdpZHRoJiZoZWlnaHQpe2xlZnQ9KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aC8yLXdpZHRoLzIpO3RvcD0oZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodC1oZWlnaHQpLzI7b3B0cz0nc3RhdHVzPTEscmVzaXphYmxlPXllcycrJyx3aWR0aD0nK3dpZHRoKycsaGVpZ2h0PScraGVpZ2h0KycsdG9wPScrdG9wKycsbGVmdD0nK2xlZnQ7d2luPXdpbmRvdy5vcGVuKHVybCwnJyxvcHRzKTt9ZWxzZXt3aW49d2luZG93Lm9wZW4odXJsKTt9d2luLmZvY3VzKCk7cmV0dXJuIHdpbjt9ZnVuY3Rpb24gZ2V0VXJsKG9wdGlvbnMsbmV0d29yayxlbCl7dmFyIHVybCxkYXRhT3B0cz1nZXREYXRhT3B0cyhvcHRpb25zLG5ldHdvcmssZWwpLHNoYXJlVXJsPWdldFNoYXJlVXJsKG9wdGlvbnMsbmV0d29yayxlbCxkYXRhT3B0cyksdGl0bGU9dHlwZW9mIGRhdGFPcHRzWyd0aXRsZSddIT09J3VuZGVmaW5lZCc/ZGF0YU9wdHNbJ3RpdGxlJ106Z2V0VGl0bGUobmV0d29yayksdGV4dD10eXBlb2YgZGF0YU9wdHNbJ3RleHQnXSE9PSd1bmRlZmluZWQnP2RhdGFPcHRzWyd0ZXh0J106Z2V0VGV4dChuZXR3b3JrKSxpbWFnZT1kYXRhT3B0c1snaW1hZ2UnXT9kYXRhT3B0c1snaW1hZ2UnXTpnZXRNZXRhQ29udGVudCgnb2c6aW1hZ2UnKSx2aWE9dHlwZW9mIGRhdGFPcHRzWyd2aWEnXSE9PSd1bmRlZmluZWQnP2RhdGFPcHRzWyd2aWEnXTpnZXRNZXRhQ29udGVudCgndHdpdHRlcjpzaXRlJykscGFyYW1zT2JqPXtzaGFyZVVybDpzaGFyZVVybCx0aXRsZTp0aXRsZSx0ZXh0OnRleHQsaW1hZ2U6aW1hZ2UsdmlhOnZpYSxvcHRpb25zOm9wdGlvbnMsc2hhcmVVcmxFbmNvZGVkOmZ1bmN0aW9uKCl7cmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudCh0aGlzLnNoYXJlVXJsKTt9fTtzd2l0Y2gobmV0d29yayl7Y2FzZSdmYWNlYm9vayc6dXJsPSdodHRwczovL3d3dy5mYWNlYm9vay5jb20vc2hhcmUucGhwP3U9JytwYXJhbXNPYmouc2hhcmVVcmxFbmNvZGVkKCk7YnJlYWs7Y2FzZSd0d2l0dGVyJzp1cmw9J2h0dHBzOi8vdHdpdHRlci5jb20vaW50ZW50L3R3ZWV0P3VybD0nK3BhcmFtc09iai5zaGFyZVVybEVuY29kZWQoKSsnJnRleHQ9JytlbmNvZGVVUklDb21wb25lbnQodGl0bGUrKHRleHQmJnRpdGxlPycgLSAnOicnKSt0ZXh0KTtpZih2aWEpdXJsKz0nJnZpYT0nK3ZpYS5yZXBsYWNlKCdAJywnJyk7YnJlYWs7Y2FzZSdnb29nbGUtcGx1cyc6dXJsPSdodHRwczovL3BsdXMuZ29vZ2xlLmNvbS9zaGFyZT91cmw9JytwYXJhbXNPYmouc2hhcmVVcmxFbmNvZGVkKCk7YnJlYWs7Y2FzZSdwaW50ZXJlc3QnOnVybD0naHR0cHM6Ly9waW50ZXJlc3QuY29tL3Bpbi9jcmVhdGUvYnV0dG9uLz91cmw9JytwYXJhbXNPYmouc2hhcmVVcmxFbmNvZGVkKCkrJyZkZXNjcmlwdGlvbj0nK2VuY29kZVVSSUNvbXBvbmVudCh0ZXh0KTtpZihpbWFnZSl1cmwrPScmbWVkaWE9JytlbmNvZGVVUklDb21wb25lbnQoaW1hZ2UpO2JyZWFrO2Nhc2UndHVtYmxyJzp1cmw9J2h0dHBzOi8vd3d3LnR1bWJsci5jb20vc2hhcmUvbGluaz91cmw9JytwYXJhbXNPYmouc2hhcmVVcmxFbmNvZGVkKCkrJyZuYW1lPScrZW5jb2RlVVJJQ29tcG9uZW50KHRpdGxlKSsnJmRlc2NyaXB0aW9uPScrZW5jb2RlVVJJQ29tcG9uZW50KHRleHQpO2JyZWFrO2Nhc2UnbGlua2VkaW4nOnVybD0naHR0cHM6Ly93d3cubGlua2VkaW4uY29tL3NoYXJlQXJ0aWNsZT9taW5pPXRydWUmdXJsPScrcGFyYW1zT2JqLnNoYXJlVXJsRW5jb2RlZCgpKycmdGl0bGU9JytlbmNvZGVVUklDb21wb25lbnQodGl0bGUpKycmc3VtbWFyeT0nK2VuY29kZVVSSUNvbXBvbmVudCh0ZXh0KTticmVhaztjYXNlJ3ZrJzp1cmw9J2h0dHBzOi8vdmtvbnRha3RlLnJ1L3NoYXJlLnBocD91cmw9JytwYXJhbXNPYmouc2hhcmVVcmxFbmNvZGVkKCk7YnJlYWs7Y2FzZSdidWZmZXInOnVybD0naHR0cHM6Ly9idWZmZXIuY29tL2FkZD9zb3VyY2U9YnV0dG9uJnVybD0nK3BhcmFtc09iai5zaGFyZVVybEVuY29kZWQoKSsnJnRleHQ9JytlbmNvZGVVUklDb21wb25lbnQodGV4dCk7YnJlYWs7Y2FzZSdlbWFpbCc6dXJsPSdtYWlsdG86P3N1YmplY3Q9JytlbmNvZGVVUklDb21wb25lbnQodGl0bGUpKycmYm9keT0nK2VuY29kZVVSSUNvbXBvbmVudCh0aXRsZSsnXFxuJytzaGFyZVVybCsnXFxuXFxuJyt0ZXh0KydcXG4nKTticmVhazt9cGFyYW1zT2JqLm5ldHdvcmtVcmw9dXJsO2lmKG9wdGlvbnMub25CZWZvcmVPcGVuKXtvcHRpb25zLm9uQmVmb3JlT3BlbihlbCxuZXR3b3JrLHBhcmFtc09iail9cmV0dXJuIHBhcmFtc09iai5uZXR3b3JrVXJsO31mdW5jdGlvbiBnZXRTaGFyZVVybChvcHRpb25zLG5ldHdvcmssZWwsZGF0YU9wdHMpe2RhdGFPcHRzPWRhdGFPcHRzfHxnZXREYXRhT3B0cyhvcHRpb25zLG5ldHdvcmssZWwpO3JldHVybiBkYXRhT3B0c1sndXJsJ118fHdpbmRvdy5sb2NhdGlvbi5ocmVmO31mdW5jdGlvbiBnZXRUaXRsZShuZXR3b3JrKXt2YXIgdGl0bGU7aWYobmV0d29yaz09J3R3aXR0ZXInKXRpdGxlPWdldE1ldGFDb250ZW50KCd0d2l0dGVyOnRpdGxlJyk7cmV0dXJuIHRpdGxlfHxkb2N1bWVudC50aXRsZTt9ZnVuY3Rpb24gZ2V0VGV4dChuZXR3b3JrKXt2YXIgdGV4dDtpZihuZXR3b3JrPT0ndHdpdHRlcicpdGV4dD1nZXRNZXRhQ29udGVudCgndHdpdHRlcjpkZXNjcmlwdGlvbicpO3JldHVybiB0ZXh0fHxnZXRNZXRhQ29udGVudCgnZGVzY3JpcHRpb24nKTt9ZnVuY3Rpb24gZ2V0TWV0YUNvbnRlbnQodGFnTmFtZSxhdHRyKXt2YXIgdGV4dCx0YWc9JCgnbWV0YVsnKyhhdHRyP2F0dHI6dGFnTmFtZS5pbmRleE9mKCdvZzonKT09PTA/J3Byb3BlcnR5JzonbmFtZScpKyc9XCInK3RhZ05hbWUrJ1wiXScpO2lmKHRhZy5sZW5ndGgpe3RleHQ9dGFnWzBdLmdldEF0dHJpYnV0ZSgnY29udGVudCcpfHwnJzt9cmV0dXJuIHRleHR8fCcnfWZ1bmN0aW9uIGdldERhdGFPcHRzKG9wdGlvbnMsbmV0d29yayxlbCl7dmFyIHZhbGlkT3B0cz1bJ3VybCcsJ3RpdGxlJywndGV4dCcsJ2ltYWdlJ10sb3B0cz17fSxvcHRWYWx1ZSxvcHRLZXksZGF0YUtleSxhLHBhcmVudD1lbC5wYXJlbnROb2RlO25ldHdvcms9PSd0d2l0dGVyJyYmdmFsaWRPcHRzLnB1c2goJ3ZpYScpO2ZvcihhIGluIHZhbGlkT3B0cyl7b3B0S2V5PXZhbGlkT3B0c1thXTtkYXRhS2V5PSdkYXRhLScrb3B0S2V5O29wdFZhbHVlPWVsLmdldEF0dHJpYnV0ZShkYXRhS2V5KXx8cGFyZW50LmdldEF0dHJpYnV0ZShkYXRhS2V5KXx8KG9wdGlvbnNbbmV0d29ya10mJnR5cGVvZiBvcHRpb25zW25ldHdvcmtdW29wdEtleV0hPSd1bmRlZmluZWQnP29wdGlvbnNbbmV0d29ya11bb3B0S2V5XTpvcHRpb25zW29wdEtleV0pO2lmKHR5cGVvZiBvcHRWYWx1ZSE9J3VuZGVmaW5lZCcpe29wdHNbb3B0S2V5XT1vcHRWYWx1ZTt9fXJldHVybiBvcHRzO31mdW5jdGlvbiBhZGRDb3VudChlbCxjbnQpe3ZhciBuZXdFbD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtuZXdFbC5pbm5lckhUTUw9Y250O25ld0VsLmNsYXNzTmFtZT0nc3NrLW51bSc7ZWwuYXBwZW5kQ2hpbGQobmV3RWwpO31mdW5jdGlvbiBnZXRDb3VudChuZXR3b3JrLHNoYXJlVXJsLG9wdGlvbnMsb25SZWFkeSl7dmFyIHVybCxwYXJzZUZ1bmMsYm9keSxzaGFyZVVybEVuYz1lbmNvZGVVUklDb21wb25lbnQoc2hhcmVVcmwpO3N3aXRjaChuZXR3b3JrKXtjYXNlJ2ZhY2Vib29rJzp1cmw9J2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLz9pZD0nK3NoYXJlVXJsRW5jO3BhcnNlRnVuYz1mdW5jdGlvbihyKXtyZXR1cm4gb25SZWFkeShyLnNoYXJlP3Iuc2hhcmUuc2hhcmVfY291bnQ6MCk7fTticmVhaztjYXNlJ3R3aXR0ZXInOmlmKG9wdGlvbnMmJm9wdGlvbnMudHdpdHRlciYmb3B0aW9ucy50d2l0dGVyLmNvdW50Q2FsbGJhY2spe29wdGlvbnMudHdpdHRlci5jb3VudENhbGxiYWNrKHNoYXJlVXJsLG9uUmVhZHkpO31icmVhaztjYXNlJ2dvb2dsZS1wbHVzJzp1cmw9J2h0dHBzOi8vY2xpZW50czYuZ29vZ2xlLmNvbS9ycGM/a2V5PUFJemFTeUNLU2JydlFhc3VuQm9WMTZ6REg5UjMzRDg4Q2VMcjlnUSc7Ym9keT1cIlt7XFxcIm1ldGhvZFxcXCI6XFxcInBvcy5wbHVzb25lcy5nZXRcXFwiLFxcXCJpZFxcXCI6XFxcInBcXFwiLFwiK1wiXFxcInBhcmFtc1xcXCI6e1xcXCJpZFxcXCI6XFxcIlwiK3NoYXJlVXJsK1wiXFxcIixcXFwidXNlcklkXFxcIjpcXFwiQHZpZXdlclxcXCIsXFxcImdyb3VwSWRcXFwiOlxcXCJAc2VsZlxcXCIsXFxcIm5vbG9nXFxcIjp0cnVlfSxcIitcIlxcXCJqc29ucnBjXFxcIjpcXFwiMi4wXFxcIixcXFwia2V5XFxcIjpcXFwicFxcXCIsXFxcImFwaVZlcnNpb25cXFwiOlxcXCJ2MVxcXCJ9XVwiO3BhcnNlRnVuYz1mdW5jdGlvbihyKXtyPUpTT04ucGFyc2Uocik7aWYoci5sZW5ndGgpe3JldHVybiBvblJlYWR5KHJbMF0ucmVzdWx0Lm1ldGFkYXRhLmdsb2JhbENvdW50cy5jb3VudCk7fX07YWpheCh1cmwscGFyc2VGdW5jLGJvZHkpO3JldHVybjtjYXNlJ2xpbmtlZGluJzp1cmw9J2h0dHBzOi8vd3d3LmxpbmtlZGluLmNvbS9jb3VudHNlcnYvY291bnQvc2hhcmU/dXJsPScrc2hhcmVVcmxFbmM7cGFyc2VGdW5jPWZ1bmN0aW9uKHIpe3JldHVybiBvblJlYWR5KHIuY291bnQpO307YnJlYWs7Y2FzZSdwaW50ZXJlc3QnOnVybD0naHR0cHM6Ly9hcGkucGludGVyZXN0LmNvbS92MS91cmxzL2NvdW50Lmpzb24/dXJsPScrc2hhcmVVcmxFbmM7cGFyc2VGdW5jPWZ1bmN0aW9uKHIpe3JldHVybiBvblJlYWR5KHIuY291bnQpO307YnJlYWs7Y2FzZSd2ayc6dXJsPSdodHRwczovL3ZrLmNvbS9zaGFyZS5waHA/YWN0PWNvdW50JnVybD0nK3NoYXJlVXJsRW5jO3BhcnNlRnVuYz1mdW5jdGlvbihyKXtyZXR1cm4gb25SZWFkeShyKTt9O2JyZWFrO2Nhc2UnYnVmZmVyJzp1cmw9J2h0dHBzOi8vYXBpLmJ1ZmZlcmFwcC5jb20vMS9saW5rcy9zaGFyZXMuanNvbj91cmw9JytzaGFyZVVybEVuYztwYXJzZUZ1bmM9ZnVuY3Rpb24ocil7cmV0dXJuIG9uUmVhZHkoci5zaGFyZXMpO307YnJlYWs7fXVybCYmcGFyc2VGdW5jJiZKU09OUFJlcXVlc3QobmV0d29yayx1cmwscGFyc2VGdW5jLGJvZHkpO31mdW5jdGlvbiBhamF4KHVybCxjYWxsYmFjayxib2R5KXt2YXIgcmVxdWVzdD1uZXcgWE1MSHR0cFJlcXVlc3QoKTtyZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2lmKHRoaXMucmVhZHlTdGF0ZT09PTQpe2lmKHRoaXMuc3RhdHVzPj0yMDAmJnRoaXMuc3RhdHVzPDQwMCl7Y2FsbGJhY2sodGhpcy5yZXNwb25zZVRleHQpO319fTtyZXF1ZXN0Lm9wZW4oJ1BPU1QnLHVybCx0cnVlKTtyZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsJ2FwcGxpY2F0aW9uL2pzb24nKTtyZXF1ZXN0LnNlbmQoYm9keSk7fWZ1bmN0aW9uIEpTT05QUmVxdWVzdChuZXR3b3JrLHVybCxjYWxsYmFjayl7dmFyIGNhbGxiYWNrTmFtZT0nY2JfJytuZXR3b3JrKydfJytNYXRoLnJvdW5kKDEwMDAwMCpNYXRoLnJhbmRvbSgpKSxzY3JpcHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7d2luZG93W2NhbGxiYWNrTmFtZV09ZnVuY3Rpb24oZGF0YSl7dHJ5e2RlbGV0ZSB3aW5kb3dbY2FsbGJhY2tOYW1lXTt9Y2F0Y2goZSl7fWRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoc2NyaXB0KTtjYWxsYmFjayhkYXRhKTt9O2lmKG5ldHdvcms9PSd2aycpe3dpbmRvd1snVksnXT17U2hhcmU6e2NvdW50OmZ1bmN0aW9uKGEsYil7d2luZG93W2NhbGxiYWNrTmFtZV0oYik7fX19O31lbHNlIGlmKG5ldHdvcms9PSdnb29nbGUtcGx1cycpe3dpbmRvd1snc2VydmljZXMnXT17Z3BsdXM6e2NiOndpbmRvd1tjYWxsYmFja05hbWVdfX07fXNjcmlwdC5zcmM9dXJsKyh1cmwuaW5kZXhPZignPycpPj0wPycmJzonPycpKydjYWxsYmFjaz0nK2NhbGxiYWNrTmFtZTtkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdCk7cmV0dXJuIHRydWU7fXJldHVybntpbml0OmluaXR9O30pKCk7d2luZG93LlNvY2lhbFNoYXJlS2l0PVNvY2lhbFNoYXJlS2l0O1xuIiwiXG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAkLmdldEpTT04oXCJ2YWNhbmNpZXMuanNvblwiLCBmdW5jdGlvbihqc29uKSB7XG4gICAgICAgIGZvcihsZXQgaT0wOyBpPGpzb24udmFjYW5jaWVzLmxlbmd0aDtpKyspXG5cbiAgICAgICAgICAgIGlmKGpzb24udmFjYW5jaWVzW2ldLmlkPT1cImludGVybnNcIil7XG4gICAgICAgICAgICAgICAgJCgnLnZhY2FuY2llcy1oZWFkJykuYXBwZW5kKFxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBpZD1cIicgKyBqc29uLnZhY2FuY2llc1tpXS5pZCArICdcIiBjbGFzcz1cInJvdyBwYWRkaW5nLXRvcCBwYWRkaW5nLWJvdHRvbSB2YWNhbmNpZXMtY2FyZFwiPidcbiAgICAgICAgICAgICAgICAgICAgKyAnPGRpdiBjbGFzcz1cImNvbC1sZy0zIGNvbC1zbS0zIGNvbC0xMlwiPidcbiAgICAgICAgICAgICAgICAgICAgKyAnPGltZyBjbGFzcz1cInZhY2FuY2llcy1pbWdcIiBzcmM9XCInICsganNvbi52YWNhbmNpZXNbaV0uaW1nICsgJ1wiPidcbiAgICAgICAgICAgICAgICAgICAgKyAnPC9kaXY+J1xuICAgICAgICAgICAgICAgICAgICArICc8ZGl2IGNsYXNzPVwiY29sLWxnLTkgY29sLXNtLTkgY29sLTEyXCI+J1xuICAgICAgICAgICAgICAgICAgICArICc8ZGl2IGNsYXNzPVwidmFjYW5jaWVzLXRpdGxlXCI+JyArIGpzb24udmFjYW5jaWVzW2ldLnRpdGxlICsgJzwvZGl2PidcbiAgICAgICAgICAgICAgICAgICAgKyAnPGhyIGNsYXNzPVwidmFjYW5jaWVzLWhyXCI+J1xuICAgICAgICAgICAgICAgICAgICArICc8ZGl2IGNsYXNzPVwidmFjYW5jaWVzLXRleHRcIj4nICsganNvbi52YWNhbmNpZXNbaV0uc2hvcnREZXNjcmlwdGlvbiArICc8L2Rpdj4nXG4gICAgICAgICAgICAgICAgICAgICsgJzwvZGl2PidcbiAgICAgICAgICAgICAgICAgICAgKyAnPGRpdiBjbGFzcz1cImNvbC1zbS05IG9mZnNldC1zbS0zIGNvbC0xMlwiPidcbiAgICAgICAgICAgICAgICAgICAgKyAnPGRpdiBjbGFzcz1cInRleHQtY2VudGVyXCI+J1xuICAgICAgICAgICAgICAgICAgICArICc8YSBocmVmPVwiJyArIGpzb24udmFjYW5jaWVzW2ldLmZvcm1MaW5rICsgJ1wiIHRhcmdldD1cIl9ibGFua1wiIHN0eWxlPVwiY29sb3I6d2hpdGUhaW1wb3J0YW50O1wiPjxkaXYgY2xhc3M9XCJidG4gbXktYnRuIG1yLTJcIj48c3Ryb25nPkFwcGxpY2F0aW9uIEZvcm08L3N0cm9uZz48L2Rpdj48L2E+J1xuICAgICAgICAgICAgICAgICAgICArICc8ZGl2IGNsYXNzPVwiYnRuIG15LWJ0biB2YWNhbi1idG5cIiAgZGF0YS12YWNhbklEPVwiJyArIGpzb24udmFjYW5jaWVzW2ldLmlkICsgJ1wiIGRhdGEtdmFjYW5UaXRsZT1cIicgKyBqc29uLnZhY2FuY2llc1tpXS5wYWdlTmFtZSArICdcIj48c3Ryb25nPlJlYWQgbW9yZTwvc3Ryb25nPjwvZGl2PidcbiAgICAgICAgICAgICAgICAgICAgKyAnPC9kaXY+J1xuICAgICAgICAgICAgICAgICAgICArICc8L2Rpdj4nXG4gICAgICAgICAgICAgICAgICAgICsgJzwvZGl2PidcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfWVsc2Uge1xuXG4gICAgICAgICAgICAgICAgJCgnLnZhY2FuY2llcy1oZWFkJykuYXBwZW5kKFxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBpZD1cIicgKyBqc29uLnZhY2FuY2llc1tpXS5pZCArICdcIiBjbGFzcz1cInJvdyBwYWRkaW5nLXRvcCBwYWRkaW5nLWJvdHRvbSB2YWNhbmNpZXMtY2FyZFwiPidcbiAgICAgICAgICAgICAgICAgICAgKyAnPGRpdiBjbGFzcz1cImNvbC1sZy0zIGNvbC1zbS0zIGNvbC0xMlwiPidcbiAgICAgICAgICAgICAgICAgICAgKyAnPGltZyBjbGFzcz1cInZhY2FuY2llcy1pbWdcIiBzcmM9XCInICsganNvbi52YWNhbmNpZXNbaV0uaW1nICsgJ1wiPidcbiAgICAgICAgICAgICAgICAgICAgKyAnPC9kaXY+J1xuICAgICAgICAgICAgICAgICAgICArICc8ZGl2IGNsYXNzPVwiY29sLWxnLTkgY29sLXNtLTkgY29sLTEyXCI+J1xuICAgICAgICAgICAgICAgICAgICArICc8ZGl2IGNsYXNzPVwidmFjYW5jaWVzLXRpdGxlXCI+JyArIGpzb24udmFjYW5jaWVzW2ldLnRpdGxlICsgJzwvZGl2PidcbiAgICAgICAgICAgICAgICAgICAgKyAnPGhyIGNsYXNzPVwidmFjYW5jaWVzLWhyXCI+J1xuICAgICAgICAgICAgICAgICAgICArICc8ZGl2IGNsYXNzPVwidmFjYW5jaWVzLXRleHRcIj4nICsganNvbi52YWNhbmNpZXNbaV0uc2hvcnREZXNjcmlwdGlvbiArICc8L2Rpdj4nXG4gICAgICAgICAgICAgICAgICAgICsgJzwvZGl2PidcbiAgICAgICAgICAgICAgICAgICAgKyAnPGRpdiBjbGFzcz1cImNvbC1zbS05IG9mZnNldC1zbS0zIGNvbC0xMlwiPidcbiAgICAgICAgICAgICAgICAgICAgKyAnPGRpdiBjbGFzcz1cInRleHQtY2VudGVyXCI+J1xuICAgICAgICAgICAgICAgICAgICArICc8YSBocmVmPVwiJyArIGpzb24udmFjYW5jaWVzW2ldLmZvcm1MaW5rICsgJ1wiIHRhcmdldD1cIl9ibGFua1wiIHN0eWxlPVwiY29sb3I6d2hpdGUhaW1wb3J0YW50O1wiPjxkaXYgY2xhc3M9XCJidG4gbXktYnRuIG1yLTJcIj48c3Ryb25nPkFwcGxpY2F0aW9uIEZvcm08L3N0cm9uZz48L2Rpdj48L2E+J1xuICAgICAgICAgICAgICAgICAgICArICc8ZGl2IGNsYXNzPVwiYnRuIG15LWJ0biB2YWNhbi1idG5cIiAgZGF0YS12YWNhbklEPVwiJyArIGpzb24udmFjYW5jaWVzW2ldLmlkICsgJ1wiIGRhdGEtdmFjYW5UaXRsZT1cIicgKyBqc29uLnZhY2FuY2llc1tpXS5wYWdlTmFtZSArICdcIj48c3Ryb25nPlJlYWQgbW9yZTwvc3Ryb25nPjwvZGl2PidcbiAgICAgICAgICAgICAgICAgICAgKyAnPC9kaXY+J1xuICAgICAgICAgICAgICAgICAgICArICc8L2Rpdj4nXG4gICAgICAgICAgICAgICAgICAgICsgJzwvZGl2PidcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgIH0pO1xufSk7XG5cblxuJChkb2N1bWVudCkub24oJ2NsaWNrJyxcIi52YWNhbi1idG5cIixmdW5jdGlvbiAoKSB7XG4gICAgY29uc29sZS5sb2coJCh0aGlzKS5hdHRyKCdkYXRhLXZhY2FuVGl0bGUnKSlcbiAgICB3aW5kb3cubG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb24uaHJlZi5yZXBsYWNlKCd2YWNhbmNpZXMnLCQodGhpcykuYXR0cignZGF0YS12YWNhblRpdGxlJykpO1xuICAgIC8qY29uc29sZS5sb2coJCh0aGlzKS5hdHRyKCdkYXRhLXZhY2FuSUQnKSk7XG4gICAgaWYoJCh0aGlzKS5hdHRyKCdkYXRhLXZhY2FuSUQnKT09XCJpbnRlcm5zXCIpe1xuICAgICAgICB3aW5kb3cubG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb24uaHJlZi5yZXBsYWNlKCd2YWNhbmNpZXMnLCdpbnRlcm5zJyk7XG4gICAgfWVsc2V7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9IHVwZGF0ZVF1ZXJ5U3RyaW5nUGFyYW1ldGVyKHdpbmRvdy5sb2NhdGlvbi5ocmVmLnJlcGxhY2UoJ3ZhY2FuY2llcycsJ3ZhY2FuY2lvbicpLCAndmFjYW4nLCQodGhpcykuYXR0cignZGF0YS12YWNhbklEJykpO1xuICAgIH0qL1xufSk7XG5cblxuLypcbmZ1bmN0aW9uIHVwZGF0ZVF1ZXJ5U3RyaW5nUGFyYW1ldGVyKHVyaSwga2V5LCB2YWx1ZSkge1xuICAgIGNvbnN0IHJlID0gbmV3IFJlZ0V4cChcIihbPyZdKVwiICsga2V5ICsgXCI9Lio/KCZ8JClcIiwgXCJpXCIpO1xuICAgIGNvbnN0IHNlcGFyYXRvciA9IHVyaS5pbmRleE9mKCc/JykgIT09IC0xID8gXCImXCIgOiBcIj9cIjtcbiAgICBpZiAodXJpLm1hdGNoKHJlKSkge1xuICAgICAgICByZXR1cm4gdXJpLnJlcGxhY2UocmUsICckMScgKyBrZXkgKyBcIj1cIiArIHZhbHVlICsgJyQyJyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gdXJpICsgc2VwYXJhdG9yICsga2V5ICsgXCI9XCIgKyB2YWx1ZTtcbiAgICB9XG59Ki9cbiJdfQ==
